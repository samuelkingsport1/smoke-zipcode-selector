(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function i(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(r){if(r.ep)return;r.ep=!0;const c=i(r);fetch(r.href,c)}})();function oo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pw(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var i=function l(){var r=!1;try{r=this instanceof l}catch{}return r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};i.prototype=n.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var r=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(i,l,r.get?r:{enumerable:!0,get:function(){return e[l]}})}),i}var og={exports:{}},Iu={};var Ry;function mw(){if(Ry)return Iu;Ry=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(l,r,c){var f=null;if(c!==void 0&&(f=""+c),r.key!==void 0&&(f=""+r.key),"key"in r){c={};for(var p in r)p!=="key"&&(c[p]=r[p])}else c=r;return r=c.ref,{$$typeof:e,type:l,key:f,ref:r!==void 0?r:null,props:c}}return Iu.Fragment=n,Iu.jsx=i,Iu.jsxs=i,Iu}var Py;function vw(){return Py||(Py=1,og.exports=mw()),og.exports}var R=vw(),lg={exports:{}},me={};var zy;function yw(){if(zy)return me;zy=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),M=Symbol.iterator;function O(U){return U===null||typeof U!="object"?null:(U=M&&U[M]||U["@@iterator"],typeof U=="function"?U:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,st={};function rt(U,K,ct){this.props=U,this.context=K,this.refs=st,this.updater=ct||B}rt.prototype.isReactComponent={},rt.prototype.setState=function(U,K){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,K,"setState")},rt.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function j(){}j.prototype=rt.prototype;function Y(U,K,ct){this.props=U,this.context=K,this.refs=st,this.updater=ct||B}var V=Y.prototype=new j;V.constructor=Y,Q(V,rt.prototype),V.isPureReactComponent=!0;var et=Array.isArray;function tt(){}var W={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function A(U,K,ct){var gt=ct.ref;return{$$typeof:e,type:U,key:K,ref:gt!==void 0?gt:null,props:ct}}function q(U,K){return A(U.type,K,U.props)}function X(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function Z(U){var K={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ct){return K[ct]})}var nt=/\/+/g;function at(U,K){return typeof U=="object"&&U!==null&&U.key!=null?Z(""+U.key):K.toString(36)}function it(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(tt,tt):(U.status="pending",U.then(function(K){U.status==="pending"&&(U.status="fulfilled",U.value=K)},function(K){U.status==="pending"&&(U.status="rejected",U.reason=K)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function D(U,K,ct,gt,pt){var yt=typeof U;(yt==="undefined"||yt==="boolean")&&(U=null);var Tt=!1;if(U===null)Tt=!0;else switch(yt){case"bigint":case"string":case"number":Tt=!0;break;case"object":switch(U.$$typeof){case e:case n:Tt=!0;break;case E:return Tt=U._init,D(Tt(U._payload),K,ct,gt,pt)}}if(Tt)return pt=pt(U),Tt=gt===""?"."+at(U,0):gt,et(pt)?(ct="",Tt!=null&&(ct=Tt.replace(nt,"$&/")+"/"),D(pt,K,ct,"",function(It){return It})):pt!=null&&(X(pt)&&(pt=q(pt,ct+(pt.key==null||U&&U.key===pt.key?"":(""+pt.key).replace(nt,"$&/")+"/")+Tt)),K.push(pt)),1;Tt=0;var ht=gt===""?".":gt+":";if(et(U))for(var Dt=0;Dt<U.length;Dt++)gt=U[Dt],yt=ht+at(gt,Dt),Tt+=D(gt,K,ct,yt,pt);else if(Dt=O(U),typeof Dt=="function")for(U=Dt.call(U),Dt=0;!(gt=U.next()).done;)gt=gt.value,yt=ht+at(gt,Dt++),Tt+=D(gt,K,ct,yt,pt);else if(yt==="object"){if(typeof U.then=="function")return D(it(U),K,ct,gt,pt);throw K=String(U),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Tt}function z(U,K,ct){if(U==null)return U;var gt=[],pt=0;return D(U,gt,"","",function(yt){return K.call(ct,yt,pt++)}),gt}function P(U){if(U._status===-1){var K=U._result;K=K(),K.then(function(ct){(U._status===0||U._status===-1)&&(U._status=1,U._result=ct)},function(ct){(U._status===0||U._status===-1)&&(U._status=2,U._result=ct)}),U._status===-1&&(U._status=0,U._result=K)}if(U._status===1)return U._result.default;throw U._result}var $=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},J={map:z,forEach:function(U,K,ct){z(U,function(){K.apply(this,arguments)},ct)},count:function(U){var K=0;return z(U,function(){K++}),K},toArray:function(U){return z(U,function(K){return K})||[]},only:function(U){if(!X(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return me.Activity=S,me.Children=J,me.Component=rt,me.Fragment=i,me.Profiler=r,me.PureComponent=Y,me.StrictMode=l,me.Suspense=y,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,me.__COMPILER_RUNTIME={__proto__:null,c:function(U){return W.H.useMemoCache(U)}},me.cache=function(U){return function(){return U.apply(null,arguments)}},me.cacheSignal=function(){return null},me.cloneElement=function(U,K,ct){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var gt=Q({},U.props),pt=U.key;if(K!=null)for(yt in K.key!==void 0&&(pt=""+K.key),K)!k.call(K,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&K.ref===void 0||(gt[yt]=K[yt]);var yt=arguments.length-2;if(yt===1)gt.children=ct;else if(1<yt){for(var Tt=Array(yt),ht=0;ht<yt;ht++)Tt[ht]=arguments[ht+2];gt.children=Tt}return A(U.type,pt,gt)},me.createContext=function(U){return U={$$typeof:f,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:c,_context:U},U},me.createElement=function(U,K,ct){var gt,pt={},yt=null;if(K!=null)for(gt in K.key!==void 0&&(yt=""+K.key),K)k.call(K,gt)&&gt!=="key"&&gt!=="__self"&&gt!=="__source"&&(pt[gt]=K[gt]);var Tt=arguments.length-2;if(Tt===1)pt.children=ct;else if(1<Tt){for(var ht=Array(Tt),Dt=0;Dt<Tt;Dt++)ht[Dt]=arguments[Dt+2];pt.children=ht}if(U&&U.defaultProps)for(gt in Tt=U.defaultProps,Tt)pt[gt]===void 0&&(pt[gt]=Tt[gt]);return A(U,yt,pt)},me.createRef=function(){return{current:null}},me.forwardRef=function(U){return{$$typeof:p,render:U}},me.isValidElement=X,me.lazy=function(U){return{$$typeof:E,_payload:{_status:-1,_result:U},_init:P}},me.memo=function(U,K){return{$$typeof:_,type:U,compare:K===void 0?null:K}},me.startTransition=function(U){var K=W.T,ct={};W.T=ct;try{var gt=U(),pt=W.S;pt!==null&&pt(ct,gt),typeof gt=="object"&&gt!==null&&typeof gt.then=="function"&&gt.then(tt,$)}catch(yt){$(yt)}finally{K!==null&&ct.types!==null&&(K.types=ct.types),W.T=K}},me.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},me.use=function(U){return W.H.use(U)},me.useActionState=function(U,K,ct){return W.H.useActionState(U,K,ct)},me.useCallback=function(U,K){return W.H.useCallback(U,K)},me.useContext=function(U){return W.H.useContext(U)},me.useDebugValue=function(){},me.useDeferredValue=function(U,K){return W.H.useDeferredValue(U,K)},me.useEffect=function(U,K){return W.H.useEffect(U,K)},me.useEffectEvent=function(U){return W.H.useEffectEvent(U)},me.useId=function(){return W.H.useId()},me.useImperativeHandle=function(U,K,ct){return W.H.useImperativeHandle(U,K,ct)},me.useInsertionEffect=function(U,K){return W.H.useInsertionEffect(U,K)},me.useLayoutEffect=function(U,K){return W.H.useLayoutEffect(U,K)},me.useMemo=function(U,K){return W.H.useMemo(U,K)},me.useOptimistic=function(U,K){return W.H.useOptimistic(U,K)},me.useReducer=function(U,K,ct){return W.H.useReducer(U,K,ct)},me.useRef=function(U){return W.H.useRef(U)},me.useState=function(U){return W.H.useState(U)},me.useSyncExternalStore=function(U,K,ct){return W.H.useSyncExternalStore(U,K,ct)},me.useTransition=function(){return W.H.useTransition()},me.version="19.2.3",me}var By;function op(){return By||(By=1,lg.exports=yw()),lg.exports}var Gt=op();const ya=oo(Gt);var ug={exports:{}},Ru={},cg={exports:{}},hg={};var jy;function _w(){return jy||(jy=1,(function(e){function n(D,z){var P=D.length;D.push(z);t:for(;0<P;){var $=P-1>>>1,J=D[$];if(0<r(J,z))D[$]=z,D[P]=J,P=$;else break t}}function i(D){return D.length===0?null:D[0]}function l(D){if(D.length===0)return null;var z=D[0],P=D.pop();if(P!==z){D[0]=P;t:for(var $=0,J=D.length,U=J>>>1;$<U;){var K=2*($+1)-1,ct=D[K],gt=K+1,pt=D[gt];if(0>r(ct,P))gt<J&&0>r(pt,ct)?(D[$]=pt,D[gt]=P,$=gt):(D[$]=ct,D[K]=P,$=K);else if(gt<J&&0>r(pt,P))D[$]=pt,D[gt]=P,$=gt;else break t}}return z}function r(D,z){var P=D.sortIndex-z.sortIndex;return P!==0?P:D.id-z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();e.unstable_now=function(){return f.now()-p}}var y=[],_=[],E=1,S=null,M=3,O=!1,B=!1,Q=!1,st=!1,rt=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function V(D){for(var z=i(_);z!==null;){if(z.callback===null)l(_);else if(z.startTime<=D)l(_),z.sortIndex=z.expirationTime,n(y,z);else break;z=i(_)}}function et(D){if(Q=!1,V(D),!B)if(i(y)!==null)B=!0,tt||(tt=!0,Z());else{var z=i(_);z!==null&&it(et,z.startTime-D)}}var tt=!1,W=-1,k=5,A=-1;function q(){return st?!0:!(e.unstable_now()-A<k)}function X(){if(st=!1,tt){var D=e.unstable_now();A=D;var z=!0;try{t:{B=!1,Q&&(Q=!1,j(W),W=-1),O=!0;var P=M;try{e:{for(V(D),S=i(y);S!==null&&!(S.expirationTime>D&&q());){var $=S.callback;if(typeof $=="function"){S.callback=null,M=S.priorityLevel;var J=$(S.expirationTime<=D);if(D=e.unstable_now(),typeof J=="function"){S.callback=J,V(D),z=!0;break e}S===i(y)&&l(y),V(D)}else l(y);S=i(y)}if(S!==null)z=!0;else{var U=i(_);U!==null&&it(et,U.startTime-D),z=!1}}break t}finally{S=null,M=P,O=!1}z=void 0}}finally{z?Z():tt=!1}}}var Z;if(typeof Y=="function")Z=function(){Y(X)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,at=nt.port2;nt.port1.onmessage=X,Z=function(){at.postMessage(null)}}else Z=function(){rt(X,0)};function it(D,z){W=rt(function(){D(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_next=function(D){switch(M){case 1:case 2:case 3:var z=3;break;default:z=M}var P=M;M=z;try{return D()}finally{M=P}},e.unstable_requestPaint=function(){st=!0},e.unstable_runWithPriority=function(D,z){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var P=M;M=D;try{return z()}finally{M=P}},e.unstable_scheduleCallback=function(D,z,P){var $=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?$+P:$):P=$,D){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=P+J,D={id:E++,callback:z,priorityLevel:D,startTime:P,expirationTime:J,sortIndex:-1},P>$?(D.sortIndex=P,n(_,D),i(y)===null&&D===i(_)&&(Q?(j(W),W=-1):Q=!0,it(et,P-$))):(D.sortIndex=J,n(y,D),B||O||(B=!0,tt||(tt=!0,Z()))),D},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(D){var z=M;return function(){var P=M;M=z;try{return D.apply(this,arguments)}finally{M=P}}}})(hg)),hg}var Uy;function xw(){return Uy||(Uy=1,cg.exports=_w()),cg.exports}var fg={exports:{}},Mi={};var Fy;function Ew(){if(Fy)return Mi;Fy=1;var e=op();function n(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var l={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function c(y,_,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:S==null?null:""+S,children:y,containerInfo:_,implementation:E}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Mi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Mi.createPortal=function(y,_){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(n(299));return c(y,_,null,E)},Mi.flushSync=function(y){var _=f.T,E=l.p;try{if(f.T=null,l.p=2,y)return y()}finally{f.T=_,l.p=E,l.d.f()}},Mi.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,l.d.C(y,_))},Mi.prefetchDNS=function(y){typeof y=="string"&&l.d.D(y)},Mi.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var E=_.as,S=p(E,_.crossOrigin),M=typeof _.integrity=="string"?_.integrity:void 0,O=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;E==="style"?l.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:S,integrity:M,fetchPriority:O}):E==="script"&&l.d.X(y,{crossOrigin:S,integrity:M,fetchPriority:O,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Mi.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var E=p(_.as,_.crossOrigin);l.d.M(y,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&l.d.M(y)},Mi.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var E=_.as,S=p(E,_.crossOrigin);l.d.L(y,E,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Mi.preloadModule=function(y,_){if(typeof y=="string")if(_){var E=p(_.as,_.crossOrigin);l.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else l.d.m(y)},Mi.requestFormReset=function(y){l.d.r(y)},Mi.unstable_batchedUpdates=function(y,_){return y(_)},Mi.useFormState=function(y,_,E){return f.H.useFormState(y,_,E)},Mi.useFormStatus=function(){return f.H.useHostTransitionStatus()},Mi.version="19.2.3",Mi}var qy;function ix(){if(qy)return fg.exports;qy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),fg.exports=Ew(),fg.exports}var Gy;function ww(){if(Gy)return Ru;Gy=1;var e=xw(),n=op(),i=ix();function l(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)s+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,h=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(h=s.return),t=s.return;while(t)}return s.tag===3?h:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function y(t){if(c(t)!==t)throw Error(l(188))}function _(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(l(188));return s!==t?null:t}for(var h=t,v=s;;){var b=h.return;if(b===null)break;var T=b.alternate;if(T===null){if(v=b.return,v!==null){h=v;continue}break}if(b.child===T.child){for(T=b.child;T;){if(T===h)return y(b),t;if(T===v)return y(b),s;T=T.sibling}throw Error(l(188))}if(h.return!==v.return)h=b,v=T;else{for(var G=!1,ut=b.child;ut;){if(ut===h){G=!0,h=b,v=T;break}if(ut===v){G=!0,v=b,h=T;break}ut=ut.sibling}if(!G){for(ut=T.child;ut;){if(ut===h){G=!0,h=T,v=b;break}if(ut===v){G=!0,v=T,h=b;break}ut=ut.sibling}if(!G)throw Error(l(189))}}if(h.alternate!==v)throw Error(l(190))}if(h.tag!==3)throw Error(l(188));return h.stateNode.current===h?t:s}function E(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=E(t),s!==null)return s;t=t.sibling}return null}var S=Object.assign,M=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),st=Symbol.for("react.strict_mode"),rt=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),et=Symbol.for("react.suspense"),tt=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function Z(t){return t===null||typeof t!="object"?null:(t=X&&t[X]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Symbol.for("react.client.reference");function at(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===nt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Q:return"Fragment";case rt:return"Profiler";case st:return"StrictMode";case et:return"Suspense";case tt:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case B:return"Portal";case Y:return t.displayName||"Context";case j:return(t._context.displayName||"Context")+".Consumer";case V:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case W:return s=t.displayName||null,s!==null?s:at(t.type)||"Memo";case k:s=t._payload,t=t._init;try{return at(t(s))}catch{}}return null}var it=Array.isArray,D=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P={pending:!1,data:null,method:null,action:null},$=[],J=-1;function U(t){return{current:t}}function K(t){0>J||(t.current=$[J],$[J]=null,J--)}function ct(t,s){J++,$[J]=t.current,t.current=s}var gt=U(null),pt=U(null),yt=U(null),Tt=U(null);function ht(t,s){switch(ct(yt,s),ct(pt,t),ct(gt,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?ry(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=ry(s),t=sy(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}K(gt),ct(gt,t)}function Dt(){K(gt),K(pt),K(yt)}function It(t){t.memoizedState!==null&&ct(Tt,t);var s=gt.current,h=sy(s,t.type);s!==h&&(ct(pt,t),ct(gt,h))}function Mt(t){pt.current===t&&(K(gt),K(pt)),Tt.current===t&&(K(Tt),Nu._currentValue=P)}var ft,Xt;function Zt(t){if(ft===void 0)try{throw Error()}catch(h){var s=h.stack.trim().match(/\n( *(at )?)/);ft=s&&s[1]||"",Xt=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ft+t+Xt}var Bt=!1;function Ut(t,s){if(!t||Bt)return"";Bt=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(s){var zt=function(){throw Error()};if(Object.defineProperty(zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(zt,[])}catch(Nt){var kt=Nt}Reflect.construct(t,[],zt)}else{try{zt.call()}catch(Nt){kt=Nt}t.call(zt.prototype)}}else{try{throw Error()}catch(Nt){kt=Nt}(zt=t())&&typeof zt.catch=="function"&&zt.catch(function(){})}}catch(Nt){if(Nt&&kt&&typeof Nt.stack=="string")return[Nt.stack,kt.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=v.DetermineComponentFrameRoot(),G=T[0],ut=T[1];if(G&&ut){var vt=G.split(`
`),Lt=ut.split(`
`);for(b=v=0;v<vt.length&&!vt[v].includes("DetermineComponentFrameRoot");)v++;for(;b<Lt.length&&!Lt[b].includes("DetermineComponentFrameRoot");)b++;if(v===vt.length||b===Lt.length)for(v=vt.length-1,b=Lt.length-1;1<=v&&0<=b&&vt[v]!==Lt[b];)b--;for(;1<=v&&0<=b;v--,b--)if(vt[v]!==Lt[b]){if(v!==1||b!==1)do if(v--,b--,0>b||vt[v]!==Lt[b]){var Ot=`
`+vt[v].replace(" at new "," at ");return t.displayName&&Ot.includes("<anonymous>")&&(Ot=Ot.replace("<anonymous>",t.displayName)),Ot}while(1<=v&&0<=b);break}}}finally{Bt=!1,Error.prepareStackTrace=h}return(h=t?t.displayName||t.name:"")?Zt(h):""}function Le(t,s){switch(t.tag){case 26:case 27:case 5:return Zt(t.type);case 16:return Zt("Lazy");case 13:return t.child!==s&&s!==null?Zt("Suspense Fallback"):Zt("Suspense");case 19:return Zt("SuspenseList");case 0:case 15:return Ut(t.type,!1);case 11:return Ut(t.type.render,!1);case 1:return Ut(t.type,!0);case 31:return Zt("Activity");default:return""}}function he(t){try{var s="",h=null;do s+=Le(t,h),h=t,t=t.return;while(t);return s}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var At=Object.prototype.hasOwnProperty,Ve=e.unstable_scheduleCallback,ti=e.unstable_cancelCallback,pn=e.unstable_shouldYield,Fi=e.unstable_requestPaint,Yt=e.unstable_now,bn=e.unstable_getCurrentPriorityLevel,Re=e.unstable_ImmediatePriority,yn=e.unstable_UserBlockingPriority,Vt=e.unstable_NormalPriority,Xr=e.unstable_LowPriority,ve=e.unstable_IdlePriority,ie=e.log,Ei=e.unstable_setDisableYieldValue,_n=null,On=null;function $t(t){if(typeof ie=="function"&&Ei(t),On&&typeof On.setStrictMode=="function")try{On.setStrictMode(_n,t)}catch{}}var di=Math.clz32?Math.clz32:wi,Ps=Math.log,ho=Math.LN2;function wi(t){return t>>>=0,t===0?32:31-(Ps(t)/ho|0)|0}var hr=256,li=262144,cs=4194304;function qi(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function wa(t,s,h){var v=t.pendingLanes;if(v===0)return 0;var b=0,T=t.suspendedLanes,G=t.pingedLanes;t=t.warmLanes;var ut=v&134217727;return ut!==0?(v=ut&~T,v!==0?b=qi(v):(G&=ut,G!==0?b=qi(G):h||(h=ut&~t,h!==0&&(b=qi(h))))):(ut=v&~T,ut!==0?b=qi(ut):G!==0?b=qi(G):h||(h=v&~t,h!==0&&(b=qi(h)))),b===0?0:s!==0&&s!==b&&(s&T)===0&&(T=b&-b,h=s&-s,T>=h||T===32&&(h&4194048)!==0)?s:b}function hs(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Vr(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ft(){var t=cs;return cs<<=1,(cs&62914560)===0&&(cs=4194304),t}function fs(t){for(var s=[],h=0;31>h;h++)s.push(t);return s}function Gi(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function zs(t,s,h,v,b,T){var G=t.pendingLanes;t.pendingLanes=h,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=h,t.entangledLanes&=h,t.errorRecoveryDisabledLanes&=h,t.shellSuspendCounter=0;var ut=t.entanglements,vt=t.expirationTimes,Lt=t.hiddenUpdates;for(h=G&~h;0<h;){var Ot=31-di(h),zt=1<<Ot;ut[Ot]=0,vt[Ot]=-1;var kt=Lt[Ot];if(kt!==null)for(Lt[Ot]=null,Ot=0;Ot<kt.length;Ot++){var Nt=kt[Ot];Nt!==null&&(Nt.lane&=-536870913)}h&=~zt}v!==0&&fo(t,v,0),T!==0&&b===0&&t.tag!==0&&(t.suspendedLanes|=T&~(G&~s))}function fo(t,s,h){t.pendingLanes|=s,t.suspendedLanes&=~s;var v=31-di(s);t.entangledLanes|=s,t.entanglements[v]=t.entanglements[v]|1073741824|h&261930}function Sa(t,s){var h=t.entangledLanes|=s;for(t=t.entanglements;h;){var v=31-di(h),b=1<<v;b&s|t[v]&s&&(t[v]|=s),h&=~b}}function go(t,s){var h=s&-s;return h=(h&42)!==0?1:An(h),(h&(t.suspendedLanes|s))!==0?0:h}function An(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Kt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ds(){var t=z.p;return t!==0?t:(t=window.event,t===void 0?32:ky(t.type))}function po(t,s){var h=z.p;try{return z.p=t,s()}finally{z.p=h}}var Hi=Math.random().toString(36).slice(2),Dn="__reactFiber$"+Hi,Ue="__reactProps$"+Hi,fr="__reactContainer$"+Hi,Si="__reactEvents$"+Hi,kr="__reactListeners$"+Hi,Qr="__reactHandles$"+Hi,ba="__reactResources$"+Hi,Mr="__reactMarker$"+Hi;function Wr(t){delete t[Dn],delete t[Ue],delete t[Si],delete t[kr],delete t[Qr]}function $e(t){var s=t[Dn];if(s)return s;for(var h=t.parentNode;h;){if(s=h[fr]||h[Dn]){if(h=s.alternate,s.child!==null||h!==null&&h.child!==null)for(t=fy(t);t!==null;){if(h=t[Dn])return h;t=fy(t)}return s}t=h,h=t.parentNode}return null}function gs(t){if(t=t[Dn]||t[fr]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Nr(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(l(33))}function dr(t){var s=t[ba];return s||(s=t[ba]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function dn(t){t[Mr]=!0}var La=new Set,Ta={};function Or(t,s){Ar(t,s),Ar(t+"Capture",s)}function Ar(t,s){for(Ta[t]=s,t=0;t<s.length;t++)La.add(s[t])}var ei=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dr={},Bs={};function Yi(t){return At.call(Bs,t)?!0:At.call(Dr,t)?!1:ei.test(t)?Bs[t]=!0:(Dr[t]=!0,!1)}function xe(t,s,h){if(Yi(s))if(h===null)t.removeAttribute(s);else{switch(typeof h){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var v=s.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+h)}}function Ke(t,s,h){if(h===null)t.removeAttribute(s);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+h)}}function bi(t,s,h,v){if(v===null)t.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(h);return}t.setAttributeNS(s,h,""+v)}}function zn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ir(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ca(t,s,h){var v=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var b=v.get,T=v.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return b.call(this)},set:function(G){h=""+G,T.call(this,G)}}),Object.defineProperty(t,s,{enumerable:v.enumerable}),{getValue:function(){return h},setValue:function(G){h=""+G},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function fe(t){if(!t._valueTracker){var s=Ir(t)?"checked":"value";t._valueTracker=Ca(t,s,""+t[s])}}function Pe(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var h=s.getValue(),v="";return t&&(v=Ir(t)?t.checked?"true":"false":t.value),t=v,t!==h?(s.setValue(t),!0):!1}function gi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var js=/[\n"\\]/g;function Fe(t){return t.replace(js,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function mo(t,s,h,v,b,T,G,ut){t.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?t.type=G:t.removeAttribute("type"),s!=null?G==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+zn(s)):t.value!==""+zn(s)&&(t.value=""+zn(s)):G!=="submit"&&G!=="reset"||t.removeAttribute("value"),s!=null?gr(t,G,zn(s)):h!=null?gr(t,G,zn(h)):v!=null&&t.removeAttribute("value"),b==null&&T!=null&&(t.defaultChecked=!!T),b!=null&&(t.checked=b&&typeof b!="function"&&typeof b!="symbol"),ut!=null&&typeof ut!="function"&&typeof ut!="symbol"&&typeof ut!="boolean"?t.name=""+zn(ut):t.removeAttribute("name")}function Us(t,s,h,v,b,T,G,ut){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.type=T),s!=null||h!=null){if(!(T!=="submit"&&T!=="reset"||s!=null)){fe(t);return}h=h!=null?""+zn(h):"",s=s!=null?""+zn(s):h,ut||s===t.value||(t.value=s),t.defaultValue=s}v=v??b,v=typeof v!="function"&&typeof v!="symbol"&&!!v,t.checked=ut?t.checked:!!v,t.defaultChecked=!!v,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(t.name=G),fe(t)}function gr(t,s,h){s==="number"&&gi(t.ownerDocument)===t||t.defaultValue===""+h||(t.defaultValue=""+h)}function tn(t,s,h,v){if(t=t.options,s){s={};for(var b=0;b<h.length;b++)s["$"+h[b]]=!0;for(h=0;h<t.length;h++)b=s.hasOwnProperty("$"+t[h].value),t[h].selected!==b&&(t[h].selected=b),b&&v&&(t[h].defaultSelected=!0)}else{for(h=""+zn(h),s=null,b=0;b<t.length;b++){if(t[b].value===h){t[b].selected=!0,v&&(t[b].defaultSelected=!0);return}s!==null||t[b].disabled||(s=t[b])}s!==null&&(s.selected=!0)}}function pr(t,s,h){if(s!=null&&(s=""+zn(s),s!==t.value&&(t.value=s),h==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=h!=null?""+zn(h):""}function Zi(t,s,h,v){if(s==null){if(v!=null){if(h!=null)throw Error(l(92));if(it(v)){if(1<v.length)throw Error(l(93));v=v[0]}h=v}h==null&&(h=""),s=h}h=zn(s),t.defaultValue=h,v=t.textContent,v===h&&v!==""&&v!==null&&(t.value=v),fe(t)}function Di(t,s){if(s){var h=t.firstChild;if(h&&h===t.lastChild&&h.nodeType===3){h.nodeValue=s;return}}t.textContent=s}var vo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jr(t,s,h){var v=s.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?v?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":v?t.setProperty(s,h):typeof h!="number"||h===0||vo.has(s)?s==="float"?t.cssFloat=h:t[s]=(""+h).trim():t[s]=h+"px"}function ka(t,s,h){if(s!=null&&typeof s!="object")throw Error(l(62));if(t=t.style,h!=null){for(var v in h)!h.hasOwnProperty(v)||s!=null&&s.hasOwnProperty(v)||(v.indexOf("--")===0?t.setProperty(v,""):v==="float"?t.cssFloat="":t[v]="");for(var b in s)v=s[b],s.hasOwnProperty(b)&&h[b]!==v&&Jr(t,b,v)}else for(var T in s)s.hasOwnProperty(T)&&Jr(t,T,s[T])}function Kr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qe=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ps(t){return mr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ui(){}var ni=null;function Fn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vr=null,ae=null;function Ii(t){var s=gs(t);if(s&&(t=s.stateNode)){var h=t[Ue]||null;t:switch(t=s.stateNode,s.type){case"input":if(mo(t,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),s=h.name,h.type==="radio"&&s!=null){for(h=t;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Fe(""+s)+'"][type="radio"]'),s=0;s<h.length;s++){var v=h[s];if(v!==t&&v.form===t.form){var b=v[Ue]||null;if(!b)throw Error(l(90));mo(v,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(s=0;s<h.length;s++)v=h[s],v.form===t.form&&Pe(v)}break t;case"textarea":pr(t,h.value,h.defaultValue);break t;case"select":s=h.value,s!=null&&tn(t,!!h.multiple,s,!1)}}}var je=!1;function ms(t,s,h){if(je)return t(s,h);je=!0;try{var v=t(s);return v}finally{if(je=!1,(vr!==null||ae!==null)&&(Qc(),vr&&(s=vr,t=ae,ae=vr=null,Ii(s),t)))for(s=0;s<t.length;s++)Ii(t[s])}}function $r(t,s){var h=t.stateNode;if(h===null)return null;var v=h[Ue]||null;if(v===null)return null;h=v[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(t=t.type,v=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!v;break t;default:t=!1}if(t)return null;if(h&&typeof h!="function")throw Error(l(231,s,typeof h));return h}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),be=!1;if(Li)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){be=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{be=!1}var Ti=null,Rr=null,rn=null;function yr(){if(rn)return rn;var t,s=Rr,h=s.length,v,b="value"in Ti?Ti.value:Ti.textContent,T=b.length;for(t=0;t<h&&s[t]===b[t];t++);var G=h-t;for(v=1;v<=G&&s[h-v]===b[T-v];v++);return rn=b.slice(t,1<v?1-v:void 0)}function Ln(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function vs(){return!0}function Ma(){return!1}function qn(t){function s(h,v,b,T,G){this._reactName=h,this._targetInst=b,this.type=v,this.nativeEvent=T,this.target=G,this.currentTarget=null;for(var ut in t)t.hasOwnProperty(ut)&&(h=t[ut],this[ut]=h?h(T):T[ut]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?vs:Ma,this.isPropagationStopped=Ma,this}return S(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=vs)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=vs)},persist:function(){},isPersistent:vs}),s}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Na=qn(Xi),ts=S({},Xi,{view:0,detail:0}),de=qn(ts),ys,pi,En,Vi=S({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ii,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==En&&(En&&t.type==="mousemove"?(ys=t.screenX-En.screenX,pi=t.screenY-En.screenY):pi=ys=0,En=t),ys)},movementY:function(t){return"movementY"in t?t.movementY:pi}}),Wo=qn(Vi),Pr=S({},Vi,{dataTransfer:0}),Jo=qn(Pr),es=S({},ts,{relatedTarget:0}),yo=qn(es),Qi=S({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),Oa=qn(Qi),Wl=S({},Xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wi=qn(Wl),Jl=S({},Xi,{data:0}),_o=qn(Jl),zr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ko={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _r(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=$o[t])?!!s[t]:!1}function ii(){return _r}var tl=S({},ts,{key:function(t){if(t.key){var s=zr[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ln(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ko[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ii,charCode:function(t){return t.type==="keypress"?Ln(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ln(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xo=qn(tl),Kl=S({},Vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Aa=qn(Kl),Da=S({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ii}),Eo=qn(Da),wo=S({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ci=qn(wo),Fs=S({},Vi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=qn(Fs),qs=S({},Xi,{newState:0,oldState:0}),Gs=qn(qs),mi=[9,13,27,32],Hs=Li&&"CompositionEvent"in window,ns=null;Li&&"documentMode"in document&&(ns=document.documentMode);var So=Li&&"TextEvent"in window&&!ns,Ia=Li&&(!Hs||ns&&8<ns&&11>=ns),Ra=" ",el=!1;function nl(t,s){switch(t){case"keyup":return mi.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _s=!1;function Ri(t,s){switch(t){case"compositionend":return bo(s);case"keypress":return s.which!==32?null:(el=!0,Ra);case"textInput":return t=s.data,t===Ra&&el?null:t;default:return null}}function xs(t,s){if(_s)return t==="compositionend"||!Hs&&nl(t,s)?(t=yr(),rn=Rr=Ti=null,_s=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ia&&s.locale!=="ko"?null:s.data;default:return null}}var il={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ji(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!il[t.type]:s==="textarea"}function Lo(t,s,h,v){vr?ae?ae.push(v):ae=[v]:vr=v,s=nh(s,"onChange"),0<s.length&&(h=new Na("onChange","change",null,h,v),t.push({event:h,listeners:s}))}var Ki=null,Ys=null;function Zs(t){Kv(t,0)}function Xs(t){var s=Nr(t);if(Pe(s))return t}function Vs(t,s){if(t==="change")return s}var rl=!1;if(Li){var $i;if(Li){var is="oninput"in document;if(!is){var To=document.createElement("div");To.setAttribute("oninput","return;"),is=typeof To.oninput=="function"}$i=is}else $i=!1;rl=$i&&(!document.documentMode||9<document.documentMode)}function Qs(){Ki&&(Ki.detachEvent("onpropertychange",sl),Ys=Ki=null)}function sl(t){if(t.propertyName==="value"&&Xs(Ys)){var s=[];Lo(s,Ys,t,Fn(t)),ms(Zs,s)}}function tr(t,s,h){t==="focusin"?(Qs(),Ki=s,Ys=h,Ki.attachEvent("onpropertychange",sl)):t==="focusout"&&Qs()}function Co(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xs(Ys)}function Es(t,s){if(t==="click")return Xs(s)}function al(t,s){if(t==="input"||t==="change")return Xs(s)}function er(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Gn=typeof Object.is=="function"?Object.is:er;function ws(t,s){if(Gn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var h=Object.keys(t),v=Object.keys(s);if(h.length!==v.length)return!1;for(v=0;v<h.length;v++){var b=h[v];if(!At.call(s,b)||!Gn(t[b],s[b]))return!1}return!0}function xr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ws(t,s){var h=xr(t);t=0;for(var v;h;){if(h.nodeType===3){if(v=t+h.textContent.length,t<=s&&v>=s)return{node:h,offset:s-t};t=v}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=xr(h)}}function Js(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Js(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Hn(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=gi(t.document);s instanceof t.HTMLIFrameElement;){try{var h=typeof s.contentWindow.location.href=="string"}catch{h=!1}if(h)t=s.contentWindow;else break;s=gi(t.document)}return s}function Bn(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var g=Li&&"documentMode"in document&&11>=document.documentMode,a=null,o=null,d=null,x=!1;function C(t,s,h){var v=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;x||a==null||a!==gi(v)||(v=a,"selectionStart"in v&&Bn(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),d&&ws(d,v)||(d=v,v=nh(o,"onSelect"),0<v.length&&(s=new Na("onSelect","select",null,s,h),t.push({event:s,listeners:v}),s.target=a)))}function I(t,s){var h={};return h[t.toLowerCase()]=s.toLowerCase(),h["Webkit"+t]="webkit"+s,h["Moz"+t]="moz"+s,h}var H={animationend:I("Animation","AnimationEnd"),animationiteration:I("Animation","AnimationIteration"),animationstart:I("Animation","AnimationStart"),transitionrun:I("Transition","TransitionRun"),transitionstart:I("Transition","TransitionStart"),transitioncancel:I("Transition","TransitionCancel"),transitionend:I("Transition","TransitionEnd")},lt={},dt={};Li&&(dt=document.createElement("div").style,"AnimationEvent"in window||(delete H.animationend.animation,delete H.animationiteration.animation,delete H.animationstart.animation),"TransitionEvent"in window||delete H.transitionend.transition);function _t(t){if(lt[t])return lt[t];if(!H[t])return t;var s=H[t],h;for(h in s)if(s.hasOwnProperty(h)&&h in dt)return lt[t]=s[h];return t}var St=_t("animationend"),jt=_t("animationiteration"),qt=_t("animationstart"),Qt=_t("transitionrun"),ee=_t("transitionstart"),Te=_t("transitioncancel"),pe=_t("transitionend"),qe=new Map,sn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sn.push("scrollEnd");function We(t,s){qe.set(t,s),Or(s,[t])}var Pi=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Yn=[],ri=0,Ks=0;function Ss(){for(var t=ri,s=Ks=ri=0;s<t;){var h=Yn[s];Yn[s++]=null;var v=Yn[s];Yn[s++]=null;var b=Yn[s];Yn[s++]=null;var T=Yn[s];if(Yn[s++]=null,v!==null&&b!==null){var G=v.pending;G===null?b.next=b:(b.next=G.next,G.next=b),v.pending=b}T!==0&&Br(h,b,T)}}function Er(t,s,h,v){Yn[ri++]=t,Yn[ri++]=s,Yn[ri++]=h,Yn[ri++]=v,Ks|=v,t.lanes|=v,t=t.alternate,t!==null&&(t.lanes|=v)}function Pa(t,s,h,v){return Er(t,s,h,v),rs(t)}function zi(t,s){return Er(t,null,null,s),rs(t)}function Br(t,s,h){t.lanes|=h;var v=t.alternate;v!==null&&(v.lanes|=h);for(var b=!1,T=t.return;T!==null;)T.childLanes|=h,v=T.alternate,v!==null&&(v.childLanes|=h),T.tag===22&&(t=T.stateNode,t===null||t._visibility&1||(b=!0)),t=T,T=T.return;return t.tag===3?(T=t.stateNode,b&&s!==null&&(b=31-di(h),t=T.hiddenUpdates,v=t[b],v===null?t[b]=[s]:v.push(s),s.lane=h|536870912),T):null}function rs(t){if(50<Su)throw Su=0,Od=null,Error(l(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var $s={};function Nf(t,s,h,v){this.tag=t,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ki(t,s,h,v){return new Nf(t,s,h,v)}function ol(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jr(t,s){var h=t.alternate;return h===null?(h=ki(t.tag,s,t.key,t.mode),h.elementType=t.elementType,h.type=t.type,h.stateNode=t.stateNode,h.alternate=t,t.alternate=h):(h.pendingProps=s,h.type=t.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=t.flags&65011712,h.childLanes=t.childLanes,h.lanes=t.lanes,h.child=t.child,h.memoizedProps=t.memoizedProps,h.memoizedState=t.memoizedState,h.updateQueue=t.updateQueue,s=t.dependencies,h.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},h.sibling=t.sibling,h.index=t.index,h.ref=t.ref,h.refCleanup=t.refCleanup,h}function $l(t,s){t.flags&=65011714;var h=t.alternate;return h===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=h.childLanes,t.lanes=h.lanes,t.child=h.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=h.memoizedProps,t.memoizedState=h.memoizedState,t.updateQueue=h.updateQueue,t.type=h.type,s=h.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function ko(t,s,h,v,b,T){var G=0;if(v=t,typeof t=="function")ol(t)&&(G=1);else if(typeof t=="string")G=iw(t,h,gt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case A:return t=ki(31,h,s,b),t.elementType=A,t.lanes=T,t;case Q:return ta(h.children,b,T,s);case st:G=8,b|=24;break;case rt:return t=ki(12,h,s,b|2),t.elementType=rt,t.lanes=T,t;case et:return t=ki(13,h,s,b),t.elementType=et,t.lanes=T,t;case tt:return t=ki(19,h,s,b),t.elementType=tt,t.lanes=T,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:G=10;break t;case j:G=9;break t;case V:G=11;break t;case W:G=14;break t;case k:G=16,v=null;break t}G=29,h=Error(l(130,t===null?"null":typeof t,"")),v=null}return s=ki(G,h,s,b),s.elementType=t,s.type=v,s.lanes=T,s}function ta(t,s,h,v){return t=ki(7,t,v,s),t.lanes=h,t}function ll(t,s,h){return t=ki(6,t,null,s),t.lanes=h,t}function tu(t){var s=ki(18,null,null,0);return s.stateNode=t,s}function eu(t,s,h){return s=ki(4,t.children!==null?t.children:[],t.key,s),s.lanes=h,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var u=new WeakMap;function m(t,s){if(typeof t=="object"&&t!==null){var h=u.get(t);return h!==void 0?h:(s={value:t,source:s,stack:he(s)},u.set(t,s),s)}return{value:t,source:s,stack:he(s)}}var w=[],N=0,F=null,ot=0,mt=[],wt=0,Ct=null,Pt=1,Ht="";function ne(t,s){w[N++]=ot,w[N++]=F,F=t,ot=s}function Ee(t,s,h){mt[wt++]=Pt,mt[wt++]=Ht,mt[wt++]=Ct,Ct=t;var v=Pt;t=Ht;var b=32-di(v)-1;v&=~(1<<b),h+=1;var T=32-di(s)+b;if(30<T){var G=b-b%5;T=(v&(1<<G)-1).toString(32),v>>=G,b-=G,Pt=1<<32-di(s)+b|h<<b|v,Ht=T+t}else Pt=1<<T|h<<b|v,Ht=t}function si(t){t.return!==null&&(ne(t,1),Ee(t,1,0))}function In(t){for(;t===F;)F=w[--N],w[N]=null,ot=w[--N],w[N]=null;for(;t===Ct;)Ct=mt[--wt],mt[wt]=null,Ht=mt[--wt],mt[wt]=null,Pt=mt[--wt],mt[wt]=null}function Bi(t,s){mt[wt++]=Pt,mt[wt++]=Ht,mt[wt++]=Ct,Pt=s.id,Ht=s.overflow,Ct=t}var Ge=null,He=null,Ce=!1,bs=null,nr=!1,ul=Error(l(519));function Ls(t){var s=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mo(m(s,t)),ul}function nu(t){var s=t.stateNode,h=t.type,v=t.memoizedProps;switch(s[Dn]=t,s[Ue]=v,h){case"dialog":Me("cancel",s),Me("close",s);break;case"iframe":case"object":case"embed":Me("load",s);break;case"video":case"audio":for(h=0;h<Lu.length;h++)Me(Lu[h],s);break;case"source":Me("error",s);break;case"img":case"image":case"link":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"input":Me("invalid",s),Us(s,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":Me("invalid",s);break;case"textarea":Me("invalid",s),Zi(s,v.value,v.defaultValue,v.children)}h=v.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||s.textContent===""+h||v.suppressHydrationWarning===!0||ny(s.textContent,h)?(v.popover!=null&&(Me("beforetoggle",s),Me("toggle",s)),v.onScroll!=null&&Me("scroll",s),v.onScrollEnd!=null&&Me("scrollend",s),v.onClick!=null&&(s.onclick=ui),s=!0):s=!1,s||Ls(t,!0)}function Cn(t){for(Ge=t.return;Ge;)switch(Ge.tag){case 5:case 31:case 13:nr=!1;return;case 27:case 3:nr=!0;return;default:Ge=Ge.return}}function ss(t){if(t!==Ge)return!1;if(!Ce)return Cn(t),Ce=!0,!1;var s=t.tag,h;if((h=s!==3&&s!==27)&&((h=s===5)&&(h=t.type,h=!(h!=="form"&&h!=="button")||Zd(t.type,t.memoizedProps)),h=!h),h&&He&&Ls(t),Cn(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));He=hy(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));He=hy(t)}else s===27?(s=He,Wa(t.type)?(t=Jd,Jd=null,He=t):He=s):He=Ge?Fr(t.stateNode.nextSibling):null;return!0}function ea(){He=Ge=null,Ce=!1}function iu(){var t=bs;return t!==null&&(ar===null?ar=t:ar.push.apply(ar,t),bs=null),t}function Mo(t){bs===null?bs=[t]:bs.push(t)}var No=U(null),Ts=null,as=null;function za(t,s,h){ct(No,s._currentValue),s._currentValue=h}function na(t){t._currentValue=No.current,K(No)}function Of(t,s,h){for(;t!==null;){var v=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,v!==null&&(v.childLanes|=s)):v!==null&&(v.childLanes&s)!==s&&(v.childLanes|=s),t===h)break;t=t.return}}function Af(t,s,h,v){var b=t.child;for(b!==null&&(b.return=t);b!==null;){var T=b.dependencies;if(T!==null){var G=b.child;T=T.firstContext;t:for(;T!==null;){var ut=T;T=b;for(var vt=0;vt<s.length;vt++)if(ut.context===s[vt]){T.lanes|=h,ut=T.alternate,ut!==null&&(ut.lanes|=h),Of(T.return,h,t),v||(G=null);break t}T=ut.next}}else if(b.tag===18){if(G=b.return,G===null)throw Error(l(341));G.lanes|=h,T=G.alternate,T!==null&&(T.lanes|=h),Of(G,h,t),G=null}else G=b.child;if(G!==null)G.return=b;else for(G=b;G!==null;){if(G===t){G=null;break}if(b=G.sibling,b!==null){b.return=G.return,G=b;break}G=G.return}b=G}}function cl(t,s,h,v){t=null;for(var b=s,T=!1;b!==null;){if(!T){if((b.flags&524288)!==0)T=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var G=b.alternate;if(G===null)throw Error(l(387));if(G=G.memoizedProps,G!==null){var ut=b.type;Gn(b.pendingProps.value,G.value)||(t!==null?t.push(ut):t=[ut])}}else if(b===Tt.current){if(G=b.alternate,G===null)throw Error(l(387));G.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(t!==null?t.push(Nu):t=[Nu])}b=b.return}t!==null&&Af(s,t,h,v),s.flags|=262144}function Ec(t){for(t=t.firstContext;t!==null;){if(!Gn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Oo(t){Ts=t,as=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vi(t){return Fp(Ts,t)}function wc(t,s){return Ts===null&&Oo(t),Fp(t,s)}function Fp(t,s){var h=s._currentValue;if(s={context:s,memoizedValue:h,next:null},as===null){if(t===null)throw Error(l(308));as=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else as=as.next=s;return h}var $1=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(h,v){t.push(v)}};this.abort=function(){s.aborted=!0,t.forEach(function(h){return h()})}},tE=e.unstable_scheduleCallback,eE=e.unstable_NormalPriority,Zn={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Df(){return{controller:new $1,data:new Map,refCount:0}}function ru(t){t.refCount--,t.refCount===0&&tE(eE,function(){t.controller.abort()})}var su=null,If=0,hl=0,fl=null;function nE(t,s){if(su===null){var h=su=[];If=0,hl=zd(),fl={status:"pending",value:void 0,then:function(v){h.push(v)}}}return If++,s.then(qp,qp),s}function qp(){if(--If===0&&su!==null){fl!==null&&(fl.status="fulfilled");var t=su;su=null,hl=0,fl=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function iE(t,s){var h=[],v={status:"pending",value:null,reason:null,then:function(b){h.push(b)}};return t.then(function(){v.status="fulfilled",v.value=s;for(var b=0;b<h.length;b++)(0,h[b])(s)},function(b){for(v.status="rejected",v.reason=b,b=0;b<h.length;b++)(0,h[b])(void 0)}),v}var Gp=D.S;D.S=function(t,s){Tv=Yt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&nE(t,s),Gp!==null&&Gp(t,s)};var Ao=U(null);function Rf(){var t=Ao.current;return t!==null?t:hn.pooledCache}function Sc(t,s){s===null?ct(Ao,Ao.current):ct(Ao,s.pool)}function Hp(){var t=Rf();return t===null?null:{parent:Zn._currentValue,pool:t}}var dl=Error(l(460)),Pf=Error(l(474)),bc=Error(l(542)),Lc={then:function(){}};function Yp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Zp(t,s,h){switch(h=t[h],h===void 0?t.push(s):h!==s&&(s.then(ui,ui),s=h),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Vp(t),t;default:if(typeof s.status=="string")s.then(ui,ui);else{if(t=hn,t!==null&&100<t.shellSuspendCounter)throw Error(l(482));t=s,t.status="pending",t.then(function(v){if(s.status==="pending"){var b=s;b.status="fulfilled",b.value=v}},function(v){if(s.status==="pending"){var b=s;b.status="rejected",b.reason=v}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Vp(t),t}throw Io=s,dl}}function Do(t){try{var s=t._init;return s(t._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Io=h,dl):h}}var Io=null;function Xp(){if(Io===null)throw Error(l(459));var t=Io;return Io=null,t}function Vp(t){if(t===dl||t===bc)throw Error(l(483))}var gl=null,au=0;function Tc(t){var s=au;return au+=1,gl===null&&(gl=[]),Zp(gl,t,s)}function ou(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Cc(t,s){throw s.$$typeof===M?Error(l(525)):(t=Object.prototype.toString.call(s),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Qp(t){function s(Et,xt){if(t){var bt=Et.deletions;bt===null?(Et.deletions=[xt],Et.flags|=16):bt.push(xt)}}function h(Et,xt){if(!t)return null;for(;xt!==null;)s(Et,xt),xt=xt.sibling;return null}function v(Et){for(var xt=new Map;Et!==null;)Et.key!==null?xt.set(Et.key,Et):xt.set(Et.index,Et),Et=Et.sibling;return xt}function b(Et,xt){return Et=jr(Et,xt),Et.index=0,Et.sibling=null,Et}function T(Et,xt,bt){return Et.index=bt,t?(bt=Et.alternate,bt!==null?(bt=bt.index,bt<xt?(Et.flags|=67108866,xt):bt):(Et.flags|=67108866,xt)):(Et.flags|=1048576,xt)}function G(Et){return t&&Et.alternate===null&&(Et.flags|=67108866),Et}function ut(Et,xt,bt,Rt){return xt===null||xt.tag!==6?(xt=ll(bt,Et.mode,Rt),xt.return=Et,xt):(xt=b(xt,bt),xt.return=Et,xt)}function vt(Et,xt,bt,Rt){var se=bt.type;return se===Q?Ot(Et,xt,bt.props.children,Rt,bt.key):xt!==null&&(xt.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===k&&Do(se)===xt.type)?(xt=b(xt,bt.props),ou(xt,bt),xt.return=Et,xt):(xt=ko(bt.type,bt.key,bt.props,null,Et.mode,Rt),ou(xt,bt),xt.return=Et,xt)}function Lt(Et,xt,bt,Rt){return xt===null||xt.tag!==4||xt.stateNode.containerInfo!==bt.containerInfo||xt.stateNode.implementation!==bt.implementation?(xt=eu(bt,Et.mode,Rt),xt.return=Et,xt):(xt=b(xt,bt.children||[]),xt.return=Et,xt)}function Ot(Et,xt,bt,Rt,se){return xt===null||xt.tag!==7?(xt=ta(bt,Et.mode,Rt,se),xt.return=Et,xt):(xt=b(xt,bt),xt.return=Et,xt)}function zt(Et,xt,bt){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return xt=ll(""+xt,Et.mode,bt),xt.return=Et,xt;if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case O:return bt=ko(xt.type,xt.key,xt.props,null,Et.mode,bt),ou(bt,xt),bt.return=Et,bt;case B:return xt=eu(xt,Et.mode,bt),xt.return=Et,xt;case k:return xt=Do(xt),zt(Et,xt,bt)}if(it(xt)||Z(xt))return xt=ta(xt,Et.mode,bt,null),xt.return=Et,xt;if(typeof xt.then=="function")return zt(Et,Tc(xt),bt);if(xt.$$typeof===Y)return zt(Et,wc(Et,xt),bt);Cc(Et,xt)}return null}function kt(Et,xt,bt,Rt){var se=xt!==null?xt.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return se!==null?null:ut(Et,xt,""+bt,Rt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case O:return bt.key===se?vt(Et,xt,bt,Rt):null;case B:return bt.key===se?Lt(Et,xt,bt,Rt):null;case k:return bt=Do(bt),kt(Et,xt,bt,Rt)}if(it(bt)||Z(bt))return se!==null?null:Ot(Et,xt,bt,Rt,null);if(typeof bt.then=="function")return kt(Et,xt,Tc(bt),Rt);if(bt.$$typeof===Y)return kt(Et,xt,wc(Et,bt),Rt);Cc(Et,bt)}return null}function Nt(Et,xt,bt,Rt,se){if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return Et=Et.get(bt)||null,ut(xt,Et,""+Rt,se);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case O:return Et=Et.get(Rt.key===null?bt:Rt.key)||null,vt(xt,Et,Rt,se);case B:return Et=Et.get(Rt.key===null?bt:Rt.key)||null,Lt(xt,Et,Rt,se);case k:return Rt=Do(Rt),Nt(Et,xt,bt,Rt,se)}if(it(Rt)||Z(Rt))return Et=Et.get(bt)||null,Ot(xt,Et,Rt,se,null);if(typeof Rt.then=="function")return Nt(Et,xt,bt,Tc(Rt),se);if(Rt.$$typeof===Y)return Nt(Et,xt,bt,wc(xt,Rt),se);Cc(xt,Rt)}return null}function Wt(Et,xt,bt,Rt){for(var se=null,Ye=null,te=xt,we=xt=0,Ae=null;te!==null&&we<bt.length;we++){te.index>we?(Ae=te,te=null):Ae=te.sibling;var Ze=kt(Et,te,bt[we],Rt);if(Ze===null){te===null&&(te=Ae);break}t&&te&&Ze.alternate===null&&s(Et,te),xt=T(Ze,xt,we),Ye===null?se=Ze:Ye.sibling=Ze,Ye=Ze,te=Ae}if(we===bt.length)return h(Et,te),Ce&&ne(Et,we),se;if(te===null){for(;we<bt.length;we++)te=zt(Et,bt[we],Rt),te!==null&&(xt=T(te,xt,we),Ye===null?se=te:Ye.sibling=te,Ye=te);return Ce&&ne(Et,we),se}for(te=v(te);we<bt.length;we++)Ae=Nt(te,Et,we,bt[we],Rt),Ae!==null&&(t&&Ae.alternate!==null&&te.delete(Ae.key===null?we:Ae.key),xt=T(Ae,xt,we),Ye===null?se=Ae:Ye.sibling=Ae,Ye=Ae);return t&&te.forEach(function(eo){return s(Et,eo)}),Ce&&ne(Et,we),se}function oe(Et,xt,bt,Rt){if(bt==null)throw Error(l(151));for(var se=null,Ye=null,te=xt,we=xt=0,Ae=null,Ze=bt.next();te!==null&&!Ze.done;we++,Ze=bt.next()){te.index>we?(Ae=te,te=null):Ae=te.sibling;var eo=kt(Et,te,Ze.value,Rt);if(eo===null){te===null&&(te=Ae);break}t&&te&&eo.alternate===null&&s(Et,te),xt=T(eo,xt,we),Ye===null?se=eo:Ye.sibling=eo,Ye=eo,te=Ae}if(Ze.done)return h(Et,te),Ce&&ne(Et,we),se;if(te===null){for(;!Ze.done;we++,Ze=bt.next())Ze=zt(Et,Ze.value,Rt),Ze!==null&&(xt=T(Ze,xt,we),Ye===null?se=Ze:Ye.sibling=Ze,Ye=Ze);return Ce&&ne(Et,we),se}for(te=v(te);!Ze.done;we++,Ze=bt.next())Ze=Nt(te,Et,we,Ze.value,Rt),Ze!==null&&(t&&Ze.alternate!==null&&te.delete(Ze.key===null?we:Ze.key),xt=T(Ze,xt,we),Ye===null?se=Ze:Ye.sibling=Ze,Ye=Ze);return t&&te.forEach(function(gw){return s(Et,gw)}),Ce&&ne(Et,we),se}function ln(Et,xt,bt,Rt){if(typeof bt=="object"&&bt!==null&&bt.type===Q&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case O:t:{for(var se=bt.key;xt!==null;){if(xt.key===se){if(se=bt.type,se===Q){if(xt.tag===7){h(Et,xt.sibling),Rt=b(xt,bt.props.children),Rt.return=Et,Et=Rt;break t}}else if(xt.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===k&&Do(se)===xt.type){h(Et,xt.sibling),Rt=b(xt,bt.props),ou(Rt,bt),Rt.return=Et,Et=Rt;break t}h(Et,xt);break}else s(Et,xt);xt=xt.sibling}bt.type===Q?(Rt=ta(bt.props.children,Et.mode,Rt,bt.key),Rt.return=Et,Et=Rt):(Rt=ko(bt.type,bt.key,bt.props,null,Et.mode,Rt),ou(Rt,bt),Rt.return=Et,Et=Rt)}return G(Et);case B:t:{for(se=bt.key;xt!==null;){if(xt.key===se)if(xt.tag===4&&xt.stateNode.containerInfo===bt.containerInfo&&xt.stateNode.implementation===bt.implementation){h(Et,xt.sibling),Rt=b(xt,bt.children||[]),Rt.return=Et,Et=Rt;break t}else{h(Et,xt);break}else s(Et,xt);xt=xt.sibling}Rt=eu(bt,Et.mode,Rt),Rt.return=Et,Et=Rt}return G(Et);case k:return bt=Do(bt),ln(Et,xt,bt,Rt)}if(it(bt))return Wt(Et,xt,bt,Rt);if(Z(bt)){if(se=Z(bt),typeof se!="function")throw Error(l(150));return bt=se.call(bt),oe(Et,xt,bt,Rt)}if(typeof bt.then=="function")return ln(Et,xt,Tc(bt),Rt);if(bt.$$typeof===Y)return ln(Et,xt,wc(Et,bt),Rt);Cc(Et,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint"?(bt=""+bt,xt!==null&&xt.tag===6?(h(Et,xt.sibling),Rt=b(xt,bt),Rt.return=Et,Et=Rt):(h(Et,xt),Rt=ll(bt,Et.mode,Rt),Rt.return=Et,Et=Rt),G(Et)):h(Et,xt)}return function(Et,xt,bt,Rt){try{au=0;var se=ln(Et,xt,bt,Rt);return gl=null,se}catch(te){if(te===dl||te===bc)throw te;var Ye=ki(29,te,null,Et.mode);return Ye.lanes=Rt,Ye.return=Et,Ye}}}var Ro=Qp(!0),Wp=Qp(!1),Ba=!1;function zf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bf(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ja(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(t,s,h){var v=t.updateQueue;if(v===null)return null;if(v=v.shared,(Je&2)!==0){var b=v.pending;return b===null?s.next=s:(s.next=b.next,b.next=s),v.pending=s,s=rs(t),Br(t,null,h),s}return Er(t,v,s,h),rs(t)}function lu(t,s,h){if(s=s.updateQueue,s!==null&&(s=s.shared,(h&4194048)!==0)){var v=s.lanes;v&=t.pendingLanes,h|=v,s.lanes=h,Sa(t,h)}}function jf(t,s){var h=t.updateQueue,v=t.alternate;if(v!==null&&(v=v.updateQueue,h===v)){var b=null,T=null;if(h=h.firstBaseUpdate,h!==null){do{var G={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};T===null?b=T=G:T=T.next=G,h=h.next}while(h!==null);T===null?b=T=s:T=T.next=s}else b=T=s;h={baseState:v.baseState,firstBaseUpdate:b,lastBaseUpdate:T,shared:v.shared,callbacks:v.callbacks},t.updateQueue=h;return}t=h.lastBaseUpdate,t===null?h.firstBaseUpdate=s:t.next=s,h.lastBaseUpdate=s}var Uf=!1;function uu(){if(Uf){var t=fl;if(t!==null)throw t}}function cu(t,s,h,v){Uf=!1;var b=t.updateQueue;Ba=!1;var T=b.firstBaseUpdate,G=b.lastBaseUpdate,ut=b.shared.pending;if(ut!==null){b.shared.pending=null;var vt=ut,Lt=vt.next;vt.next=null,G===null?T=Lt:G.next=Lt,G=vt;var Ot=t.alternate;Ot!==null&&(Ot=Ot.updateQueue,ut=Ot.lastBaseUpdate,ut!==G&&(ut===null?Ot.firstBaseUpdate=Lt:ut.next=Lt,Ot.lastBaseUpdate=vt))}if(T!==null){var zt=b.baseState;G=0,Ot=Lt=vt=null,ut=T;do{var kt=ut.lane&-536870913,Nt=kt!==ut.lane;if(Nt?(Oe&kt)===kt:(v&kt)===kt){kt!==0&&kt===hl&&(Uf=!0),Ot!==null&&(Ot=Ot.next={lane:0,tag:ut.tag,payload:ut.payload,callback:null,next:null});t:{var Wt=t,oe=ut;kt=s;var ln=h;switch(oe.tag){case 1:if(Wt=oe.payload,typeof Wt=="function"){zt=Wt.call(ln,zt,kt);break t}zt=Wt;break t;case 3:Wt.flags=Wt.flags&-65537|128;case 0:if(Wt=oe.payload,kt=typeof Wt=="function"?Wt.call(ln,zt,kt):Wt,kt==null)break t;zt=S({},zt,kt);break t;case 2:Ba=!0}}kt=ut.callback,kt!==null&&(t.flags|=64,Nt&&(t.flags|=8192),Nt=b.callbacks,Nt===null?b.callbacks=[kt]:Nt.push(kt))}else Nt={lane:kt,tag:ut.tag,payload:ut.payload,callback:ut.callback,next:null},Ot===null?(Lt=Ot=Nt,vt=zt):Ot=Ot.next=Nt,G|=kt;if(ut=ut.next,ut===null){if(ut=b.shared.pending,ut===null)break;Nt=ut,ut=Nt.next,Nt.next=null,b.lastBaseUpdate=Nt,b.shared.pending=null}}while(!0);Ot===null&&(vt=zt),b.baseState=vt,b.firstBaseUpdate=Lt,b.lastBaseUpdate=Ot,T===null&&(b.shared.lanes=0),Ya|=G,t.lanes=G,t.memoizedState=zt}}function Jp(t,s){if(typeof t!="function")throw Error(l(191,t));t.call(s)}function Kp(t,s){var h=t.callbacks;if(h!==null)for(t.callbacks=null,t=0;t<h.length;t++)Jp(h[t],s)}var pl=U(null),kc=U(0);function $p(t,s){t=ha,ct(kc,t),ct(pl,s),ha=t|s.baseLanes}function Ff(){ct(kc,ha),ct(pl,pl.current)}function qf(){ha=kc.current,K(pl),K(kc)}var wr=U(null),Ur=null;function Fa(t){var s=t.alternate;ct(jn,jn.current&1),ct(wr,t),Ur===null&&(s===null||pl.current!==null||s.memoizedState!==null)&&(Ur=t)}function Gf(t){ct(jn,jn.current),ct(wr,t),Ur===null&&(Ur=t)}function tm(t){t.tag===22?(ct(jn,jn.current),ct(wr,t),Ur===null&&(Ur=t)):qa()}function qa(){ct(jn,jn.current),ct(wr,wr.current)}function Sr(t){K(wr),Ur===t&&(Ur=null),K(jn)}var jn=U(0);function Mc(t){for(var s=t;s!==null;){if(s.tag===13){var h=s.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Qd(h)||Wd(h)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ia=0,_e=null,an=null,Xn=null,Nc=!1,ml=!1,Po=!1,Oc=0,hu=0,vl=null,rE=0;function Rn(){throw Error(l(321))}function Hf(t,s){if(s===null)return!1;for(var h=0;h<s.length&&h<t.length;h++)if(!Gn(t[h],s[h]))return!1;return!0}function Yf(t,s,h,v,b,T){return ia=T,_e=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=t===null||t.memoizedState===null?zm:ad,Po=!1,T=h(v,b),Po=!1,ml&&(T=nm(s,h,v,b)),em(t),T}function em(t){D.H=gu;var s=an!==null&&an.next!==null;if(ia=0,Xn=an=_e=null,Nc=!1,hu=0,vl=null,s)throw Error(l(300));t===null||Vn||(t=t.dependencies,t!==null&&Ec(t)&&(Vn=!0))}function nm(t,s,h,v){_e=t;var b=0;do{if(ml&&(vl=null),hu=0,ml=!1,25<=b)throw Error(l(301));if(b+=1,Xn=an=null,t.updateQueue!=null){var T=t.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}D.H=Bm,T=s(h,v)}while(ml);return T}function sE(){var t=D.H,s=t.useState()[0];return s=typeof s.then=="function"?fu(s):s,t=t.useState()[0],(an!==null?an.memoizedState:null)!==t&&(_e.flags|=1024),s}function Zf(){var t=Oc!==0;return Oc=0,t}function Xf(t,s,h){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~h}function Vf(t){if(Nc){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Nc=!1}ia=0,Xn=an=_e=null,ml=!1,hu=Oc=0,vl=null}function ji(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xn===null?_e.memoizedState=Xn=t:Xn=Xn.next=t,Xn}function Un(){if(an===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=an.next;var s=Xn===null?_e.memoizedState:Xn.next;if(s!==null)Xn=s,an=t;else{if(t===null)throw _e.alternate===null?Error(l(467)):Error(l(310));an=t,t={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},Xn===null?_e.memoizedState=Xn=t:Xn=Xn.next=t}return Xn}function Ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fu(t){var s=hu;return hu+=1,vl===null&&(vl=[]),t=Zp(vl,t,s),s=_e,(Xn===null?s.memoizedState:Xn.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?zm:ad),t}function Dc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return fu(t);if(t.$$typeof===Y)return vi(t)}throw Error(l(438,String(t)))}function Qf(t){var s=null,h=_e.updateQueue;if(h!==null&&(s=h.memoCache),s==null){var v=_e.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(s={data:v.data.map(function(b){return b.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),h===null&&(h=Ac(),_e.updateQueue=h),h.memoCache=s,h=s.data[s.index],h===void 0)for(h=s.data[s.index]=Array(t),v=0;v<t;v++)h[v]=q;return s.index++,h}function ra(t,s){return typeof s=="function"?s(t):s}function Ic(t){var s=Un();return Wf(s,an,t)}function Wf(t,s,h){var v=t.queue;if(v===null)throw Error(l(311));v.lastRenderedReducer=h;var b=t.baseQueue,T=v.pending;if(T!==null){if(b!==null){var G=b.next;b.next=T.next,T.next=G}s.baseQueue=b=T,v.pending=null}if(T=t.baseState,b===null)t.memoizedState=T;else{s=b.next;var ut=G=null,vt=null,Lt=s,Ot=!1;do{var zt=Lt.lane&-536870913;if(zt!==Lt.lane?(Oe&zt)===zt:(ia&zt)===zt){var kt=Lt.revertLane;if(kt===0)vt!==null&&(vt=vt.next={lane:0,revertLane:0,gesture:null,action:Lt.action,hasEagerState:Lt.hasEagerState,eagerState:Lt.eagerState,next:null}),zt===hl&&(Ot=!0);else if((ia&kt)===kt){Lt=Lt.next,kt===hl&&(Ot=!0);continue}else zt={lane:0,revertLane:Lt.revertLane,gesture:null,action:Lt.action,hasEagerState:Lt.hasEagerState,eagerState:Lt.eagerState,next:null},vt===null?(ut=vt=zt,G=T):vt=vt.next=zt,_e.lanes|=kt,Ya|=kt;zt=Lt.action,Po&&h(T,zt),T=Lt.hasEagerState?Lt.eagerState:h(T,zt)}else kt={lane:zt,revertLane:Lt.revertLane,gesture:Lt.gesture,action:Lt.action,hasEagerState:Lt.hasEagerState,eagerState:Lt.eagerState,next:null},vt===null?(ut=vt=kt,G=T):vt=vt.next=kt,_e.lanes|=zt,Ya|=zt;Lt=Lt.next}while(Lt!==null&&Lt!==s);if(vt===null?G=T:vt.next=ut,!Gn(T,t.memoizedState)&&(Vn=!0,Ot&&(h=fl,h!==null)))throw h;t.memoizedState=T,t.baseState=G,t.baseQueue=vt,v.lastRenderedState=T}return b===null&&(v.lanes=0),[t.memoizedState,v.dispatch]}function Jf(t){var s=Un(),h=s.queue;if(h===null)throw Error(l(311));h.lastRenderedReducer=t;var v=h.dispatch,b=h.pending,T=s.memoizedState;if(b!==null){h.pending=null;var G=b=b.next;do T=t(T,G.action),G=G.next;while(G!==b);Gn(T,s.memoizedState)||(Vn=!0),s.memoizedState=T,s.baseQueue===null&&(s.baseState=T),h.lastRenderedState=T}return[T,v]}function im(t,s,h){var v=_e,b=Un(),T=Ce;if(T){if(h===void 0)throw Error(l(407));h=h()}else h=s();var G=!Gn((an||b).memoizedState,h);if(G&&(b.memoizedState=h,Vn=!0),b=b.queue,td(am.bind(null,v,b,t),[t]),b.getSnapshot!==s||G||Xn!==null&&Xn.memoizedState.tag&1){if(v.flags|=2048,yl(9,{destroy:void 0},sm.bind(null,v,b,h,s),null),hn===null)throw Error(l(349));T||(ia&127)!==0||rm(v,s,h)}return h}function rm(t,s,h){t.flags|=16384,t={getSnapshot:s,value:h},s=_e.updateQueue,s===null?(s=Ac(),_e.updateQueue=s,s.stores=[t]):(h=s.stores,h===null?s.stores=[t]:h.push(t))}function sm(t,s,h,v){s.value=h,s.getSnapshot=v,om(s)&&lm(t)}function am(t,s,h){return h(function(){om(s)&&lm(t)})}function om(t){var s=t.getSnapshot;t=t.value;try{var h=s();return!Gn(t,h)}catch{return!0}}function lm(t){var s=zi(t,2);s!==null&&or(s,t,2)}function Kf(t){var s=ji();if(typeof t=="function"){var h=t;if(t=h(),Po){$t(!0);try{h()}finally{$t(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:t},s}function um(t,s,h,v){return t.baseState=h,Wf(t,an,typeof v=="function"?v:ra)}function aE(t,s,h,v,b){if(zc(t))throw Error(l(485));if(t=s.action,t!==null){var T={payload:b,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){T.listeners.push(G)}};D.T!==null?h(!0):T.isTransition=!1,v(T),h=s.pending,h===null?(T.next=s.pending=T,cm(s,T)):(T.next=h.next,s.pending=h.next=T)}}function cm(t,s){var h=s.action,v=s.payload,b=t.state;if(s.isTransition){var T=D.T,G={};D.T=G;try{var ut=h(b,v),vt=D.S;vt!==null&&vt(G,ut),hm(t,s,ut)}catch(Lt){$f(t,s,Lt)}finally{T!==null&&G.types!==null&&(T.types=G.types),D.T=T}}else try{T=h(b,v),hm(t,s,T)}catch(Lt){$f(t,s,Lt)}}function hm(t,s,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(v){fm(t,s,v)},function(v){return $f(t,s,v)}):fm(t,s,h)}function fm(t,s,h){s.status="fulfilled",s.value=h,dm(s),t.state=h,s=t.pending,s!==null&&(h=s.next,h===s?t.pending=null:(h=h.next,s.next=h,cm(t,h)))}function $f(t,s,h){var v=t.pending;if(t.pending=null,v!==null){v=v.next;do s.status="rejected",s.reason=h,dm(s),s=s.next;while(s!==v)}t.action=null}function dm(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function gm(t,s){return s}function pm(t,s){if(Ce){var h=hn.formState;if(h!==null){t:{var v=_e;if(Ce){if(He){e:{for(var b=He,T=nr;b.nodeType!==8;){if(!T){b=null;break e}if(b=Fr(b.nextSibling),b===null){b=null;break e}}T=b.data,b=T==="F!"||T==="F"?b:null}if(b){He=Fr(b.nextSibling),v=b.data==="F!";break t}}Ls(v)}v=!1}v&&(s=h[0])}}return h=ji(),h.memoizedState=h.baseState=s,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gm,lastRenderedState:s},h.queue=v,h=Im.bind(null,_e,v),v.dispatch=h,v=Kf(!1),T=sd.bind(null,_e,!1,v.queue),v=ji(),b={state:s,dispatch:null,action:t,pending:null},v.queue=b,h=aE.bind(null,_e,b,T,h),b.dispatch=h,v.memoizedState=t,[s,h,!1]}function mm(t){var s=Un();return vm(s,an,t)}function vm(t,s,h){if(s=Wf(t,s,gm)[0],t=Ic(ra)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var v=fu(s)}catch(G){throw G===dl?bc:G}else v=s;s=Un();var b=s.queue,T=b.dispatch;return h!==s.memoizedState&&(_e.flags|=2048,yl(9,{destroy:void 0},oE.bind(null,b,h),null)),[v,T,t]}function oE(t,s){t.action=s}function ym(t){var s=Un(),h=an;if(h!==null)return vm(s,h,t);Un(),s=s.memoizedState,h=Un();var v=h.queue.dispatch;return h.memoizedState=t,[s,v,!1]}function yl(t,s,h,v){return t={tag:t,create:h,deps:v,inst:s,next:null},s=_e.updateQueue,s===null&&(s=Ac(),_e.updateQueue=s),h=s.lastEffect,h===null?s.lastEffect=t.next=t:(v=h.next,h.next=t,t.next=v,s.lastEffect=t),t}function _m(){return Un().memoizedState}function Rc(t,s,h,v){var b=ji();_e.flags|=t,b.memoizedState=yl(1|s,{destroy:void 0},h,v===void 0?null:v)}function Pc(t,s,h,v){var b=Un();v=v===void 0?null:v;var T=b.memoizedState.inst;an!==null&&v!==null&&Hf(v,an.memoizedState.deps)?b.memoizedState=yl(s,T,h,v):(_e.flags|=t,b.memoizedState=yl(1|s,T,h,v))}function xm(t,s){Rc(8390656,8,t,s)}function td(t,s){Pc(2048,8,t,s)}function lE(t){_e.flags|=4;var s=_e.updateQueue;if(s===null)s=Ac(),_e.updateQueue=s,s.events=[t];else{var h=s.events;h===null?s.events=[t]:h.push(t)}}function Em(t){var s=Un().memoizedState;return lE({ref:s,nextImpl:t}),function(){if((Je&2)!==0)throw Error(l(440));return s.impl.apply(void 0,arguments)}}function wm(t,s){return Pc(4,2,t,s)}function Sm(t,s){return Pc(4,4,t,s)}function bm(t,s){if(typeof s=="function"){t=t();var h=s(t);return function(){typeof h=="function"?h():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Lm(t,s,h){h=h!=null?h.concat([t]):null,Pc(4,4,bm.bind(null,s,t),h)}function ed(){}function Tm(t,s){var h=Un();s=s===void 0?null:s;var v=h.memoizedState;return s!==null&&Hf(s,v[1])?v[0]:(h.memoizedState=[t,s],t)}function Cm(t,s){var h=Un();s=s===void 0?null:s;var v=h.memoizedState;if(s!==null&&Hf(s,v[1]))return v[0];if(v=t(),Po){$t(!0);try{t()}finally{$t(!1)}}return h.memoizedState=[v,s],v}function nd(t,s,h){return h===void 0||(ia&1073741824)!==0&&(Oe&261930)===0?t.memoizedState=s:(t.memoizedState=h,t=kv(),_e.lanes|=t,Ya|=t,h)}function km(t,s,h,v){return Gn(h,s)?h:pl.current!==null?(t=nd(t,h,v),Gn(t,s)||(Vn=!0),t):(ia&42)===0||(ia&1073741824)!==0&&(Oe&261930)===0?(Vn=!0,t.memoizedState=h):(t=kv(),_e.lanes|=t,Ya|=t,s)}function Mm(t,s,h,v,b){var T=z.p;z.p=T!==0&&8>T?T:8;var G=D.T,ut={};D.T=ut,sd(t,!1,s,h);try{var vt=b(),Lt=D.S;if(Lt!==null&&Lt(ut,vt),vt!==null&&typeof vt=="object"&&typeof vt.then=="function"){var Ot=iE(vt,v);du(t,s,Ot,Tr(t))}else du(t,s,v,Tr(t))}catch(zt){du(t,s,{then:function(){},status:"rejected",reason:zt},Tr())}finally{z.p=T,G!==null&&ut.types!==null&&(G.types=ut.types),D.T=G}}function uE(){}function id(t,s,h,v){if(t.tag!==5)throw Error(l(476));var b=Nm(t).queue;Mm(t,b,s,P,h===null?uE:function(){return Om(t),h(v)})}function Nm(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:P},next:null};var h={};return s.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:h},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Om(t){var s=Nm(t);s.next===null&&(s=t.alternate.memoizedState),du(t,s.next.queue,{},Tr())}function rd(){return vi(Nu)}function Am(){return Un().memoizedState}function Dm(){return Un().memoizedState}function cE(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var h=Tr();t=ja(h);var v=Ua(s,t,h);v!==null&&(or(v,s,h),lu(v,s,h)),s={cache:Df()},t.payload=s;return}s=s.return}}function hE(t,s,h){var v=Tr();h={lane:v,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},zc(t)?Rm(s,h):(h=Pa(t,s,h,v),h!==null&&(or(h,t,v),Pm(h,s,v)))}function Im(t,s,h){var v=Tr();du(t,s,h,v)}function du(t,s,h,v){var b={lane:v,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(zc(t))Rm(s,b);else{var T=t.alternate;if(t.lanes===0&&(T===null||T.lanes===0)&&(T=s.lastRenderedReducer,T!==null))try{var G=s.lastRenderedState,ut=T(G,h);if(b.hasEagerState=!0,b.eagerState=ut,Gn(ut,G))return Er(t,s,b,0),hn===null&&Ss(),!1}catch{}if(h=Pa(t,s,b,v),h!==null)return or(h,t,v),Pm(h,s,v),!0}return!1}function sd(t,s,h,v){if(v={lane:2,revertLane:zd(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},zc(t)){if(s)throw Error(l(479))}else s=Pa(t,h,v,2),s!==null&&or(s,t,2)}function zc(t){var s=t.alternate;return t===_e||s!==null&&s===_e}function Rm(t,s){ml=Nc=!0;var h=t.pending;h===null?s.next=s:(s.next=h.next,h.next=s),t.pending=s}function Pm(t,s,h){if((h&4194048)!==0){var v=s.lanes;v&=t.pendingLanes,h|=v,s.lanes=h,Sa(t,h)}}var gu={readContext:vi,use:Dc,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useLayoutEffect:Rn,useInsertionEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useSyncExternalStore:Rn,useId:Rn,useHostTransitionStatus:Rn,useFormState:Rn,useActionState:Rn,useOptimistic:Rn,useMemoCache:Rn,useCacheRefresh:Rn};gu.useEffectEvent=Rn;var zm={readContext:vi,use:Dc,useCallback:function(t,s){return ji().memoizedState=[t,s===void 0?null:s],t},useContext:vi,useEffect:xm,useImperativeHandle:function(t,s,h){h=h!=null?h.concat([t]):null,Rc(4194308,4,bm.bind(null,s,t),h)},useLayoutEffect:function(t,s){return Rc(4194308,4,t,s)},useInsertionEffect:function(t,s){Rc(4,2,t,s)},useMemo:function(t,s){var h=ji();s=s===void 0?null:s;var v=t();if(Po){$t(!0);try{t()}finally{$t(!1)}}return h.memoizedState=[v,s],v},useReducer:function(t,s,h){var v=ji();if(h!==void 0){var b=h(s);if(Po){$t(!0);try{h(s)}finally{$t(!1)}}}else b=s;return v.memoizedState=v.baseState=b,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:b},v.queue=t,t=t.dispatch=hE.bind(null,_e,t),[v.memoizedState,t]},useRef:function(t){var s=ji();return t={current:t},s.memoizedState=t},useState:function(t){t=Kf(t);var s=t.queue,h=Im.bind(null,_e,s);return s.dispatch=h,[t.memoizedState,h]},useDebugValue:ed,useDeferredValue:function(t,s){var h=ji();return nd(h,t,s)},useTransition:function(){var t=Kf(!1);return t=Mm.bind(null,_e,t.queue,!0,!1),ji().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,h){var v=_e,b=ji();if(Ce){if(h===void 0)throw Error(l(407));h=h()}else{if(h=s(),hn===null)throw Error(l(349));(Oe&127)!==0||rm(v,s,h)}b.memoizedState=h;var T={value:h,getSnapshot:s};return b.queue=T,xm(am.bind(null,v,T,t),[t]),v.flags|=2048,yl(9,{destroy:void 0},sm.bind(null,v,T,h,s),null),h},useId:function(){var t=ji(),s=hn.identifierPrefix;if(Ce){var h=Ht,v=Pt;h=(v&~(1<<32-di(v)-1)).toString(32)+h,s="_"+s+"R_"+h,h=Oc++,0<h&&(s+="H"+h.toString(32)),s+="_"}else h=rE++,s="_"+s+"r_"+h.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:rd,useFormState:pm,useActionState:pm,useOptimistic:function(t){var s=ji();s.memoizedState=s.baseState=t;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=h,s=sd.bind(null,_e,!0,h),h.dispatch=s,[t,s]},useMemoCache:Qf,useCacheRefresh:function(){return ji().memoizedState=cE.bind(null,_e)},useEffectEvent:function(t){var s=ji(),h={impl:t};return s.memoizedState=h,function(){if((Je&2)!==0)throw Error(l(440));return h.impl.apply(void 0,arguments)}}},ad={readContext:vi,use:Dc,useCallback:Tm,useContext:vi,useEffect:td,useImperativeHandle:Lm,useInsertionEffect:wm,useLayoutEffect:Sm,useMemo:Cm,useReducer:Ic,useRef:_m,useState:function(){return Ic(ra)},useDebugValue:ed,useDeferredValue:function(t,s){var h=Un();return km(h,an.memoizedState,t,s)},useTransition:function(){var t=Ic(ra)[0],s=Un().memoizedState;return[typeof t=="boolean"?t:fu(t),s]},useSyncExternalStore:im,useId:Am,useHostTransitionStatus:rd,useFormState:mm,useActionState:mm,useOptimistic:function(t,s){var h=Un();return um(h,an,t,s)},useMemoCache:Qf,useCacheRefresh:Dm};ad.useEffectEvent=Em;var Bm={readContext:vi,use:Dc,useCallback:Tm,useContext:vi,useEffect:td,useImperativeHandle:Lm,useInsertionEffect:wm,useLayoutEffect:Sm,useMemo:Cm,useReducer:Jf,useRef:_m,useState:function(){return Jf(ra)},useDebugValue:ed,useDeferredValue:function(t,s){var h=Un();return an===null?nd(h,t,s):km(h,an.memoizedState,t,s)},useTransition:function(){var t=Jf(ra)[0],s=Un().memoizedState;return[typeof t=="boolean"?t:fu(t),s]},useSyncExternalStore:im,useId:Am,useHostTransitionStatus:rd,useFormState:ym,useActionState:ym,useOptimistic:function(t,s){var h=Un();return an!==null?um(h,an,t,s):(h.baseState=t,[t,h.queue.dispatch])},useMemoCache:Qf,useCacheRefresh:Dm};Bm.useEffectEvent=Em;function od(t,s,h,v){s=t.memoizedState,h=h(v,s),h=h==null?s:S({},s,h),t.memoizedState=h,t.lanes===0&&(t.updateQueue.baseState=h)}var ld={enqueueSetState:function(t,s,h){t=t._reactInternals;var v=Tr(),b=ja(v);b.payload=s,h!=null&&(b.callback=h),s=Ua(t,b,v),s!==null&&(or(s,t,v),lu(s,t,v))},enqueueReplaceState:function(t,s,h){t=t._reactInternals;var v=Tr(),b=ja(v);b.tag=1,b.payload=s,h!=null&&(b.callback=h),s=Ua(t,b,v),s!==null&&(or(s,t,v),lu(s,t,v))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var h=Tr(),v=ja(h);v.tag=2,s!=null&&(v.callback=s),s=Ua(t,v,h),s!==null&&(or(s,t,h),lu(s,t,h))}};function jm(t,s,h,v,b,T,G){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(v,T,G):s.prototype&&s.prototype.isPureReactComponent?!ws(h,v)||!ws(b,T):!0}function Um(t,s,h,v){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(h,v),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(h,v),s.state!==t&&ld.enqueueReplaceState(s,s.state,null)}function zo(t,s){var h=s;if("ref"in s){h={};for(var v in s)v!=="ref"&&(h[v]=s[v])}if(t=t.defaultProps){h===s&&(h=S({},h));for(var b in t)h[b]===void 0&&(h[b]=t[b])}return h}function Fm(t){Pi(t)}function qm(t){console.error(t)}function Gm(t){Pi(t)}function Bc(t,s){try{var h=t.onUncaughtError;h(s.value,{componentStack:s.stack})}catch(v){setTimeout(function(){throw v})}}function Hm(t,s,h){try{var v=t.onCaughtError;v(h.value,{componentStack:h.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function ud(t,s,h){return h=ja(h),h.tag=3,h.payload={element:null},h.callback=function(){Bc(t,s)},h}function Ym(t){return t=ja(t),t.tag=3,t}function Zm(t,s,h,v){var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var T=v.value;t.payload=function(){return b(T)},t.callback=function(){Hm(s,h,v)}}var G=h.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(t.callback=function(){Hm(s,h,v),typeof b!="function"&&(Za===null?Za=new Set([this]):Za.add(this));var ut=v.stack;this.componentDidCatch(v.value,{componentStack:ut!==null?ut:""})})}function fE(t,s,h,v,b){if(h.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(s=h.alternate,s!==null&&cl(s,h,b,!0),h=wr.current,h!==null){switch(h.tag){case 31:case 13:return Ur===null?Wc():h.alternate===null&&Pn===0&&(Pn=3),h.flags&=-257,h.flags|=65536,h.lanes=b,v===Lc?h.flags|=16384:(s=h.updateQueue,s===null?h.updateQueue=new Set([v]):s.add(v),Id(t,v,b)),!1;case 22:return h.flags|=65536,v===Lc?h.flags|=16384:(s=h.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([v])},h.updateQueue=s):(h=s.retryQueue,h===null?s.retryQueue=new Set([v]):h.add(v)),Id(t,v,b)),!1}throw Error(l(435,h.tag))}return Id(t,v,b),Wc(),!1}if(Ce)return s=wr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=b,v!==ul&&(t=Error(l(422),{cause:v}),Mo(m(t,h)))):(v!==ul&&(s=Error(l(423),{cause:v}),Mo(m(s,h))),t=t.current.alternate,t.flags|=65536,b&=-b,t.lanes|=b,v=m(v,h),b=ud(t.stateNode,v,b),jf(t,b),Pn!==4&&(Pn=2)),!1;var T=Error(l(520),{cause:v});if(T=m(T,h),wu===null?wu=[T]:wu.push(T),Pn!==4&&(Pn=2),s===null)return!0;v=m(v,h),h=s;do{switch(h.tag){case 3:return h.flags|=65536,t=b&-b,h.lanes|=t,t=ud(h.stateNode,v,t),jf(h,t),!1;case 1:if(s=h.type,T=h.stateNode,(h.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Za===null||!Za.has(T))))return h.flags|=65536,b&=-b,h.lanes|=b,b=Ym(b),Zm(b,t,h,v),jf(h,b),!1}h=h.return}while(h!==null);return!1}var cd=Error(l(461)),Vn=!1;function yi(t,s,h,v){s.child=t===null?Wp(s,null,h,v):Ro(s,t.child,h,v)}function Xm(t,s,h,v,b){h=h.render;var T=s.ref;if("ref"in v){var G={};for(var ut in v)ut!=="ref"&&(G[ut]=v[ut])}else G=v;return Oo(s),v=Yf(t,s,h,G,T,b),ut=Zf(),t!==null&&!Vn?(Xf(t,s,b),sa(t,s,b)):(Ce&&ut&&si(s),s.flags|=1,yi(t,s,v,b),s.child)}function Vm(t,s,h,v,b){if(t===null){var T=h.type;return typeof T=="function"&&!ol(T)&&T.defaultProps===void 0&&h.compare===null?(s.tag=15,s.type=T,Qm(t,s,T,v,b)):(t=ko(h.type,null,v,s,s.mode,b),t.ref=s.ref,t.return=s,s.child=t)}if(T=t.child,!yd(t,b)){var G=T.memoizedProps;if(h=h.compare,h=h!==null?h:ws,h(G,v)&&t.ref===s.ref)return sa(t,s,b)}return s.flags|=1,t=jr(T,v),t.ref=s.ref,t.return=s,s.child=t}function Qm(t,s,h,v,b){if(t!==null){var T=t.memoizedProps;if(ws(T,v)&&t.ref===s.ref)if(Vn=!1,s.pendingProps=v=T,yd(t,b))(t.flags&131072)!==0&&(Vn=!0);else return s.lanes=t.lanes,sa(t,s,b)}return hd(t,s,h,v,b)}function Wm(t,s,h,v){var b=v.children,T=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((s.flags&128)!==0){if(T=T!==null?T.baseLanes|h:h,t!==null){for(v=s.child=t.child,b=0;v!==null;)b=b|v.lanes|v.childLanes,v=v.sibling;v=b&~T}else v=0,s.child=null;return Jm(t,s,T,h,v)}if((h&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Sc(s,T!==null?T.cachePool:null),T!==null?$p(s,T):Ff(),tm(s);else return v=s.lanes=536870912,Jm(t,s,T!==null?T.baseLanes|h:h,h,v)}else T!==null?(Sc(s,T.cachePool),$p(s,T),qa(),s.memoizedState=null):(t!==null&&Sc(s,null),Ff(),qa());return yi(t,s,b,h),s.child}function pu(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Jm(t,s,h,v,b){var T=Rf();return T=T===null?null:{parent:Zn._currentValue,pool:T},s.memoizedState={baseLanes:h,cachePool:T},t!==null&&Sc(s,null),Ff(),tm(s),t!==null&&cl(t,s,v,!0),s.childLanes=b,null}function jc(t,s){return s=Fc({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Km(t,s,h){return Ro(s,t.child,null,h),t=jc(s,s.pendingProps),t.flags|=2,Sr(s),s.memoizedState=null,t}function dE(t,s,h){var v=s.pendingProps,b=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Ce){if(v.mode==="hidden")return t=jc(s,v),s.lanes=536870912,pu(null,t);if(Gf(s),(t=He)?(t=cy(t,nr),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ct!==null?{id:Pt,overflow:Ht}:null,retryLane:536870912,hydrationErrors:null},h=tu(t),h.return=s,s.child=h,Ge=s,He=null)):t=null,t===null)throw Ls(s);return s.lanes=536870912,null}return jc(s,v)}var T=t.memoizedState;if(T!==null){var G=T.dehydrated;if(Gf(s),b)if(s.flags&256)s.flags&=-257,s=Km(t,s,h);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(l(558));else if(Vn||cl(t,s,h,!1),b=(h&t.childLanes)!==0,Vn||b){if(v=hn,v!==null&&(G=go(v,h),G!==0&&G!==T.retryLane))throw T.retryLane=G,zi(t,G),or(v,t,G),cd;Wc(),s=Km(t,s,h)}else t=T.treeContext,He=Fr(G.nextSibling),Ge=s,Ce=!0,bs=null,nr=!1,t!==null&&Bi(s,t),s=jc(s,v),s.flags|=4096;return s}return t=jr(t.child,{mode:v.mode,children:v.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Uc(t,s){var h=s.ref;if(h===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(l(284));(t===null||t.ref!==h)&&(s.flags|=4194816)}}function hd(t,s,h,v,b){return Oo(s),h=Yf(t,s,h,v,void 0,b),v=Zf(),t!==null&&!Vn?(Xf(t,s,b),sa(t,s,b)):(Ce&&v&&si(s),s.flags|=1,yi(t,s,h,b),s.child)}function $m(t,s,h,v,b,T){return Oo(s),s.updateQueue=null,h=nm(s,v,h,b),em(t),v=Zf(),t!==null&&!Vn?(Xf(t,s,T),sa(t,s,T)):(Ce&&v&&si(s),s.flags|=1,yi(t,s,h,T),s.child)}function tv(t,s,h,v,b){if(Oo(s),s.stateNode===null){var T=$s,G=h.contextType;typeof G=="object"&&G!==null&&(T=vi(G)),T=new h(v,T),s.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=ld,s.stateNode=T,T._reactInternals=s,T=s.stateNode,T.props=v,T.state=s.memoizedState,T.refs={},zf(s),G=h.contextType,T.context=typeof G=="object"&&G!==null?vi(G):$s,T.state=s.memoizedState,G=h.getDerivedStateFromProps,typeof G=="function"&&(od(s,h,G,v),T.state=s.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(G=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),G!==T.state&&ld.enqueueReplaceState(T,T.state,null),cu(s,v,T,b),uu(),T.state=s.memoizedState),typeof T.componentDidMount=="function"&&(s.flags|=4194308),v=!0}else if(t===null){T=s.stateNode;var ut=s.memoizedProps,vt=zo(h,ut);T.props=vt;var Lt=T.context,Ot=h.contextType;G=$s,typeof Ot=="object"&&Ot!==null&&(G=vi(Ot));var zt=h.getDerivedStateFromProps;Ot=typeof zt=="function"||typeof T.getSnapshotBeforeUpdate=="function",ut=s.pendingProps!==ut,Ot||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(ut||Lt!==G)&&Um(s,T,v,G),Ba=!1;var kt=s.memoizedState;T.state=kt,cu(s,v,T,b),uu(),Lt=s.memoizedState,ut||kt!==Lt||Ba?(typeof zt=="function"&&(od(s,h,zt,v),Lt=s.memoizedState),(vt=Ba||jm(s,h,vt,v,kt,Lt,G))?(Ot||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=v,s.memoizedState=Lt),T.props=v,T.state=Lt,T.context=G,v=vt):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),v=!1)}else{T=s.stateNode,Bf(t,s),G=s.memoizedProps,Ot=zo(h,G),T.props=Ot,zt=s.pendingProps,kt=T.context,Lt=h.contextType,vt=$s,typeof Lt=="object"&&Lt!==null&&(vt=vi(Lt)),ut=h.getDerivedStateFromProps,(Lt=typeof ut=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(G!==zt||kt!==vt)&&Um(s,T,v,vt),Ba=!1,kt=s.memoizedState,T.state=kt,cu(s,v,T,b),uu();var Nt=s.memoizedState;G!==zt||kt!==Nt||Ba||t!==null&&t.dependencies!==null&&Ec(t.dependencies)?(typeof ut=="function"&&(od(s,h,ut,v),Nt=s.memoizedState),(Ot=Ba||jm(s,h,Ot,v,kt,Nt,vt)||t!==null&&t.dependencies!==null&&Ec(t.dependencies))?(Lt||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(v,Nt,vt),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(v,Nt,vt)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||G===t.memoizedProps&&kt===t.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||G===t.memoizedProps&&kt===t.memoizedState||(s.flags|=1024),s.memoizedProps=v,s.memoizedState=Nt),T.props=v,T.state=Nt,T.context=vt,v=Ot):(typeof T.componentDidUpdate!="function"||G===t.memoizedProps&&kt===t.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||G===t.memoizedProps&&kt===t.memoizedState||(s.flags|=1024),v=!1)}return T=v,Uc(t,s),v=(s.flags&128)!==0,T||v?(T=s.stateNode,h=v&&typeof h.getDerivedStateFromError!="function"?null:T.render(),s.flags|=1,t!==null&&v?(s.child=Ro(s,t.child,null,b),s.child=Ro(s,null,h,b)):yi(t,s,h,b),s.memoizedState=T.state,t=s.child):t=sa(t,s,b),t}function ev(t,s,h,v){return ea(),s.flags|=256,yi(t,s,h,v),s.child}var fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dd(t){return{baseLanes:t,cachePool:Hp()}}function gd(t,s,h){return t=t!==null?t.childLanes&~h:0,s&&(t|=Lr),t}function nv(t,s,h){var v=s.pendingProps,b=!1,T=(s.flags&128)!==0,G;if((G=T)||(G=t!==null&&t.memoizedState===null?!1:(jn.current&2)!==0),G&&(b=!0,s.flags&=-129),G=(s.flags&32)!==0,s.flags&=-33,t===null){if(Ce){if(b?Fa(s):qa(),(t=He)?(t=cy(t,nr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ct!==null?{id:Pt,overflow:Ht}:null,retryLane:536870912,hydrationErrors:null},h=tu(t),h.return=s,s.child=h,Ge=s,He=null)):t=null,t===null)throw Ls(s);return Wd(t)?s.lanes=32:s.lanes=536870912,null}var ut=v.children;return v=v.fallback,b?(qa(),b=s.mode,ut=Fc({mode:"hidden",children:ut},b),v=ta(v,b,h,null),ut.return=s,v.return=s,ut.sibling=v,s.child=ut,v=s.child,v.memoizedState=dd(h),v.childLanes=gd(t,G,h),s.memoizedState=fd,pu(null,v)):(Fa(s),pd(s,ut))}var vt=t.memoizedState;if(vt!==null&&(ut=vt.dehydrated,ut!==null)){if(T)s.flags&256?(Fa(s),s.flags&=-257,s=md(t,s,h)):s.memoizedState!==null?(qa(),s.child=t.child,s.flags|=128,s=null):(qa(),ut=v.fallback,b=s.mode,v=Fc({mode:"visible",children:v.children},b),ut=ta(ut,b,h,null),ut.flags|=2,v.return=s,ut.return=s,v.sibling=ut,s.child=v,Ro(s,t.child,null,h),v=s.child,v.memoizedState=dd(h),v.childLanes=gd(t,G,h),s.memoizedState=fd,s=pu(null,v));else if(Fa(s),Wd(ut)){if(G=ut.nextSibling&&ut.nextSibling.dataset,G)var Lt=G.dgst;G=Lt,v=Error(l(419)),v.stack="",v.digest=G,Mo({value:v,source:null,stack:null}),s=md(t,s,h)}else if(Vn||cl(t,s,h,!1),G=(h&t.childLanes)!==0,Vn||G){if(G=hn,G!==null&&(v=go(G,h),v!==0&&v!==vt.retryLane))throw vt.retryLane=v,zi(t,v),or(G,t,v),cd;Qd(ut)||Wc(),s=md(t,s,h)}else Qd(ut)?(s.flags|=192,s.child=t.child,s=null):(t=vt.treeContext,He=Fr(ut.nextSibling),Ge=s,Ce=!0,bs=null,nr=!1,t!==null&&Bi(s,t),s=pd(s,v.children),s.flags|=4096);return s}return b?(qa(),ut=v.fallback,b=s.mode,vt=t.child,Lt=vt.sibling,v=jr(vt,{mode:"hidden",children:v.children}),v.subtreeFlags=vt.subtreeFlags&65011712,Lt!==null?ut=jr(Lt,ut):(ut=ta(ut,b,h,null),ut.flags|=2),ut.return=s,v.return=s,v.sibling=ut,s.child=v,pu(null,v),v=s.child,ut=t.child.memoizedState,ut===null?ut=dd(h):(b=ut.cachePool,b!==null?(vt=Zn._currentValue,b=b.parent!==vt?{parent:vt,pool:vt}:b):b=Hp(),ut={baseLanes:ut.baseLanes|h,cachePool:b}),v.memoizedState=ut,v.childLanes=gd(t,G,h),s.memoizedState=fd,pu(t.child,v)):(Fa(s),h=t.child,t=h.sibling,h=jr(h,{mode:"visible",children:v.children}),h.return=s,h.sibling=null,t!==null&&(G=s.deletions,G===null?(s.deletions=[t],s.flags|=16):G.push(t)),s.child=h,s.memoizedState=null,h)}function pd(t,s){return s=Fc({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Fc(t,s){return t=ki(22,t,null,s),t.lanes=0,t}function md(t,s,h){return Ro(s,t.child,null,h),t=pd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function iv(t,s,h){t.lanes|=s;var v=t.alternate;v!==null&&(v.lanes|=s),Of(t.return,s,h)}function vd(t,s,h,v,b,T){var G=t.memoizedState;G===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:v,tail:h,tailMode:b,treeForkCount:T}:(G.isBackwards=s,G.rendering=null,G.renderingStartTime=0,G.last=v,G.tail=h,G.tailMode=b,G.treeForkCount=T)}function rv(t,s,h){var v=s.pendingProps,b=v.revealOrder,T=v.tail;v=v.children;var G=jn.current,ut=(G&2)!==0;if(ut?(G=G&1|2,s.flags|=128):G&=1,ct(jn,G),yi(t,s,v,h),v=Ce?ot:0,!ut&&t!==null&&(t.flags&128)!==0)t:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iv(t,h,s);else if(t.tag===19)iv(t,h,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break t;for(;t.sibling===null;){if(t.return===null||t.return===s)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(b){case"forwards":for(h=s.child,b=null;h!==null;)t=h.alternate,t!==null&&Mc(t)===null&&(b=h),h=h.sibling;h=b,h===null?(b=s.child,s.child=null):(b=h.sibling,h.sibling=null),vd(s,!1,b,h,T,v);break;case"backwards":case"unstable_legacy-backwards":for(h=null,b=s.child,s.child=null;b!==null;){if(t=b.alternate,t!==null&&Mc(t)===null){s.child=b;break}t=b.sibling,b.sibling=h,h=b,b=t}vd(s,!0,h,null,T,v);break;case"together":vd(s,!1,null,null,void 0,v);break;default:s.memoizedState=null}return s.child}function sa(t,s,h){if(t!==null&&(s.dependencies=t.dependencies),Ya|=s.lanes,(h&s.childLanes)===0)if(t!==null){if(cl(t,s,h,!1),(h&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(l(153));if(s.child!==null){for(t=s.child,h=jr(t,t.pendingProps),s.child=h,h.return=s;t.sibling!==null;)t=t.sibling,h=h.sibling=jr(t,t.pendingProps),h.return=s;h.sibling=null}return s.child}function yd(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Ec(t)))}function gE(t,s,h){switch(s.tag){case 3:ht(s,s.stateNode.containerInfo),za(s,Zn,t.memoizedState.cache),ea();break;case 27:case 5:It(s);break;case 4:ht(s,s.stateNode.containerInfo);break;case 10:za(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Gf(s),null;break;case 13:var v=s.memoizedState;if(v!==null)return v.dehydrated!==null?(Fa(s),s.flags|=128,null):(h&s.child.childLanes)!==0?nv(t,s,h):(Fa(s),t=sa(t,s,h),t!==null?t.sibling:null);Fa(s);break;case 19:var b=(t.flags&128)!==0;if(v=(h&s.childLanes)!==0,v||(cl(t,s,h,!1),v=(h&s.childLanes)!==0),b){if(v)return rv(t,s,h);s.flags|=128}if(b=s.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ct(jn,jn.current),v)break;return null;case 22:return s.lanes=0,Wm(t,s,h,s.pendingProps);case 24:za(s,Zn,t.memoizedState.cache)}return sa(t,s,h)}function sv(t,s,h){if(t!==null)if(t.memoizedProps!==s.pendingProps)Vn=!0;else{if(!yd(t,h)&&(s.flags&128)===0)return Vn=!1,gE(t,s,h);Vn=(t.flags&131072)!==0}else Vn=!1,Ce&&(s.flags&1048576)!==0&&Ee(s,ot,s.index);switch(s.lanes=0,s.tag){case 16:t:{var v=s.pendingProps;if(t=Do(s.elementType),s.type=t,typeof t=="function")ol(t)?(v=zo(t,v),s.tag=1,s=tv(null,s,t,v,h)):(s.tag=0,s=hd(null,s,t,v,h));else{if(t!=null){var b=t.$$typeof;if(b===V){s.tag=11,s=Xm(null,s,t,v,h);break t}else if(b===W){s.tag=14,s=Vm(null,s,t,v,h);break t}}throw s=at(t)||t,Error(l(306,s,""))}}return s;case 0:return hd(t,s,s.type,s.pendingProps,h);case 1:return v=s.type,b=zo(v,s.pendingProps),tv(t,s,v,b,h);case 3:t:{if(ht(s,s.stateNode.containerInfo),t===null)throw Error(l(387));v=s.pendingProps;var T=s.memoizedState;b=T.element,Bf(t,s),cu(s,v,null,h);var G=s.memoizedState;if(v=G.cache,za(s,Zn,v),v!==T.cache&&Af(s,[Zn],h,!0),uu(),v=G.element,T.isDehydrated)if(T={element:v,isDehydrated:!1,cache:G.cache},s.updateQueue.baseState=T,s.memoizedState=T,s.flags&256){s=ev(t,s,v,h);break t}else if(v!==b){b=m(Error(l(424)),s),Mo(b),s=ev(t,s,v,h);break t}else for(t=s.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,He=Fr(t.firstChild),Ge=s,Ce=!0,bs=null,nr=!0,h=Wp(s,null,v,h),s.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(ea(),v===b){s=sa(t,s,h);break t}yi(t,s,v,h)}s=s.child}return s;case 26:return Uc(t,s),t===null?(h=my(s.type,null,s.pendingProps,null))?s.memoizedState=h:Ce||(h=s.type,t=s.pendingProps,v=ih(yt.current).createElement(h),v[Dn]=s,v[Ue]=t,_i(v,h,t),dn(v),s.stateNode=v):s.memoizedState=my(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return It(s),t===null&&Ce&&(v=s.stateNode=dy(s.type,s.pendingProps,yt.current),Ge=s,nr=!0,b=He,Wa(s.type)?(Jd=b,He=Fr(v.firstChild)):He=b),yi(t,s,s.pendingProps.children,h),Uc(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Ce&&((b=v=He)&&(v=HE(v,s.type,s.pendingProps,nr),v!==null?(s.stateNode=v,Ge=s,He=Fr(v.firstChild),nr=!1,b=!0):b=!1),b||Ls(s)),It(s),b=s.type,T=s.pendingProps,G=t!==null?t.memoizedProps:null,v=T.children,Zd(b,T)?v=null:G!==null&&Zd(b,G)&&(s.flags|=32),s.memoizedState!==null&&(b=Yf(t,s,sE,null,null,h),Nu._currentValue=b),Uc(t,s),yi(t,s,v,h),s.child;case 6:return t===null&&Ce&&((t=h=He)&&(h=YE(h,s.pendingProps,nr),h!==null?(s.stateNode=h,Ge=s,He=null,t=!0):t=!1),t||Ls(s)),null;case 13:return nv(t,s,h);case 4:return ht(s,s.stateNode.containerInfo),v=s.pendingProps,t===null?s.child=Ro(s,null,v,h):yi(t,s,v,h),s.child;case 11:return Xm(t,s,s.type,s.pendingProps,h);case 7:return yi(t,s,s.pendingProps,h),s.child;case 8:return yi(t,s,s.pendingProps.children,h),s.child;case 12:return yi(t,s,s.pendingProps.children,h),s.child;case 10:return v=s.pendingProps,za(s,s.type,v.value),yi(t,s,v.children,h),s.child;case 9:return b=s.type._context,v=s.pendingProps.children,Oo(s),b=vi(b),v=v(b),s.flags|=1,yi(t,s,v,h),s.child;case 14:return Vm(t,s,s.type,s.pendingProps,h);case 15:return Qm(t,s,s.type,s.pendingProps,h);case 19:return rv(t,s,h);case 31:return dE(t,s,h);case 22:return Wm(t,s,h,s.pendingProps);case 24:return Oo(s),v=vi(Zn),t===null?(b=Rf(),b===null&&(b=hn,T=Df(),b.pooledCache=T,T.refCount++,T!==null&&(b.pooledCacheLanes|=h),b=T),s.memoizedState={parent:v,cache:b},zf(s),za(s,Zn,b)):((t.lanes&h)!==0&&(Bf(t,s),cu(s,null,null,h),uu()),b=t.memoizedState,T=s.memoizedState,b.parent!==v?(b={parent:v,cache:v},s.memoizedState=b,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=b),za(s,Zn,v)):(v=T.cache,za(s,Zn,v),v!==b.cache&&Af(s,[Zn],h,!0))),yi(t,s,s.pendingProps.children,h),s.child;case 29:throw s.pendingProps}throw Error(l(156,s.tag))}function aa(t){t.flags|=4}function _d(t,s,h,v,b){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(b&335544128)===b)if(t.stateNode.complete)t.flags|=8192;else if(Av())t.flags|=8192;else throw Io=Lc,Pf}else t.flags&=-16777217}function av(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ey(s))if(Av())t.flags|=8192;else throw Io=Lc,Pf}function qc(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Ft():536870912,t.lanes|=s,wl|=s)}function mu(t,s){if(!Ce)switch(t.tailMode){case"hidden":s=t.tail;for(var h=null;s!==null;)s.alternate!==null&&(h=s),s=s.sibling;h===null?t.tail=null:h.sibling=null;break;case"collapsed":h=t.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:v.sibling=null}}function mn(t){var s=t.alternate!==null&&t.alternate.child===t.child,h=0,v=0;if(s)for(var b=t.child;b!==null;)h|=b.lanes|b.childLanes,v|=b.subtreeFlags&65011712,v|=b.flags&65011712,b.return=t,b=b.sibling;else for(b=t.child;b!==null;)h|=b.lanes|b.childLanes,v|=b.subtreeFlags,v|=b.flags,b.return=t,b=b.sibling;return t.subtreeFlags|=v,t.childLanes=h,s}function pE(t,s,h){var v=s.pendingProps;switch(In(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(s),null;case 1:return mn(s),null;case 3:return h=s.stateNode,v=null,t!==null&&(v=t.memoizedState.cache),s.memoizedState.cache!==v&&(s.flags|=2048),na(Zn),Dt(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(t===null||t.child===null)&&(ss(s)?aa(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,iu())),mn(s),null;case 26:var b=s.type,T=s.memoizedState;return t===null?(aa(s),T!==null?(mn(s),av(s,T)):(mn(s),_d(s,b,null,v,h))):T?T!==t.memoizedState?(aa(s),mn(s),av(s,T)):(mn(s),s.flags&=-16777217):(t=t.memoizedProps,t!==v&&aa(s),mn(s),_d(s,b,t,v,h)),null;case 27:if(Mt(s),h=yt.current,b=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==v&&aa(s);else{if(!v){if(s.stateNode===null)throw Error(l(166));return mn(s),null}t=gt.current,ss(s)?nu(s):(t=dy(b,v,h),s.stateNode=t,aa(s))}return mn(s),null;case 5:if(Mt(s),b=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==v&&aa(s);else{if(!v){if(s.stateNode===null)throw Error(l(166));return mn(s),null}if(T=gt.current,ss(s))nu(s);else{var G=ih(yt.current);switch(T){case 1:T=G.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:T=G.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":T=G.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":T=G.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":T=G.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof v.is=="string"?G.createElement("select",{is:v.is}):G.createElement("select"),v.multiple?T.multiple=!0:v.size&&(T.size=v.size);break;default:T=typeof v.is=="string"?G.createElement(b,{is:v.is}):G.createElement(b)}}T[Dn]=s,T[Ue]=v;t:for(G=s.child;G!==null;){if(G.tag===5||G.tag===6)T.appendChild(G.stateNode);else if(G.tag!==4&&G.tag!==27&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===s)break t;for(;G.sibling===null;){if(G.return===null||G.return===s)break t;G=G.return}G.sibling.return=G.return,G=G.sibling}s.stateNode=T;t:switch(_i(T,b,v),b){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break t;case"img":v=!0;break t;default:v=!1}v&&aa(s)}}return mn(s),_d(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,h),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==v&&aa(s);else{if(typeof v!="string"&&s.stateNode===null)throw Error(l(166));if(t=yt.current,ss(s)){if(t=s.stateNode,h=s.memoizedProps,v=null,b=Ge,b!==null)switch(b.tag){case 27:case 5:v=b.memoizedProps}t[Dn]=s,t=!!(t.nodeValue===h||v!==null&&v.suppressHydrationWarning===!0||ny(t.nodeValue,h)),t||Ls(s,!0)}else t=ih(t).createTextNode(v),t[Dn]=s,s.stateNode=t}return mn(s),null;case 31:if(h=s.memoizedState,t===null||t.memoizedState!==null){if(v=ss(s),h!==null){if(t===null){if(!v)throw Error(l(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(557));t[Dn]=s}else ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;mn(s),t=!1}else h=iu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),t=!0;if(!t)return s.flags&256?(Sr(s),s):(Sr(s),null);if((s.flags&128)!==0)throw Error(l(558))}return mn(s),null;case 13:if(v=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(b=ss(s),v!==null&&v.dehydrated!==null){if(t===null){if(!b)throw Error(l(318));if(b=s.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(l(317));b[Dn]=s}else ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;mn(s),b=!1}else b=iu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=b),b=!0;if(!b)return s.flags&256?(Sr(s),s):(Sr(s),null)}return Sr(s),(s.flags&128)!==0?(s.lanes=h,s):(h=v!==null,t=t!==null&&t.memoizedState!==null,h&&(v=s.child,b=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(b=v.alternate.memoizedState.cachePool.pool),T=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(T=v.memoizedState.cachePool.pool),T!==b&&(v.flags|=2048)),h!==t&&h&&(s.child.flags|=8192),qc(s,s.updateQueue),mn(s),null);case 4:return Dt(),t===null&&Fd(s.stateNode.containerInfo),mn(s),null;case 10:return na(s.type),mn(s),null;case 19:if(K(jn),v=s.memoizedState,v===null)return mn(s),null;if(b=(s.flags&128)!==0,T=v.rendering,T===null)if(b)mu(v,!1);else{if(Pn!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(T=Mc(t),T!==null){for(s.flags|=128,mu(v,!1),t=T.updateQueue,s.updateQueue=t,qc(s,t),s.subtreeFlags=0,t=h,h=s.child;h!==null;)$l(h,t),h=h.sibling;return ct(jn,jn.current&1|2),Ce&&ne(s,v.treeForkCount),s.child}t=t.sibling}v.tail!==null&&Yt()>Xc&&(s.flags|=128,b=!0,mu(v,!1),s.lanes=4194304)}else{if(!b)if(t=Mc(T),t!==null){if(s.flags|=128,b=!0,t=t.updateQueue,s.updateQueue=t,qc(s,t),mu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!Ce)return mn(s),null}else 2*Yt()-v.renderingStartTime>Xc&&h!==536870912&&(s.flags|=128,b=!0,mu(v,!1),s.lanes=4194304);v.isBackwards?(T.sibling=s.child,s.child=T):(t=v.last,t!==null?t.sibling=T:s.child=T,v.last=T)}return v.tail!==null?(t=v.tail,v.rendering=t,v.tail=t.sibling,v.renderingStartTime=Yt(),t.sibling=null,h=jn.current,ct(jn,b?h&1|2:h&1),Ce&&ne(s,v.treeForkCount),t):(mn(s),null);case 22:case 23:return Sr(s),qf(),v=s.memoizedState!==null,t!==null?t.memoizedState!==null!==v&&(s.flags|=8192):v&&(s.flags|=8192),v?(h&536870912)!==0&&(s.flags&128)===0&&(mn(s),s.subtreeFlags&6&&(s.flags|=8192)):mn(s),h=s.updateQueue,h!==null&&qc(s,h.retryQueue),h=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(h=t.memoizedState.cachePool.pool),v=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(v=s.memoizedState.cachePool.pool),v!==h&&(s.flags|=2048),t!==null&&K(Ao),null;case 24:return h=null,t!==null&&(h=t.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),na(Zn),mn(s),null;case 25:return null;case 30:return null}throw Error(l(156,s.tag))}function mE(t,s){switch(In(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return na(Zn),Dt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Mt(s),null;case 31:if(s.memoizedState!==null){if(Sr(s),s.alternate===null)throw Error(l(340));ea()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Sr(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(l(340));ea()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return K(jn),null;case 4:return Dt(),null;case 10:return na(s.type),null;case 22:case 23:return Sr(s),qf(),t!==null&&K(Ao),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return na(Zn),null;case 25:return null;default:return null}}function ov(t,s){switch(In(s),s.tag){case 3:na(Zn),Dt();break;case 26:case 27:case 5:Mt(s);break;case 4:Dt();break;case 31:s.memoizedState!==null&&Sr(s);break;case 13:Sr(s);break;case 19:K(jn);break;case 10:na(s.type);break;case 22:case 23:Sr(s),qf(),t!==null&&K(Ao);break;case 24:na(Zn)}}function vu(t,s){try{var h=s.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var b=v.next;h=b;do{if((h.tag&t)===t){v=void 0;var T=h.create,G=h.inst;v=T(),G.destroy=v}h=h.next}while(h!==b)}}catch(ut){nn(s,s.return,ut)}}function Ga(t,s,h){try{var v=s.updateQueue,b=v!==null?v.lastEffect:null;if(b!==null){var T=b.next;v=T;do{if((v.tag&t)===t){var G=v.inst,ut=G.destroy;if(ut!==void 0){G.destroy=void 0,b=s;var vt=h,Lt=ut;try{Lt()}catch(Ot){nn(b,vt,Ot)}}}v=v.next}while(v!==T)}}catch(Ot){nn(s,s.return,Ot)}}function lv(t){var s=t.updateQueue;if(s!==null){var h=t.stateNode;try{Kp(s,h)}catch(v){nn(t,t.return,v)}}}function uv(t,s,h){h.props=zo(t.type,t.memoizedProps),h.state=t.memoizedState;try{h.componentWillUnmount()}catch(v){nn(t,s,v)}}function yu(t,s){try{var h=t.ref;if(h!==null){switch(t.tag){case 26:case 27:case 5:var v=t.stateNode;break;case 30:v=t.stateNode;break;default:v=t.stateNode}typeof h=="function"?t.refCleanup=h(v):h.current=v}}catch(b){nn(t,s,b)}}function Cs(t,s){var h=t.ref,v=t.refCleanup;if(h!==null)if(typeof v=="function")try{v()}catch(b){nn(t,s,b)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(b){nn(t,s,b)}else h.current=null}function cv(t){var s=t.type,h=t.memoizedProps,v=t.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":h.autoFocus&&v.focus();break t;case"img":h.src?v.src=h.src:h.srcSet&&(v.srcset=h.srcSet)}}catch(b){nn(t,t.return,b)}}function xd(t,s,h){try{var v=t.stateNode;BE(v,t.type,h,s),v[Ue]=s}catch(b){nn(t,t.return,b)}}function hv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Wa(t.type)||t.tag===4}function Ed(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||hv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Wa(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wd(t,s,h){var v=t.tag;if(v===5||v===6)t=t.stateNode,s?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(t,s):(s=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,s.appendChild(t),h=h._reactRootContainer,h!=null||s.onclick!==null||(s.onclick=ui));else if(v!==4&&(v===27&&Wa(t.type)&&(h=t.stateNode,s=null),t=t.child,t!==null))for(wd(t,s,h),t=t.sibling;t!==null;)wd(t,s,h),t=t.sibling}function Gc(t,s,h){var v=t.tag;if(v===5||v===6)t=t.stateNode,s?h.insertBefore(t,s):h.appendChild(t);else if(v!==4&&(v===27&&Wa(t.type)&&(h=t.stateNode),t=t.child,t!==null))for(Gc(t,s,h),t=t.sibling;t!==null;)Gc(t,s,h),t=t.sibling}function fv(t){var s=t.stateNode,h=t.memoizedProps;try{for(var v=t.type,b=s.attributes;b.length;)s.removeAttributeNode(b[0]);_i(s,v,h),s[Dn]=t,s[Ue]=h}catch(T){nn(t,t.return,T)}}var oa=!1,Qn=!1,Sd=!1,dv=typeof WeakSet=="function"?WeakSet:Set,ci=null;function vE(t,s){if(t=t.containerInfo,Hd=ch,t=Hn(t),Bn(t)){if("selectionStart"in t)var h={start:t.selectionStart,end:t.selectionEnd};else t:{h=(h=t.ownerDocument)&&h.defaultView||window;var v=h.getSelection&&h.getSelection();if(v&&v.rangeCount!==0){h=v.anchorNode;var b=v.anchorOffset,T=v.focusNode;v=v.focusOffset;try{h.nodeType,T.nodeType}catch{h=null;break t}var G=0,ut=-1,vt=-1,Lt=0,Ot=0,zt=t,kt=null;e:for(;;){for(var Nt;zt!==h||b!==0&&zt.nodeType!==3||(ut=G+b),zt!==T||v!==0&&zt.nodeType!==3||(vt=G+v),zt.nodeType===3&&(G+=zt.nodeValue.length),(Nt=zt.firstChild)!==null;)kt=zt,zt=Nt;for(;;){if(zt===t)break e;if(kt===h&&++Lt===b&&(ut=G),kt===T&&++Ot===v&&(vt=G),(Nt=zt.nextSibling)!==null)break;zt=kt,kt=zt.parentNode}zt=Nt}h=ut===-1||vt===-1?null:{start:ut,end:vt}}else h=null}h=h||{start:0,end:0}}else h=null;for(Yd={focusedElem:t,selectionRange:h},ch=!1,ci=s;ci!==null;)if(s=ci,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ci=t;else for(;ci!==null;){switch(s=ci,T=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(h=0;h<t.length;h++)b=t[h],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&T!==null){t=void 0,h=s,b=T.memoizedProps,T=T.memoizedState,v=h.stateNode;try{var Wt=zo(h.type,b);t=v.getSnapshotBeforeUpdate(Wt,T),v.__reactInternalSnapshotBeforeUpdate=t}catch(oe){nn(h,h.return,oe)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,h=t.nodeType,h===9)Vd(t);else if(h===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(l(163))}if(t=s.sibling,t!==null){t.return=s.return,ci=t;break}ci=s.return}}function gv(t,s,h){var v=h.flags;switch(h.tag){case 0:case 11:case 15:ua(t,h),v&4&&vu(5,h);break;case 1:if(ua(t,h),v&4)if(t=h.stateNode,s===null)try{t.componentDidMount()}catch(G){nn(h,h.return,G)}else{var b=zo(h.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(b,s,t.__reactInternalSnapshotBeforeUpdate)}catch(G){nn(h,h.return,G)}}v&64&&lv(h),v&512&&yu(h,h.return);break;case 3:if(ua(t,h),v&64&&(t=h.updateQueue,t!==null)){if(s=null,h.child!==null)switch(h.child.tag){case 27:case 5:s=h.child.stateNode;break;case 1:s=h.child.stateNode}try{Kp(t,s)}catch(G){nn(h,h.return,G)}}break;case 27:s===null&&v&4&&fv(h);case 26:case 5:ua(t,h),s===null&&v&4&&cv(h),v&512&&yu(h,h.return);break;case 12:ua(t,h);break;case 31:ua(t,h),v&4&&vv(t,h);break;case 13:ua(t,h),v&4&&yv(t,h),v&64&&(t=h.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(h=TE.bind(null,h),ZE(t,h))));break;case 22:if(v=h.memoizedState!==null||oa,!v){s=s!==null&&s.memoizedState!==null||Qn,b=oa;var T=Qn;oa=v,(Qn=s)&&!T?ca(t,h,(h.subtreeFlags&8772)!==0):ua(t,h),oa=b,Qn=T}break;case 30:break;default:ua(t,h)}}function pv(t){var s=t.alternate;s!==null&&(t.alternate=null,pv(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Wr(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var wn=null,ir=!1;function la(t,s,h){for(h=h.child;h!==null;)mv(t,s,h),h=h.sibling}function mv(t,s,h){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(_n,h)}catch{}switch(h.tag){case 26:Qn||Cs(h,s),la(t,s,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Qn||Cs(h,s);var v=wn,b=ir;Wa(h.type)&&(wn=h.stateNode,ir=!1),la(t,s,h),Cu(h.stateNode),wn=v,ir=b;break;case 5:Qn||Cs(h,s);case 6:if(v=wn,b=ir,wn=null,la(t,s,h),wn=v,ir=b,wn!==null)if(ir)try{(wn.nodeType===9?wn.body:wn.nodeName==="HTML"?wn.ownerDocument.body:wn).removeChild(h.stateNode)}catch(T){nn(h,s,T)}else try{wn.removeChild(h.stateNode)}catch(T){nn(h,s,T)}break;case 18:wn!==null&&(ir?(t=wn,ly(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,h.stateNode),Nl(t)):ly(wn,h.stateNode));break;case 4:v=wn,b=ir,wn=h.stateNode.containerInfo,ir=!0,la(t,s,h),wn=v,ir=b;break;case 0:case 11:case 14:case 15:Ga(2,h,s),Qn||Ga(4,h,s),la(t,s,h);break;case 1:Qn||(Cs(h,s),v=h.stateNode,typeof v.componentWillUnmount=="function"&&uv(h,s,v)),la(t,s,h);break;case 21:la(t,s,h);break;case 22:Qn=(v=Qn)||h.memoizedState!==null,la(t,s,h),Qn=v;break;default:la(t,s,h)}}function vv(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Nl(t)}catch(h){nn(s,s.return,h)}}}function yv(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Nl(t)}catch(h){nn(s,s.return,h)}}function yE(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new dv),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new dv),s;default:throw Error(l(435,t.tag))}}function Hc(t,s){var h=yE(t);s.forEach(function(v){if(!h.has(v)){h.add(v);var b=CE.bind(null,t,v);v.then(b,b)}})}function rr(t,s){var h=s.deletions;if(h!==null)for(var v=0;v<h.length;v++){var b=h[v],T=t,G=s,ut=G;t:for(;ut!==null;){switch(ut.tag){case 27:if(Wa(ut.type)){wn=ut.stateNode,ir=!1;break t}break;case 5:wn=ut.stateNode,ir=!1;break t;case 3:case 4:wn=ut.stateNode.containerInfo,ir=!0;break t}ut=ut.return}if(wn===null)throw Error(l(160));mv(T,G,b),wn=null,ir=!1,T=b.alternate,T!==null&&(T.return=null),b.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)_v(s,t),s=s.sibling}var os=null;function _v(t,s){var h=t.alternate,v=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:rr(s,t),sr(t),v&4&&(Ga(3,t,t.return),vu(3,t),Ga(5,t,t.return));break;case 1:rr(s,t),sr(t),v&512&&(Qn||h===null||Cs(h,h.return)),v&64&&oa&&(t=t.updateQueue,t!==null&&(v=t.callbacks,v!==null&&(h=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=h===null?v:h.concat(v))));break;case 26:var b=os;if(rr(s,t),sr(t),v&512&&(Qn||h===null||Cs(h,h.return)),v&4){var T=h!==null?h.memoizedState:null;if(v=t.memoizedState,h===null)if(v===null)if(t.stateNode===null){t:{v=t.type,h=t.memoizedProps,b=b.ownerDocument||b;e:switch(v){case"title":T=b.getElementsByTagName("title")[0],(!T||T[Mr]||T[Dn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=b.createElement(v),b.head.insertBefore(T,b.querySelector("head > title"))),_i(T,v,h),T[Dn]=t,dn(T),v=T;break t;case"link":var G=_y("link","href",b).get(v+(h.href||""));if(G){for(var ut=0;ut<G.length;ut++)if(T=G[ut],T.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&T.getAttribute("rel")===(h.rel==null?null:h.rel)&&T.getAttribute("title")===(h.title==null?null:h.title)&&T.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){G.splice(ut,1);break e}}T=b.createElement(v),_i(T,v,h),b.head.appendChild(T);break;case"meta":if(G=_y("meta","content",b).get(v+(h.content||""))){for(ut=0;ut<G.length;ut++)if(T=G[ut],T.getAttribute("content")===(h.content==null?null:""+h.content)&&T.getAttribute("name")===(h.name==null?null:h.name)&&T.getAttribute("property")===(h.property==null?null:h.property)&&T.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&T.getAttribute("charset")===(h.charSet==null?null:h.charSet)){G.splice(ut,1);break e}}T=b.createElement(v),_i(T,v,h),b.head.appendChild(T);break;default:throw Error(l(468,v))}T[Dn]=t,dn(T),v=T}t.stateNode=v}else xy(b,t.type,t.stateNode);else t.stateNode=yy(b,v,t.memoizedProps);else T!==v?(T===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):T.count--,v===null?xy(b,t.type,t.stateNode):yy(b,v,t.memoizedProps)):v===null&&t.stateNode!==null&&xd(t,t.memoizedProps,h.memoizedProps)}break;case 27:rr(s,t),sr(t),v&512&&(Qn||h===null||Cs(h,h.return)),h!==null&&v&4&&xd(t,t.memoizedProps,h.memoizedProps);break;case 5:if(rr(s,t),sr(t),v&512&&(Qn||h===null||Cs(h,h.return)),t.flags&32){b=t.stateNode;try{Di(b,"")}catch(Wt){nn(t,t.return,Wt)}}v&4&&t.stateNode!=null&&(b=t.memoizedProps,xd(t,b,h!==null?h.memoizedProps:b)),v&1024&&(Sd=!0);break;case 6:if(rr(s,t),sr(t),v&4){if(t.stateNode===null)throw Error(l(162));v=t.memoizedProps,h=t.stateNode;try{h.nodeValue=v}catch(Wt){nn(t,t.return,Wt)}}break;case 3:if(ah=null,b=os,os=rh(s.containerInfo),rr(s,t),os=b,sr(t),v&4&&h!==null&&h.memoizedState.isDehydrated)try{Nl(s.containerInfo)}catch(Wt){nn(t,t.return,Wt)}Sd&&(Sd=!1,xv(t));break;case 4:v=os,os=rh(t.stateNode.containerInfo),rr(s,t),sr(t),os=v;break;case 12:rr(s,t),sr(t);break;case 31:rr(s,t),sr(t),v&4&&(v=t.updateQueue,v!==null&&(t.updateQueue=null,Hc(t,v)));break;case 13:rr(s,t),sr(t),t.child.flags&8192&&t.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Zc=Yt()),v&4&&(v=t.updateQueue,v!==null&&(t.updateQueue=null,Hc(t,v)));break;case 22:b=t.memoizedState!==null;var vt=h!==null&&h.memoizedState!==null,Lt=oa,Ot=Qn;if(oa=Lt||b,Qn=Ot||vt,rr(s,t),Qn=Ot,oa=Lt,sr(t),v&8192)t:for(s=t.stateNode,s._visibility=b?s._visibility&-2:s._visibility|1,b&&(h===null||vt||oa||Qn||Bo(t)),h=null,s=t;;){if(s.tag===5||s.tag===26){if(h===null){vt=h=s;try{if(T=vt.stateNode,b)G=T.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{ut=vt.stateNode;var zt=vt.memoizedProps.style,kt=zt!=null&&zt.hasOwnProperty("display")?zt.display:null;ut.style.display=kt==null||typeof kt=="boolean"?"":(""+kt).trim()}}catch(Wt){nn(vt,vt.return,Wt)}}}else if(s.tag===6){if(h===null){vt=s;try{vt.stateNode.nodeValue=b?"":vt.memoizedProps}catch(Wt){nn(vt,vt.return,Wt)}}}else if(s.tag===18){if(h===null){vt=s;try{var Nt=vt.stateNode;b?uy(Nt,!0):uy(vt.stateNode,!1)}catch(Wt){nn(vt,vt.return,Wt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;h===s&&(h=null),s=s.return}h===s&&(h=null),s.sibling.return=s.return,s=s.sibling}v&4&&(v=t.updateQueue,v!==null&&(h=v.retryQueue,h!==null&&(v.retryQueue=null,Hc(t,h))));break;case 19:rr(s,t),sr(t),v&4&&(v=t.updateQueue,v!==null&&(t.updateQueue=null,Hc(t,v)));break;case 30:break;case 21:break;default:rr(s,t),sr(t)}}function sr(t){var s=t.flags;if(s&2){try{for(var h,v=t.return;v!==null;){if(hv(v)){h=v;break}v=v.return}if(h==null)throw Error(l(160));switch(h.tag){case 27:var b=h.stateNode,T=Ed(t);Gc(t,T,b);break;case 5:var G=h.stateNode;h.flags&32&&(Di(G,""),h.flags&=-33);var ut=Ed(t);Gc(t,ut,G);break;case 3:case 4:var vt=h.stateNode.containerInfo,Lt=Ed(t);wd(t,Lt,vt);break;default:throw Error(l(161))}}catch(Ot){nn(t,t.return,Ot)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function xv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;xv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function ua(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)gv(t,s.alternate,s),s=s.sibling}function Bo(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Ga(4,s,s.return),Bo(s);break;case 1:Cs(s,s.return);var h=s.stateNode;typeof h.componentWillUnmount=="function"&&uv(s,s.return,h),Bo(s);break;case 27:Cu(s.stateNode);case 26:case 5:Cs(s,s.return),Bo(s);break;case 22:s.memoizedState===null&&Bo(s);break;case 30:Bo(s);break;default:Bo(s)}t=t.sibling}}function ca(t,s,h){for(h=h&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var v=s.alternate,b=t,T=s,G=T.flags;switch(T.tag){case 0:case 11:case 15:ca(b,T,h),vu(4,T);break;case 1:if(ca(b,T,h),v=T,b=v.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Lt){nn(v,v.return,Lt)}if(v=T,b=v.updateQueue,b!==null){var ut=v.stateNode;try{var vt=b.shared.hiddenCallbacks;if(vt!==null)for(b.shared.hiddenCallbacks=null,b=0;b<vt.length;b++)Jp(vt[b],ut)}catch(Lt){nn(v,v.return,Lt)}}h&&G&64&&lv(T),yu(T,T.return);break;case 27:fv(T);case 26:case 5:ca(b,T,h),h&&v===null&&G&4&&cv(T),yu(T,T.return);break;case 12:ca(b,T,h);break;case 31:ca(b,T,h),h&&G&4&&vv(b,T);break;case 13:ca(b,T,h),h&&G&4&&yv(b,T);break;case 22:T.memoizedState===null&&ca(b,T,h),yu(T,T.return);break;case 30:break;default:ca(b,T,h)}s=s.sibling}}function bd(t,s){var h=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(h=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==h&&(t!=null&&t.refCount++,h!=null&&ru(h))}function Ld(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&ru(t))}function ls(t,s,h,v){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ev(t,s,h,v),s=s.sibling}function Ev(t,s,h,v){var b=s.flags;switch(s.tag){case 0:case 11:case 15:ls(t,s,h,v),b&2048&&vu(9,s);break;case 1:ls(t,s,h,v);break;case 3:ls(t,s,h,v),b&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&ru(t)));break;case 12:if(b&2048){ls(t,s,h,v),t=s.stateNode;try{var T=s.memoizedProps,G=T.id,ut=T.onPostCommit;typeof ut=="function"&&ut(G,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(vt){nn(s,s.return,vt)}}else ls(t,s,h,v);break;case 31:ls(t,s,h,v);break;case 13:ls(t,s,h,v);break;case 23:break;case 22:T=s.stateNode,G=s.alternate,s.memoizedState!==null?T._visibility&2?ls(t,s,h,v):_u(t,s):T._visibility&2?ls(t,s,h,v):(T._visibility|=2,_l(t,s,h,v,(s.subtreeFlags&10256)!==0||!1)),b&2048&&bd(G,s);break;case 24:ls(t,s,h,v),b&2048&&Ld(s.alternate,s);break;default:ls(t,s,h,v)}}function _l(t,s,h,v,b){for(b=b&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var T=t,G=s,ut=h,vt=v,Lt=G.flags;switch(G.tag){case 0:case 11:case 15:_l(T,G,ut,vt,b),vu(8,G);break;case 23:break;case 22:var Ot=G.stateNode;G.memoizedState!==null?Ot._visibility&2?_l(T,G,ut,vt,b):_u(T,G):(Ot._visibility|=2,_l(T,G,ut,vt,b)),b&&Lt&2048&&bd(G.alternate,G);break;case 24:_l(T,G,ut,vt,b),b&&Lt&2048&&Ld(G.alternate,G);break;default:_l(T,G,ut,vt,b)}s=s.sibling}}function _u(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var h=t,v=s,b=v.flags;switch(v.tag){case 22:_u(h,v),b&2048&&bd(v.alternate,v);break;case 24:_u(h,v),b&2048&&Ld(v.alternate,v);break;default:_u(h,v)}s=s.sibling}}var xu=8192;function xl(t,s,h){if(t.subtreeFlags&xu)for(t=t.child;t!==null;)wv(t,s,h),t=t.sibling}function wv(t,s,h){switch(t.tag){case 26:xl(t,s,h),t.flags&xu&&t.memoizedState!==null&&rw(h,os,t.memoizedState,t.memoizedProps);break;case 5:xl(t,s,h);break;case 3:case 4:var v=os;os=rh(t.stateNode.containerInfo),xl(t,s,h),os=v;break;case 22:t.memoizedState===null&&(v=t.alternate,v!==null&&v.memoizedState!==null?(v=xu,xu=16777216,xl(t,s,h),xu=v):xl(t,s,h));break;default:xl(t,s,h)}}function Sv(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Eu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var h=0;h<s.length;h++){var v=s[h];ci=v,Lv(v,t)}Sv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)bv(t),t=t.sibling}function bv(t){switch(t.tag){case 0:case 11:case 15:Eu(t),t.flags&2048&&Ga(9,t,t.return);break;case 3:Eu(t);break;case 12:Eu(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Yc(t)):Eu(t);break;default:Eu(t)}}function Yc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var h=0;h<s.length;h++){var v=s[h];ci=v,Lv(v,t)}Sv(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Ga(8,s,s.return),Yc(s);break;case 22:h=s.stateNode,h._visibility&2&&(h._visibility&=-3,Yc(s));break;default:Yc(s)}t=t.sibling}}function Lv(t,s){for(;ci!==null;){var h=ci;switch(h.tag){case 0:case 11:case 15:Ga(8,h,s);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var v=h.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:ru(h.memoizedState.cache)}if(v=h.child,v!==null)v.return=h,ci=v;else t:for(h=t;ci!==null;){v=ci;var b=v.sibling,T=v.return;if(pv(v),v===h){ci=null;break t}if(b!==null){b.return=T,ci=b;break t}ci=T}}}var _E={getCacheForType:function(t){var s=vi(Zn),h=s.data.get(t);return h===void 0&&(h=t(),s.data.set(t,h)),h},cacheSignal:function(){return vi(Zn).controller.signal}},xE=typeof WeakMap=="function"?WeakMap:Map,Je=0,hn=null,ke=null,Oe=0,en=0,br=null,Ha=!1,El=!1,Td=!1,ha=0,Pn=0,Ya=0,jo=0,Cd=0,Lr=0,wl=0,wu=null,ar=null,kd=!1,Zc=0,Tv=0,Xc=1/0,Vc=null,Za=null,ai=0,Xa=null,Sl=null,fa=0,Md=0,Nd=null,Cv=null,Su=0,Od=null;function Tr(){return(Je&2)!==0&&Oe!==0?Oe&-Oe:D.T!==null?zd():ds()}function kv(){if(Lr===0)if((Oe&536870912)===0||Ce){var t=li;li<<=1,(li&3932160)===0&&(li=262144),Lr=t}else Lr=536870912;return t=wr.current,t!==null&&(t.flags|=32),Lr}function or(t,s,h){(t===hn&&(en===2||en===9)||t.cancelPendingCommit!==null)&&(bl(t,0),Va(t,Oe,Lr,!1)),Gi(t,h),((Je&2)===0||t!==hn)&&(t===hn&&((Je&2)===0&&(jo|=h),Pn===4&&Va(t,Oe,Lr,!1)),ks(t))}function Mv(t,s,h){if((Je&6)!==0)throw Error(l(327));var v=!h&&(s&127)===0&&(s&t.expiredLanes)===0||hs(t,s),b=v?SE(t,s):Dd(t,s,!0),T=v;do{if(b===0){El&&!v&&Va(t,s,0,!1);break}else{if(h=t.current.alternate,T&&!EE(h)){b=Dd(t,s,!1),T=!1;continue}if(b===2){if(T=s,t.errorRecoveryDisabledLanes&T)var G=0;else G=t.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){s=G;t:{var ut=t;b=wu;var vt=ut.current.memoizedState.isDehydrated;if(vt&&(bl(ut,G).flags|=256),G=Dd(ut,G,!1),G!==2){if(Td&&!vt){ut.errorRecoveryDisabledLanes|=T,jo|=T,b=4;break t}T=ar,ar=b,T!==null&&(ar===null?ar=T:ar.push.apply(ar,T))}b=G}if(T=!1,b!==2)continue}}if(b===1){bl(t,0),Va(t,s,0,!0);break}t:{switch(v=t,T=b,T){case 0:case 1:throw Error(l(345));case 4:if((s&4194048)!==s)break;case 6:Va(v,s,Lr,!Ha);break t;case 2:ar=null;break;case 3:case 5:break;default:throw Error(l(329))}if((s&62914560)===s&&(b=Zc+300-Yt(),10<b)){if(Va(v,s,Lr,!Ha),wa(v,0,!0)!==0)break t;fa=s,v.timeoutHandle=ay(Nv.bind(null,v,h,ar,Vc,kd,s,Lr,jo,wl,Ha,T,"Throttled",-0,0),b);break t}Nv(v,h,ar,Vc,kd,s,Lr,jo,wl,Ha,T,null,-0,0)}}break}while(!0);ks(t)}function Nv(t,s,h,v,b,T,G,ut,vt,Lt,Ot,zt,kt,Nt){if(t.timeoutHandle=-1,zt=s.subtreeFlags,zt&8192||(zt&16785408)===16785408){zt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ui},wv(s,T,zt);var Wt=(T&62914560)===T?Zc-Yt():(T&4194048)===T?Tv-Yt():0;if(Wt=sw(zt,Wt),Wt!==null){fa=T,t.cancelPendingCommit=Wt(Bv.bind(null,t,s,T,h,v,b,G,ut,vt,Ot,zt,null,kt,Nt)),Va(t,T,G,!Lt);return}}Bv(t,s,T,h,v,b,G,ut,vt)}function EE(t){for(var s=t;;){var h=s.tag;if((h===0||h===11||h===15)&&s.flags&16384&&(h=s.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var v=0;v<h.length;v++){var b=h[v],T=b.getSnapshot;b=b.value;try{if(!Gn(T(),b))return!1}catch{return!1}}if(h=s.child,s.subtreeFlags&16384&&h!==null)h.return=s,s=h;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Va(t,s,h,v){s&=~Cd,s&=~jo,t.suspendedLanes|=s,t.pingedLanes&=~s,v&&(t.warmLanes|=s),v=t.expirationTimes;for(var b=s;0<b;){var T=31-di(b),G=1<<T;v[T]=-1,b&=~G}h!==0&&fo(t,h,s)}function Qc(){return(Je&6)===0?(bu(0),!1):!0}function Ad(){if(ke!==null){if(en===0)var t=ke.return;else t=ke,as=Ts=null,Vf(t),gl=null,au=0,t=ke;for(;t!==null;)ov(t.alternate,t),t=t.return;ke=null}}function bl(t,s){var h=t.timeoutHandle;h!==-1&&(t.timeoutHandle=-1,FE(h)),h=t.cancelPendingCommit,h!==null&&(t.cancelPendingCommit=null,h()),fa=0,Ad(),hn=t,ke=h=jr(t.current,null),Oe=s,en=0,br=null,Ha=!1,El=hs(t,s),Td=!1,wl=Lr=Cd=jo=Ya=Pn=0,ar=wu=null,kd=!1,(s&8)!==0&&(s|=s&32);var v=t.entangledLanes;if(v!==0)for(t=t.entanglements,v&=s;0<v;){var b=31-di(v),T=1<<b;s|=t[b],v&=~T}return ha=s,Ss(),h}function Ov(t,s){_e=null,D.H=gu,s===dl||s===bc?(s=Xp(),en=3):s===Pf?(s=Xp(),en=4):en=s===cd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,br=s,ke===null&&(Pn=1,Bc(t,m(s,t.current)))}function Av(){var t=wr.current;return t===null?!0:(Oe&4194048)===Oe?Ur===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?t===Ur:!1}function Dv(){var t=D.H;return D.H=gu,t===null?gu:t}function Iv(){var t=D.A;return D.A=_E,t}function Wc(){Pn=4,Ha||(Oe&4194048)!==Oe&&wr.current!==null||(El=!0),(Ya&134217727)===0&&(jo&134217727)===0||hn===null||Va(hn,Oe,Lr,!1)}function Dd(t,s,h){var v=Je;Je|=2;var b=Dv(),T=Iv();(hn!==t||Oe!==s)&&(Vc=null,bl(t,s)),s=!1;var G=Pn;t:do try{if(en!==0&&ke!==null){var ut=ke,vt=br;switch(en){case 8:Ad(),G=6;break t;case 3:case 2:case 9:case 6:wr.current===null&&(s=!0);var Lt=en;if(en=0,br=null,Ll(t,ut,vt,Lt),h&&El){G=0;break t}break;default:Lt=en,en=0,br=null,Ll(t,ut,vt,Lt)}}wE(),G=Pn;break}catch(Ot){Ov(t,Ot)}while(!0);return s&&t.shellSuspendCounter++,as=Ts=null,Je=v,D.H=b,D.A=T,ke===null&&(hn=null,Oe=0,Ss()),G}function wE(){for(;ke!==null;)Rv(ke)}function SE(t,s){var h=Je;Je|=2;var v=Dv(),b=Iv();hn!==t||Oe!==s?(Vc=null,Xc=Yt()+500,bl(t,s)):El=hs(t,s);t:do try{if(en!==0&&ke!==null){s=ke;var T=br;e:switch(en){case 1:en=0,br=null,Ll(t,s,T,1);break;case 2:case 9:if(Yp(T)){en=0,br=null,Pv(s);break}s=function(){en!==2&&en!==9||hn!==t||(en=7),ks(t)},T.then(s,s);break t;case 3:en=7;break t;case 4:en=5;break t;case 7:Yp(T)?(en=0,br=null,Pv(s)):(en=0,br=null,Ll(t,s,T,7));break;case 5:var G=null;switch(ke.tag){case 26:G=ke.memoizedState;case 5:case 27:var ut=ke;if(G?Ey(G):ut.stateNode.complete){en=0,br=null;var vt=ut.sibling;if(vt!==null)ke=vt;else{var Lt=ut.return;Lt!==null?(ke=Lt,Jc(Lt)):ke=null}break e}}en=0,br=null,Ll(t,s,T,5);break;case 6:en=0,br=null,Ll(t,s,T,6);break;case 8:Ad(),Pn=6;break t;default:throw Error(l(462))}}bE();break}catch(Ot){Ov(t,Ot)}while(!0);return as=Ts=null,D.H=v,D.A=b,Je=h,ke!==null?0:(hn=null,Oe=0,Ss(),Pn)}function bE(){for(;ke!==null&&!pn();)Rv(ke)}function Rv(t){var s=sv(t.alternate,t,ha);t.memoizedProps=t.pendingProps,s===null?Jc(t):ke=s}function Pv(t){var s=t,h=s.alternate;switch(s.tag){case 15:case 0:s=$m(h,s,s.pendingProps,s.type,void 0,Oe);break;case 11:s=$m(h,s,s.pendingProps,s.type.render,s.ref,Oe);break;case 5:Vf(s);default:ov(h,s),s=ke=$l(s,ha),s=sv(h,s,ha)}t.memoizedProps=t.pendingProps,s===null?Jc(t):ke=s}function Ll(t,s,h,v){as=Ts=null,Vf(s),gl=null,au=0;var b=s.return;try{if(fE(t,b,s,h,Oe)){Pn=1,Bc(t,m(h,t.current)),ke=null;return}}catch(T){if(b!==null)throw ke=b,T;Pn=1,Bc(t,m(h,t.current)),ke=null;return}s.flags&32768?(Ce||v===1?t=!0:El||(Oe&536870912)!==0?t=!1:(Ha=t=!0,(v===2||v===9||v===3||v===6)&&(v=wr.current,v!==null&&v.tag===13&&(v.flags|=16384))),zv(s,t)):Jc(s)}function Jc(t){var s=t;do{if((s.flags&32768)!==0){zv(s,Ha);return}t=s.return;var h=pE(s.alternate,s,ha);if(h!==null){ke=h;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=t}while(s!==null);Pn===0&&(Pn=5)}function zv(t,s){do{var h=mE(t.alternate,t);if(h!==null){h.flags&=32767,ke=h;return}if(h=t.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!s&&(t=t.sibling,t!==null)){ke=t;return}ke=t=h}while(t!==null);Pn=6,ke=null}function Bv(t,s,h,v,b,T,G,ut,vt){t.cancelPendingCommit=null;do Kc();while(ai!==0);if((Je&6)!==0)throw Error(l(327));if(s!==null){if(s===t.current)throw Error(l(177));if(T=s.lanes|s.childLanes,T|=Ks,zs(t,h,T,G,ut,vt),t===hn&&(ke=hn=null,Oe=0),Sl=s,Xa=t,fa=h,Md=T,Nd=b,Cv=v,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,kE(Vt,function(){return Gv(),null})):(t.callbackNode=null,t.callbackPriority=0),v=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||v){v=D.T,D.T=null,b=z.p,z.p=2,G=Je,Je|=4;try{vE(t,s,h)}finally{Je=G,z.p=b,D.T=v}}ai=1,jv(),Uv(),Fv()}}function jv(){if(ai===1){ai=0;var t=Xa,s=Sl,h=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||h){h=D.T,D.T=null;var v=z.p;z.p=2;var b=Je;Je|=4;try{_v(s,t);var T=Yd,G=Hn(t.containerInfo),ut=T.focusedElem,vt=T.selectionRange;if(G!==ut&&ut&&ut.ownerDocument&&Js(ut.ownerDocument.documentElement,ut)){if(vt!==null&&Bn(ut)){var Lt=vt.start,Ot=vt.end;if(Ot===void 0&&(Ot=Lt),"selectionStart"in ut)ut.selectionStart=Lt,ut.selectionEnd=Math.min(Ot,ut.value.length);else{var zt=ut.ownerDocument||document,kt=zt&&zt.defaultView||window;if(kt.getSelection){var Nt=kt.getSelection(),Wt=ut.textContent.length,oe=Math.min(vt.start,Wt),ln=vt.end===void 0?oe:Math.min(vt.end,Wt);!Nt.extend&&oe>ln&&(G=ln,ln=oe,oe=G);var Et=Ws(ut,oe),xt=Ws(ut,ln);if(Et&&xt&&(Nt.rangeCount!==1||Nt.anchorNode!==Et.node||Nt.anchorOffset!==Et.offset||Nt.focusNode!==xt.node||Nt.focusOffset!==xt.offset)){var bt=zt.createRange();bt.setStart(Et.node,Et.offset),Nt.removeAllRanges(),oe>ln?(Nt.addRange(bt),Nt.extend(xt.node,xt.offset)):(bt.setEnd(xt.node,xt.offset),Nt.addRange(bt))}}}}for(zt=[],Nt=ut;Nt=Nt.parentNode;)Nt.nodeType===1&&zt.push({element:Nt,left:Nt.scrollLeft,top:Nt.scrollTop});for(typeof ut.focus=="function"&&ut.focus(),ut=0;ut<zt.length;ut++){var Rt=zt[ut];Rt.element.scrollLeft=Rt.left,Rt.element.scrollTop=Rt.top}}ch=!!Hd,Yd=Hd=null}finally{Je=b,z.p=v,D.T=h}}t.current=s,ai=2}}function Uv(){if(ai===2){ai=0;var t=Xa,s=Sl,h=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||h){h=D.T,D.T=null;var v=z.p;z.p=2;var b=Je;Je|=4;try{gv(t,s.alternate,s)}finally{Je=b,z.p=v,D.T=h}}ai=3}}function Fv(){if(ai===4||ai===3){ai=0,Fi();var t=Xa,s=Sl,h=fa,v=Cv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ai=5:(ai=0,Sl=Xa=null,qv(t,t.pendingLanes));var b=t.pendingLanes;if(b===0&&(Za=null),Kt(h),s=s.stateNode,On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(_n,s,void 0,(s.current.flags&128)===128)}catch{}if(v!==null){s=D.T,b=z.p,z.p=2,D.T=null;try{for(var T=t.onRecoverableError,G=0;G<v.length;G++){var ut=v[G];T(ut.value,{componentStack:ut.stack})}}finally{D.T=s,z.p=b}}(fa&3)!==0&&Kc(),ks(t),b=t.pendingLanes,(h&261930)!==0&&(b&42)!==0?t===Od?Su++:(Su=0,Od=t):Su=0,bu(0)}}function qv(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,ru(s)))}function Kc(){return jv(),Uv(),Fv(),Gv()}function Gv(){if(ai!==5)return!1;var t=Xa,s=Md;Md=0;var h=Kt(fa),v=D.T,b=z.p;try{z.p=32>h?32:h,D.T=null,h=Nd,Nd=null;var T=Xa,G=fa;if(ai=0,Sl=Xa=null,fa=0,(Je&6)!==0)throw Error(l(331));var ut=Je;if(Je|=4,bv(T.current),Ev(T,T.current,G,h),Je=ut,bu(0,!1),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(_n,T)}catch{}return!0}finally{z.p=b,D.T=v,qv(t,s)}}function Hv(t,s,h){s=m(h,s),s=ud(t.stateNode,s,2),t=Ua(t,s,2),t!==null&&(Gi(t,2),ks(t))}function nn(t,s,h){if(t.tag===3)Hv(t,t,h);else for(;s!==null;){if(s.tag===3){Hv(s,t,h);break}else if(s.tag===1){var v=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Za===null||!Za.has(v))){t=m(h,t),h=Ym(2),v=Ua(s,h,2),v!==null&&(Zm(h,v,s,t),Gi(v,2),ks(v));break}}s=s.return}}function Id(t,s,h){var v=t.pingCache;if(v===null){v=t.pingCache=new xE;var b=new Set;v.set(s,b)}else b=v.get(s),b===void 0&&(b=new Set,v.set(s,b));b.has(h)||(Td=!0,b.add(h),t=LE.bind(null,t,s,h),s.then(t,t))}function LE(t,s,h){var v=t.pingCache;v!==null&&v.delete(s),t.pingedLanes|=t.suspendedLanes&h,t.warmLanes&=~h,hn===t&&(Oe&h)===h&&(Pn===4||Pn===3&&(Oe&62914560)===Oe&&300>Yt()-Zc?(Je&2)===0&&bl(t,0):Cd|=h,wl===Oe&&(wl=0)),ks(t)}function Yv(t,s){s===0&&(s=Ft()),t=zi(t,s),t!==null&&(Gi(t,s),ks(t))}function TE(t){var s=t.memoizedState,h=0;s!==null&&(h=s.retryLane),Yv(t,h)}function CE(t,s){var h=0;switch(t.tag){case 31:case 13:var v=t.stateNode,b=t.memoizedState;b!==null&&(h=b.retryLane);break;case 19:v=t.stateNode;break;case 22:v=t.stateNode._retryCache;break;default:throw Error(l(314))}v!==null&&v.delete(s),Yv(t,h)}function kE(t,s){return Ve(t,s)}var $c=null,Tl=null,Rd=!1,th=!1,Pd=!1,Qa=0;function ks(t){t!==Tl&&t.next===null&&(Tl===null?$c=Tl=t:Tl=Tl.next=t),th=!0,Rd||(Rd=!0,NE())}function bu(t,s){if(!Pd&&th){Pd=!0;do for(var h=!1,v=$c;v!==null;){if(t!==0){var b=v.pendingLanes;if(b===0)var T=0;else{var G=v.suspendedLanes,ut=v.pingedLanes;T=(1<<31-di(42|t)+1)-1,T&=b&~(G&~ut),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(h=!0,Qv(v,T))}else T=Oe,T=wa(v,v===hn?T:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(T&3)===0||hs(v,T)||(h=!0,Qv(v,T));v=v.next}while(h);Pd=!1}}function ME(){Zv()}function Zv(){th=Rd=!1;var t=0;Qa!==0&&UE()&&(t=Qa);for(var s=Yt(),h=null,v=$c;v!==null;){var b=v.next,T=Xv(v,s);T===0?(v.next=null,h===null?$c=b:h.next=b,b===null&&(Tl=h)):(h=v,(t!==0||(T&3)!==0)&&(th=!0)),v=b}ai!==0&&ai!==5||bu(t),Qa!==0&&(Qa=0)}function Xv(t,s){for(var h=t.suspendedLanes,v=t.pingedLanes,b=t.expirationTimes,T=t.pendingLanes&-62914561;0<T;){var G=31-di(T),ut=1<<G,vt=b[G];vt===-1?((ut&h)===0||(ut&v)!==0)&&(b[G]=Vr(ut,s)):vt<=s&&(t.expiredLanes|=ut),T&=~ut}if(s=hn,h=Oe,h=wa(t,t===s?h:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),v=t.callbackNode,h===0||t===s&&(en===2||en===9)||t.cancelPendingCommit!==null)return v!==null&&v!==null&&ti(v),t.callbackNode=null,t.callbackPriority=0;if((h&3)===0||hs(t,h)){if(s=h&-h,s===t.callbackPriority)return s;switch(v!==null&&ti(v),Kt(h)){case 2:case 8:h=yn;break;case 32:h=Vt;break;case 268435456:h=ve;break;default:h=Vt}return v=Vv.bind(null,t),h=Ve(h,v),t.callbackPriority=s,t.callbackNode=h,s}return v!==null&&v!==null&&ti(v),t.callbackPriority=2,t.callbackNode=null,2}function Vv(t,s){if(ai!==0&&ai!==5)return t.callbackNode=null,t.callbackPriority=0,null;var h=t.callbackNode;if(Kc()&&t.callbackNode!==h)return null;var v=Oe;return v=wa(t,t===hn?v:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),v===0?null:(Mv(t,v,s),Xv(t,Yt()),t.callbackNode!=null&&t.callbackNode===h?Vv.bind(null,t):null)}function Qv(t,s){if(Kc())return null;Mv(t,s,!0)}function NE(){qE(function(){(Je&6)!==0?Ve(Re,ME):Zv()})}function zd(){if(Qa===0){var t=hl;t===0&&(t=hr,hr<<=1,(hr&261888)===0&&(hr=256)),Qa=t}return Qa}function Wv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ps(""+t)}function Jv(t,s){var h=s.ownerDocument.createElement("input");return h.name=s.name,h.value=s.value,t.id&&h.setAttribute("form",t.id),s.parentNode.insertBefore(h,s),t=new FormData(t),h.parentNode.removeChild(h),t}function OE(t,s,h,v,b){if(s==="submit"&&h&&h.stateNode===b){var T=Wv((b[Ue]||null).action),G=v.submitter;G&&(s=(s=G[Ue]||null)?Wv(s.formAction):G.getAttribute("formAction"),s!==null&&(T=s,G=null));var ut=new Na("action","action",null,v,b);t.push({event:ut,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Qa!==0){var vt=G?Jv(b,G):new FormData(b);id(h,{pending:!0,data:vt,method:b.method,action:T},null,vt)}}else typeof T=="function"&&(ut.preventDefault(),vt=G?Jv(b,G):new FormData(b),id(h,{pending:!0,data:vt,method:b.method,action:T},T,vt))},currentTarget:b}]})}}for(var Bd=0;Bd<sn.length;Bd++){var jd=sn[Bd],AE=jd.toLowerCase(),DE=jd[0].toUpperCase()+jd.slice(1);We(AE,"on"+DE)}We(St,"onAnimationEnd"),We(jt,"onAnimationIteration"),We(qt,"onAnimationStart"),We("dblclick","onDoubleClick"),We("focusin","onFocus"),We("focusout","onBlur"),We(Qt,"onTransitionRun"),We(ee,"onTransitionStart"),We(Te,"onTransitionCancel"),We(pe,"onTransitionEnd"),Ar("onMouseEnter",["mouseout","mouseover"]),Ar("onMouseLeave",["mouseout","mouseover"]),Ar("onPointerEnter",["pointerout","pointerover"]),Ar("onPointerLeave",["pointerout","pointerover"]),Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Or("onBeforeInput",["compositionend","keypress","textInput","paste"]),Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Kv(t,s){s=(s&4)!==0;for(var h=0;h<t.length;h++){var v=t[h],b=v.event;v=v.listeners;t:{var T=void 0;if(s)for(var G=v.length-1;0<=G;G--){var ut=v[G],vt=ut.instance,Lt=ut.currentTarget;if(ut=ut.listener,vt!==T&&b.isPropagationStopped())break t;T=ut,b.currentTarget=Lt;try{T(b)}catch(Ot){Pi(Ot)}b.currentTarget=null,T=vt}else for(G=0;G<v.length;G++){if(ut=v[G],vt=ut.instance,Lt=ut.currentTarget,ut=ut.listener,vt!==T&&b.isPropagationStopped())break t;T=ut,b.currentTarget=Lt;try{T(b)}catch(Ot){Pi(Ot)}b.currentTarget=null,T=vt}}}}function Me(t,s){var h=s[Si];h===void 0&&(h=s[Si]=new Set);var v=t+"__bubble";h.has(v)||($v(s,t,2,!1),h.add(v))}function Ud(t,s,h){var v=0;s&&(v|=4),$v(h,t,v,s)}var eh="_reactListening"+Math.random().toString(36).slice(2);function Fd(t){if(!t[eh]){t[eh]=!0,La.forEach(function(h){h!=="selectionchange"&&(IE.has(h)||Ud(h,!1,t),Ud(h,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[eh]||(s[eh]=!0,Ud("selectionchange",!1,s))}}function $v(t,s,h,v){switch(ky(s)){case 2:var b=lw;break;case 8:b=uw;break;default:b=ng}h=b.bind(null,s,h,t),b=void 0,!be||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(b=!0),v?b!==void 0?t.addEventListener(s,h,{capture:!0,passive:b}):t.addEventListener(s,h,!0):b!==void 0?t.addEventListener(s,h,{passive:b}):t.addEventListener(s,h,!1)}function qd(t,s,h,v,b){var T=v;if((s&1)===0&&(s&2)===0&&v!==null)t:for(;;){if(v===null)return;var G=v.tag;if(G===3||G===4){var ut=v.stateNode.containerInfo;if(ut===b)break;if(G===4)for(G=v.return;G!==null;){var vt=G.tag;if((vt===3||vt===4)&&G.stateNode.containerInfo===b)return;G=G.return}for(;ut!==null;){if(G=$e(ut),G===null)return;if(vt=G.tag,vt===5||vt===6||vt===26||vt===27){v=T=G;continue t}ut=ut.parentNode}}v=v.return}ms(function(){var Lt=T,Ot=Fn(h),zt=[];t:{var kt=qe.get(t);if(kt!==void 0){var Nt=Na,Wt=t;switch(t){case"keypress":if(Ln(h)===0)break t;case"keydown":case"keyup":Nt=xo;break;case"focusin":Wt="focus",Nt=yo;break;case"focusout":Wt="blur",Nt=yo;break;case"beforeblur":case"afterblur":Nt=yo;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=Wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=Jo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=Eo;break;case St:case jt:case qt:Nt=Oa;break;case pe:Nt=Ci;break;case"scroll":case"scrollend":Nt=de;break;case"wheel":Nt=Tn;break;case"copy":case"cut":case"paste":Nt=Wi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=Aa;break;case"toggle":case"beforetoggle":Nt=Gs}var oe=(s&4)!==0,ln=!oe&&(t==="scroll"||t==="scrollend"),Et=oe?kt!==null?kt+"Capture":null:kt;oe=[];for(var xt=Lt,bt;xt!==null;){var Rt=xt;if(bt=Rt.stateNode,Rt=Rt.tag,Rt!==5&&Rt!==26&&Rt!==27||bt===null||Et===null||(Rt=$r(xt,Et),Rt!=null&&oe.push(Tu(xt,Rt,bt))),ln)break;xt=xt.return}0<oe.length&&(kt=new Nt(kt,Wt,null,h,Ot),zt.push({event:kt,listeners:oe}))}}if((s&7)===0){t:{if(kt=t==="mouseover"||t==="pointerover",Nt=t==="mouseout"||t==="pointerout",kt&&h!==ni&&(Wt=h.relatedTarget||h.fromElement)&&($e(Wt)||Wt[fr]))break t;if((Nt||kt)&&(kt=Ot.window===Ot?Ot:(kt=Ot.ownerDocument)?kt.defaultView||kt.parentWindow:window,Nt?(Wt=h.relatedTarget||h.toElement,Nt=Lt,Wt=Wt?$e(Wt):null,Wt!==null&&(ln=c(Wt),oe=Wt.tag,Wt!==ln||oe!==5&&oe!==27&&oe!==6)&&(Wt=null)):(Nt=null,Wt=Lt),Nt!==Wt)){if(oe=Wo,Rt="onMouseLeave",Et="onMouseEnter",xt="mouse",(t==="pointerout"||t==="pointerover")&&(oe=Aa,Rt="onPointerLeave",Et="onPointerEnter",xt="pointer"),ln=Nt==null?kt:Nr(Nt),bt=Wt==null?kt:Nr(Wt),kt=new oe(Rt,xt+"leave",Nt,h,Ot),kt.target=ln,kt.relatedTarget=bt,Rt=null,$e(Ot)===Lt&&(oe=new oe(Et,xt+"enter",Wt,h,Ot),oe.target=bt,oe.relatedTarget=ln,Rt=oe),ln=Rt,Nt&&Wt)e:{for(oe=RE,Et=Nt,xt=Wt,bt=0,Rt=Et;Rt;Rt=oe(Rt))bt++;Rt=0;for(var se=xt;se;se=oe(se))Rt++;for(;0<bt-Rt;)Et=oe(Et),bt--;for(;0<Rt-bt;)xt=oe(xt),Rt--;for(;bt--;){if(Et===xt||xt!==null&&Et===xt.alternate){oe=Et;break e}Et=oe(Et),xt=oe(xt)}oe=null}else oe=null;Nt!==null&&ty(zt,kt,Nt,oe,!1),Wt!==null&&ln!==null&&ty(zt,ln,Wt,oe,!0)}}t:{if(kt=Lt?Nr(Lt):window,Nt=kt.nodeName&&kt.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&kt.type==="file")var Ye=Vs;else if(Ji(kt))if(rl)Ye=al;else{Ye=Co;var te=tr}else Nt=kt.nodeName,!Nt||Nt.toLowerCase()!=="input"||kt.type!=="checkbox"&&kt.type!=="radio"?Lt&&Kr(Lt.elementType)&&(Ye=Vs):Ye=Es;if(Ye&&(Ye=Ye(t,Lt))){Lo(zt,Ye,h,Ot);break t}te&&te(t,kt,Lt),t==="focusout"&&Lt&&kt.type==="number"&&Lt.memoizedProps.value!=null&&gr(kt,"number",kt.value)}switch(te=Lt?Nr(Lt):window,t){case"focusin":(Ji(te)||te.contentEditable==="true")&&(a=te,o=Lt,d=null);break;case"focusout":d=o=a=null;break;case"mousedown":x=!0;break;case"contextmenu":case"mouseup":case"dragend":x=!1,C(zt,h,Ot);break;case"selectionchange":if(g)break;case"keydown":case"keyup":C(zt,h,Ot)}var we;if(Hs)t:{switch(t){case"compositionstart":var Ae="onCompositionStart";break t;case"compositionend":Ae="onCompositionEnd";break t;case"compositionupdate":Ae="onCompositionUpdate";break t}Ae=void 0}else _s?nl(t,h)&&(Ae="onCompositionEnd"):t==="keydown"&&h.keyCode===229&&(Ae="onCompositionStart");Ae&&(Ia&&h.locale!=="ko"&&(_s||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&_s&&(we=yr()):(Ti=Ot,Rr="value"in Ti?Ti.value:Ti.textContent,_s=!0)),te=nh(Lt,Ae),0<te.length&&(Ae=new _o(Ae,t,null,h,Ot),zt.push({event:Ae,listeners:te}),we?Ae.data=we:(we=bo(h),we!==null&&(Ae.data=we)))),(we=So?Ri(t,h):xs(t,h))&&(Ae=nh(Lt,"onBeforeInput"),0<Ae.length&&(te=new _o("onBeforeInput","beforeinput",null,h,Ot),zt.push({event:te,listeners:Ae}),te.data=we)),OE(zt,t,Lt,h,Ot)}Kv(zt,s)})}function Tu(t,s,h){return{instance:t,listener:s,currentTarget:h}}function nh(t,s){for(var h=s+"Capture",v=[];t!==null;){var b=t,T=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||T===null||(b=$r(t,h),b!=null&&v.unshift(Tu(t,b,T)),b=$r(t,s),b!=null&&v.push(Tu(t,b,T))),t.tag===3)return v;t=t.return}return[]}function RE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ty(t,s,h,v,b){for(var T=s._reactName,G=[];h!==null&&h!==v;){var ut=h,vt=ut.alternate,Lt=ut.stateNode;if(ut=ut.tag,vt!==null&&vt===v)break;ut!==5&&ut!==26&&ut!==27||Lt===null||(vt=Lt,b?(Lt=$r(h,T),Lt!=null&&G.unshift(Tu(h,Lt,vt))):b||(Lt=$r(h,T),Lt!=null&&G.push(Tu(h,Lt,vt)))),h=h.return}G.length!==0&&t.push({event:s,listeners:G})}var PE=/\r\n?/g,zE=/\u0000|\uFFFD/g;function ey(t){return(typeof t=="string"?t:""+t).replace(PE,`
`).replace(zE,"")}function ny(t,s){return s=ey(s),ey(t)===s}function on(t,s,h,v,b,T){switch(h){case"children":typeof v=="string"?s==="body"||s==="textarea"&&v===""||Di(t,v):(typeof v=="number"||typeof v=="bigint")&&s!=="body"&&Di(t,""+v);break;case"className":Ke(t,"class",v);break;case"tabIndex":Ke(t,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Ke(t,h,v);break;case"style":ka(t,v,T);break;case"data":if(s!=="object"){Ke(t,"data",v);break}case"src":case"href":if(v===""&&(s!=="a"||h!=="href")){t.removeAttribute(h);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){t.removeAttribute(h);break}v=ps(""+v),t.setAttribute(h,v);break;case"action":case"formAction":if(typeof v=="function"){t.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(h==="formAction"?(s!=="input"&&on(t,s,"name",b.name,b,null),on(t,s,"formEncType",b.formEncType,b,null),on(t,s,"formMethod",b.formMethod,b,null),on(t,s,"formTarget",b.formTarget,b,null)):(on(t,s,"encType",b.encType,b,null),on(t,s,"method",b.method,b,null),on(t,s,"target",b.target,b,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){t.removeAttribute(h);break}v=ps(""+v),t.setAttribute(h,v);break;case"onClick":v!=null&&(t.onclick=ui);break;case"onScroll":v!=null&&Me("scroll",t);break;case"onScrollEnd":v!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(l(61));if(h=v.__html,h!=null){if(b.children!=null)throw Error(l(60));t.innerHTML=h}}break;case"multiple":t.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":t.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){t.removeAttribute("xlink:href");break}h=ps(""+v),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?t.setAttribute(h,""+v):t.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?t.setAttribute(h,""):t.removeAttribute(h);break;case"capture":case"download":v===!0?t.setAttribute(h,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?t.setAttribute(h,v):t.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?t.setAttribute(h,v):t.removeAttribute(h);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?t.removeAttribute(h):t.setAttribute(h,v);break;case"popover":Me("beforetoggle",t),Me("toggle",t),xe(t,"popover",v);break;case"xlinkActuate":bi(t,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":bi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":bi(t,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":bi(t,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":bi(t,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":bi(t,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":bi(t,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":bi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":bi(t,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":xe(t,"is",v);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Qe.get(h)||h,xe(t,h,v))}}function Gd(t,s,h,v,b,T){switch(h){case"style":ka(t,v,T);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(l(61));if(h=v.__html,h!=null){if(b.children!=null)throw Error(l(60));t.innerHTML=h}}break;case"children":typeof v=="string"?Di(t,v):(typeof v=="number"||typeof v=="bigint")&&Di(t,""+v);break;case"onScroll":v!=null&&Me("scroll",t);break;case"onScrollEnd":v!=null&&Me("scrollend",t);break;case"onClick":v!=null&&(t.onclick=ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ta.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(b=h.endsWith("Capture"),s=h.slice(2,b?h.length-7:void 0),T=t[Ue]||null,T=T!=null?T[h]:null,typeof T=="function"&&t.removeEventListener(s,T,b),typeof v=="function")){typeof T!="function"&&T!==null&&(h in t?t[h]=null:t.hasAttribute(h)&&t.removeAttribute(h)),t.addEventListener(s,v,b);break t}h in t?t[h]=v:v===!0?t.setAttribute(h,""):xe(t,h,v)}}}function _i(t,s,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var v=!1,b=!1,T;for(T in h)if(h.hasOwnProperty(T)){var G=h[T];if(G!=null)switch(T){case"src":v=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,s));default:on(t,s,T,G,h,null)}}b&&on(t,s,"srcSet",h.srcSet,h,null),v&&on(t,s,"src",h.src,h,null);return;case"input":Me("invalid",t);var ut=T=G=b=null,vt=null,Lt=null;for(v in h)if(h.hasOwnProperty(v)){var Ot=h[v];if(Ot!=null)switch(v){case"name":b=Ot;break;case"type":G=Ot;break;case"checked":vt=Ot;break;case"defaultChecked":Lt=Ot;break;case"value":T=Ot;break;case"defaultValue":ut=Ot;break;case"children":case"dangerouslySetInnerHTML":if(Ot!=null)throw Error(l(137,s));break;default:on(t,s,v,Ot,h,null)}}Us(t,T,ut,vt,Lt,G,b,!1);return;case"select":Me("invalid",t),v=G=T=null;for(b in h)if(h.hasOwnProperty(b)&&(ut=h[b],ut!=null))switch(b){case"value":T=ut;break;case"defaultValue":G=ut;break;case"multiple":v=ut;default:on(t,s,b,ut,h,null)}s=T,h=G,t.multiple=!!v,s!=null?tn(t,!!v,s,!1):h!=null&&tn(t,!!v,h,!0);return;case"textarea":Me("invalid",t),T=b=v=null;for(G in h)if(h.hasOwnProperty(G)&&(ut=h[G],ut!=null))switch(G){case"value":v=ut;break;case"defaultValue":b=ut;break;case"children":T=ut;break;case"dangerouslySetInnerHTML":if(ut!=null)throw Error(l(91));break;default:on(t,s,G,ut,h,null)}Zi(t,v,b,T);return;case"option":for(vt in h)h.hasOwnProperty(vt)&&(v=h[vt],v!=null)&&(vt==="selected"?t.selected=v&&typeof v!="function"&&typeof v!="symbol":on(t,s,vt,v,h,null));return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(v=0;v<Lu.length;v++)Me(Lu[v],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Lt in h)if(h.hasOwnProperty(Lt)&&(v=h[Lt],v!=null))switch(Lt){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,s));default:on(t,s,Lt,v,h,null)}return;default:if(Kr(s)){for(Ot in h)h.hasOwnProperty(Ot)&&(v=h[Ot],v!==void 0&&Gd(t,s,Ot,v,h,void 0));return}}for(ut in h)h.hasOwnProperty(ut)&&(v=h[ut],v!=null&&on(t,s,ut,v,h,null))}function BE(t,s,h,v){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,T=null,G=null,ut=null,vt=null,Lt=null,Ot=null;for(Nt in h){var zt=h[Nt];if(h.hasOwnProperty(Nt)&&zt!=null)switch(Nt){case"checked":break;case"value":break;case"defaultValue":vt=zt;default:v.hasOwnProperty(Nt)||on(t,s,Nt,null,v,zt)}}for(var kt in v){var Nt=v[kt];if(zt=h[kt],v.hasOwnProperty(kt)&&(Nt!=null||zt!=null))switch(kt){case"type":T=Nt;break;case"name":b=Nt;break;case"checked":Lt=Nt;break;case"defaultChecked":Ot=Nt;break;case"value":G=Nt;break;case"defaultValue":ut=Nt;break;case"children":case"dangerouslySetInnerHTML":if(Nt!=null)throw Error(l(137,s));break;default:Nt!==zt&&on(t,s,kt,Nt,v,zt)}}mo(t,G,ut,vt,Lt,Ot,T,b);return;case"select":Nt=G=ut=kt=null;for(T in h)if(vt=h[T],h.hasOwnProperty(T)&&vt!=null)switch(T){case"value":break;case"multiple":Nt=vt;default:v.hasOwnProperty(T)||on(t,s,T,null,v,vt)}for(b in v)if(T=v[b],vt=h[b],v.hasOwnProperty(b)&&(T!=null||vt!=null))switch(b){case"value":kt=T;break;case"defaultValue":ut=T;break;case"multiple":G=T;default:T!==vt&&on(t,s,b,T,v,vt)}s=ut,h=G,v=Nt,kt!=null?tn(t,!!h,kt,!1):!!v!=!!h&&(s!=null?tn(t,!!h,s,!0):tn(t,!!h,h?[]:"",!1));return;case"textarea":Nt=kt=null;for(ut in h)if(b=h[ut],h.hasOwnProperty(ut)&&b!=null&&!v.hasOwnProperty(ut))switch(ut){case"value":break;case"children":break;default:on(t,s,ut,null,v,b)}for(G in v)if(b=v[G],T=h[G],v.hasOwnProperty(G)&&(b!=null||T!=null))switch(G){case"value":kt=b;break;case"defaultValue":Nt=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(l(91));break;default:b!==T&&on(t,s,G,b,v,T)}pr(t,kt,Nt);return;case"option":for(var Wt in h)kt=h[Wt],h.hasOwnProperty(Wt)&&kt!=null&&!v.hasOwnProperty(Wt)&&(Wt==="selected"?t.selected=!1:on(t,s,Wt,null,v,kt));for(vt in v)kt=v[vt],Nt=h[vt],v.hasOwnProperty(vt)&&kt!==Nt&&(kt!=null||Nt!=null)&&(vt==="selected"?t.selected=kt&&typeof kt!="function"&&typeof kt!="symbol":on(t,s,vt,kt,v,Nt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var oe in h)kt=h[oe],h.hasOwnProperty(oe)&&kt!=null&&!v.hasOwnProperty(oe)&&on(t,s,oe,null,v,kt);for(Lt in v)if(kt=v[Lt],Nt=h[Lt],v.hasOwnProperty(Lt)&&kt!==Nt&&(kt!=null||Nt!=null))switch(Lt){case"children":case"dangerouslySetInnerHTML":if(kt!=null)throw Error(l(137,s));break;default:on(t,s,Lt,kt,v,Nt)}return;default:if(Kr(s)){for(var ln in h)kt=h[ln],h.hasOwnProperty(ln)&&kt!==void 0&&!v.hasOwnProperty(ln)&&Gd(t,s,ln,void 0,v,kt);for(Ot in v)kt=v[Ot],Nt=h[Ot],!v.hasOwnProperty(Ot)||kt===Nt||kt===void 0&&Nt===void 0||Gd(t,s,Ot,kt,v,Nt);return}}for(var Et in h)kt=h[Et],h.hasOwnProperty(Et)&&kt!=null&&!v.hasOwnProperty(Et)&&on(t,s,Et,null,v,kt);for(zt in v)kt=v[zt],Nt=h[zt],!v.hasOwnProperty(zt)||kt===Nt||kt==null&&Nt==null||on(t,s,zt,kt,v,Nt)}function iy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,h=performance.getEntriesByType("resource"),v=0;v<h.length;v++){var b=h[v],T=b.transferSize,G=b.initiatorType,ut=b.duration;if(T&&ut&&iy(G)){for(G=0,ut=b.responseEnd,v+=1;v<h.length;v++){var vt=h[v],Lt=vt.startTime;if(Lt>ut)break;var Ot=vt.transferSize,zt=vt.initiatorType;Ot&&iy(zt)&&(vt=vt.responseEnd,G+=Ot*(vt<ut?1:(ut-Lt)/(vt-Lt)))}if(--v,s+=8*(T+G)/(b.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Hd=null,Yd=null;function ih(t){return t.nodeType===9?t:t.ownerDocument}function ry(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sy(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Zd(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Xd=null;function UE(){var t=window.event;return t&&t.type==="popstate"?t===Xd?!1:(Xd=t,!0):(Xd=null,!1)}var ay=typeof setTimeout=="function"?setTimeout:void 0,FE=typeof clearTimeout=="function"?clearTimeout:void 0,oy=typeof Promise=="function"?Promise:void 0,qE=typeof queueMicrotask=="function"?queueMicrotask:typeof oy<"u"?function(t){return oy.resolve(null).then(t).catch(GE)}:ay;function GE(t){setTimeout(function(){throw t})}function Wa(t){return t==="head"}function ly(t,s){var h=s,v=0;do{var b=h.nextSibling;if(t.removeChild(h),b&&b.nodeType===8)if(h=b.data,h==="/$"||h==="/&"){if(v===0){t.removeChild(b),Nl(s);return}v--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")v++;else if(h==="html")Cu(t.ownerDocument.documentElement);else if(h==="head"){h=t.ownerDocument.head,Cu(h);for(var T=h.firstChild;T;){var G=T.nextSibling,ut=T.nodeName;T[Mr]||ut==="SCRIPT"||ut==="STYLE"||ut==="LINK"&&T.rel.toLowerCase()==="stylesheet"||h.removeChild(T),T=G}}else h==="body"&&Cu(t.ownerDocument.body);h=b}while(h);Nl(s)}function uy(t,s){var h=t;t=0;do{var v=h.nextSibling;if(h.nodeType===1?s?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(s?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(t===0)break;t--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||t++;h=v}while(h)}function Vd(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var h=s;switch(s=s.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Vd(h),Wr(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}t.removeChild(h)}}function HE(t,s,h,v){for(;t.nodeType===1;){var b=h;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!v&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(v){if(!t[Mr])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(T=t.getAttribute("rel"),T==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(T!==b.rel||t.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||t.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||t.getAttribute("title")!==(b.title==null?null:b.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(T=t.getAttribute("src"),(T!==(b.src==null?null:b.src)||t.getAttribute("type")!==(b.type==null?null:b.type)||t.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&T&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var T=b.name==null?null:""+b.name;if(b.type==="hidden"&&t.getAttribute("name")===T)return t}else return t;if(t=Fr(t.nextSibling),t===null)break}return null}function YE(t,s,h){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!h||(t=Fr(t.nextSibling),t===null))return null;return t}function cy(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Fr(t.nextSibling),t===null))return null;return t}function Qd(t){return t.data==="$?"||t.data==="$~"}function Wd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ZE(t,s){var h=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||h.readyState!=="loading")s();else{var v=function(){s(),h.removeEventListener("DOMContentLoaded",v)};h.addEventListener("DOMContentLoaded",v),t._reactRetry=v}}function Fr(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Jd=null;function hy(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var h=t.data;if(h==="/$"||h==="/&"){if(s===0)return Fr(t.nextSibling);s--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||s++}t=t.nextSibling}return null}function fy(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var h=t.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(s===0)return t;s--}else h!=="/$"&&h!=="/&"||s++}t=t.previousSibling}return null}function dy(t,s,h){switch(s=ih(h),t){case"html":if(t=s.documentElement,!t)throw Error(l(452));return t;case"head":if(t=s.head,!t)throw Error(l(453));return t;case"body":if(t=s.body,!t)throw Error(l(454));return t;default:throw Error(l(451))}}function Cu(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Wr(t)}var qr=new Map,gy=new Set;function rh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var da=z.d;z.d={f:XE,r:VE,D:QE,C:WE,L:JE,m:KE,X:tw,S:$E,M:ew};function XE(){var t=da.f(),s=Qc();return t||s}function VE(t){var s=gs(t);s!==null&&s.tag===5&&s.type==="form"?Om(s):da.r(t)}var Cl=typeof document>"u"?null:document;function py(t,s,h){var v=Cl;if(v&&typeof s=="string"&&s){var b=Fe(s);b='link[rel="'+t+'"][href="'+b+'"]',typeof h=="string"&&(b+='[crossorigin="'+h+'"]'),gy.has(b)||(gy.add(b),t={rel:t,crossOrigin:h,href:s},v.querySelector(b)===null&&(s=v.createElement("link"),_i(s,"link",t),dn(s),v.head.appendChild(s)))}}function QE(t){da.D(t),py("dns-prefetch",t,null)}function WE(t,s){da.C(t,s),py("preconnect",t,s)}function JE(t,s,h){da.L(t,s,h);var v=Cl;if(v&&t&&s){var b='link[rel="preload"][as="'+Fe(s)+'"]';s==="image"&&h&&h.imageSrcSet?(b+='[imagesrcset="'+Fe(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(b+='[imagesizes="'+Fe(h.imageSizes)+'"]')):b+='[href="'+Fe(t)+'"]';var T=b;switch(s){case"style":T=kl(t);break;case"script":T=Ml(t)}qr.has(T)||(t=S({rel:"preload",href:s==="image"&&h&&h.imageSrcSet?void 0:t,as:s},h),qr.set(T,t),v.querySelector(b)!==null||s==="style"&&v.querySelector(ku(T))||s==="script"&&v.querySelector(Mu(T))||(s=v.createElement("link"),_i(s,"link",t),dn(s),v.head.appendChild(s)))}}function KE(t,s){da.m(t,s);var h=Cl;if(h&&t){var v=s&&typeof s.as=="string"?s.as:"script",b='link[rel="modulepreload"][as="'+Fe(v)+'"][href="'+Fe(t)+'"]',T=b;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Ml(t)}if(!qr.has(T)&&(t=S({rel:"modulepreload",href:t},s),qr.set(T,t),h.querySelector(b)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Mu(T)))return}v=h.createElement("link"),_i(v,"link",t),dn(v),h.head.appendChild(v)}}}function $E(t,s,h){da.S(t,s,h);var v=Cl;if(v&&t){var b=dr(v).hoistableStyles,T=kl(t);s=s||"default";var G=b.get(T);if(!G){var ut={loading:0,preload:null};if(G=v.querySelector(ku(T)))ut.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":s},h),(h=qr.get(T))&&Kd(t,h);var vt=G=v.createElement("link");dn(vt),_i(vt,"link",t),vt._p=new Promise(function(Lt,Ot){vt.onload=Lt,vt.onerror=Ot}),vt.addEventListener("load",function(){ut.loading|=1}),vt.addEventListener("error",function(){ut.loading|=2}),ut.loading|=4,sh(G,s,v)}G={type:"stylesheet",instance:G,count:1,state:ut},b.set(T,G)}}}function tw(t,s){da.X(t,s);var h=Cl;if(h&&t){var v=dr(h).hoistableScripts,b=Ml(t),T=v.get(b);T||(T=h.querySelector(Mu(b)),T||(t=S({src:t,async:!0},s),(s=qr.get(b))&&$d(t,s),T=h.createElement("script"),dn(T),_i(T,"link",t),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},v.set(b,T))}}function ew(t,s){da.M(t,s);var h=Cl;if(h&&t){var v=dr(h).hoistableScripts,b=Ml(t),T=v.get(b);T||(T=h.querySelector(Mu(b)),T||(t=S({src:t,async:!0,type:"module"},s),(s=qr.get(b))&&$d(t,s),T=h.createElement("script"),dn(T),_i(T,"link",t),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},v.set(b,T))}}function my(t,s,h,v){var b=(b=yt.current)?rh(b):null;if(!b)throw Error(l(446));switch(t){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(s=kl(h.href),h=dr(b).hoistableStyles,v=h.get(s),v||(v={type:"style",instance:null,count:0,state:null},h.set(s,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){t=kl(h.href);var T=dr(b).hoistableStyles,G=T.get(t);if(G||(b=b.ownerDocument||b,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(t,G),(T=b.querySelector(ku(t)))&&!T._p&&(G.instance=T,G.state.loading=5),qr.has(t)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},qr.set(t,h),T||nw(b,t,h,G.state))),s&&v===null)throw Error(l(528,""));return G}if(s&&v!==null)throw Error(l(529,""));return null;case"script":return s=h.async,h=h.src,typeof h=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ml(h),h=dr(b).hoistableScripts,v=h.get(s),v||(v={type:"script",instance:null,count:0,state:null},h.set(s,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,t))}}function kl(t){return'href="'+Fe(t)+'"'}function ku(t){return'link[rel="stylesheet"]['+t+"]"}function vy(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function nw(t,s,h,v){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?v.loading=1:(s=t.createElement("link"),v.preload=s,s.addEventListener("load",function(){return v.loading|=1}),s.addEventListener("error",function(){return v.loading|=2}),_i(s,"link",h),dn(s),t.head.appendChild(s))}function Ml(t){return'[src="'+Fe(t)+'"]'}function Mu(t){return"script[async]"+t}function yy(t,s,h){if(s.count++,s.instance===null)switch(s.type){case"style":var v=t.querySelector('style[data-href~="'+Fe(h.href)+'"]');if(v)return s.instance=v,dn(v),v;var b=S({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return v=(t.ownerDocument||t).createElement("style"),dn(v),_i(v,"style",b),sh(v,h.precedence,t),s.instance=v;case"stylesheet":b=kl(h.href);var T=t.querySelector(ku(b));if(T)return s.state.loading|=4,s.instance=T,dn(T),T;v=vy(h),(b=qr.get(b))&&Kd(v,b),T=(t.ownerDocument||t).createElement("link"),dn(T);var G=T;return G._p=new Promise(function(ut,vt){G.onload=ut,G.onerror=vt}),_i(T,"link",v),s.state.loading|=4,sh(T,h.precedence,t),s.instance=T;case"script":return T=Ml(h.src),(b=t.querySelector(Mu(T)))?(s.instance=b,dn(b),b):(v=h,(b=qr.get(T))&&(v=S({},h),$d(v,b)),t=t.ownerDocument||t,b=t.createElement("script"),dn(b),_i(b,"link",v),t.head.appendChild(b),s.instance=b);case"void":return null;default:throw Error(l(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(v=s.instance,s.state.loading|=4,sh(v,h.precedence,t));return s.instance}function sh(t,s,h){for(var v=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=v.length?v[v.length-1]:null,T=b,G=0;G<v.length;G++){var ut=v[G];if(ut.dataset.precedence===s)T=ut;else if(T!==b)break}T?T.parentNode.insertBefore(t,T.nextSibling):(s=h.nodeType===9?h.head:h,s.insertBefore(t,s.firstChild))}function Kd(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function $d(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var ah=null;function _y(t,s,h){if(ah===null){var v=new Map,b=ah=new Map;b.set(h,v)}else b=ah,v=b.get(h),v||(v=new Map,b.set(h,v));if(v.has(t))return v;for(v.set(t,null),h=h.getElementsByTagName(t),b=0;b<h.length;b++){var T=h[b];if(!(T[Mr]||T[Dn]||t==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var G=T.getAttribute(s)||"";G=t+G;var ut=v.get(G);ut?ut.push(T):v.set(G,[T])}}return v}function xy(t,s,h){t=t.ownerDocument||t,t.head.insertBefore(h,s==="title"?t.querySelector("head > title"):null)}function iw(t,s,h){if(h===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(t=s.disabled,typeof s.precedence=="string"&&t==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Ey(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function rw(t,s,h,v){if(h.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var b=kl(v.href),T=s.querySelector(ku(b));if(T){s=T._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=oh.bind(t),s.then(t,t)),h.state.loading|=4,h.instance=T,dn(T);return}T=s.ownerDocument||s,v=vy(v),(b=qr.get(b))&&Kd(v,b),T=T.createElement("link"),dn(T);var G=T;G._p=new Promise(function(ut,vt){G.onload=ut,G.onerror=vt}),_i(T,"link",v),h.instance=T}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(h,s),(s=h.state.preload)&&(h.state.loading&3)===0&&(t.count++,h=oh.bind(t),s.addEventListener("load",h),s.addEventListener("error",h))}}var tg=0;function sw(t,s){return t.stylesheets&&t.count===0&&uh(t,t.stylesheets),0<t.count||0<t.imgCount?function(h){var v=setTimeout(function(){if(t.stylesheets&&uh(t,t.stylesheets),t.unsuspend){var T=t.unsuspend;t.unsuspend=null,T()}},6e4+s);0<t.imgBytes&&tg===0&&(tg=62500*jE());var b=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&uh(t,t.stylesheets),t.unsuspend)){var T=t.unsuspend;t.unsuspend=null,T()}},(t.imgBytes>tg?50:800)+s);return t.unsuspend=h,function(){t.unsuspend=null,clearTimeout(v),clearTimeout(b)}}:null}function oh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var lh=null;function uh(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,lh=new Map,s.forEach(aw,t),lh=null,oh.call(t))}function aw(t,s){if(!(s.state.loading&4)){var h=lh.get(t);if(h)var v=h.get(null);else{h=new Map,lh.set(t,h);for(var b=t.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<b.length;T++){var G=b[T];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(h.set(G.dataset.precedence,G),v=G)}v&&h.set(null,v)}b=s.instance,G=b.getAttribute("data-precedence"),T=h.get(G)||v,T===v&&h.set(null,b),h.set(G,b),this.count++,v=oh.bind(this),b.addEventListener("load",v),b.addEventListener("error",v),T?T.parentNode.insertBefore(b,T.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(b,t.firstChild)),s.state.loading|=4}}var Nu={$$typeof:Y,Provider:null,Consumer:null,_currentValue:P,_currentValue2:P,_threadCount:0};function ow(t,s,h,v,b,T,G,ut,vt){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fs(0),this.hiddenUpdates=fs(null),this.identifierPrefix=v,this.onUncaughtError=b,this.onCaughtError=T,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=vt,this.incompleteTransitions=new Map}function wy(t,s,h,v,b,T,G,ut,vt,Lt,Ot,zt){return t=new ow(t,s,h,G,vt,Lt,Ot,zt,ut),s=1,T===!0&&(s|=24),T=ki(3,null,null,s),t.current=T,T.stateNode=t,s=Df(),s.refCount++,t.pooledCache=s,s.refCount++,T.memoizedState={element:v,isDehydrated:h,cache:s},zf(T),t}function Sy(t){return t?(t=$s,t):$s}function by(t,s,h,v,b,T){b=Sy(b),v.context===null?v.context=b:v.pendingContext=b,v=ja(s),v.payload={element:h},T=T===void 0?null:T,T!==null&&(v.callback=T),h=Ua(t,v,s),h!==null&&(or(h,t,s),lu(h,t,s))}function Ly(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var h=t.retryLane;t.retryLane=h!==0&&h<s?h:s}}function eg(t,s){Ly(t,s),(t=t.alternate)&&Ly(t,s)}function Ty(t){if(t.tag===13||t.tag===31){var s=zi(t,67108864);s!==null&&or(s,t,67108864),eg(t,67108864)}}function Cy(t){if(t.tag===13||t.tag===31){var s=Tr();s=An(s);var h=zi(t,s);h!==null&&or(h,t,s),eg(t,s)}}var ch=!0;function lw(t,s,h,v){var b=D.T;D.T=null;var T=z.p;try{z.p=2,ng(t,s,h,v)}finally{z.p=T,D.T=b}}function uw(t,s,h,v){var b=D.T;D.T=null;var T=z.p;try{z.p=8,ng(t,s,h,v)}finally{z.p=T,D.T=b}}function ng(t,s,h,v){if(ch){var b=ig(v);if(b===null)qd(t,s,v,hh,h),My(t,v);else if(hw(b,t,s,h,v))v.stopPropagation();else if(My(t,v),s&4&&-1<cw.indexOf(t)){for(;b!==null;){var T=gs(b);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var G=qi(T.pendingLanes);if(G!==0){var ut=T;for(ut.pendingLanes|=2,ut.entangledLanes|=2;G;){var vt=1<<31-di(G);ut.entanglements[1]|=vt,G&=~vt}ks(T),(Je&6)===0&&(Xc=Yt()+500,bu(0))}}break;case 31:case 13:ut=zi(T,2),ut!==null&&or(ut,T,2),Qc(),eg(T,2)}if(T=ig(v),T===null&&qd(t,s,v,hh,h),T===b)break;b=T}b!==null&&v.stopPropagation()}else qd(t,s,v,null,h)}}function ig(t){return t=Fn(t),rg(t)}var hh=null;function rg(t){if(hh=null,t=$e(t),t!==null){var s=c(t);if(s===null)t=null;else{var h=s.tag;if(h===13){if(t=f(s),t!==null)return t;t=null}else if(h===31){if(t=p(s),t!==null)return t;t=null}else if(h===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return hh=t,null}function ky(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bn()){case Re:return 2;case yn:return 8;case Vt:case Xr:return 32;case ve:return 268435456;default:return 32}default:return 32}}var sg=!1,Ja=null,Ka=null,$a=null,Ou=new Map,Au=new Map,to=[],cw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function My(t,s){switch(t){case"focusin":case"focusout":Ja=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":$a=null;break;case"pointerover":case"pointerout":Ou.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(s.pointerId)}}function Du(t,s,h,v,b,T){return t===null||t.nativeEvent!==T?(t={blockedOn:s,domEventName:h,eventSystemFlags:v,nativeEvent:T,targetContainers:[b]},s!==null&&(s=gs(s),s!==null&&Ty(s)),t):(t.eventSystemFlags|=v,s=t.targetContainers,b!==null&&s.indexOf(b)===-1&&s.push(b),t)}function hw(t,s,h,v,b){switch(s){case"focusin":return Ja=Du(Ja,t,s,h,v,b),!0;case"dragenter":return Ka=Du(Ka,t,s,h,v,b),!0;case"mouseover":return $a=Du($a,t,s,h,v,b),!0;case"pointerover":var T=b.pointerId;return Ou.set(T,Du(Ou.get(T)||null,t,s,h,v,b)),!0;case"gotpointercapture":return T=b.pointerId,Au.set(T,Du(Au.get(T)||null,t,s,h,v,b)),!0}return!1}function Ny(t){var s=$e(t.target);if(s!==null){var h=c(s);if(h!==null){if(s=h.tag,s===13){if(s=f(h),s!==null){t.blockedOn=s,po(t.priority,function(){Cy(h)});return}}else if(s===31){if(s=p(h),s!==null){t.blockedOn=s,po(t.priority,function(){Cy(h)});return}}else if(s===3&&h.stateNode.current.memoizedState.isDehydrated){t.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fh(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var h=ig(t.nativeEvent);if(h===null){h=t.nativeEvent;var v=new h.constructor(h.type,h);ni=v,h.target.dispatchEvent(v),ni=null}else return s=gs(h),s!==null&&Ty(s),t.blockedOn=h,!1;s.shift()}return!0}function Oy(t,s,h){fh(t)&&h.delete(s)}function fw(){sg=!1,Ja!==null&&fh(Ja)&&(Ja=null),Ka!==null&&fh(Ka)&&(Ka=null),$a!==null&&fh($a)&&($a=null),Ou.forEach(Oy),Au.forEach(Oy)}function dh(t,s){t.blockedOn===s&&(t.blockedOn=null,sg||(sg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,fw)))}var gh=null;function Ay(t){gh!==t&&(gh=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){gh===t&&(gh=null);for(var s=0;s<t.length;s+=3){var h=t[s],v=t[s+1],b=t[s+2];if(typeof v!="function"){if(rg(v||h)===null)continue;break}var T=gs(h);T!==null&&(t.splice(s,3),s-=3,id(T,{pending:!0,data:b,method:h.method,action:v},v,b))}}))}function Nl(t){function s(vt){return dh(vt,t)}Ja!==null&&dh(Ja,t),Ka!==null&&dh(Ka,t),$a!==null&&dh($a,t),Ou.forEach(s),Au.forEach(s);for(var h=0;h<to.length;h++){var v=to[h];v.blockedOn===t&&(v.blockedOn=null)}for(;0<to.length&&(h=to[0],h.blockedOn===null);)Ny(h),h.blockedOn===null&&to.shift();if(h=(t.ownerDocument||t).$$reactFormReplay,h!=null)for(v=0;v<h.length;v+=3){var b=h[v],T=h[v+1],G=b[Ue]||null;if(typeof T=="function")G||Ay(h);else if(G){var ut=null;if(T&&T.hasAttribute("formAction")){if(b=T,G=T[Ue]||null)ut=G.formAction;else if(rg(b)!==null)continue}else ut=G.action;typeof ut=="function"?h[v+1]=ut:(h.splice(v,3),v-=3),Ay(h)}}}function Dy(){function t(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(G){return b=G})},focusReset:"manual",scroll:"manual"})}function s(){b!==null&&(b(),b=null),v||setTimeout(h,20)}function h(){if(!v&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,b=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(h,100),function(){v=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),b!==null&&(b(),b=null)}}}function ag(t){this._internalRoot=t}ph.prototype.render=ag.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(l(409));var h=s.current,v=Tr();by(h,v,t,s,null,null)},ph.prototype.unmount=ag.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;by(t.current,2,null,t,null,null),Qc(),s[fr]=null}};function ph(t){this._internalRoot=t}ph.prototype.unstable_scheduleHydration=function(t){if(t){var s=ds();t={blockedOn:null,target:t,priority:s};for(var h=0;h<to.length&&s!==0&&s<to[h].priority;h++);to.splice(h,0,t),h===0&&Ny(t)}};var Iy=n.version;if(Iy!=="19.2.3")throw Error(l(527,Iy,"19.2.3"));z.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=_(s),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var dw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mh.isDisabled&&mh.supportsFiber)try{_n=mh.inject(dw),On=mh}catch{}}return Ru.createRoot=function(t,s){if(!r(t))throw Error(l(299));var h=!1,v="",b=Fm,T=qm,G=Gm;return s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(v=s.identifierPrefix),s.onUncaughtError!==void 0&&(b=s.onUncaughtError),s.onCaughtError!==void 0&&(T=s.onCaughtError),s.onRecoverableError!==void 0&&(G=s.onRecoverableError)),s=wy(t,1,!1,null,null,h,v,null,b,T,G,Dy),t[fr]=s.current,Fd(t),new ag(s)},Ru.hydrateRoot=function(t,s,h){if(!r(t))throw Error(l(299));var v=!1,b="",T=Fm,G=qm,ut=Gm,vt=null;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(T=h.onUncaughtError),h.onCaughtError!==void 0&&(G=h.onCaughtError),h.onRecoverableError!==void 0&&(ut=h.onRecoverableError),h.formState!==void 0&&(vt=h.formState)),s=wy(t,1,!0,s,h??null,v,b,vt,T,G,ut,Dy),s.context=Sy(null),h=s.current,v=Tr(),v=An(v),b=ja(v),b.callback=null,Ua(h,b,v),h=v,s.current.lanes=h,Gi(s,h),ks(s),t[fr]=s.current,Fd(t),new ph(s)},Ru.version="19.2.3",Ru}var Hy;function Sw(){if(Hy)return ug.exports;Hy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),ug.exports=ww(),ug.exports}var bw=Sw();const Lw=[{id:"smoke",label:" Smoke / AQI",color:"#888"},{id:"winter",label:" Winter Storm",color:"#00BFFF"},{id:"heat",label:" Heatwave",color:"#FF4500"},{id:"flood",label:" Flood / Hurricane",color:"#0000FF"},{id:"flu",label:" Respiratory Illness",color:"#32CD32"},{id:"technical",label:" Tech / Architecture",color:"#6610f2"}],Tw=({activeTab:e,onTabChange:n})=>R.jsx("div",{style:{display:"flex",gap:"5px",padding:"10px",backgroundColor:"#f8f9fa",borderBottom:"1px solid #ddd",overflowX:"auto",position:"relative",zIndex:1100,flexShrink:0},children:Lw.map(i=>R.jsx("button",{onClick:()=>n(i.id),style:{padding:"8px 16px",border:"none",borderRadius:"20px",backgroundColor:e===i.id?i.color:"#e9ecef",color:e===i.id?"white":"#495057",cursor:"pointer",fontWeight:"bold",whiteSpace:"nowrap",transition:"all 0.2s ease",boxShadow:e===i.id?"0 2px 4px rgba(0,0,0,0.2)":"none"},children:i.label},i.id))});var Ih={exports:{}};var Cw=Ih.exports,Yy;function kw(){return Yy||(Yy=1,(function(e,n){((i,l)=>{e.exports=l()})(Cw,function i(){var l=typeof self<"u"?self:typeof window<"u"?window:l!==void 0?l:{},r,c=!l.document&&!!l.postMessage,f=l.IS_PAPA_WORKER||!1,p={},y=0,_={};function E(k){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(A){var q=et(A);q.chunkSize=parseInt(q.chunkSize),A.step||A.chunk||(q.chunkSize=null),this._handle=new Q(q),(this._handle.streamer=this)._config=q}).call(this,k),this.parseChunk=function(A,q){var X=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<X){let nt=this._config.newline;nt||(Z=this._config.quoteChar||'"',nt=this._handle.guessLineEndings(A,Z)),A=[...A.split(nt).slice(X)].join(nt)}this.isFirstChunk&&W(this._config.beforeFirstChunk)&&(Z=this._config.beforeFirstChunk(A))!==void 0&&(A=Z),this.isFirstChunk=!1,this._halted=!1;var X=this._partialLine+A,Z=(this._partialLine="",this._handle.parse(X,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(A=Z.meta.cursor,X=(this._finished||(this._partialLine=X.substring(A-this._baseIndex),this._baseIndex=A),Z&&Z.data&&(this._rowCount+=Z.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),f)l.postMessage({results:Z,workerId:_.WORKER_ID,finished:X});else if(W(this._config.chunk)&&!q){if(this._config.chunk(Z,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Z=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Z.data),this._completeResults.errors=this._completeResults.errors.concat(Z.errors),this._completeResults.meta=Z.meta),this._completed||!X||!W(this._config.complete)||Z&&Z.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),X||Z&&Z.meta.paused||this._nextChunk(),Z}this._halted=!0},this._sendError=function(A){W(this._config.error)?this._config.error(A):f&&this._config.error&&l.postMessage({workerId:_.WORKER_ID,error:A,finished:!1})}}function S(k){var A;(k=k||{}).chunkSize||(k.chunkSize=_.RemoteChunkSize),E.call(this,k),this._nextChunk=c?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(q){this._input=q,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(A=new XMLHttpRequest,this._config.withCredentials&&(A.withCredentials=this._config.withCredentials),c||(A.onload=tt(this._chunkLoaded,this),A.onerror=tt(this._chunkError,this)),A.open(this._config.downloadRequestBody?"POST":"GET",this._input,!c),this._config.downloadRequestHeaders){var q,X=this._config.downloadRequestHeaders;for(q in X)A.setRequestHeader(q,X[q])}var Z;this._config.chunkSize&&(Z=this._start+this._config.chunkSize-1,A.setRequestHeader("Range","bytes="+this._start+"-"+Z));try{A.send(this._config.downloadRequestBody)}catch(nt){this._chunkError(nt.message)}c&&A.status===0&&this._chunkError()}},this._chunkLoaded=function(){A.readyState===4&&(A.status<200||400<=A.status?this._chunkError():(this._start+=this._config.chunkSize||A.responseText.length,this._finished=!this._config.chunkSize||this._start>=(q=>(q=q.getResponseHeader("Content-Range"))!==null?parseInt(q.substring(q.lastIndexOf("/")+1)):-1)(A),this.parseChunk(A.responseText)))},this._chunkError=function(q){q=A.statusText||q,this._sendError(new Error(q))}}function M(k){(k=k||{}).chunkSize||(k.chunkSize=_.LocalChunkSize),E.call(this,k);var A,q,X=typeof FileReader<"u";this.stream=function(Z){this._input=Z,q=Z.slice||Z.webkitSlice||Z.mozSlice,X?((A=new FileReader).onload=tt(this._chunkLoaded,this),A.onerror=tt(this._chunkError,this)):A=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Z=this._input,nt=(this._config.chunkSize&&(nt=Math.min(this._start+this._config.chunkSize,this._input.size),Z=q.call(Z,this._start,nt)),A.readAsText(Z,this._config.encoding));X||this._chunkLoaded({target:{result:nt}})},this._chunkLoaded=function(Z){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Z.target.result)},this._chunkError=function(){this._sendError(A.error)}}function O(k){var A;E.call(this,k=k||{}),this.stream=function(q){return A=q,this._nextChunk()},this._nextChunk=function(){var q,X;if(!this._finished)return q=this._config.chunkSize,A=q?(X=A.substring(0,q),A.substring(q)):(X=A,""),this._finished=!A,this.parseChunk(X)}}function B(k){E.call(this,k=k||{});var A=[],q=!0,X=!1;this.pause=function(){E.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){E.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Z){this._input=Z,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){X&&A.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),A.length?this.parseChunk(A.shift()):q=!0},this._streamData=tt(function(Z){try{A.push(typeof Z=="string"?Z:Z.toString(this._config.encoding)),q&&(q=!1,this._checkIsFinished(),this.parseChunk(A.shift()))}catch(nt){this._streamError(nt)}},this),this._streamError=tt(function(Z){this._streamCleanUp(),this._sendError(Z)},this),this._streamEnd=tt(function(){this._streamCleanUp(),X=!0,this._streamData("")},this),this._streamCleanUp=tt(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Q(k){var A,q,X,Z,nt=Math.pow(2,53),at=-nt,it=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,D=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,z=this,P=0,$=0,J=!1,U=!1,K=[],ct={data:[],errors:[],meta:{}};function gt(ht){return k.skipEmptyLines==="greedy"?ht.join("").trim()==="":ht.length===1&&ht[0].length===0}function pt(){if(ct&&X&&(Tt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+_.DefaultDelimiter+"'"),X=!1),k.skipEmptyLines&&(ct.data=ct.data.filter(function(ft){return!gt(ft)})),yt()){let ft=function(Xt,Zt){W(k.transformHeader)&&(Xt=k.transformHeader(Xt,Zt)),K.push(Xt)};var Mt=ft;if(ct)if(Array.isArray(ct.data[0])){for(var ht=0;yt()&&ht<ct.data.length;ht++)ct.data[ht].forEach(ft);ct.data.splice(0,1)}else ct.data.forEach(ft)}function Dt(ft,Xt){for(var Zt=k.header?{}:[],Bt=0;Bt<ft.length;Bt++){var Ut=Bt,Le=ft[Bt],Le=((he,At)=>(Ve=>(k.dynamicTypingFunction&&k.dynamicTyping[Ve]===void 0&&(k.dynamicTyping[Ve]=k.dynamicTypingFunction(Ve)),(k.dynamicTyping[Ve]||k.dynamicTyping)===!0))(he)?At==="true"||At==="TRUE"||At!=="false"&&At!=="FALSE"&&((Ve=>{if(it.test(Ve)&&(Ve=parseFloat(Ve),at<Ve&&Ve<nt))return 1})(At)?parseFloat(At):D.test(At)?new Date(At):At===""?null:At):At)(Ut=k.header?Bt>=K.length?"__parsed_extra":K[Bt]:Ut,Le=k.transform?k.transform(Le,Ut):Le);Ut==="__parsed_extra"?(Zt[Ut]=Zt[Ut]||[],Zt[Ut].push(Le)):Zt[Ut]=Le}return k.header&&(Bt>K.length?Tt("FieldMismatch","TooManyFields","Too many fields: expected "+K.length+" fields but parsed "+Bt,$+Xt):Bt<K.length&&Tt("FieldMismatch","TooFewFields","Too few fields: expected "+K.length+" fields but parsed "+Bt,$+Xt)),Zt}var It;ct&&(k.header||k.dynamicTyping||k.transform)&&(It=1,!ct.data.length||Array.isArray(ct.data[0])?(ct.data=ct.data.map(Dt),It=ct.data.length):ct.data=Dt(ct.data,0),k.header&&ct.meta&&(ct.meta.fields=K),$+=It)}function yt(){return k.header&&K.length===0}function Tt(ht,Dt,It,Mt){ht={type:ht,code:Dt,message:It},Mt!==void 0&&(ht.row=Mt),ct.errors.push(ht)}W(k.step)&&(Z=k.step,k.step=function(ht){ct=ht,yt()?pt():(pt(),ct.data.length!==0&&(P+=ht.data.length,k.preview&&P>k.preview?q.abort():(ct.data=ct.data[0],Z(ct,z))))}),this.parse=function(ht,Dt,It){var Mt=k.quoteChar||'"',Mt=(k.newline||(k.newline=this.guessLineEndings(ht,Mt)),X=!1,k.delimiter?W(k.delimiter)&&(k.delimiter=k.delimiter(ht),ct.meta.delimiter=k.delimiter):((Mt=((ft,Xt,Zt,Bt,Ut)=>{var Le,he,At,Ve;Ut=Ut||[",","	","|",";",_.RECORD_SEP,_.UNIT_SEP];for(var ti=0;ti<Ut.length;ti++){for(var pn,Fi=Ut[ti],Yt=0,bn=0,Re=0,yn=(At=void 0,new rt({comments:Bt,delimiter:Fi,newline:Xt,preview:10}).parse(ft)),Vt=0;Vt<yn.data.length;Vt++)Zt&&gt(yn.data[Vt])?Re++:(pn=yn.data[Vt].length,bn+=pn,At===void 0?At=pn:0<pn&&(Yt+=Math.abs(pn-At),At=pn));0<yn.data.length&&(bn/=yn.data.length-Re),(he===void 0||Yt<=he)&&(Ve===void 0||Ve<bn)&&1.99<bn&&(he=Yt,Le=Fi,Ve=bn)}return{successful:!!(k.delimiter=Le),bestDelimiter:Le}})(ht,k.newline,k.skipEmptyLines,k.comments,k.delimitersToGuess)).successful?k.delimiter=Mt.bestDelimiter:(X=!0,k.delimiter=_.DefaultDelimiter),ct.meta.delimiter=k.delimiter),et(k));return k.preview&&k.header&&Mt.preview++,A=ht,q=new rt(Mt),ct=q.parse(A,Dt,It),pt(),J?{meta:{paused:!0}}:ct||{meta:{paused:!1}}},this.paused=function(){return J},this.pause=function(){J=!0,q.abort(),A=W(k.chunk)?"":A.substring(q.getCharIndex())},this.resume=function(){z.streamer._halted?(J=!1,z.streamer.parseChunk(A,!0)):setTimeout(z.resume,3)},this.aborted=function(){return U},this.abort=function(){U=!0,q.abort(),ct.meta.aborted=!0,W(k.complete)&&k.complete(ct),A=""},this.guessLineEndings=function(ft,Mt){ft=ft.substring(0,1048576);var Mt=new RegExp(st(Mt)+"([^]*?)"+st(Mt),"gm"),It=(ft=ft.replace(Mt,"")).split("\r"),Mt=ft.split(`
`),ft=1<Mt.length&&Mt[0].length<It[0].length;if(It.length===1||ft)return`
`;for(var Xt=0,Zt=0;Zt<It.length;Zt++)It[Zt][0]===`
`&&Xt++;return Xt>=It.length/2?`\r
`:"\r"}}function st(k){return k.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function rt(k){var A=(k=k||{}).delimiter,q=k.newline,X=k.comments,Z=k.step,nt=k.preview,at=k.fastMode,it=null,D=!1,z=k.quoteChar==null?'"':k.quoteChar,P=z;if(k.escapeChar!==void 0&&(P=k.escapeChar),(typeof A!="string"||-1<_.BAD_DELIMITERS.indexOf(A))&&(A=","),X===A)throw new Error("Comment character same as delimiter");X===!0?X="#":(typeof X!="string"||-1<_.BAD_DELIMITERS.indexOf(X))&&(X=!1),q!==`
`&&q!=="\r"&&q!==`\r
`&&(q=`
`);var $=0,J=!1;this.parse=function(U,K,ct){if(typeof U!="string")throw new Error("Input must be a string");var gt=U.length,pt=A.length,yt=q.length,Tt=X.length,ht=W(Z),Dt=[],It=[],Mt=[],ft=$=0;if(!U)return Yt();if(at||at!==!1&&U.indexOf(z)===-1){for(var Xt=U.split(q),Zt=0;Zt<Xt.length;Zt++){if(Mt=Xt[Zt],$+=Mt.length,Zt!==Xt.length-1)$+=q.length;else if(ct)return Yt();if(!X||Mt.substring(0,Tt)!==X){if(ht){if(Dt=[],Ve(Mt.split(A)),bn(),J)return Yt()}else Ve(Mt.split(A));if(nt&&nt<=Zt)return Dt=Dt.slice(0,nt),Yt(!0)}}return Yt()}for(var Bt=U.indexOf(A,$),Ut=U.indexOf(q,$),Le=new RegExp(st(P)+st(z),"g"),he=U.indexOf(z,$);;)if(U[$]===z)for(he=$,$++;;){if((he=U.indexOf(z,he+1))===-1)return ct||It.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Dt.length,index:$}),pn();if(he===gt-1)return pn(U.substring($,he).replace(Le,z));if(z===P&&U[he+1]===P)he++;else if(z===P||he===0||U[he-1]!==P){Bt!==-1&&Bt<he+1&&(Bt=U.indexOf(A,he+1));var At=ti((Ut=Ut!==-1&&Ut<he+1?U.indexOf(q,he+1):Ut)===-1?Bt:Math.min(Bt,Ut));if(U.substr(he+1+At,pt)===A){Mt.push(U.substring($,he).replace(Le,z)),U[$=he+1+At+pt]!==z&&(he=U.indexOf(z,$)),Bt=U.indexOf(A,$),Ut=U.indexOf(q,$);break}if(At=ti(Ut),U.substring(he+1+At,he+1+At+yt)===q){if(Mt.push(U.substring($,he).replace(Le,z)),Fi(he+1+At+yt),Bt=U.indexOf(A,$),he=U.indexOf(z,$),ht&&(bn(),J))return Yt();if(nt&&Dt.length>=nt)return Yt(!0);break}It.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Dt.length,index:$}),he++}}else if(X&&Mt.length===0&&U.substring($,$+Tt)===X){if(Ut===-1)return Yt();$=Ut+yt,Ut=U.indexOf(q,$),Bt=U.indexOf(A,$)}else if(Bt!==-1&&(Bt<Ut||Ut===-1))Mt.push(U.substring($,Bt)),$=Bt+pt,Bt=U.indexOf(A,$);else{if(Ut===-1)break;if(Mt.push(U.substring($,Ut)),Fi(Ut+yt),ht&&(bn(),J))return Yt();if(nt&&Dt.length>=nt)return Yt(!0)}return pn();function Ve(Re){Dt.push(Re),ft=$}function ti(Re){var yn=0;return yn=Re!==-1&&(Re=U.substring(he+1,Re))&&Re.trim()===""?Re.length:yn}function pn(Re){return ct||(Re===void 0&&(Re=U.substring($)),Mt.push(Re),$=gt,Ve(Mt),ht&&bn()),Yt()}function Fi(Re){$=Re,Ve(Mt),Mt=[],Ut=U.indexOf(q,$)}function Yt(Re){if(k.header&&!K&&Dt.length&&!D){var yn=Dt[0],Vt=Object.create(null),Xr=new Set(yn);let ve=!1;for(let ie=0;ie<yn.length;ie++){let Ei=yn[ie];if(Vt[Ei=W(k.transformHeader)?k.transformHeader(Ei,ie):Ei]){let _n,On=Vt[Ei];for(;_n=Ei+"_"+On,On++,Xr.has(_n););Xr.add(_n),yn[ie]=_n,Vt[Ei]++,ve=!0,(it=it===null?{}:it)[_n]=Ei}else Vt[Ei]=1,yn[ie]=Ei;Xr.add(Ei)}ve&&console.warn("Duplicate headers found and renamed."),D=!0}return{data:Dt,errors:It,meta:{delimiter:A,linebreak:q,aborted:J,truncated:!!Re,cursor:ft+(K||0),renamedHeaders:it}}}function bn(){Z(Yt()),Dt=[],It=[]}},this.abort=function(){J=!0},this.getCharIndex=function(){return $}}function j(k){var A=k.data,q=p[A.workerId],X=!1;if(A.error)q.userError(A.error,A.file);else if(A.results&&A.results.data){var Z={abort:function(){X=!0,Y(A.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:V,resume:V};if(W(q.userStep)){for(var nt=0;nt<A.results.data.length&&(q.userStep({data:A.results.data[nt],errors:A.results.errors,meta:A.results.meta},Z),!X);nt++);delete A.results}else W(q.userChunk)&&(q.userChunk(A.results,Z,A.file),delete A.results)}A.finished&&!X&&Y(A.workerId,A.results)}function Y(k,A){var q=p[k];W(q.userComplete)&&q.userComplete(A),q.terminate(),delete p[k]}function V(){throw new Error("Not implemented.")}function et(k){if(typeof k!="object"||k===null)return k;var A,q=Array.isArray(k)?[]:{};for(A in k)q[A]=et(k[A]);return q}function tt(k,A){return function(){k.apply(A,arguments)}}function W(k){return typeof k=="function"}return _.parse=function(k,A){var q=(A=A||{}).dynamicTyping||!1;if(W(q)&&(A.dynamicTypingFunction=q,q={}),A.dynamicTyping=q,A.transform=!!W(A.transform)&&A.transform,!A.worker||!_.WORKERS_SUPPORTED)return q=null,_.NODE_STREAM_INPUT,typeof k=="string"?(k=(X=>X.charCodeAt(0)!==65279?X:X.slice(1))(k),q=new(A.download?S:O)(A)):k.readable===!0&&W(k.read)&&W(k.on)?q=new B(A):(l.File&&k instanceof File||k instanceof Object)&&(q=new M(A)),q.stream(k);(q=(()=>{var X;return!!_.WORKERS_SUPPORTED&&(X=(()=>{var Z=l.URL||l.webkitURL||null,nt=i.toString();return _.BLOB_URL||(_.BLOB_URL=Z.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",nt,")();"],{type:"text/javascript"})))})(),(X=new l.Worker(X)).onmessage=j,X.id=y++,p[X.id]=X)})()).userStep=A.step,q.userChunk=A.chunk,q.userComplete=A.complete,q.userError=A.error,A.step=W(A.step),A.chunk=W(A.chunk),A.complete=W(A.complete),A.error=W(A.error),delete A.worker,q.postMessage({input:k,config:A,workerId:q.id})},_.unparse=function(k,A){var q=!1,X=!0,Z=",",nt=`\r
`,at='"',it=at+at,D=!1,z=null,P=!1,$=((()=>{if(typeof A=="object"){if(typeof A.delimiter!="string"||_.BAD_DELIMITERS.filter(function(K){return A.delimiter.indexOf(K)!==-1}).length||(Z=A.delimiter),typeof A.quotes!="boolean"&&typeof A.quotes!="function"&&!Array.isArray(A.quotes)||(q=A.quotes),typeof A.skipEmptyLines!="boolean"&&typeof A.skipEmptyLines!="string"||(D=A.skipEmptyLines),typeof A.newline=="string"&&(nt=A.newline),typeof A.quoteChar=="string"&&(at=A.quoteChar),typeof A.header=="boolean"&&(X=A.header),Array.isArray(A.columns)){if(A.columns.length===0)throw new Error("Option columns is empty");z=A.columns}A.escapeChar!==void 0&&(it=A.escapeChar+at),A.escapeFormulae instanceof RegExp?P=A.escapeFormulae:typeof A.escapeFormulae=="boolean"&&A.escapeFormulae&&(P=/^[=+\-@\t\r].*$/)}})(),new RegExp(st(at),"g"));if(typeof k=="string"&&(k=JSON.parse(k)),Array.isArray(k)){if(!k.length||Array.isArray(k[0]))return J(null,k,D);if(typeof k[0]=="object")return J(z||Object.keys(k[0]),k,D)}else if(typeof k=="object")return typeof k.data=="string"&&(k.data=JSON.parse(k.data)),Array.isArray(k.data)&&(k.fields||(k.fields=k.meta&&k.meta.fields||z),k.fields||(k.fields=Array.isArray(k.data[0])?k.fields:typeof k.data[0]=="object"?Object.keys(k.data[0]):[]),Array.isArray(k.data[0])||typeof k.data[0]=="object"||(k.data=[k.data])),J(k.fields||[],k.data||[],D);throw new Error("Unable to serialize unrecognized input");function J(K,ct,gt){var pt="",yt=(typeof K=="string"&&(K=JSON.parse(K)),typeof ct=="string"&&(ct=JSON.parse(ct)),Array.isArray(K)&&0<K.length),Tt=!Array.isArray(ct[0]);if(yt&&X){for(var ht=0;ht<K.length;ht++)0<ht&&(pt+=Z),pt+=U(K[ht],ht);0<ct.length&&(pt+=nt)}for(var Dt=0;Dt<ct.length;Dt++){var It=(yt?K:ct[Dt]).length,Mt=!1,ft=yt?Object.keys(ct[Dt]).length===0:ct[Dt].length===0;if(gt&&!yt&&(Mt=gt==="greedy"?ct[Dt].join("").trim()==="":ct[Dt].length===1&&ct[Dt][0].length===0),gt==="greedy"&&yt){for(var Xt=[],Zt=0;Zt<It;Zt++){var Bt=Tt?K[Zt]:Zt;Xt.push(ct[Dt][Bt])}Mt=Xt.join("").trim()===""}if(!Mt){for(var Ut=0;Ut<It;Ut++){0<Ut&&!ft&&(pt+=Z);var Le=yt&&Tt?K[Ut]:Ut;pt+=U(ct[Dt][Le],Ut)}Dt<ct.length-1&&(!gt||0<It&&!ft)&&(pt+=nt)}}return pt}function U(K,ct){var gt,pt;return K==null?"":K.constructor===Date?JSON.stringify(K).slice(1,25):(pt=!1,P&&typeof K=="string"&&P.test(K)&&(K="'"+K,pt=!0),gt=K.toString().replace($,it),(pt=pt||q===!0||typeof q=="function"&&q(K,ct)||Array.isArray(q)&&q[ct]||((yt,Tt)=>{for(var ht=0;ht<Tt.length;ht++)if(-1<yt.indexOf(Tt[ht]))return!0;return!1})(gt,_.BAD_DELIMITERS)||-1<gt.indexOf(Z)||gt.charAt(0)===" "||gt.charAt(gt.length-1)===" ")?at+gt+at:gt)}},_.RECORD_SEP="",_.UNIT_SEP="",_.BYTE_ORDER_MARK="\uFEFF",_.BAD_DELIMITERS=["\r",`
`,'"',_.BYTE_ORDER_MARK],_.WORKERS_SUPPORTED=!c&&!!l.Worker,_.NODE_STREAM_INPUT=1,_.LocalChunkSize=10485760,_.RemoteChunkSize=5242880,_.DefaultDelimiter=",",_.Parser=rt,_.ParserHandle=Q,_.NetworkStreamer=S,_.FileStreamer=M,_.StringStreamer=O,_.ReadableStreamStreamer=B,l.jQuery&&((r=l.jQuery).fn.parse=function(k){var A=k.config||{},q=[];return this.each(function(nt){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&l.FileReader)||!this.files||this.files.length===0)return!0;for(var at=0;at<this.files.length;at++)q.push({file:this.files[at],inputElem:this,instanceConfig:r.extend({},A)})}),X(),this;function X(){if(q.length===0)W(k.complete)&&k.complete();else{var nt,at,it,D,z=q[0];if(W(k.before)){var P=k.before(z.file,z.inputElem);if(typeof P=="object"){if(P.action==="abort")return nt="AbortError",at=z.file,it=z.inputElem,D=P.reason,void(W(k.error)&&k.error({name:nt},at,it,D));if(P.action==="skip")return void Z();typeof P.config=="object"&&(z.instanceConfig=r.extend(z.instanceConfig,P.config))}else if(P==="skip")return void Z()}var $=z.instanceConfig.complete;z.instanceConfig.complete=function(J){W($)&&$(J,z.file,z.inputElem),Z()},_.parse(z.file,z.instanceConfig)}}function Z(){q.splice(0,1),X()}}),f&&(l.onmessage=function(k){k=k.data,_.WORKER_ID===void 0&&k&&(_.WORKER_ID=k.workerId),typeof k.input=="string"?l.postMessage({workerId:_.WORKER_ID,results:_.parse(k.input,k.config),finished:!0}):(l.File&&k.input instanceof File||k.input instanceof Object)&&(k=_.parse(k.input,k.config))&&l.postMessage({workerId:_.WORKER_ID,results:k,finished:!0})}),(S.prototype=Object.create(E.prototype)).constructor=S,(M.prototype=Object.create(E.prototype)).constructor=M,(O.prototype=Object.create(O.prototype)).constructor=O,(B.prototype=Object.create(E.prototype)).constructor=B,_})})(Ih)),Ih.exports}var Mw=kw();const uf=oo(Mw);var Wn=63710088e-1,cf={centimeters:Wn*100,centimetres:Wn*100,degrees:360/(2*Math.PI),feet:Wn*3.28084,inches:Wn*39.37,kilometers:Wn/1e3,kilometres:Wn/1e3,meters:Wn,metres:Wn,miles:Wn/1609.344,millimeters:Wn*1e3,millimetres:Wn*1e3,nauticalmiles:Wn/1852,radians:1,yards:Wn*1.0936},Hh={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Sn(e,n,i={}){const l={type:"Feature"};return(i.id===0||i.id)&&(l.id=i.id),i.bbox&&(l.bbox=i.bbox),l.properties=n||{},l.geometry=e,l}function rx(e,n,i={}){switch(e){case"Point":return ue(n).geometry;case"LineString":return Se(n).geometry;case"Polygon":return le(n).geometry;case"MultiPoint":return pc(n).geometry;case"MultiLineString":return lo(n).geometry;case"MultiPolygon":return ur(n).geometry;default:throw new Error(e+" is invalid")}}function ue(e,n,i={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Kn(e[0])||!Kn(e[1]))throw new Error("coordinates must contain numbers");return Sn({type:"Point",coordinates:e},n,i)}function sx(e,n,i={}){return Jt(e.map(l=>ue(l,n)),i)}function le(e,n,i={}){for(const r of e){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let c=0;c<r[r.length-1].length;c++)if(r[r.length-1][c]!==r[0][c])throw new Error("First and last Position are not equivalent.")}return Sn({type:"Polygon",coordinates:e},n,i)}function ax(e,n,i={}){return Jt(e.map(l=>le(l,n)),i)}function Se(e,n,i={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return Sn({type:"LineString",coordinates:e},n,i)}function ox(e,n,i={}){return Jt(e.map(l=>Se(l,n)),i)}function Jt(e,n={}){const i={type:"FeatureCollection"};return n.id&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.features=e,i}function lo(e,n,i={}){return Sn({type:"MultiLineString",coordinates:e},n,i)}function pc(e,n,i={}){return Sn({type:"MultiPoint",coordinates:e},n,i)}function ur(e,n,i={}){return Sn({type:"MultiPolygon",coordinates:e},n,i)}function lp(e,n,i={}){return Sn({type:"GeometryCollection",geometries:e},n,i)}function lx(e,n=0){if(n&&!(n>=0))throw new Error("precision must be a positive number");const i=Math.pow(10,n||0);return Math.round(e*i)/i}function mc(e,n="kilometers"){const i=cf[n];if(!i)throw new Error(n+" units is invalid");return e*i}function Xl(e,n="kilometers"){const i=cf[n];if(!i)throw new Error(n+" units is invalid");return e/i}function up(e,n){return Ds(Xl(e,n))}function Ul(e){let n=e%360;return n<0&&(n+=360),n}function ux(e){return e=e%360,e>180?e-360:e<-180?e+360:e}function Ds(e){return e%(2*Math.PI)*180/Math.PI}function Jn(e){return e%360*Math.PI/180}function Zo(e,n="kilometers",i="kilometers"){if(!(e>=0))throw new Error("length must be a positive number");return mc(Xl(e,n),i)}function cp(e,n="meters",i="kilometers"){if(!(e>=0))throw new Error("area must be a positive number");const l=Hh[n];if(!l)throw new Error("invalid original units");const r=Hh[i];if(!r)throw new Error("invalid final units");return e/l*r}function Kn(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Be(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function ac(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(n=>{if(!Kn(n))throw new Error("bbox must only contain numbers")})}function cx(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}const Nw=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:Hh,azimuthToBearing:ux,bearingToAzimuth:Ul,convertArea:cp,convertLength:Zo,degreesToRadians:Jn,earthRadius:Wn,factors:cf,feature:Sn,featureCollection:Jt,geometry:rx,geometryCollection:lp,isNumber:Kn,isObject:Be,lengthToDegrees:up,lengthToRadians:Xl,lineString:Se,lineStrings:ox,multiLineString:lo,multiPoint:pc,multiPolygon:ur,point:ue,points:sx,polygon:le,polygons:ax,radiansToDegrees:Ds,radiansToLength:mc,round:lx,validateBBox:ac,validateId:cx},Symbol.toStringTag,{value:"Module"}));function ze(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ce(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function hp(e){if(e.length>1&&Kn(e[0])&&Kn(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return hp(e[0]);throw new Error("coordinates must only contain numbers")}function hx(e,n,i){if(!n||!i)throw new Error("type and name required");if(!e||e.type!==n)throw new Error("Invalid input to "+i+": must be a "+n+", given "+e.type)}function oc(e,n,i){if(!e)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!e.geometry||e.geometry.type!==n)throw new Error("Invalid input to "+i+": must be a "+n+", given "+e.geometry.type)}function Ea(e,n,i){if(!e)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+i+", FeatureCollection required");for(const l of e.features){if(!l||l.type!=="Feature"||!l.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!l.geometry||l.geometry.type!==n)throw new Error("Invalid input to "+i+": must be a "+n+", given "+l.geometry.type)}}function cn(e){return e.type==="Feature"?e.geometry:e}function cr(e,n){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}const Ow=Object.freeze(Object.defineProperty({__proto__:null,collectionOf:Ea,containsNumber:hp,featureOf:oc,geojsonType:hx,getCoord:ze,getCoords:ce,getGeom:cn,getType:cr},Symbol.toStringTag,{value:"Module"}));function ro(e,n,i={}){if(i.final===!0)return Aw(e,n);const l=ze(e),r=ze(n),c=Jn(l[0]),f=Jn(r[0]),p=Jn(l[1]),y=Jn(r[1]),_=Math.sin(f-c)*Math.cos(y),E=Math.cos(p)*Math.sin(y)-Math.sin(p)*Math.cos(y)*Math.cos(f-c);return Ds(Math.atan2(_,E))}function Aw(e,n){let i=ro(n,e);return i=(i+180)%360,i}function so(e,n,i,l={}){const r=ze(e),c=Jn(r[0]),f=Jn(r[1]),p=Jn(i),y=Xl(n,l.units),_=Math.asin(Math.sin(f)*Math.cos(y)+Math.cos(f)*Math.sin(y)*Math.cos(p)),E=c+Math.atan2(Math.sin(p)*Math.sin(y)*Math.cos(f),Math.cos(y)-Math.sin(f)*Math.sin(_)),S=Ds(E),M=Ds(_);return r[2]!==void 0?ue([S,M,r[2]],l.properties):ue([S,M],l.properties)}function fn(e,n,i={}){var l=ze(e),r=ze(n),c=Jn(r[1]-l[1]),f=Jn(r[0]-l[0]),p=Jn(l[1]),y=Jn(r[1]),_=Math.pow(Math.sin(c/2),2)+Math.pow(Math.sin(f/2),2)*Math.cos(p)*Math.cos(y);return mc(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),i.units)}function Dw(e,n,i={}){const r=cn(e).coordinates;let c=0;for(let f=0;f<r.length&&!(n>=c&&f===r.length-1);f++)if(c>=n){const p=n-c;if(p){const y=ro(r[f],r[f-1])-180;return so(r[f],p,y,i)}else return ue(r[f])}else c+=fn(r[f],r[f+1],i);return ue(r[r.length-1])}function Xo(e,n,i={}){let l;return i.final?l=Zy(ze(n),ze(e)):l=Zy(ze(e),ze(n)),l>180?-(360-l):l}function Zy(e,n){const i=Jn(e[1]),l=Jn(n[1]);let r=Jn(n[0]-e[0]);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);const c=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),f=Math.atan2(r,c);return(Ds(f)+360)%360}function Iw(e,n,i,l={}){if(!Be(l))throw new Error("options is invalid");if(!e)throw new Error("startPoint is required");if(!n)throw new Error("midPoint is required");if(!i)throw new Error("endPoint is required");const r=e,c=n,f=i,p=Ul(l.mercator!==!0?ro(c,r):Xo(c,r));let y=Ul(l.mercator!==!0?ro(c,f):Xo(c,f));y<p&&(y=y+360);const _=y-p;return l.explementary===!0?360-_:_}function vn(e,n,i){if(e!==null)for(var l,r,c,f,p,y,_,E=0,S=0,M,O=e.type,B=O==="FeatureCollection",Q=O==="Feature",st=B?e.features.length:1,rt=0;rt<st;rt++){_=B?e.features[rt].geometry:Q?e.geometry:e,M=_?_.type==="GeometryCollection":!1,p=M?_.geometries.length:1;for(var j=0;j<p;j++){var Y=0,V=0;if(f=M?_.geometries[j]:_,f!==null){y=f.coordinates;var et=f.type;switch(E=i&&(et==="Polygon"||et==="MultiPolygon")?1:0,et){case null:break;case"Point":if(n(y,S,rt,Y,V)===!1)return!1;S++,Y++;break;case"LineString":case"MultiPoint":for(l=0;l<y.length;l++){if(n(y[l],S,rt,Y,V)===!1)return!1;S++,et==="MultiPoint"&&Y++}et==="LineString"&&Y++;break;case"Polygon":case"MultiLineString":for(l=0;l<y.length;l++){for(r=0;r<y[l].length-E;r++){if(n(y[l][r],S,rt,Y,V)===!1)return!1;S++}et==="MultiLineString"&&Y++,et==="Polygon"&&V++}et==="Polygon"&&Y++;break;case"MultiPolygon":for(l=0;l<y.length;l++){for(V=0,r=0;r<y[l].length;r++){for(c=0;c<y[l][r].length-E;c++){if(n(y[l][r][c],S,rt,Y,V)===!1)return!1;S++}V++}Y++}break;case"GeometryCollection":for(l=0;l<f.geometries.length;l++)if(vn(f.geometries[l],n,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function fp(e,n,i,l){var r=i;return vn(e,function(c,f,p,y,_){f===0&&i===void 0?r=c:r=n(r,c,f,p,y,_)},l),r}function dp(e,n){var i;switch(e.type){case"FeatureCollection":for(i=0;i<e.features.length&&n(e.features[i].properties,i)!==!1;i++);break;case"Feature":n(e.properties,0);break}}function fx(e,n,i){var l=i;return dp(e,function(r,c){c===0&&i===void 0?l=r:l=n(l,r,c)}),l}function Ie(e,n){if(e.type==="Feature")n(e,0);else if(e.type==="FeatureCollection")for(var i=0;i<e.features.length&&n(e.features[i],i)!==!1;i++);}function gp(e,n,i){var l=i;return Ie(e,function(r,c){c===0&&i===void 0?l=r:l=n(l,r,c)}),l}function lc(e){var n=[];return vn(e,function(i){n.push(i)}),n}function xi(e,n){var i,l,r,c,f,p,y,_,E,S,M=0,O=e.type==="FeatureCollection",B=e.type==="Feature",Q=O?e.features.length:1;for(i=0;i<Q;i++){for(p=O?e.features[i].geometry:B?e.geometry:e,_=O?e.features[i].properties:B?e.properties:{},E=O?e.features[i].bbox:B?e.bbox:void 0,S=O?e.features[i].id:B?e.id:void 0,y=p?p.type==="GeometryCollection":!1,f=y?p.geometries.length:1,r=0;r<f;r++){if(c=y?p.geometries[r]:p,c===null){if(n(null,M,_,E,S)===!1)return!1;continue}switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(c,M,_,E,S)===!1)return!1;break}case"GeometryCollection":{for(l=0;l<c.geometries.length;l++)if(n(c.geometries[l],M,_,E,S)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}M++}}function pp(e,n,i){var l=i;return xi(e,function(r,c,f,p,y){c===0&&i===void 0?l=r:l=n(l,r,c,f,p,y)}),l}function $n(e,n){xi(e,function(i,l,r,c,f){var p=i===null?null:i.type;switch(p){case null:case"Point":case"LineString":case"Polygon":return n(Sn(i,r,{bbox:c,id:f}),l,0)===!1?!1:void 0}var y;switch(p){case"MultiPoint":y="Point";break;case"MultiLineString":y="LineString";break;case"MultiPolygon":y="Polygon";break}for(var _=0;_<i.coordinates.length;_++){var E=i.coordinates[_],S={type:y,coordinates:E};if(n(Sn(S,r),l,_)===!1)return!1}})}function dx(e,n,i){var l=i;return $n(e,function(r,c,f){c===0&&f===0&&i===void 0?l=r:l=n(l,r,c,f)}),l}function pa(e,n){$n(e,function(i,l,r){var c=0;if(i.geometry){var f=i.geometry.type;if(!(f==="Point"||f==="MultiPoint")){var p,y=0,_=0,E=0;if(vn(i,function(S,M,O,B,Q){if(p===void 0||l>y||B>_||Q>E){p=S,y=l,_=B,E=Q,c=0;return}var st=Se([p,S],i.properties);if(n(st,l,r,Q,c)===!1)return!1;c++,p=S})===!1)return!1}}})}function mp(e,n,i){var l=i,r=!1;return pa(e,function(c,f,p,y,_){r===!1&&i===void 0?l=c:l=n(l,c,f,p,y,_),r=!0}),l}function vp(e,n){if(!e)throw new Error("geojson is required");$n(e,function(i,l,r){if(i.geometry!==null){var c=i.geometry.type,f=i.geometry.coordinates;switch(c){case"LineString":if(n(i,l,r,0,0)===!1)return!1;break;case"Polygon":for(var p=0;p<f.length;p++)if(n(Se(f[p],i.properties),l,r,p)===!1)return!1;break}}})}function yp(e,n,i){var l=i;return vp(e,function(r,c,f,p){c===0&&i===void 0?l=r:l=n(l,r,c,f,p)}),l}function gx(e,n){if(n=n||{},!Be(n))throw new Error("options is invalid");var i=n.featureIndex||0,l=n.multiFeatureIndex||0,r=n.geometryIndex||0,c=n.segmentIndex||0,f=n.properties,p;switch(e.type){case"FeatureCollection":i<0&&(i=e.features.length+i),f=f||e.features[i].properties,p=e.features[i].geometry;break;case"Feature":f=f||e.properties,p=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":p=e;break;default:throw new Error("geojson is invalid")}if(p===null)return null;var y=p.coordinates;switch(p.type){case"Point":case"MultiPoint":return null;case"LineString":return c<0&&(c=y.length+c-1),Se([y[c],y[c+1]],f,n);case"Polygon":return r<0&&(r=y.length+r),c<0&&(c=y[r].length+c-1),Se([y[r][c],y[r][c+1]],f,n);case"MultiLineString":return l<0&&(l=y.length+l),c<0&&(c=y[l].length+c-1),Se([y[l][c],y[l][c+1]],f,n);case"MultiPolygon":return l<0&&(l=y.length+l),r<0&&(r=y[l].length+r),c<0&&(c=y[l][r].length-c-1),Se([y[l][r][c],y[l][r][c+1]],f,n)}throw new Error("geojson is invalid")}function px(e,n){if(n=n||{},!Be(n))throw new Error("options is invalid");var i=n.featureIndex||0,l=n.multiFeatureIndex||0,r=n.geometryIndex||0,c=n.coordIndex||0,f=n.properties,p;switch(e.type){case"FeatureCollection":i<0&&(i=e.features.length+i),f=f||e.features[i].properties,p=e.features[i].geometry;break;case"Feature":f=f||e.properties,p=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":p=e;break;default:throw new Error("geojson is invalid")}if(p===null)return null;var y=p.coordinates;switch(p.type){case"Point":return ue(y,f,n);case"MultiPoint":return l<0&&(l=y.length+l),ue(y[l],f,n);case"LineString":return c<0&&(c=y.length+c),ue(y[c],f,n);case"Polygon":return r<0&&(r=y.length+r),c<0&&(c=y[r].length+c),ue(y[r][c],f,n);case"MultiLineString":return l<0&&(l=y.length+l),c<0&&(c=y[l].length+c),ue(y[l][c],f,n);case"MultiPolygon":return l<0&&(l=y.length+l),r<0&&(r=y[l].length+r),c<0&&(c=y[l][r].length-c),ue(y[l][r][c],f,n)}throw new Error("geojson is invalid")}const Rw=Object.freeze(Object.defineProperty({__proto__:null,coordAll:lc,coordEach:vn,coordReduce:fp,featureEach:Ie,featureReduce:gp,findPoint:px,findSegment:gx,flattenEach:$n,flattenReduce:dx,geomEach:xi,geomReduce:pp,lineEach:vp,lineReduce:yp,propEach:dp,propReduce:fx,segmentEach:pa,segmentReduce:mp},Symbol.toStringTag,{value:"Module"}));function vc(e){return pp(e,(n,i)=>n+Pw(i),0)}function Pw(e){let n=0,i;switch(e.type){case"Polygon":return Xy(e.coordinates);case"MultiPolygon":for(i=0;i<e.coordinates.length;i++)n+=Xy(e.coordinates[i]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Xy(e){let n=0;if(e&&e.length>0){n+=Math.abs(Vy(e[0]));for(let i=1;i<e.length;i++)n-=Math.abs(Vy(e[i]))}return n}var zw=Wn*Wn/2,dg=Math.PI/180;function Vy(e){const n=e.length-1;if(n<=2)return 0;let i=0,l=0;for(;l<n;){const r=e[l],c=e[l+1===n?0:l+1],f=e[l+2>=n?(l+2)%n:l+2],p=r[0]*dg,y=c[1]*dg,_=f[0]*dg;i+=(_-p)*Math.sin(y),l++}return i*zw}function Ne(e,n={}){if(e.bbox!=null&&n.recompute!==!0)return e.bbox;const i=[1/0,1/0,-1/0,-1/0];return vn(e,l=>{i[0]>l[0]&&(i[0]=l[0]),i[1]>l[1]&&(i[1]=l[1]),i[2]<l[0]&&(i[2]=l[0]),i[3]<l[1]&&(i[3]=l[1])}),i}function Bw(e,n,i){var l=e.length,r=Il(e[0],n),c=[],f,p,y;let _,E;for(i||(i=[]),f=1;f<l;f++){for(_=e[f-1],E=e[f],p=y=Il(E,n);;)if(r|p){if(r&p)break;r?(_=Fg(_,E,r,n),r=Il(_,n)):(E=Fg(_,E,p,n),p=Il(E,n))}else{c.push(_),p!==y?(c.push(E),f<l-1&&(i.push(c),c=[])):f===l-1&&c.push(E);break}r=y}return c.length&&i.push(c),i}function jw(e,n){var i,l,r,c,f,p,y;for(l=1;l<=8;l*=2){for(i=[],r=e[e.length-1],c=!(Il(r,n)&l),f=0;f<e.length;f++)p=e[f],y=!(Il(p,n)&l),y!==c&&i.push(Fg(r,p,l,n)),y&&i.push(p),r=p,c=y;if(e=i,!e.length)break}return i}function Fg(e,n,i,l){return i&8?[e[0]+(n[0]-e[0])*(l[3]-e[1])/(n[1]-e[1]),l[3]]:i&4?[e[0]+(n[0]-e[0])*(l[1]-e[1])/(n[1]-e[1]),l[1]]:i&2?[l[2],e[1]+(n[1]-e[1])*(l[2]-e[0])/(n[0]-e[0])]:i&1?[l[0],e[1]+(n[1]-e[1])*(l[0]-e[0])/(n[0]-e[0])]:null}function Il(e,n){var i=0;return e[0]<n[0]?i|=1:e[0]>n[2]&&(i|=2),e[1]<n[1]?i|=4:e[1]>n[3]&&(i|=8),i}function Uw(e,n){const i=cn(e),l=i.type,r=e.type==="Feature"?e.properties:{};let c=i.coordinates;switch(l){case"LineString":case"MultiLineString":{const f=[];return l==="LineString"&&(c=[c]),c.forEach(p=>{Bw(p,n,f)}),f.length===1?Se(f[0],r):lo(f,r)}case"Polygon":return le(Qy(c,n),r);case"MultiPolygon":return ur(c.map(f=>Qy(f,n)),r);default:throw new Error("geometry "+l+" not supported")}}function Qy(e,n){const i=[];for(const l of e){const r=jw(l,n);r.length>0&&((r[0][0]!==r[r.length-1][0]||r[0][1]!==r[r.length-1][1])&&r.push(r[0]),r.length>=4&&i.push(r))}return i}function yc(e,n={}){const i=Number(e[0]),l=Number(e[1]),r=Number(e[2]),c=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const f=[i,l];return le([[f,[r,l],[r,c],[i,c],f]],n.properties,{bbox:e,id:n.id})}var Fw=class{constructor(e){this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(let n=0;n<this.length;n++)this.points[n].z=this.points[n].z||0;for(let n=0;n<this.length-1;n++){const i=this.points[n],l=this.points[n+1];this.centers.push({x:(i.x+l.x)/2,y:(i.y+l.y)/2,z:(i.z+l.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(let n=0;n<this.centers.length-1;n++){const i=this.points[n+1].x-(this.centers[n].x+this.centers[n+1].x)/2,l=this.points[n+1].y-(this.centers[n].y+this.centers[n+1].y)/2,r=this.points[n+1].z-(this.centers[n].y+this.centers[n+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n].x+i),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n].y+l),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n].z+r)},{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n+1].x+i),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n+1].y+l),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n+1].z+r)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}cacheSteps(e){const n=[];let i=this.pos(0);n.push(0);for(let l=0;l<this.duration;l+=10){const r=this.pos(l);Math.sqrt((r.x-i.x)*(r.x-i.x)+(r.y-i.y)*(r.y-i.y)+(r.z-i.z)*(r.z-i.z))>e&&(n.push(l),i=r)}return n}vector(e){const n=this.pos(e+10),i=this.pos(e-10);return{angle:180*Math.atan2(n.y-i.y,n.x-i.x)/3.14,speed:Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))}}pos(e){let n=e-this.delay;n<0&&(n=0),n>this.duration&&(n=this.duration-1);const i=n/this.duration;if(i>=1)return this.points[this.length-1];const l=Math.floor((this.points.length-1)*i),r=(this.length-1)*i-l;return qw(r,this.points[l],this.controls[l][1],this.controls[l+1][0],this.points[l+1])}};function qw(e,n,i,l,r){const c=Gw(e);return{x:r.x*c[0]+l.x*c[1]+i.x*c[2]+n.x*c[3],y:r.y*c[0]+l.y*c[1]+i.y*c[2]+n.y*c[3],z:r.z*c[0]+l.z*c[1]+i.z*c[2]+n.z*c[3]}}function Gw(e){const n=e*e;return[n*e,3*n*(1-e),3*e*(1-e)*(1-e),(1-e)*(1-e)*(1-e)]}function Hw(e,n={}){const i=n.resolution||1e4,l=n.sharpness||.85,r=[],c=cn(e).coordinates.map(_=>({x:_[0],y:_[1]})),f=new Fw({duration:i,points:c,sharpness:l}),p=_=>{var E=f.pos(_);Math.floor(_/100)%2===0&&r.push([E.x,E.y])};for(var y=0;y<f.duration;y+=10)p(y);return p(f.duration),Se(r,n.properties)}function Yh(e){const n=ce(e);let i=0,l=1,r,c;for(;l<n.length;)r=c||n[0],c=n[l],i+=(c[0]-r[0])*(c[1]+r[1]),l++;return i>0}function Yw(e){const n=cn(e).coordinates;if(n[0].length<=4)return!1;let i=!1;const l=n[0].length-1;for(let r=0;r<l;r++){const c=n[0][(r+2)%l][0]-n[0][(r+1)%l][0],f=n[0][(r+2)%l][1]-n[0][(r+1)%l][1],p=n[0][r][0]-n[0][(r+1)%l][0],y=n[0][r][1]-n[0][(r+1)%l][1],_=c*y-f*p;if(r===0)i=_>0;else if(i!==_>0)return!0}return!1}const va=11102230246251565e-32,Ni=134217729,Zw=(3+8*va)*va;function gg(e,n,i,l,r){let c,f,p,y,_=n[0],E=l[0],S=0,M=0;E>_==E>-_?(c=_,_=n[++S]):(c=E,E=l[++M]);let O=0;if(S<e&&M<i)for(E>_==E>-_?(f=_+c,p=c-(f-_),_=n[++S]):(f=E+c,p=c-(f-E),E=l[++M]),c=f,p!==0&&(r[O++]=p);S<e&&M<i;)E>_==E>-_?(f=c+_,y=f-c,p=c-(f-y)+(_-y),_=n[++S]):(f=c+E,y=f-c,p=c-(f-y)+(E-y),E=l[++M]),c=f,p!==0&&(r[O++]=p);for(;S<e;)f=c+_,y=f-c,p=c-(f-y)+(_-y),_=n[++S],c=f,p!==0&&(r[O++]=p);for(;M<i;)f=c+E,y=f-c,p=c-(f-y)+(E-y),E=l[++M],c=f,p!==0&&(r[O++]=p);return(c!==0||O===0)&&(r[O++]=c),O}function Xw(e,n){let i=n[0];for(let l=1;l<e;l++)i+=n[l];return i}function _c(e){return new Float64Array(e)}const Vw=(3+16*va)*va,Qw=(2+12*va)*va,Ww=(9+64*va)*va*va,Ol=_c(4),Wy=_c(8),Jy=_c(12),Ky=_c(16),Ui=_c(4);function Jw(e,n,i,l,r,c,f){let p,y,_,E,S,M,O,B,Q,st,rt,j,Y,V,et,tt,W,k;const A=e-r,q=i-r,X=n-c,Z=l-c;V=A*Z,M=Ni*A,O=M-(M-A),B=A-O,M=Ni*Z,Q=M-(M-Z),st=Z-Q,et=B*st-(V-O*Q-B*Q-O*st),tt=X*q,M=Ni*X,O=M-(M-X),B=X-O,M=Ni*q,Q=M-(M-q),st=q-Q,W=B*st-(tt-O*Q-B*Q-O*st),rt=et-W,S=et-rt,Ol[0]=et-(rt+S)+(S-W),j=V+rt,S=j-V,Y=V-(j-S)+(rt-S),rt=Y-tt,S=Y-rt,Ol[1]=Y-(rt+S)+(S-tt),k=j+rt,S=k-j,Ol[2]=j-(k-S)+(rt-S),Ol[3]=k;let nt=Xw(4,Ol),at=Qw*f;if(nt>=at||-nt>=at||(S=e-A,p=e-(A+S)+(S-r),S=i-q,_=i-(q+S)+(S-r),S=n-X,y=n-(X+S)+(S-c),S=l-Z,E=l-(Z+S)+(S-c),p===0&&y===0&&_===0&&E===0)||(at=Ww*f+Zw*Math.abs(nt),nt+=A*E+Z*p-(X*_+q*y),nt>=at||-nt>=at))return nt;V=p*Z,M=Ni*p,O=M-(M-p),B=p-O,M=Ni*Z,Q=M-(M-Z),st=Z-Q,et=B*st-(V-O*Q-B*Q-O*st),tt=y*q,M=Ni*y,O=M-(M-y),B=y-O,M=Ni*q,Q=M-(M-q),st=q-Q,W=B*st-(tt-O*Q-B*Q-O*st),rt=et-W,S=et-rt,Ui[0]=et-(rt+S)+(S-W),j=V+rt,S=j-V,Y=V-(j-S)+(rt-S),rt=Y-tt,S=Y-rt,Ui[1]=Y-(rt+S)+(S-tt),k=j+rt,S=k-j,Ui[2]=j-(k-S)+(rt-S),Ui[3]=k;const it=gg(4,Ol,4,Ui,Wy);V=A*E,M=Ni*A,O=M-(M-A),B=A-O,M=Ni*E,Q=M-(M-E),st=E-Q,et=B*st-(V-O*Q-B*Q-O*st),tt=X*_,M=Ni*X,O=M-(M-X),B=X-O,M=Ni*_,Q=M-(M-_),st=_-Q,W=B*st-(tt-O*Q-B*Q-O*st),rt=et-W,S=et-rt,Ui[0]=et-(rt+S)+(S-W),j=V+rt,S=j-V,Y=V-(j-S)+(rt-S),rt=Y-tt,S=Y-rt,Ui[1]=Y-(rt+S)+(S-tt),k=j+rt,S=k-j,Ui[2]=j-(k-S)+(rt-S),Ui[3]=k;const D=gg(it,Wy,4,Ui,Jy);V=p*E,M=Ni*p,O=M-(M-p),B=p-O,M=Ni*E,Q=M-(M-E),st=E-Q,et=B*st-(V-O*Q-B*Q-O*st),tt=y*_,M=Ni*y,O=M-(M-y),B=y-O,M=Ni*_,Q=M-(M-_),st=_-Q,W=B*st-(tt-O*Q-B*Q-O*st),rt=et-W,S=et-rt,Ui[0]=et-(rt+S)+(S-W),j=V+rt,S=j-V,Y=V-(j-S)+(rt-S),rt=Y-tt,S=Y-rt,Ui[1]=Y-(rt+S)+(S-tt),k=j+rt,S=k-j,Ui[2]=j-(k-S)+(rt-S),Ui[3]=k;const z=gg(D,Jy,4,Ui,Ky);return Ky[z-1]}function Kw(e,n,i,l,r,c){const f=(n-c)*(i-r),p=(e-r)*(l-c),y=f-p,_=Math.abs(f+p);return Math.abs(y)>=Vw*_?y:-Jw(e,n,i,l,r,c,_)}function $w(e,n){var i,l,r=0,c,f,p,y,_,E,S,M=e[0],O=e[1],B=n.length;for(i=0;i<B;i++){l=0;var Q=n[i],st=Q.length-1;if(E=Q[0],E[0]!==Q[st][0]&&E[1]!==Q[st][1])throw new Error("First and last coordinates in a ring must be the same");for(f=E[0]-M,p=E[1]-O,l;l<st;l++){if(S=Q[l+1],y=S[0]-M,_=S[1]-O,p===0&&_===0){if(y<=0&&f>=0||f<=0&&y>=0)return 0}else if(_>=0&&p<=0||_<=0&&p>=0){if(c=Kw(f,y,p,_,0,0),c===0)return 0;(c>0&&_>0&&p<=0||c<0&&_<=0&&p>0)&&r++}E=S,p=_,f=y}}return r%2!==0}function re(e,n,i={}){if(!e)throw new Error("point is required");if(!n)throw new Error("polygon is required");const l=ze(e),r=cn(n),c=r.type,f=n.bbox;let p=r.coordinates;if(f&&tS(l,f)===!1)return!1;c==="Polygon"&&(p=[p]);let y=!1;for(var _=0;_<p.length;++_){const E=$w(l,p[_]);if(E===0)return!i.ignoreBoundary;E&&(y=!0)}return y}function tS(e,n){return n[0]<=e[0]&&n[1]<=e[1]&&n[2]>=e[0]&&n[3]>=e[1]}function ge(e,n,i={}){const l=ze(e),r=ce(n);for(let c=0;c<r.length-1;c++){let f=!1;if(i.ignoreEndVertices&&(c===0&&(f="start"),c===r.length-2&&(f="end"),c===0&&c+1===r.length-1&&(f="both")),eS(r[c],r[c+1],l,f,typeof i.epsilon>"u"?null:i.epsilon))return!0}return!1}function eS(e,n,i,l,r){const c=i[0],f=i[1],p=e[0],y=e[1],_=n[0],E=n[1],S=i[0]-p,M=i[1]-y,O=_-p,B=E-y,Q=S*B-M*O;if(r!==null){if(Math.abs(Q)>r)return!1}else if(Q!==0)return!1;if(Math.abs(O)===Math.abs(B)&&Math.abs(O)===0)return l?!1:i[0]===e[0]&&i[1]===e[1];if(l){if(l==="start")return Math.abs(O)>=Math.abs(B)?O>0?p<c&&c<=_:_<=c&&c<p:B>0?y<f&&f<=E:E<=f&&f<y;if(l==="end")return Math.abs(O)>=Math.abs(B)?O>0?p<=c&&c<_:_<c&&c<=p:B>0?y<=f&&f<E:E<f&&f<=y;if(l==="both")return Math.abs(O)>=Math.abs(B)?O>0?p<c&&c<_:_<c&&c<p:B>0?y<f&&f<E:E<f&&f<y}else return Math.abs(O)>=Math.abs(B)?O>0?p<=c&&c<=_:_<=c&&c<=p:B>0?y<=f&&f<=E:E<=f&&f<=y;return!1}function nS(e,n,i,l,r){mx(e,n,i||0,l||e.length-1,r||iS)}function mx(e,n,i,l,r){for(;l>i;){if(l-i>600){var c=l-i+1,f=n-i+1,p=Math.log(c),y=.5*Math.exp(2*p/3),_=.5*Math.sqrt(p*y*(c-y)/c)*(f-c/2<0?-1:1),E=Math.max(i,Math.floor(n-f*y/c+_)),S=Math.min(l,Math.floor(n+(c-f)*y/c+_));mx(e,n,E,S,r)}var M=e[n],O=i,B=l;for(Pu(e,i,n),r(e[l],M)>0&&Pu(e,i,l);O<B;){for(Pu(e,O,B),O++,B--;r(e[O],M)<0;)O++;for(;r(e[B],M)>0;)B--}r(e[i],M)===0?Pu(e,i,B):(B++,Pu(e,B,l)),B<=n&&(i=B+1),n<=B&&(l=B-1)}}function Pu(e,n,i){var l=e[n];e[n]=e[i],e[i]=l}function iS(e,n){return e<n?-1:e>n?1:0}let hf=class{constructor(n=9){this._maxEntries=Math.max(4,n),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(n){let i=this.data;const l=[];if(!yh(n,i))return l;const r=this.toBBox,c=[];for(;i;){for(let f=0;f<i.children.length;f++){const p=i.children[f],y=i.leaf?r(p):p;yh(n,y)&&(i.leaf?l.push(p):mg(n,y)?this._all(p,l):c.push(p))}i=c.pop()}return l}collides(n){let i=this.data;if(!yh(n,i))return!1;const l=[];for(;i;){for(let r=0;r<i.children.length;r++){const c=i.children[r],f=i.leaf?this.toBBox(c):c;if(yh(n,f)){if(i.leaf||mg(n,f))return!0;l.push(c)}}i=l.pop()}return!1}load(n){if(!(n&&n.length))return this;if(n.length<this._minEntries){for(let l=0;l<n.length;l++)this.insert(n[l]);return this}let i=this._build(n.slice(),0,n.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const l=this.data;this.data=i,i=l}this._insert(i,this.data.height-i.height-1,!0)}return this}insert(n){return n&&this._insert(n,this.data.height-1),this}clear(){return this.data=Dl([]),this}remove(n,i){if(!n)return this;let l=this.data;const r=this.toBBox(n),c=[],f=[];let p,y,_;for(;l||c.length;){if(l||(l=c.pop(),y=c[c.length-1],p=f.pop(),_=!0),l.leaf){const E=rS(n,l.children,i);if(E!==-1)return l.children.splice(E,1),c.push(l),this._condense(c),this}!_&&!l.leaf&&mg(l,r)?(c.push(l),f.push(p),p=0,y=l,l=l.children[0]):y?(p++,l=y.children[p],_=!1):l=null}return this}toBBox(n){return n}compareMinX(n,i){return n.minX-i.minX}compareMinY(n,i){return n.minY-i.minY}toJSON(){return this.data}fromJSON(n){return this.data=n,this}_all(n,i){const l=[];for(;n;)n.leaf?i.push(...n.children):l.push(...n.children),n=l.pop();return i}_build(n,i,l,r){const c=l-i+1;let f=this._maxEntries,p;if(c<=f)return p=Dl(n.slice(i,l+1)),Al(p,this.toBBox),p;r||(r=Math.ceil(Math.log(c)/Math.log(f)),f=Math.ceil(c/Math.pow(f,r-1))),p=Dl([]),p.leaf=!1,p.height=r;const y=Math.ceil(c/f),_=y*Math.ceil(Math.sqrt(f));$y(n,i,l,_,this.compareMinX);for(let E=i;E<=l;E+=_){const S=Math.min(E+_-1,l);$y(n,E,S,y,this.compareMinY);for(let M=E;M<=S;M+=y){const O=Math.min(M+y-1,S);p.children.push(this._build(n,M,O,r-1))}}return Al(p,this.toBBox),p}_chooseSubtree(n,i,l,r){for(;r.push(i),!(i.leaf||r.length-1===l);){let c=1/0,f=1/0,p;for(let y=0;y<i.children.length;y++){const _=i.children[y],E=pg(_),S=oS(n,_)-E;S<f?(f=S,c=E<c?E:c,p=_):S===f&&E<c&&(c=E,p=_)}i=p||i.children[0]}return i}_insert(n,i,l){const r=l?n:this.toBBox(n),c=[],f=this._chooseSubtree(r,this.data,i,c);for(f.children.push(n),Xu(f,r);i>=0&&c[i].children.length>this._maxEntries;)this._split(c,i),i--;this._adjustParentBBoxes(r,c,i)}_split(n,i){const l=n[i],r=l.children.length,c=this._minEntries;this._chooseSplitAxis(l,c,r);const f=this._chooseSplitIndex(l,c,r),p=Dl(l.children.splice(f,l.children.length-f));p.height=l.height,p.leaf=l.leaf,Al(l,this.toBBox),Al(p,this.toBBox),i?n[i-1].children.push(p):this._splitRoot(l,p)}_splitRoot(n,i){this.data=Dl([n,i]),this.data.height=n.height+1,this.data.leaf=!1,Al(this.data,this.toBBox)}_chooseSplitIndex(n,i,l){let r,c=1/0,f=1/0;for(let p=i;p<=l-i;p++){const y=Zu(n,0,p,this.toBBox),_=Zu(n,p,l,this.toBBox),E=lS(y,_),S=pg(y)+pg(_);E<c?(c=E,r=p,f=S<f?S:f):E===c&&S<f&&(f=S,r=p)}return r||l-i}_chooseSplitAxis(n,i,l){const r=n.leaf?this.compareMinX:sS,c=n.leaf?this.compareMinY:aS,f=this._allDistMargin(n,i,l,r),p=this._allDistMargin(n,i,l,c);f<p&&n.children.sort(r)}_allDistMargin(n,i,l,r){n.children.sort(r);const c=this.toBBox,f=Zu(n,0,i,c),p=Zu(n,l-i,l,c);let y=vh(f)+vh(p);for(let _=i;_<l-i;_++){const E=n.children[_];Xu(f,n.leaf?c(E):E),y+=vh(f)}for(let _=l-i-1;_>=i;_--){const E=n.children[_];Xu(p,n.leaf?c(E):E),y+=vh(p)}return y}_adjustParentBBoxes(n,i,l){for(let r=l;r>=0;r--)Xu(i[r],n)}_condense(n){for(let i=n.length-1,l;i>=0;i--)n[i].children.length===0?i>0?(l=n[i-1].children,l.splice(l.indexOf(n[i]),1)):this.clear():Al(n[i],this.toBBox)}};function rS(e,n,i){if(!i)return n.indexOf(e);for(let l=0;l<n.length;l++)if(i(e,n[l]))return l;return-1}function Al(e,n){Zu(e,0,e.children.length,n,e)}function Zu(e,n,i,l,r){r||(r=Dl(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let c=n;c<i;c++){const f=e.children[c];Xu(r,e.leaf?l(f):f)}return r}function Xu(e,n){return e.minX=Math.min(e.minX,n.minX),e.minY=Math.min(e.minY,n.minY),e.maxX=Math.max(e.maxX,n.maxX),e.maxY=Math.max(e.maxY,n.maxY),e}function sS(e,n){return e.minX-n.minX}function aS(e,n){return e.minY-n.minY}function pg(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function vh(e){return e.maxX-e.minX+(e.maxY-e.minY)}function oS(e,n){return(Math.max(n.maxX,e.maxX)-Math.min(n.minX,e.minX))*(Math.max(n.maxY,e.maxY)-Math.min(n.minY,e.minY))}function lS(e,n){const i=Math.max(e.minX,n.minX),l=Math.max(e.minY,n.minY),r=Math.min(e.maxX,n.maxX),c=Math.min(e.maxY,n.maxY);return Math.max(0,r-i)*Math.max(0,c-l)}function mg(e,n){return e.minX<=n.minX&&e.minY<=n.minY&&n.maxX<=e.maxX&&n.maxY<=e.maxY}function yh(e,n){return n.minX<=e.maxX&&n.minY<=e.maxY&&n.maxX>=e.minX&&n.maxY>=e.minY}function Dl(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function $y(e,n,i,l,r){const c=[n,i];for(;c.length;){if(i=c.pop(),n=c.pop(),i-n<=l)continue;const f=n+Math.ceil((i-n)/l/2)*l;nS(e,f,n,i,r),c.push(n,f,f,i)}}function vg(e){var n;if(e.bbox)n=e.bbox;else if(Array.isArray(e)&&e.length===4)n=e;else if(Array.isArray(e)&&e.length===6)n=[e[0],e[1],e[3],e[4]];else if(e.type==="Feature")n=Ne(e);else if(e.type==="FeatureCollection")n=Ne(e);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}}var uS=class{constructor(e=9){this.tree=new hf(e),this.tree.toBBox=vg}insert(e){if(e.type!=="Feature")throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:Ne(e),this.tree.insert(e),this}load(e){var n=[];return Array.isArray(e)?e.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Ne(i),n.push(i)}):Ie(e,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Ne(i),n.push(i)}),this.tree.load(n),this}remove(e,n){if(e.type!=="Feature")throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:Ne(e),this.tree.remove(e,n),this}clear(){return this.tree.clear(),this}search(e){var n=this.tree.search(vg(e));return Jt(n)}collides(e){return this.tree.collides(vg(e))}all(){const e=this.tree.all();return Jt(e)}toJSON(){return this.tree.toJSON()}fromJSON(e){return this.tree.fromJSON(e),this}};function ff(e){return new uS(e)}function vx(e,n){if(n=n??{},!Be(n))throw new Error("options is invalid");var i=n.precision,l=n.coordinates,r=n.mutate;if(i=i==null||isNaN(i)?6:i,l=l==null||isNaN(l)?3:l,!e)throw new Error("<geojson> is required");if(typeof i!="number")throw new Error("<precision> must be a number");if(typeof l!="number")throw new Error("<coordinates> must be a number");(r===!1||r===void 0)&&(e=JSON.parse(JSON.stringify(e)));var c=Math.pow(10,i);return vn(e,function(f){cS(f,c,l)}),e}function cS(e,n,i){e.length>i&&e.splice(i,e.length);for(var l=0;l<e.length;l++)e[l]=Math.round(e[l]*n)/n;return e}function uc(e){if(!e)throw new Error("geojson is required");const n=[];return $n(e,i=>{hS(i,n)}),Jt(n)}function hS(e,n){let i=[];const l=e.geometry;if(l!==null){switch(l.type){case"Polygon":i=ce(l);break;case"LineString":i=[ce(l)]}i.forEach(r=>{fS(r,e.properties).forEach(f=>{f.id=n.length,n.push(f)})})}}function fS(e,n){const i=[];return e.reduce((l,r)=>{const c=Se([l,r],n);return c.bbox=dS(l,r),i.push(c),r}),i}function dS(e,n){const i=e[0],l=e[1],r=n[0],c=n[1],f=i<r?i:r,p=l<c?l:c,y=i>r?i:r,_=l>c?l:c;return[f,p,y,_]}let yx=class{constructor(n=[],i=gS){if(this.data=n,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:i,compare:l}=this,r=i[n];for(;n>0;){const c=n-1>>1,f=i[c];if(l(r,f)>=0)break;i[n]=f,n=c}i[n]=r}_down(n){const{data:i,compare:l}=this,r=this.length>>1,c=i[n];for(;n<r;){let f=(n<<1)+1,p=i[f];const y=f+1;if(y<this.length&&l(i[y],p)<0&&(f=y,p=i[y]),l(p,c)>=0)break;i[n]=p,n=f}i[n]=c}};function gS(e,n){return e<n?-1:e>n?1:0}function _x(e,n){return e.p.x>n.p.x?1:e.p.x<n.p.x?-1:e.p.y!==n.p.y?e.p.y>n.p.y?1:-1:1}function pS(e,n){return e.rightSweepEvent.p.x>n.rightSweepEvent.p.x?1:e.rightSweepEvent.p.x<n.rightSweepEvent.p.x?-1:e.rightSweepEvent.p.y!==n.rightSweepEvent.p.y?e.rightSweepEvent.p.y<n.rightSweepEvent.p.y?1:-1:1}class t_{constructor(n,i,l,r){this.p={x:n[0],y:n[1]},this.featureId=i,this.ringId=l,this.eventId=r,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(n){return this.p.x===n.p.x&&this.p.y===n.p.y}}function mS(e,n){if(e.type==="FeatureCollection"){const i=e.features;for(let l=0;l<i.length;l++)e_(i[l],n)}else e_(e,n)}let _h=0,xh=0,Eh=0;function e_(e,n){const i=e.type==="Feature"?e.geometry:e;let l=i.coordinates;(i.type==="Polygon"||i.type==="MultiLineString")&&(l=[l]),i.type==="LineString"&&(l=[[l]]);for(let r=0;r<l.length;r++)for(let c=0;c<l[r].length;c++){let f=l[r][c][0],p=null;xh=xh+1;for(let y=0;y<l[r][c].length-1;y++){p=l[r][c][y+1];const _=new t_(f,_h,xh,Eh),E=new t_(p,_h,xh,Eh+1);_.otherEvent=E,E.otherEvent=_,_x(_,E)>0?(E.isLeftEndpoint=!0,_.isLeftEndpoint=!1):(_.isLeftEndpoint=!0,E.isLeftEndpoint=!1),n.push(_),n.push(E),f=p,Eh=Eh+1}}_h=_h+1}let vS=class{constructor(n){this.leftSweepEvent=n,this.rightSweepEvent=n.otherEvent}};function yS(e,n){if(e===null||n===null||e.leftSweepEvent.ringId===n.leftSweepEvent.ringId&&(e.rightSweepEvent.isSamePoint(n.leftSweepEvent)||e.rightSweepEvent.isSamePoint(n.leftSweepEvent)||e.rightSweepEvent.isSamePoint(n.rightSweepEvent)||e.leftSweepEvent.isSamePoint(n.leftSweepEvent)||e.leftSweepEvent.isSamePoint(n.rightSweepEvent)))return!1;const i=e.leftSweepEvent.p.x,l=e.leftSweepEvent.p.y,r=e.rightSweepEvent.p.x,c=e.rightSweepEvent.p.y,f=n.leftSweepEvent.p.x,p=n.leftSweepEvent.p.y,y=n.rightSweepEvent.p.x,_=n.rightSweepEvent.p.y,E=(_-p)*(r-i)-(y-f)*(c-l),S=(y-f)*(l-p)-(_-p)*(i-f),M=(r-i)*(l-p)-(c-l)*(i-f);if(E===0)return!1;const O=S/E,B=M/E;if(O>=0&&O<=1&&B>=0&&B<=1){const Q=i+O*(r-i),st=l+O*(c-l);return[Q,st]}return!1}function _S(e,n){n=n||!1;const i=[],l=new yx([],pS);for(;e.length;){const r=e.pop();if(r.isLeftEndpoint){const c=new vS(r);for(let f=0;f<l.data.length;f++){const p=l.data[f];if(n&&p.leftSweepEvent.featureId===r.featureId)continue;const y=yS(c,p);y!==!1&&i.push(y)}l.push(c)}else r.isLeftEndpoint===!1&&l.pop()}return i}function xS(e,n){const i=new yx([],_x);return mS(e,i),_S(i,n)}var ES=xS;function Is(e,n,i={}){const{removeDuplicates:l=!0,ignoreSelfIntersections:r=!0}=i;let c=[];e.type==="FeatureCollection"?c=c.concat(e.features):e.type==="Feature"?c.push(e):(e.type==="LineString"||e.type==="Polygon"||e.type==="MultiLineString"||e.type==="MultiPolygon")&&c.push(Sn(e)),n.type==="FeatureCollection"?c=c.concat(n.features):n.type==="Feature"?c.push(n):(n.type==="LineString"||n.type==="Polygon"||n.type==="MultiLineString"||n.type==="MultiPolygon")&&c.push(Sn(n));const f=ES(Jt(c),r);let p=[];if(l){const y={};f.forEach(_=>{const E=_.join(",");y[E]||(y[E]=!0,p.push(_))})}else p=f;return Jt(p.map(y=>ue(y)))}var wS=Object.defineProperty,SS=Object.defineProperties,bS=Object.getOwnPropertyDescriptors,n_=Object.getOwnPropertySymbols,LS=Object.prototype.hasOwnProperty,TS=Object.prototype.propertyIsEnumerable,i_=(e,n,i)=>n in e?wS(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,CS=(e,n)=>{for(var i in n||(n={}))LS.call(n,i)&&i_(e,i,n[i]);if(n_)for(var i of n_(n))TS.call(n,i)&&i_(e,i,n[i]);return e},kS=(e,n)=>SS(e,bS(n));function ma(e,n,i={}){if(!e||!n)throw new Error("lines and inputPoint are required arguments");const l=ze(n);let r=ue([1/0,1/0],{lineStringIndex:-1,segmentIndex:-1,totalDistance:-1,lineDistance:-1,segmentDistance:-1,pointDistance:1/0,multiFeatureIndex:-1,index:-1,location:-1,dist:1/0}),c=0,f=0,p=-1;return $n(e,function(y,_,E){p!==E&&(p=E,f=0);const S=ce(y),M=S.length-2;for(let O=0;O<S.length-1;O++){const B=ue(S[O]),Q=ze(B),st=ue(S[O+1]),rt=ze(st),j=fn(B,st,i);let Y,V;rt[0]===l[0]&&rt[1]===l[1]?[Y,V]=[rt,!0]:Q[0]===l[0]&&Q[1]===l[1]?[Y,V]=[Q,!1]:[Y,V]=OS(Q,rt,l);const et=fn(n,Y,i);if(et<r.properties.pointDistance){const tt=fn(B,Y,i);r=ue(Y,{lineStringIndex:E,segmentIndex:V&&O+1<=M?O+1:O,totalDistance:c+tt,lineDistance:f+tt,segmentDistance:tt,pointDistance:et,multiFeatureIndex:-1,index:-1,location:-1,dist:1/0}),r.properties=kS(CS({},r.properties),{multiFeatureIndex:r.properties.lineStringIndex,index:r.properties.segmentIndex,location:r.properties.totalDistance,dist:r.properties.pointDistance})}c+=j,f+=j}}),r}function Uo(e,n){const[i,l,r]=e,[c,f,p]=n;return i*c+l*f+r*p}function zu(e,n){const[i,l,r]=e,[c,f,p]=n;return[l*p-r*f,r*c-i*p,i*f-l*c]}function MS(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2))}function r_(e){const n=MS(e);return[e[0]/n,e[1]/n,e[2]/n]}function yg(e){const n=Jn(e[1]),i=Jn(e[0]);return[Math.cos(n)*Math.cos(i),Math.cos(n)*Math.sin(i),Math.sin(n)]}function NS(e){const[n,i,l]=e,r=Math.min(Math.max(l,-1),1),c=Ds(Math.asin(r));return[Ds(Math.atan2(i,n)),c]}function OS(e,n,i){const l=yg(e),r=yg(n),c=yg(i),f=zu(l,r);if(f[0]===0&&f[1]===0&&f[2]===0)return Uo(l,r)>0?[[...n],!0]:[[...i],!1];const p=zu(f,c);if(p[0]===0&&p[1]===0&&p[2]===0)return[[...n],!0];const y=zu(p,f),_=r_(y),E=[-_[0],-_[1],-_[2]],S=Uo(c,_)>Uo(c,E)?_:E,M=r_(f),O=Uo(zu(l,S),M),B=Uo(zu(S,r),M);return O>=0&&B>=0?[NS(S),!1]:Uo(l,c)>Uo(r,c)?[[...e],!1]:[[...n],!0]}function _p(e,n){if(!e)throw new Error("line is required");if(!n)throw new Error("splitter is required");const i=cr(e),l=cr(n);if(i!=="LineString")throw new Error("line must be LineString");if(l==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(l==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var r=vx(n,{precision:7});switch(e.type!=="Feature"&&(e=Sn(e)),l){case"Point":return qg(e,r);case"MultiPoint":return s_(e,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return s_(e,Is(e,r,{ignoreSelfIntersections:!0}))}}function s_(e,n){var i=[],l=ff();return $n(n,function(r){if(i.forEach(function(p,y){p.id=y}),!i.length)i=qg(e,r).features,l.load(Jt(i));else{var c=l.search(r);if(c.features.length){var f=xx(r,c);i=i.filter(function(p){return p.id!==f.id}),l.remove(f),Ie(qg(f,r),function(p){i.push(p),l.insert(p)})}}}),Jt(i)}function qg(e,n){var i=[],l=ce(e)[0],r=ce(e)[e.geometry.coordinates.length-1];if(_g(l,ze(n))||_g(r,ze(n)))return Jt([e]);var c=ff(),f=uc(e);c.load(f);var p=c.search(n);if(!p.features.length)return Jt([e]);var y=xx(n,p),_=[l],E=gp(f,function(S,M,O){var B=ce(M)[1],Q=ze(n);return O===y.id?(S.push(Q),i.push(Se(S)),_g(Q,B)?[Q]:[Q,B]):(S.push(B),S)},_);return E.length>1&&i.push(Se(E)),Jt(i)}function xx(e,n){if(!n.features.length)throw new Error("lines must contain features");if(n.features.length===1)return n.features[0];var i,l=1/0;return Ie(n,function(r){var c=ma(r,e),f=c.properties.dist;f<l&&(i=r,l=f)}),i}function _g(e,n){return e[0]===n[0]&&e[1]===n[1]}function AS(e,n){const i=cn(e),l=cn(n),r=i.type,c=l.type,f=i.coordinates,p=l.coordinates;switch(r){case"Point":if(c==="Point")return Ep(f,p);throw new Error("feature2 "+c+" geometry not supported");case"MultiPoint":switch(c){case"Point":return RS(i,l);case"MultiPoint":return PS(i,l);default:throw new Error("feature2 "+c+" geometry not supported")}case"LineString":switch(c){case"Point":return ge(l,i,{ignoreEndVertices:!0});case"LineString":return jS(i,l);case"MultiPoint":return zS(i,l);default:throw new Error("feature2 "+c+" geometry not supported")}case"Polygon":switch(c){case"Point":return re(l,i,{ignoreBoundary:!0});case"LineString":return FS(i,l);case"Polygon":return xp(i,l);case"MultiPoint":return BS(i,l);case"MultiPolygon":return IS(i,l);default:throw new Error("feature2 "+c+" geometry not supported")}case"MultiPolygon":if(c==="Polygon")return DS(i,l);throw new Error("feature2 "+c+" geometry not supported");default:throw new Error("feature1 "+r+" geometry not supported")}}function DS(e,n){return e.coordinates.some(i=>xp({type:"Polygon",coordinates:i},n))}function IS(e,n){return n.coordinates.every(i=>xp(e,{type:"Polygon",coordinates:i}))}function RS(e,n){let i,l=!1;for(i=0;i<e.coordinates.length;i++)if(Ep(e.coordinates[i],n.coordinates)){l=!0;break}return l}function PS(e,n){for(const i of n.coordinates){let l=!1;for(const r of e.coordinates)if(Ep(i,r)){l=!0;break}if(!l)return!1}return!0}function zS(e,n){let i=!1;for(const l of n.coordinates)if(ge(l,e,{ignoreEndVertices:!0})&&(i=!0),!ge(l,e))return!1;return!!i}function BS(e,n){for(const i of n.coordinates)if(!re(i,e,{ignoreBoundary:!0}))return!1;return!0}function jS(e,n){let i=!1;for(const l of n.coordinates)if(ge({type:"Point",coordinates:l},e,{ignoreEndVertices:!0})&&(i=!0),!ge({type:"Point",coordinates:l},e,{ignoreEndVertices:!1}))return!1;return i}function US(e,n){const i=e.coordinates,l=[];for(let r=0;r<i.length-1;r++){const c=Se([i[r],i[r+1]]),f=_p(c,Sn(n));f.features.length===0?l.push(c):l.push(...f.features)}return Jt(l)}function FS(e,n){const i=Ne(e),l=Ne(n);if(!Ex(i,l))return!1;for(const f of n.coordinates)if(!re(f,e))return!1;let r=!1;const c=US(n,e);for(const f of c.features){const p=qS(f.geometry.coordinates[0],f.geometry.coordinates[1]);if(!re(p,e))return!1;!r&&re(p,e,{ignoreBoundary:!0})&&(r=!0)}return r}function xp(e,n){if(e.type==="Feature"&&e.geometry===null||n.type==="Feature"&&n.geometry===null)return!1;const i=Ne(e),l=Ne(n);if(!Ex(i,l))return!1;const r=cn(n).coordinates;for(const c of r)for(const f of c)if(!re(f,e))return!1;return!0}function Ex(e,n){return!(e[0]>n[0]||e[2]<n[2]||e[1]>n[1]||e[3]<n[3])}function Ep(e,n){return e[0]===n[0]&&e[1]===n[1]}function qS(e,n){return[(e[0]+n[0])/2,(e[1]+n[1])/2]}function Fl(e,n={}){const i=cn(e);switch(!n.properties&&e.type==="Feature"&&(n.properties=e.properties),i.type){case"Polygon":return GS(i,n);case"MultiPolygon":return HS(i,n);default:throw new Error("invalid poly")}}function GS(e,n={}){const l=cn(e).coordinates,r=n.properties?n.properties:e.type==="Feature"?e.properties:{};return wx(l,r)}function HS(e,n={}){const l=cn(e).coordinates,r=n.properties?n.properties:e.type==="Feature"?e.properties:{},c=[];return l.forEach(f=>{c.push(wx(f,r))}),Jt(c)}function wx(e,n){return e.length>1?lo(e,n):Se(e[0],n)}var YS=Object.defineProperty,Vl=(e,n)=>YS(e,"name",{value:n,configurable:!0}),Sx=class{constructor(n){this.direction=!1,this.compareProperties=!0;var i,l,r;this.precision=10**-((i=n?.precision)!=null?i:17),this.direction=(l=n?.direction)!=null?l:!1,this.compareProperties=(r=n?.compareProperties)!=null?r:!0}compare(n,i){if(n.type!==i.type||!Vu(n,i))return!1;switch(n.type){case"Point":return this.compareCoord(n.coordinates,i.coordinates);case"LineString":return this.compareLine(n.coordinates,i.coordinates);case"Polygon":return this.comparePolygon(n,i);case"GeometryCollection":return this.compareGeometryCollection(n,i);case"Feature":return this.compareFeature(n,i);case"FeatureCollection":return this.compareFeatureCollection(n,i);default:if(n.type.startsWith("Multi")){const l=Gg(n),r=Gg(i);return l.every(c=>r.some(f=>this.compare(c,f)))}}return!1}compareCoord(n,i){return n.length===i.length&&n.every((l,r)=>Math.abs(l-i[r])<this.precision)}compareLine(n,i,l=0,r=!1){if(!Vu(n,i))return!1;const c=n;let f=i;if(r&&!this.compareCoord(c[0],f[0])){const y=this.fixStartIndex(f,c);if(y)f=y;else return!1}const p=this.compareCoord(c[l],f[l]);return this.direction||p?this.comparePath(c,f):this.compareCoord(c[l],f[f.length-(1+l)])?this.comparePath(c.slice().reverse(),f):!1}fixStartIndex(n,i){let l,r=-1;for(let c=0;c<n.length;c++)if(this.compareCoord(n[c],i[0])){r=c;break}return r>=0&&(l=[].concat(n.slice(r,n.length),n.slice(1,r+1))),l}comparePath(n,i){return n.every((l,r)=>this.compareCoord(l,i[r]))}comparePolygon(n,i){if(this.compareLine(n.coordinates[0],i.coordinates[0],1,!0)){const l=n.coordinates.slice(1,n.coordinates.length),r=i.coordinates.slice(1,i.coordinates.length);return l.every(c=>r.some(f=>this.compareLine(c,f,1,!0)))}return!1}compareGeometryCollection(n,i){return Vu(n.geometries,i.geometries)&&this.compareBBox(n,i)&&n.geometries.every((l,r)=>this.compare(l,i.geometries[r]))}compareFeature(n,i){return n.id===i.id&&(this.compareProperties?Sp(n.properties,i.properties):!0)&&this.compareBBox(n,i)&&this.compare(n.geometry,i.geometry)}compareFeatureCollection(n,i){return Vu(n.features,i.features)&&this.compareBBox(n,i)&&n.features.every((l,r)=>this.compare(l,i.features[r]))}compareBBox(n,i){return!n.bbox&&!i.bbox||(n.bbox&&i.bbox?this.compareCoord(n.bbox,i.bbox):!1)}};Vl(Sx,"GeojsonEquality");var ZS=Sx;function Vu(e,n){return e.coordinates?e.coordinates.length===n.coordinates.length:e.length===n.length}Vl(Vu,"sameLength");function Gg(e){return e.coordinates.map(n=>({type:e.type.replace("Multi",""),coordinates:n}))}Vl(Gg,"explode");function wp(e,n,i){return new ZS(i).compare(e,n)}Vl(wp,"geojsonEquality");function Sp(e,n){if(e===null&&n===null)return!0;if(e===null||n===null)return!1;const i=Object.keys(e),l=Object.keys(n);if(i.length!==l.length)return!1;for(var r of i){const c=e[r],f=n[r],p=a_(c)&&a_(f);if(p&&!Sp(c,f)||!p&&c!==f)return!1}return!0}Vl(Sp,"equal");var a_=Vl(e=>e!=null&&typeof e=="object","isObject");function Vo(e,n={}){var i=typeof n=="object"?n.mutate:n;if(!e)throw new Error("geojson is required");var l=cr(e),r=[];switch(l){case"LineString":r=xg(e,l);break;case"MultiLineString":case"Polygon":ce(e).forEach(function(f){r.push(xg(f,l))});break;case"MultiPolygon":ce(e).forEach(function(f){var p=[];f.forEach(function(y){p.push(xg(y,l))}),r.push(p)});break;case"Point":return e;case"MultiPoint":var c={};ce(e).forEach(function(f){var p=f.join("-");Object.prototype.hasOwnProperty.call(c,p)||(r.push(f),c[p]=!0)});break;default:throw new Error(l+" geometry not supported")}return e.coordinates?i===!0?(e.coordinates=r,e):{type:l,coordinates:r}:i===!0?(e.geometry.coordinates=r,e):Sn({type:l,coordinates:r},e.properties,{bbox:e.bbox,id:e.id})}function xg(e,n){const i=ce(e);if(i.length===2&&!o_(i[0],i[1]))return i;const l=[];let r=0,c=1,f=2;for(l.push(i[r]);f<i.length;)ge(i[c],Se([i[r],i[f]]))?c=f:(l.push(i[c]),r=c,c++,f=c),f++;if(l.push(i[c]),n==="Polygon"||n==="MultiPolygon"){if(ge(l[0],Se([l[1],l[l.length-2]]))&&(l.shift(),l.pop(),l.push(l[0])),l.length<4)throw new Error("invalid polygon, fewer than 4 points");if(!o_(l[0],l[l.length-1]))throw new Error("invalid polygon, first and last points not equal")}return l}function o_(e,n){return e[0]===n[0]&&e[1]===n[1]}function Qu(e,n,i={}){let l=i.precision;if(l=l==null||isNaN(l)?6:l,typeof l!="number"||!(l>=0))throw new Error("precision must be a positive number");const r=cn(e).type,c=cn(n).type;return r!==c?!1:wp(Vo(e),Vo(n),{precision:l})}function bx(e,n){var i=cn(e),l=cn(n),r=i.type,c=l.type;switch(r){case"MultiPoint":switch(c){case"LineString":return l_(i,l);case"Polygon":return c_(i,l);default:throw new Error("feature2 "+c+" geometry not supported")}case"LineString":switch(c){case"MultiPoint":return l_(l,i);case"LineString":return XS(i,l);case"Polygon":return u_(i,l);default:throw new Error("feature2 "+c+" geometry not supported")}case"Polygon":switch(c){case"MultiPoint":return c_(l,i);case"LineString":return u_(l,i);default:throw new Error("feature2 "+c+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}}function l_(e,n){for(var i=!1,l=!1,r=e.coordinates.length,c=0;c<r&&!i&&!l;){for(var f=0;f<n.coordinates.length-1;f++){var p=!0;(f===0||f===n.coordinates.length-2)&&(p=!1),VS(n.coordinates[f],n.coordinates[f+1],e.coordinates[c],p)?i=!0:l=!0}c++}return i&&l}function XS(e,n){const i=Is(e,n);if(i.features.length===0)return!1;for(const l of i.features)if(!Qu(l.geometry,ue(e.coordinates[0]))&&!Qu(l.geometry,ue(e.coordinates[e.coordinates.length-1]))&&!Qu(l.geometry,ue(n.coordinates[0]))&&!Qu(l.geometry,ue(n.coordinates[n.coordinates.length-1])))return!0;return!1}function u_(e,n){const i=Fl(n);return Is(e,i).features.length>0}function c_(e,n){var i=!1,l=!1,r=e.coordinates.length;for(let c=0;c<r&&(!i||!l);c++)re(ue(e.coordinates[c]),n)?i=!0:l=!0;return l&&i}function VS(e,n,i,l){var r=i[0]-e[0],c=i[1]-e[1],f=n[0]-e[0],p=n[1]-e[1],y=r*p-c*f;return y!==0?!1:l?Math.abs(f)>=Math.abs(p)?f>0?e[0]<=i[0]&&i[0]<=n[0]:n[0]<=i[0]&&i[0]<=e[0]:p>0?e[1]<=i[1]&&i[1]<=n[1]:n[1]<=i[1]&&i[1]<=e[1]:Math.abs(f)>=Math.abs(p)?f>0?e[0]<i[0]&&i[0]<n[0]:n[0]<i[0]&&i[0]<e[0]:p>0?e[1]<i[1]&&i[1]<n[1]:n[1]<i[1]&&i[1]<e[1]}function bp(e,n,{ignoreSelfIntersections:i=!0}={ignoreSelfIntersections:!0}){let l=!0;return $n(e,r=>{$n(n,c=>{if(l===!1)return!1;l=QS(r.geometry,c.geometry,i)})}),l}function QS(e,n,i){switch(e.type){case"Point":switch(n.type){case"Point":return!$S(e.coordinates,n.coordinates);case"LineString":return!h_(n,e);case"Polygon":return!re(e,n)}break;case"LineString":switch(n.type){case"Point":return!h_(e,n);case"LineString":return!WS(e,n,i);case"Polygon":return!f_(n,e,i)}break;case"Polygon":switch(n.type){case"Point":return!re(n,e);case"LineString":return!f_(e,n,i);case"Polygon":return!JS(n,e,i)}}return!1}function h_(e,n){for(let i=0;i<e.coordinates.length-1;i++)if(KS(e.coordinates[i],e.coordinates[i+1],n.coordinates))return!0;return!1}function WS(e,n,i){return Is(e,n,{ignoreSelfIntersections:i}).features.length>0}function f_(e,n,i){for(const r of n.coordinates)if(re(r,e))return!0;return Is(n,Fl(e),{ignoreSelfIntersections:i}).features.length>0}function JS(e,n,i){for(const r of e.coordinates[0])if(re(r,n))return!0;for(const r of n.coordinates[0])if(re(r,e))return!0;return Is(Fl(e),Fl(n),{ignoreSelfIntersections:i}).features.length>0}function KS(e,n,i){const l=i[0]-e[0],r=i[1]-e[1],c=n[0]-e[0],f=n[1]-e[1];return l*f-r*c!==0?!1:Math.abs(c)>=Math.abs(f)?c>0?e[0]<=i[0]&&i[0]<=n[0]:n[0]<=i[0]&&i[0]<=e[0]:f>0?e[1]<=i[1]&&i[1]<=n[1]:n[1]<=i[1]&&i[1]<=e[1]}function $S(e,n){return e[0]===n[0]&&e[1]===n[1]}function Lx(e,n,{ignoreSelfIntersections:i=!0}={}){let l=!1;return $n(e,r=>{$n(n,c=>{if(l===!0)return!0;l=!bp(r.geometry,c.geometry,{ignoreSelfIntersections:i})})}),l}var Eg,d_;function tb(){return d_||(d_=1,Eg=function e(n,i){if(n===i)return!0;if(n&&i&&typeof n=="object"&&typeof i=="object"){if(n.constructor!==i.constructor)return!1;var l,r,c;if(Array.isArray(n)){if(l=n.length,l!=i.length)return!1;for(r=l;r--!==0;)if(!e(n[r],i[r]))return!1;return!0}if(n.constructor===RegExp)return n.source===i.source&&n.flags===i.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===i.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===i.toString();if(c=Object.keys(n),l=c.length,l!==Object.keys(i).length)return!1;for(r=l;r--!==0;)if(!Object.prototype.hasOwnProperty.call(i,c[r]))return!1;for(r=l;r--!==0;){var f=c[r];if(!e(n[f],i[f]))return!1}return!0}return n!==n&&i!==i}),Eg}var eb=tb();const Ho=oo(eb);function Tx(e,n,i={}){if(i=i||{},!Be(i))throw new Error("options is invalid");var l=i.tolerance||0,r=[],c=ff();const f=uc(e);c.load(f);var p;let y=[];return pa(n,function(_){var E=!1;_&&(Ie(c.search(_),function(S){if(E===!1){var M=ce(_).sort(),O=ce(S).sort();if(Ho(M,O))E=!0,p?p=wg(p,_)||p:p=_;else if(l===0?ge(M[0],S)&&ge(M[1],S):ma(S,M[0]).properties.dist<=l&&ma(S,M[1]).properties.dist<=l)E=!0,p?p=wg(p,_)||p:p=_;else if(l===0?ge(O[0],_)&&ge(O[1],_):ma(_,O[0]).properties.dist<=l&&ma(_,O[1]).properties.dist<=l)if(p){const B=wg(p,S);B?p=B:y.push(S)}else p=S}}),E===!1&&p&&(r.push(p),y.length&&(r=r.concat(y),y=[]),p=void 0))}),p&&r.push(p),Jt(r)}function wg(e,n){var i=ce(n),l=ce(e),r=l[0],c=l[l.length-1],f=e.geometry.coordinates;if(Ho(i[0],r))f.unshift(i[1]);else if(Ho(i[0],c))f.push(i[1]);else if(Ho(i[1],r))f.unshift(i[0]);else if(Ho(i[1],c))f.push(i[0]);else return;return e}function nb(e,n){const i=cn(e),l=cn(n),r=i.type,c=l.type;if(r==="MultiPoint"&&c!=="MultiPoint"||(r==="LineString"||r==="MultiLineString")&&c!=="LineString"&&c!=="MultiLineString"||(r==="Polygon"||r==="MultiPolygon")&&c!=="Polygon"&&c!=="MultiPolygon")throw new Error("features must be of the same type");if(r==="Point")throw new Error("Point geometry not supported");if(wp(e,n,{precision:6}))return!1;let f=0;switch(r){case"MultiPoint":for(var p=0;p<i.coordinates.length;p++)for(var y=0;y<l.coordinates.length;y++){var _=i.coordinates[p],E=l.coordinates[y];if(_[0]===E[0]&&_[1]===E[1])return!0}return!1;case"LineString":case"MultiLineString":pa(e,S=>{pa(n,M=>{Tx(S,M).features.length&&f++})});break;case"Polygon":case"MultiPolygon":pa(e,S=>{pa(n,M=>{Is(S,M).features.length&&f++})});break}return f>0}function ib(e,n){if(!e)throw new Error("line1 is required");if(!n)throw new Error("line2 is required");var i=g_(e,"line1");if(i!=="LineString")throw new Error("line1 must be a LineString");var l=g_(n,"line2");if(l!=="LineString")throw new Error("line2 must be a LineString");for(var r=uc(Vo(e)).features,c=uc(Vo(n)).features,f=0;f<r.length;f++){var p=r[f].geometry.coordinates;if(!c[f])break;var y=c[f].geometry.coordinates;if(!rb(p,y))return!1}return!0}function rb(e,n){var i=Ul(Xo(e[0],e[1])),l=Ul(Xo(n[0],n[1]));return i===l||(l-i)%180===0}function g_(e,n){if(e.geometry&&e.geometry.type)return e.geometry.type;if(e.type)return e.type;throw new Error("Invalid GeoJSON object for "+n)}function sb(e,n){var i=cn(e),l=cn(n),r=i.type,c=l.type;switch(r){case"Point":switch(c){case"LineString":return Oi(i,l);case"MultiLineString":for(var f=!1,p=0;p<l.coordinates.length;p++)Oi(i,{coordinates:l.coordinates[p]})&&(f=!0);return f;case"Polygon":for(var y=0;y<l.coordinates.length;y++)if(ge(i,{type:"LineString",coordinates:l.coordinates[y]}))return!0;return!1;case"MultiPolygon":for(var y=0;y<l.coordinates.length;y++)for(var p=0;p<l.coordinates[y].length;p++)if(ge(i,{type:"LineString",coordinates:l.coordinates[y][p]}))return!0;return!1;default:throw new Error("feature2 "+c+" geometry not supported")}case"MultiPoint":switch(c){case"LineString":for(var f=!1,y=0;y<i.coordinates.length;y++)if(f||Oi({coordinates:i.coordinates[y]},l)&&(f=!0),ge({type:"Point",coordinates:i.coordinates[y]},l,{ignoreEndVertices:!0}))return!1;return f;case"MultiLineString":for(var f=!1,y=0;y<i.coordinates.length;y++)for(var p=0;p<l.coordinates.length;p++)if(f||Oi({coordinates:i.coordinates[y]},{coordinates:l.coordinates[p]})&&(f=!0),ge({type:"Point",coordinates:i.coordinates[y]},{type:"LineString",coordinates:l.coordinates[p]},{ignoreEndVertices:!0}))return!1;return f;case"Polygon":for(var f=!1,y=0;y<i.coordinates.length;y++)if(f||ge({type:"Point",coordinates:i.coordinates[y]},{type:"LineString",coordinates:l.coordinates[0]})&&(f=!0),re({type:"Point",coordinates:i.coordinates[y]},l,{ignoreBoundary:!0}))return!1;return f;case"MultiPolygon":for(var f=!1,y=0;y<i.coordinates.length;y++)for(var p=0;p<l.coordinates.length;p++)if(f||ge({type:"Point",coordinates:i.coordinates[y]},{type:"LineString",coordinates:l.coordinates[p][0]})&&(f=!0),re({type:"Point",coordinates:i.coordinates[y]},{type:"Polygon",coordinates:l.coordinates[p]},{ignoreBoundary:!0}))return!1;return f;default:throw new Error("feature2 "+c+" geometry not supported")}case"LineString":switch(c){case"Point":return Oi(l,i);case"MultiPoint":for(var f=!1,y=0;y<l.coordinates.length;y++)if(f||Oi({coordinates:l.coordinates[y]},i)&&(f=!0),ge({type:"Point",coordinates:l.coordinates[y]},i,{ignoreEndVertices:!0}))return!1;return f;case"LineString":var _=!1;if(Oi({coordinates:i.coordinates[0]},l)&&(_=!0),Oi({coordinates:i.coordinates[i.coordinates.length-1]},l)&&(_=!0),_===!1)return!1;for(var y=0;y<i.coordinates.length;y++)if(ge({type:"Point",coordinates:i.coordinates[y]},l,{ignoreEndVertices:!0}))return!1;return _;case"MultiLineString":for(var _=!1,y=0;y<l.coordinates.length;y++){Oi({coordinates:i.coordinates[0]},{coordinates:l.coordinates[y]})&&(_=!0),Oi({coordinates:i.coordinates[i.coordinates.length-1]},{coordinates:l.coordinates[y]})&&(_=!0);for(var p=0;p<i.coordinates[y].length;p++)if(ge({type:"Point",coordinates:i.coordinates[p]},{type:"LineString",coordinates:l.coordinates[y]},{ignoreEndVertices:!0}))return!1}return _;case"Polygon":for(var f=!1,y=0;y<i.coordinates.length;y++)if(f||ge({type:"Point",coordinates:i.coordinates[y]},{type:"LineString",coordinates:l.coordinates[0]})&&(f=!0),re({type:"Point",coordinates:i.coordinates[y]},l,{ignoreBoundary:!0}))return!1;return f;case"MultiPolygon":for(var f=!1,y=0;y<i.coordinates.length;y++){for(var p=0;p<l.coordinates.length;p++)f||ge({type:"Point",coordinates:i.coordinates[y]},{type:"LineString",coordinates:l.coordinates[p][0]})&&(f=!0);if(re({type:"Point",coordinates:i.coordinates[y]},l,{ignoreBoundary:!0}))return!1}return f;default:throw new Error("feature2 "+c+" geometry not supported")}case"MultiLineString":switch(c){case"Point":for(var y=0;y<i.coordinates.length;y++)if(Oi(l,{coordinates:i.coordinates[y]}))return!0;return!1;case"MultiPoint":for(var f=!1,y=0;y<i.coordinates.length;y++)for(var p=0;p<l.coordinates.length;p++)if(f||Oi({coordinates:l.coordinates[p]},{coordinates:i.coordinates[p]})&&(f=!0),ge({type:"Point",coordinates:l.coordinates[p]},{type:"LineString",coordinates:i.coordinates[p]},{ignoreEndVertices:!0}))return!1;return f;case"LineString":for(var _=!1,y=0;y<i.coordinates.length;y++){Oi({coordinates:i.coordinates[y][0]},l)&&(_=!0),Oi({coordinates:i.coordinates[y][i.coordinates[y].length-1]},l)&&(_=!0);for(var p=0;p<l.coordinates.length;p++)if(ge({type:"Point",coordinates:l.coordinates[p]},{type:"LineString",coordinates:i.coordinates[y]},{ignoreEndVertices:!0}))return!1}return _;case"MultiLineString":for(var _=!1,y=0;y<i.coordinates.length;y++)for(var p=0;p<l.coordinates.length;p++){Oi({coordinates:i.coordinates[y][0]},{coordinates:l.coordinates[p]})&&(_=!0),Oi({coordinates:i.coordinates[y][i.coordinates[y].length-1]},{coordinates:l.coordinates[p]})&&(_=!0);for(var E=0;E<i.coordinates[y].length;E++)if(ge({type:"Point",coordinates:i.coordinates[y][E]},{type:"LineString",coordinates:l.coordinates[p]},{ignoreEndVertices:!0}))return!1}return _;case"Polygon":for(var f=!1,y=0;y<i.coordinates.length;y++)for(var p=0;p<i.coordinates.length;p++)if(f||ge({type:"Point",coordinates:i.coordinates[y][p]},{type:"LineString",coordinates:l.coordinates[0]})&&(f=!0),re({type:"Point",coordinates:i.coordinates[y][p]},l,{ignoreBoundary:!0}))return!1;return f;case"MultiPolygon":for(var f=!1,y=0;y<l.coordinates[0].length;y++)for(var p=0;p<i.coordinates.length;p++)for(var E=0;E<i.coordinates[p].length;E++)if(f||ge({type:"Point",coordinates:i.coordinates[p][E]},{type:"LineString",coordinates:l.coordinates[0][y]})&&(f=!0),re({type:"Point",coordinates:i.coordinates[p][E]},{type:"Polygon",coordinates:[l.coordinates[0][y]]},{ignoreBoundary:!0}))return!1;return f;default:throw new Error("feature2 "+c+" geometry not supported")}case"Polygon":switch(c){case"Point":for(var y=0;y<i.coordinates.length;y++)if(ge(l,{type:"LineString",coordinates:i.coordinates[y]}))return!0;return!1;case"MultiPoint":for(var f=!1,y=0;y<l.coordinates.length;y++)if(f||ge({type:"Point",coordinates:l.coordinates[y]},{type:"LineString",coordinates:i.coordinates[0]})&&(f=!0),re({type:"Point",coordinates:l.coordinates[y]},i,{ignoreBoundary:!0}))return!1;return f;case"LineString":for(var f=!1,y=0;y<l.coordinates.length;y++)if(f||ge({type:"Point",coordinates:l.coordinates[y]},{type:"LineString",coordinates:i.coordinates[0]})&&(f=!0),re({type:"Point",coordinates:l.coordinates[y]},i,{ignoreBoundary:!0}))return!1;return f;case"MultiLineString":for(var f=!1,y=0;y<l.coordinates.length;y++)for(var p=0;p<l.coordinates[y].length;p++)if(f||ge({type:"Point",coordinates:l.coordinates[y][p]},{type:"LineString",coordinates:i.coordinates[0]})&&(f=!0),re({type:"Point",coordinates:l.coordinates[y][p]},i,{ignoreBoundary:!0}))return!1;return f;case"Polygon":for(var f=!1,y=0;y<i.coordinates[0].length;y++)if(f||ge({type:"Point",coordinates:i.coordinates[0][y]},{type:"LineString",coordinates:l.coordinates[0]})&&(f=!0),re({type:"Point",coordinates:i.coordinates[0][y]},l,{ignoreBoundary:!0}))return!1;return f;case"MultiPolygon":for(var f=!1,y=0;y<l.coordinates[0].length;y++)for(var p=0;p<i.coordinates[0].length;p++)if(f||ge({type:"Point",coordinates:i.coordinates[0][p]},{type:"LineString",coordinates:l.coordinates[0][y]})&&(f=!0),re({type:"Point",coordinates:i.coordinates[0][p]},{type:"Polygon",coordinates:l.coordinates[0][y]},{ignoreBoundary:!0}))return!1;return f;default:throw new Error("feature2 "+c+" geometry not supported")}case"MultiPolygon":switch(c){case"Point":for(var y=0;y<i.coordinates[0].length;y++)if(ge(l,{type:"LineString",coordinates:i.coordinates[0][y]}))return!0;return!1;case"MultiPoint":for(var f=!1,y=0;y<i.coordinates[0].length;y++)for(var p=0;p<l.coordinates.length;p++)if(f||ge({type:"Point",coordinates:l.coordinates[p]},{type:"LineString",coordinates:i.coordinates[0][y]})&&(f=!0),re({type:"Point",coordinates:l.coordinates[p]},{type:"Polygon",coordinates:i.coordinates[0][y]},{ignoreBoundary:!0}))return!1;return f;case"LineString":for(var f=!1,y=0;y<i.coordinates[0].length;y++)for(var p=0;p<l.coordinates.length;p++)if(f||ge({type:"Point",coordinates:l.coordinates[p]},{type:"LineString",coordinates:i.coordinates[0][y]})&&(f=!0),re({type:"Point",coordinates:l.coordinates[p]},{type:"Polygon",coordinates:i.coordinates[0][y]},{ignoreBoundary:!0}))return!1;return f;case"MultiLineString":for(var f=!1,y=0;y<i.coordinates.length;y++)for(var p=0;p<l.coordinates.length;p++)for(var E=0;E<l.coordinates[p].length;E++)if(f||ge({type:"Point",coordinates:l.coordinates[p][E]},{type:"LineString",coordinates:i.coordinates[y][0]})&&(f=!0),re({type:"Point",coordinates:l.coordinates[p][E]},{type:"Polygon",coordinates:[i.coordinates[y][0]]},{ignoreBoundary:!0}))return!1;return f;case"Polygon":for(var f=!1,y=0;y<i.coordinates[0].length;y++)for(var p=0;p<i.coordinates[0][y].length;p++)if(f||ge({type:"Point",coordinates:i.coordinates[0][y][p]},{type:"LineString",coordinates:l.coordinates[0]})&&(f=!0),re({type:"Point",coordinates:i.coordinates[0][y][p]},l,{ignoreBoundary:!0}))return!1;return f;case"MultiPolygon":for(var f=!1,y=0;y<i.coordinates[0].length;y++)for(var p=0;p<l.coordinates[0].length;p++)for(var E=0;E<i.coordinates[0].length;E++)if(f||ge({type:"Point",coordinates:i.coordinates[0][y][E]},{type:"LineString",coordinates:l.coordinates[0][p]})&&(f=!0),re({type:"Point",coordinates:i.coordinates[0][y][E]},{type:"Polygon",coordinates:l.coordinates[0][p]},{ignoreBoundary:!0}))return!1;return f;default:throw new Error("feature2 "+c+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}}function Oi(e,n){return!!(p_(n.coordinates[0],e.coordinates)||p_(n.coordinates[n.coordinates.length-1],e.coordinates))}function p_(e,n){return e[0]===n[0]&&e[1]===n[1]}function ab(e){if(!e.type)return!1;const n=cn(e),i=n.type,l=n.coordinates;switch(i){case"Point":return l.length>1;case"MultiPoint":for(var r=0;r<l.length;r++)if(l[r].length<2)return!1;return!0;case"LineString":if(l.length<2)return!1;for(var r=0;r<l.length;r++)if(l[r].length<2)return!1;return!0;case"MultiLineString":if(l.length<2)return!1;for(var r=0;r<l.length;r++)if(l[r].length<2)return!1;return!0;case"Polygon":for(var r=0;r<n.coordinates.length;r++)if(l[r].length<4||!m_(l[r])||v_(l[r])||r>0&&Is(le([l[0]]),le([l[r]])).features.length>1)return!1;return!0;case"MultiPolygon":for(var r=0;r<n.coordinates.length;r++)for(var c=n.coordinates[r],f=0;f<c.length;f++)if(c[f].length<4||!m_(c[f])||v_(c[f])||f===0&&!ob(c,n.coordinates,r)||f>0&&Is(le([c[0]]),le([c[f]])).features.length>1)return!1;return!0;default:return!1}}function m_(e){return e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]}function v_(e){for(var n=0;n<e.length-1;n++)for(var i=e[n],l=n+1;l<e.length-2;l++){var r=[e[l],e[l+1]];if(ge(i,Se(r)))return!0}return!1}function ob(e,n,i){for(var l=le(e),r=i+1;r<n.length;r++)if(!bp(l,le(n[r]))&&bx(l,Se(n[r][0])))return!1;return!0}function Cx(e,n){var i=cn(e),l=cn(n),r=i.type,c=l.type;switch(r){case"Point":switch(c){case"MultiPoint":return lb(i,l);case"LineString":return ge(i,l,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return re(i,l,{ignoreBoundary:!0});default:throw new Error("feature2 "+c+" geometry not supported")}case"MultiPoint":switch(c){case"MultiPoint":return ub(i,l);case"LineString":return cb(i,l);case"Polygon":case"MultiPolygon":return hb(i,l);default:throw new Error("feature2 "+c+" geometry not supported")}case"LineString":switch(c){case"LineString":return fb(i,l);case"Polygon":case"MultiPolygon":return gb(i,l);default:throw new Error("feature2 "+c+" geometry not supported")}case"Polygon":switch(c){case"Polygon":case"MultiPolygon":return pb(i,l);default:throw new Error("feature2 "+c+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}}function lb(e,n){var i,l=!1;for(i=0;i<n.coordinates.length;i++)if(Mx(n.coordinates[i],e.coordinates)){l=!0;break}return l}function ub(e,n){for(var i=0;i<e.coordinates.length;i++){for(var l=!1,r=0;r<n.coordinates.length;r++)Mx(e.coordinates[i],n.coordinates[r])&&(l=!0);if(!l)return!1}return!0}function cb(e,n){for(var i=!1,l=0;l<e.coordinates.length;l++){if(!ge(e.coordinates[l],n))return!1;i||(i=ge(e.coordinates[l],n,{ignoreEndVertices:!0}))}return i}function hb(e,n){for(var i=!0,l=!1,r=0;r<e.coordinates.length;r++){if(l=re(e.coordinates[r],n),!l){i=!1;break}l=re(e.coordinates[r],n,{ignoreBoundary:!0})}return i&&l}function fb(e,n){for(var i=0;i<e.coordinates.length;i++)if(!ge(e.coordinates[i],n))return!1;return!0}function db(e,n){const i=e.coordinates,l=[];for(let r=0;r<i.length-1;r++){const c=Se([i[r],i[r+1]]),f=_p(c,Sn(n));f.features.length===0?l.push(c):l.push(...f.features)}return Jt(l)}function gb(e,n){const i=Ne(n),l=Ne(e);if(!kx(i,l))return!1;for(const f of e.coordinates)if(!re(f,n))return!1;let r=!1;const c=db(e,n);for(const f of c.features){const p=mb(f.geometry.coordinates[0],f.geometry.coordinates[1]);if(!re(p,n))return!1;!r&&re(p,n,{ignoreBoundary:!0})&&(r=!0)}return r}function pb(e,n){var i=Ne(e),l=Ne(n);if(!kx(l,i))return!1;for(var r=0;r<e.coordinates[0].length;r++)if(!re(e.coordinates[0][r],n))return!1;return!0}function kx(e,n){return!(e[0]>n[0]||e[2]<n[2]||e[1]>n[1]||e[3]<n[3])}function Mx(e,n){return e[0]===n[0]&&e[1]===n[1]}function mb(e,n){return[(e[0]+n[0])/2,(e[1]+n[1])/2]}function df(e,n={}){const i=Ne(e),l=(i[0]+i[2])/2,r=(i[1]+i[3])/2;return ue([l,r],n.properties,n)}var Rh={exports:{}},vb=Rh.exports,y_;function yb(){return y_||(y_=1,(function(e,n){(function(i,l){e.exports=l()})(vb,(function(){function i(g,a){(a==null||a>g.length)&&(a=g.length);for(var o=0,d=Array(a);o<a;o++)d[o]=g[o];return d}function l(g,a,o){return a=E(a),(function(d,x){if(x&&(typeof x=="object"||typeof x=="function"))return x;if(x!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C})(d)})(g,M()?Reflect.construct(a,o||[],E(g).constructor):a.apply(g,o))}function r(g,a){if(!(g instanceof a))throw new TypeError("Cannot call a class as a function")}function c(g,a,o){if(M())return Reflect.construct.apply(null,arguments);var d=[null];d.push.apply(d,a);var x=new(g.bind.apply(g,d));return o&&O(x,o.prototype),x}function f(g,a){for(var o=0;o<a.length;o++){var d=a[o];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(g,st(d.key),d)}}function p(g,a,o){return a&&f(g.prototype,a),o&&f(g,o),Object.defineProperty(g,"prototype",{writable:!1}),g}function y(g,a){var o=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!o){if(Array.isArray(g)||(o=rt(g))||a){o&&(g=o);var d=0,x=function(){};return{s:x,n:function(){return d>=g.length?{done:!0}:{done:!1,value:g[d++]}},e:function(lt){throw lt},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var C,I=!0,H=!1;return{s:function(){o=o.call(g)},n:function(){var lt=o.next();return I=lt.done,lt},e:function(lt){H=!0,C=lt},f:function(){try{I||o.return==null||o.return()}finally{if(H)throw C}}}}function _(){return _=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(g,a,o){var d=(function(C,I){for(;!{}.hasOwnProperty.call(C,I)&&(C=E(C))!==null;);return C})(g,a);if(d){var x=Object.getOwnPropertyDescriptor(d,a);return x.get?x.get.call(arguments.length<3?g:o):x.value}},_.apply(null,arguments)}function E(g){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},E(g)}function S(g,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(a&&a.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),a&&O(g,a)}function M(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(M=function(){return!!g})()}function O(g,a){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,d){return o.__proto__=d,o},O(g,a)}function B(g,a,o,d){var x=_(E(1&d?g.prototype:g),a,o);return 2&d&&typeof x=="function"?function(C){return x.apply(o,C)}:x}function Q(g){return(function(a){if(Array.isArray(a))return i(a)})(g)||(function(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)})(g)||rt(g)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function st(g){var a=(function(o,d){if(typeof o!="object"||!o)return o;var x=o[Symbol.toPrimitive];if(x!==void 0){var C=x.call(o,d);if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)})(g,"string");return typeof a=="symbol"?a:a+""}function rt(g,a){if(g){if(typeof g=="string")return i(g,a);var o={}.toString.call(g).slice(8,-1);return o==="Object"&&g.constructor&&(o=g.constructor.name),o==="Map"||o==="Set"?Array.from(g):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(g,a):void 0}}function j(g){var a=typeof Map=="function"?new Map:void 0;return j=function(o){if(o===null||!(function(x){try{return Function.toString.call(x).indexOf("[native code]")!==-1}catch{return typeof x=="function"}})(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(a!==void 0){if(a.has(o))return a.get(o);a.set(o,d)}function d(){return c(o,arguments,E(this).constructor)}return d.prototype=Object.create(o.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),O(d,o)},j(g)}var Y=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(a){this._quadrantSegments=a,this._quadrantSegments===0&&(this._joinStyle=g.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=g.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),a<=0&&(this._quadrantSegments=1),this._joinStyle!==g.JOIN_ROUND&&(this._quadrantSegments=g.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(a){this._joinStyle=a}},{key:"setSimplifyFactor",value:function(a){this._simplifyFactor=a<0?0:a}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(a){this._endCapStyle=a}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(a){this._mitreLimit=a}},{key:"setSingleSided",value:function(a){this._isSingleSided=a}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=g.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=g.CAP_ROUND,this._joinStyle=g.JOIN_ROUND,this._mitreLimit=g.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=g.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var a=arguments[0];this.setQuadrantSegments(a)}else if(arguments.length===2){var o=arguments[0],d=arguments[1];this.setQuadrantSegments(o),this.setEndCapStyle(d)}else if(arguments.length===4){var x=arguments[0],C=arguments[1],I=arguments[2],H=arguments[3];this.setQuadrantSegments(x),this.setEndCapStyle(C),this.setJoinStyle(I),this.setMitreLimit(H)}}}},{key:"bufferDistanceError",value:function(a){var o=Math.PI/2/a;return 1-Math.cos(o/2)}}])})();Y.CAP_ROUND=1,Y.CAP_FLAT=2,Y.CAP_SQUARE=3,Y.JOIN_ROUND=1,Y.JOIN_MITRE=2,Y.JOIN_BEVEL=3,Y.DEFAULT_QUADRANT_SEGMENTS=8,Y.DEFAULT_MITRE_LIMIT=5,Y.DEFAULT_SIMPLIFY_FACTOR=.01;var V=(function(g){function a(o){var d;return r(this,a),(d=l(this,a,[o])).name=Object.keys({Exception:a})[0],d}return S(a,g),p(a,[{key:"toString",value:function(){return this.message}}])})(j(Error)),et=(function(g){function a(o){var d;return r(this,a),(d=l(this,a,[o])).name=Object.keys({IllegalArgumentException:a})[0],d}return S(a,g),p(a)})(V),tt=(function(){return p((function g(){r(this,g)}),[{key:"filter",value:function(g){}}])})();function W(){}function k(){}function A(){}var q,X,Z,nt,at,it,D,z,P=(function(){return p((function g(){r(this,g)}),null,[{key:"equalsWithTolerance",value:function(g,a,o){return Math.abs(g-a)<=o}}])})(),$=(function(){return p((function g(a,o){r(this,g),this.low=o||0,this.high=a||0}),null,[{key:"toBinaryString",value:function(g){var a,o="";for(a=2147483648;a>0;a>>>=1)o+=(g.high&a)===a?"1":"0";for(a=2147483648;a>0;a>>>=1)o+=(g.low&a)===a?"1":"0";return o}}])})();function J(){}function U(){}J.NaN=NaN,J.isNaN=function(g){return Number.isNaN(g)},J.isInfinite=function(g){return!Number.isFinite(g)},J.MAX_VALUE=Number.MAX_VALUE,J.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,J.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(it=2146435072,D=new Float64Array(1),z=new Int32Array(D.buffer),J.doubleToLongBits=function(g){D[0]=g;var a=0|z[0],o=0|z[1];return(o&it)===it&&1048575&o&&a!==0&&(a=0,o=2146959360),new $(o,a)},J.longBitsToDouble=function(g){return z[0]=g.low,z[1]=g.high,D[0]}):(q=1023,X=Math.log2,Z=Math.floor,nt=Math.pow,at=(function(){for(var g=53;g>0;g--){var a=nt(2,g)-1;if(Z(X(a))+1===g)return a}return 0})(),J.doubleToLongBits=function(g){var a,o,d,x,C,I,H,lt,dt;if(g<0||1/g===Number.NEGATIVE_INFINITY?(I=1<<31,g=-g):I=0,g===0)return new $(lt=I,dt=0);if(g===1/0)return new $(lt=2146435072|I,dt=0);if(g!=g)return new $(lt=2146959360,dt=0);if(x=0,dt=0,(a=Z(g))>1)if(a<=at)(x=Z(X(a)))<=20?(dt=0,lt=a<<20-x&1048575):(dt=a%(o=nt(2,d=x-20))<<32-d,lt=a/o&1048575);else for(d=a,dt=0;(d=Z(o=d/2))!==0;)x++,dt>>>=1,dt|=(1&lt)<<31,lt>>>=1,o!==d&&(lt|=524288);if(H=x+q,C=a===0,a=g-a,x<52&&a!==0)for(d=0;;){if((o=2*a)>=1?(a=o-1,C?(H--,C=!1):(d<<=1,d|=1,x++)):(a=o,C?--H==0&&(x++,C=!1):(d<<=1,x++)),x===20)lt|=d,d=0;else if(x===52){dt|=d;break}if(o===1){x<20?lt|=d<<20-x:x<52&&(dt|=d<<52-x);break}}return lt|=H<<20,new $(lt|=I,dt)},J.longBitsToDouble=function(g){var a,o,d,x,C=g.high,I=g.low,H=C&1<<31?-1:1;for(d=((2146435072&C)>>20)-q,x=0,o=1<<19,a=1;a<=20;a++)C&o&&(x+=nt(2,-a)),o>>>=1;for(o=1<<31,a=21;a<=52;a++)I&o&&(x+=nt(2,-a)),o>>>=1;if(d===-1023){if(x===0)return 0*H;d=-1022}else{if(d===1024)return x===0?H/0:NaN;x+=1}return H*x*nt(2,d)});var K=(function(g){function a(o){var d;return r(this,a),(d=l(this,a,[o])).name=Object.keys({RuntimeException:a})[0],d}return S(a,g),p(a)})(V),ct=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,null,[{key:"constructor_",value:function(){if(arguments.length===0)K.constructor_.call(this);else if(arguments.length===1){var o=arguments[0];K.constructor_.call(this,o)}}}])})(K),gt=(function(){function g(){r(this,g)}return p(g,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)g.shouldNeverReachHere(null);else if(arguments.length===1){var a=arguments[0];throw new ct("Should never reach here"+(a!==null?": "+a:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var a=arguments[0];g.isTrue(a,null)}else if(arguments.length===2){var o=arguments[1];if(!arguments[0])throw o===null?new ct:new ct(o)}}},{key:"equals",value:function(){if(arguments.length===2){var a=arguments[0],o=arguments[1];g.equals(a,o,null)}else if(arguments.length===3){var d=arguments[0],x=arguments[1],C=arguments[2];if(!x.equals(d))throw new ct("Expected "+d+" but encountered "+x+(C!==null?": "+C:""))}}}])})(),pt=new ArrayBuffer(8),yt=new Float64Array(pt),Tt=new Int32Array(pt),ht=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"getM",value:function(){return J.NaN}},{key:"setOrdinate",value:function(a,o){switch(a){case g.X:this.x=o;break;case g.Y:this.y=o;break;case g.Z:this.setZ(o);break;default:throw new et("Invalid ordinate index: "+a)}}},{key:"equals2D",value:function(){if(arguments.length===1){var a=arguments[0];return this.x===a.x&&this.y===a.y}if(arguments.length===2){var o=arguments[0],d=arguments[1];return!!P.equalsWithTolerance(this.x,o.x,d)&&!!P.equalsWithTolerance(this.y,o.y,d)}}},{key:"setM",value:function(a){throw new et("Invalid ordinate index: "+g.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(a){switch(a){case g.X:return this.x;case g.Y:return this.y;case g.Z:return this.getZ()}throw new et("Invalid ordinate index: "+a)}},{key:"equals3D",value:function(a){return this.x===a.x&&this.y===a.y&&(this.getZ()===a.getZ()||J.isNaN(this.getZ())&&J.isNaN(a.getZ()))}},{key:"equals",value:function(a){return a instanceof g&&this.equals2D(a)}},{key:"equalInZ",value:function(a,o){return P.equalsWithTolerance(this.getZ(),a.getZ(),o)}},{key:"setX",value:function(a){this.x=a}},{key:"compareTo",value:function(a){var o=a;return this.x<o.x?-1:this.x>o.x?1:this.y<o.y?-1:this.y>o.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(a){this.z=a}},{key:"clone",value:function(){try{return null}catch(a){if(a instanceof CloneNotSupportedException)return gt.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw a}}},{key:"copy",value:function(){return new g(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(a){var o=this.x-a.x,d=this.y-a.y,x=this.getZ()-a.getZ();return Math.sqrt(o*o+d*d+x*x)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(a){this.y=a}},{key:"distance",value:function(a){var o=this.x-a.x,d=this.y-a.y;return Math.sqrt(o*o+d*d)}},{key:"hashCode",value:function(){var a=17;return a=37*(a=37*a+g.hashCode(this.x))+g.hashCode(this.y)}},{key:"setCoordinate",value:function(a){this.x=a.x,this.y=a.y,this.z=a.getZ()}},{key:"interfaces_",get:function(){return[W,k,A]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)g.constructor_.call(this,0,0);else if(arguments.length===1){var a=arguments[0];g.constructor_.call(this,a.x,a.y,a.getZ())}else if(arguments.length===2){var o=arguments[0],d=arguments[1];g.constructor_.call(this,o,d,g.NULL_ORDINATE)}else if(arguments.length===3){var x=arguments[0],C=arguments[1],I=arguments[2];this.x=x,this.y=C,this.z=I}}},{key:"hashCode",value:function(a){return yt[0]=a,Tt[0]^Tt[1]}}])})(),Dt=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"compare",value:function(a,o){var d=g.compare(a.x,o.x);if(d!==0)return d;var x=g.compare(a.y,o.y);return x!==0?x:this._dimensionsToTest<=2?0:g.compare(a.getZ(),o.getZ())}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)g.constructor_.call(this,2);else if(arguments.length===1){var a=arguments[0];if(a!==2&&a!==3)throw new et("only 2 or 3 dimensions may be specified");this._dimensionsToTest=a}}},{key:"compare",value:function(a,o){return a<o?-1:a>o?1:J.isNaN(a)?J.isNaN(o)?0:-1:J.isNaN(o)?1:0}}])})();ht.DimensionalComparator=Dt,ht.NULL_ORDINATE=J.NaN,ht.X=0,ht.Y=1,ht.Z=2,ht.M=3;var It=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(a){if(!(a instanceof g))return!1;var o=a;return this.isNull()?o.isNull():this._maxx===o.getMaxX()&&this._maxy===o.getMaxY()&&this._minx===o.getMinX()&&this._miny===o.getMinY()}},{key:"intersection",value:function(a){if(this.isNull()||a.isNull()||!this.intersects(a))return new g;var o=this._minx>a._minx?this._minx:a._minx,d=this._miny>a._miny?this._miny:a._miny;return new g(o,this._maxx<a._maxx?this._maxx:a._maxx,d,this._maxy<a._maxy?this._maxy:a._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof ht){var a=arguments[0];return this.covers(a.x,a.y)}if(arguments[0]instanceof g){var o=arguments[0];return!this.isNull()&&!o.isNull()&&o.getMinX()>=this._minx&&o.getMaxX()<=this._maxx&&o.getMinY()>=this._miny&&o.getMaxY()<=this._maxy}}else if(arguments.length===2){var d=arguments[0],x=arguments[1];return!this.isNull()&&d>=this._minx&&d<=this._maxx&&x>=this._miny&&x<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof g){var a=arguments[0];return!this.isNull()&&!a.isNull()&&!(a._minx>this._maxx||a._maxx<this._minx||a._miny>this._maxy||a._maxy<this._miny)}if(arguments[0]instanceof ht){var o=arguments[0];return this.intersects(o.x,o.y)}}else if(arguments.length===2){if(arguments[0]instanceof ht&&arguments[1]instanceof ht){var d=arguments[0],x=arguments[1];return!this.isNull()&&!((d.x<x.x?d.x:x.x)>this._maxx)&&!((d.x>x.x?d.x:x.x)<this._minx)&&!((d.y<x.y?d.y:x.y)>this._maxy)&&!((d.y>x.y?d.y:x.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var C=arguments[0],I=arguments[1];return!this.isNull()&&!(C>this._maxx||C<this._minx||I>this._maxy||I<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var a=this.getWidth(),o=this.getHeight();return Math.sqrt(a*a+o*o)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof ht){var a=arguments[0];this.expandToInclude(a.x,a.y)}else if(arguments[0]instanceof g){var o=arguments[0];if(o.isNull())return null;this.isNull()?(this._minx=o.getMinX(),this._maxx=o.getMaxX(),this._miny=o.getMinY(),this._maxy=o.getMaxY()):(o._minx<this._minx&&(this._minx=o._minx),o._maxx>this._maxx&&(this._maxx=o._maxx),o._miny<this._miny&&(this._miny=o._miny),o._maxy>this._maxy&&(this._maxy=o._maxy))}}else if(arguments.length===2){var d=arguments[0],x=arguments[1];this.isNull()?(this._minx=d,this._maxx=d,this._miny=x,this._maxy=x):(d<this._minx&&(this._minx=d),d>this._maxx&&(this._maxx=d),x<this._miny&&(this._miny=x),x>this._maxy&&(this._maxy=x))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var a=this.getWidth(),o=this.getHeight();return a<o?a:o}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(a){var o=a;return this.isNull()?o.isNull()?0:-1:o.isNull()?1:this._minx<o._minx?-1:this._minx>o._minx?1:this._miny<o._miny?-1:this._miny>o._miny?1:this._maxx<o._maxx?-1:this._maxx>o._maxx?1:this._maxy<o._maxy?-1:this._maxy>o._maxy?1:0}},{key:"translate",value:function(a,o){if(this.isNull())return null;this.init(this.getMinX()+a,this.getMaxX()+a,this.getMinY()+o,this.getMaxY()+o)}},{key:"copy",value:function(){return new g(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(a){return!(!this.isNull()&&!a.isNull())||a._minx>this._maxx||a._maxx<this._minx||a._miny>this._maxy||a._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var a=this.getWidth(),o=this.getHeight();return a>o?a:o}},{key:"expandBy",value:function(){if(arguments.length===1){var a=arguments[0];this.expandBy(a,a)}else if(arguments.length===2){var o=arguments[0],d=arguments[1];if(this.isNull())return null;this._minx-=o,this._maxx+=o,this._miny-=d,this._maxy+=d,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof g){var a=arguments[0];return this.covers(a)}if(arguments[0]instanceof ht){var o=arguments[0];return this.covers(o)}}else if(arguments.length===2){var d=arguments[0],x=arguments[1];return this.covers(d,x)}}},{key:"centre",value:function(){return this.isNull()?null:new ht((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof ht){var a=arguments[0];this.init(a.x,a.x,a.y,a.y)}else if(arguments[0]instanceof g){var o=arguments[0];this._minx=o._minx,this._maxx=o._maxx,this._miny=o._miny,this._maxy=o._maxy}}else if(arguments.length===2){var d=arguments[0],x=arguments[1];this.init(d.x,x.x,d.y,x.y)}else if(arguments.length===4){var C=arguments[0],I=arguments[1],H=arguments[2],lt=arguments[3];C<I?(this._minx=C,this._maxx=I):(this._minx=I,this._maxx=C),H<lt?(this._miny=H,this._maxy=lt):(this._miny=lt,this._maxy=H)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(a){if(this.intersects(a))return 0;var o=0;this._maxx<a._minx?o=a._minx-this._maxx:this._minx>a._maxx&&(o=this._minx-a._maxx);var d=0;return this._maxy<a._miny?d=a._miny-this._maxy:this._miny>a._maxy&&(d=this._miny-a._maxy),o===0?d:d===0?o:Math.sqrt(o*o+d*d)}},{key:"hashCode",value:function(){var a=17;return a=37*(a=37*(a=37*(a=37*a+ht.hashCode(this._minx))+ht.hashCode(this._maxx))+ht.hashCode(this._miny))+ht.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[W,A]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof ht){var a=arguments[0];this.init(a.x,a.x,a.y,a.y)}else if(arguments[0]instanceof g){var o=arguments[0];this.init(o)}}else if(arguments.length===2){var d=arguments[0],x=arguments[1];this.init(d.x,x.x,d.y,x.y)}else if(arguments.length===4){var C=arguments[0],I=arguments[1],H=arguments[2],lt=arguments[3];this.init(C,I,H,lt)}}},{key:"intersects",value:function(){if(arguments.length===3){var a=arguments[0],o=arguments[1],d=arguments[2];return d.x>=(a.x<o.x?a.x:o.x)&&d.x<=(a.x>o.x?a.x:o.x)&&d.y>=(a.y<o.y?a.y:o.y)&&d.y<=(a.y>o.y?a.y:o.y)}if(arguments.length===4){var x=arguments[0],C=arguments[1],I=arguments[2],H=arguments[3],lt=Math.min(I.x,H.x),dt=Math.max(I.x,H.x),_t=Math.min(x.x,C.x),St=Math.max(x.x,C.x);return!(_t>dt)&&!(St<lt)&&(lt=Math.min(I.y,H.y),dt=Math.max(I.y,H.y),_t=Math.min(x.y,C.y),St=Math.max(x.y,C.y),!(_t>dt)&&!(St<lt))}}}])})(),Mt=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===g.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(a){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(a){return this===a||this.equalsExact(a,0)}},{key:"geometryChanged",value:function(){this.apply(g.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(a){return a!==null&&this.norm().equalsExact(a.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var a;if(arguments.length===1){var o=arguments[0];return a=o,this.getTypeCode()!==a.getTypeCode()?this.getTypeCode()-a.getTypeCode():this.isEmpty()&&a.isEmpty()?0:this.isEmpty()?-1:a.isEmpty()?1:this.compareToSameClass(o)}if(arguments.length===2){var d=arguments[0],x=arguments[1];return a=d,this.getTypeCode()!==a.getTypeCode()?this.getTypeCode()-a.getTypeCode():this.isEmpty()&&a.isEmpty()?0:this.isEmpty()?-1:a.isEmpty()?1:this.compareToSameClass(d,x)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(a){if(a.getTypeCode()===g.TYPECODE_GEOMETRYCOLLECTION)throw new et("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(a,o,d){return d===0?a.equals(o):a.distance(o)<=d}},{key:"norm",value:function(){var a=this.copy();return a.normalize(),a}},{key:"reverse",value:function(){var a=this.reverseInternal();return this.envelope!=null&&(a.envelope=this.envelope.copy()),a.setSRID(this.getSRID()),a}},{key:"copy",value:function(){var a=this.copyInternal();return a.envelope=this._envelope==null?null:this._envelope.copy(),a._SRID=this._SRID,a._userData=this._userData,a}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new It(this._envelope)}},{key:"setSRID",value:function(a){this._SRID=a}},{key:"setUserData",value:function(a){this._userData=a}},{key:"compare",value:function(a,o){for(var d=a.iterator(),x=o.iterator();d.hasNext()&&x.hasNext();){var C=d.next(),I=x.next(),H=C.compareTo(I);if(H!==0)return H}return d.hasNext()?1:x.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(a){return this.getClass()===a.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===g.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===g.TYPECODE_MULTIPOINT||this.getTypeCode()===g.TYPECODE_MULTILINESTRING||this.getTypeCode()===g.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[k,W,A]}},{key:"getClass",value:function(){return g}}],[{key:"hasNonEmptyElements",value:function(a){for(var o=0;o<a.length;o++)if(!a[o].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(a){for(var o=0;o<a.length;o++)if(a[o]===null)return!0;return!1}}])})();Mt.constructor_=function(g){g&&(this._envelope=null,this._userData=null,this._factory=g,this._SRID=g.getSRID())},Mt.TYPECODE_POINT=0,Mt.TYPECODE_MULTIPOINT=1,Mt.TYPECODE_LINESTRING=2,Mt.TYPECODE_LINEARRING=3,Mt.TYPECODE_MULTILINESTRING=4,Mt.TYPECODE_POLYGON=5,Mt.TYPECODE_MULTIPOLYGON=6,Mt.TYPECODE_GEOMETRYCOLLECTION=7,Mt.TYPENAME_POINT="Point",Mt.TYPENAME_MULTIPOINT="MultiPoint",Mt.TYPENAME_LINESTRING="LineString",Mt.TYPENAME_LINEARRING="LinearRing",Mt.TYPENAME_MULTILINESTRING="MultiLineString",Mt.TYPENAME_POLYGON="Polygon",Mt.TYPENAME_MULTIPOLYGON="MultiPolygon",Mt.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",Mt.geometryChangedFilter={get interfaces_(){return[tt]},filter:function(g){g.geometryChangedAction()}};var ft=(function(){function g(){r(this,g)}return p(g,null,[{key:"toLocationSymbol",value:function(a){switch(a){case g.EXTERIOR:return"e";case g.BOUNDARY:return"b";case g.INTERIOR:return"i";case g.NONE:return"-"}throw new et("Unknown location value: "+a)}}])})();ft.INTERIOR=0,ft.BOUNDARY=1,ft.EXTERIOR=2,ft.NONE=-1;var Xt=(function(){return p((function g(){r(this,g)}),[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])})(),Zt=(function(g){function a(o){var d;return r(this,a),(d=l(this,a,[o])).name=Object.keys({NoSuchElementException:a})[0],d}return S(a,g),p(a)})(V),Bt=(function(g){function a(o){var d;return r(this,a),(d=l(this,a,[o])).name=Object.keys({UnsupportedOperationException:a})[0],d}return S(a,g),p(a)})(V),Ut=(function(g){function a(){return r(this,a),l(this,a,arguments)}return S(a,g),p(a,[{key:"contains",value:function(){}}])})(Xt),Le=(function(g){function a(o){var d;return r(this,a),(d=l(this,a)).map=new Map,o instanceof Xt&&d.addAll(o),d}return S(a,g),p(a,[{key:"contains",value:function(o){var d=o.hashCode?o.hashCode():o;return!!this.map.has(d)}},{key:"add",value:function(o){var d=o.hashCode?o.hashCode():o;return!this.map.has(d)&&!!this.map.set(d,o)}},{key:"addAll",value:function(o){var d,x=y(o);try{for(x.s();!(d=x.n()).done;){var C=d.value;this.add(C)}}catch(I){x.e(I)}finally{x.f()}return!0}},{key:"remove",value:function(){throw new Bt}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new he(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])})(Ut),he=(function(){return p((function g(a){r(this,g),this.iterator=a.values();var o=this.iterator.next(),d=o.done,x=o.value;this.done=d,this.value=x}),[{key:"next",value:function(){if(this.done)throw new Zt;var g=this.value,a=this.iterator.next(),o=a.done,d=a.value;return this.done=o,this.value=d,g}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new Bt}}])})(),At=(function(){function g(){r(this,g)}return p(g,null,[{key:"opposite",value:function(a){return a===g.LEFT?g.RIGHT:a===g.RIGHT?g.LEFT:a}}])})();At.ON=0,At.LEFT=1,At.RIGHT=2;var Ve=(function(g){function a(o){var d;return r(this,a),(d=l(this,a,[o])).name=Object.keys({EmptyStackException:a})[0],d}return S(a,g),p(a)})(V),ti=(function(g){function a(o){var d;return r(this,a),(d=l(this,a,[o])).name=Object.keys({IndexOutOfBoundsException:a})[0],d}return S(a,g),p(a)})(V),pn=(function(g){function a(){return r(this,a),l(this,a,arguments)}return S(a,g),p(a,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])})(Xt),Fi=(function(g){function a(){var o;return r(this,a),(o=l(this,a)).array=[],o}return S(a,g),p(a,[{key:"add",value:function(o){return this.array.push(o),!0}},{key:"get",value:function(o){if(o<0||o>=this.size())throw new ti;return this.array[o]}},{key:"push",value:function(o){return this.array.push(o),o}},{key:"pop",value:function(){if(this.array.length===0)throw new Ve;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new Ve;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(o){return this.array.indexOf(o)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])})(pn);function Yt(g,a){return g.interfaces_&&g.interfaces_.indexOf(a)>-1}var bn=(function(){return p((function g(a){r(this,g),this.str=a}),[{key:"append",value:function(g){this.str+=g}},{key:"setCharAt",value:function(g,a){this.str=this.str.substr(0,g)+a+this.str.substr(g+1)}},{key:"toString",value:function(){return this.str}}])})(),Re=(function(){function g(a){r(this,g),this.value=a}return p(g,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(a){return this.value<a?-1:this.value>a?1:0}}],[{key:"compare",value:function(a,o){return a<o?-1:a>o?1:0}},{key:"isNan",value:function(a){return Number.isNaN(a)}},{key:"valueOf",value:function(a){return new g(a)}}])})(),yn=(function(){return p((function g(){r(this,g)}),null,[{key:"isWhitespace",value:function(g){return g<=32&&g>=0||g===127}},{key:"toUpperCase",value:function(g){return g.toUpperCase()}}])})(),Vt=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"le",value:function(a){return this._hi<a._hi||this._hi===a._hi&&this._lo<=a._lo}},{key:"extractSignificantDigits",value:function(a,o){var d=this.abs(),x=g.magnitude(d._hi),C=g.TEN.pow(x);(d=d.divide(C)).gt(g.TEN)?(d=d.divide(g.TEN),x+=1):d.lt(g.ONE)&&(d=d.multiply(g.TEN),x-=1);for(var I=x+1,H=new bn,lt=g.MAX_PRINT_DIGITS-1,dt=0;dt<=lt;dt++){a&&dt===I&&H.append(".");var _t=Math.trunc(d._hi);if(_t<0)break;var St=!1,jt=0;_t>9?(St=!0,jt="9"):jt="0"+_t,H.append(jt),d=d.subtract(g.valueOf(_t)).multiply(g.TEN),St&&d.selfAdd(g.TEN);var qt=!0,Qt=g.magnitude(d._hi);if(Qt<0&&Math.abs(Qt)>=lt-dt&&(qt=!1),!qt)break}return o[0]=x,H.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof g){var a=arguments[0];return this.add(a.negate())}if(typeof arguments[0]=="number"){var o=arguments[0];return this.add(-o)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof g){var a=arguments[0];return this._hi===a._hi&&this._lo===a._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof g){var a=arguments[0];return this.isNaN()?this:this.selfAdd(-a._hi,-a._lo)}if(typeof arguments[0]=="number"){var o=arguments[0];return this.isNaN()?this:this.selfAdd(-o,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(a){return this.le(a)?this:a}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof g){var a=arguments[0];return this.selfDivide(a._hi,a._lo)}if(typeof arguments[0]=="number"){var o=arguments[0];return this.selfDivide(o,0)}}else if(arguments.length===2){var d,x,C,I,H=arguments[0],lt=arguments[1],dt=null,_t=null,St=null,jt=null;return C=this._hi/H,jt=(dt=(St=g.SPLIT*C)-(dt=St-C))*(_t=(jt=g.SPLIT*H)-(_t=jt-H))-(I=C*H)+dt*(x=H-_t)+(d=C-dt)*_t+d*x,jt=C+(St=(this._hi-I-jt+this._lo-C*lt)/H),this._hi=jt,this._lo=C-jt+St,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof g){var a,o,d,x,C=arguments[0],I=null,H=null,lt=null,dt=null;return a=(d=this._hi/C._hi)-(I=(lt=g.SPLIT*d)-(I=lt-d)),dt=I*(H=(dt=g.SPLIT*C._hi)-(H=dt-C._hi))-(x=d*C._hi)+I*(o=C._hi-H)+a*H+a*o,new g(dt=d+(lt=(this._hi-x-dt+this._lo-d*C._lo)/C._hi),d-dt+lt)}if(typeof arguments[0]=="number"){var _t=arguments[0];return J.isNaN(_t)?g.createNaN():g.copy(this).selfDivide(_t,0)}}},{key:"ge",value:function(a){return this._hi>a._hi||this._hi===a._hi&&this._lo>=a._lo}},{key:"pow",value:function(a){if(a===0)return g.valueOf(1);var o=new g(this),d=g.valueOf(1),x=Math.abs(a);if(x>1)for(;x>0;)x%2==1&&d.selfMultiply(o),(x/=2)>0&&(o=o.sqr());else d=o;return a<0?d.reciprocal():d}},{key:"ceil",value:function(){if(this.isNaN())return g.NaN;var a=Math.ceil(this._hi),o=0;return a===this._hi&&(o=Math.ceil(this._lo)),new g(a,o)}},{key:"compareTo",value:function(a){var o=a;return this._hi<o._hi?-1:this._hi>o._hi?1:this._lo<o._lo?-1:this._lo>o._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof g){var a=arguments[0];return this.init(a),this}if(typeof arguments[0]=="number"){var o=arguments[0];return this.init(o),this}}},{key:"max",value:function(a){return this.ge(a)?this:a}},{key:"sqrt",value:function(){if(this.isZero())return g.valueOf(0);if(this.isNegative())return g.NaN;var a=1/Math.sqrt(this._hi),o=this._hi*a,d=g.valueOf(o),x=this.subtract(d.sqr())._hi*(.5*a);return d.add(x)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof g){var a=arguments[0];return this.selfAdd(a._hi,a._lo)}if(typeof arguments[0]=="number"){var o,d,x,C,I,H=arguments[0],lt=null;return lt=(x=this._hi+H)-(C=x-this._hi),d=(I=(lt=H-C+(this._hi-lt))+this._lo)+(x-(o=x+I)),this._hi=o+d,this._lo=d+(o-this._hi),this}}else if(arguments.length===2){var dt,_t,St,jt,qt=arguments[0],Qt=arguments[1],ee=null,Te=null,pe=null;St=this._hi+qt,_t=this._lo+Qt,Te=St-(pe=St-this._hi),ee=_t-(jt=_t-this._lo);var qe=(dt=St+(pe=(Te=qt-pe+(this._hi-Te))+_t))+(pe=(ee=Qt-jt+(this._lo-ee))+(pe+(St-dt))),sn=pe+(dt-qe);return this._hi=qe,this._lo=sn,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof g){var a=arguments[0];return this.selfMultiply(a._hi,a._lo)}if(typeof arguments[0]=="number"){var o=arguments[0];return this.selfMultiply(o,0)}}else if(arguments.length===2){var d,x,C=arguments[0],I=arguments[1],H=null,lt=null,dt=null,_t=null;H=(dt=g.SPLIT*this._hi)-this._hi,_t=g.SPLIT*C,H=dt-H,d=this._hi-H,lt=_t-C;var St=(dt=this._hi*C)+(_t=H*(lt=_t-lt)-dt+H*(x=C-lt)+d*lt+d*x+(this._hi*I+this._lo*C)),jt=_t+(H=dt-St);return this._hi=St,this._lo=jt,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return g.NaN;var a=Math.floor(this._hi),o=0;return a===this._hi&&(o=Math.floor(this._lo)),new g(a,o)}},{key:"negate",value:function(){return this.isNaN()?this:new g(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(a){if(a instanceof CloneNotSupportedException)return null;throw a}}},{key:"multiply",value:function(){if(arguments[0]instanceof g){var a=arguments[0];return a.isNaN()?g.createNaN():g.copy(this).selfMultiply(a)}if(typeof arguments[0]=="number"){var o=arguments[0];return J.isNaN(o)?g.createNaN():g.copy(this).selfMultiply(o,0)}}},{key:"isNaN",value:function(){return J.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var a=g.magnitude(this._hi);return a>=-3&&a<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var a=this.getSpecialNumberString();if(a!==null)return a;var o=new Array(1).fill(null),d=this.extractSignificantDigits(!0,o),x=o[0]+1,C=d;if(d.charAt(0)===".")C="0"+d;else if(x<0)C="0."+g.stringOfChar("0",-x)+d;else if(d.indexOf(".")===-1){var I=x-d.length;C=d+g.stringOfChar("0",I)+".0"}return this.isNegative()?"-"+C:C}},{key:"reciprocal",value:function(){var a,o,d,x,C=null,I=null,H=null,lt=null;a=(d=1/this._hi)-(C=(H=g.SPLIT*d)-(C=H-d)),I=(lt=g.SPLIT*this._hi)-this._hi;var dt=d+(H=(1-(x=d*this._hi)-(lt=C*(I=lt-I)-x+C*(o=this._hi-I)+a*I+a*o)-d*this._lo)/this._hi);return new g(dt,d-dt+H)}},{key:"toSciNotation",value:function(){if(this.isZero())return g.SCI_NOT_ZERO;var a=this.getSpecialNumberString();if(a!==null)return a;var o=new Array(1).fill(null),d=this.extractSignificantDigits(!1,o),x=g.SCI_NOT_EXPONENT_CHAR+o[0];if(d.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+d);var C="";d.length>1&&(C=d.substring(1));var I=d.charAt(0)+"."+C;return this.isNegative()?"-"+I+x:I+x}},{key:"abs",value:function(){return this.isNaN()?g.NaN:this.isNegative()?this.negate():new g(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(a){return this._hi<a._hi||this._hi===a._hi&&this._lo<a._lo}},{key:"add",value:function(){if(arguments[0]instanceof g){var a=arguments[0];return g.copy(this).selfAdd(a)}if(typeof arguments[0]=="number"){var o=arguments[0];return g.copy(this).selfAdd(o)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var a=arguments[0];this._hi=a,this._lo=0}else if(arguments[0]instanceof g){var o=arguments[0];this._hi=o._hi,this._lo=o._lo}}else if(arguments.length===2){var d=arguments[0],x=arguments[1];this._hi=d,this._lo=x}}},{key:"gt",value:function(a){return this._hi>a._hi||this._hi===a._hi&&this._lo>a._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?g.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[A,W,k]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var a=arguments[0];this.init(a)}else if(arguments[0]instanceof g){var o=arguments[0];this.init(o)}else if(typeof arguments[0]=="string"){var d=arguments[0];g.constructor_.call(this,g.parse(d))}}else if(arguments.length===2){var x=arguments[0],C=arguments[1];this.init(x,C)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var a=arguments[0],o=arguments[1],d=arguments[2],x=arguments[3];return g.determinant(g.valueOf(a),g.valueOf(o),g.valueOf(d),g.valueOf(x))}if(arguments[3]instanceof g&&arguments[2]instanceof g&&arguments[0]instanceof g&&arguments[1]instanceof g){var C=arguments[1],I=arguments[2],H=arguments[3];return arguments[0].multiply(H).selfSubtract(C.multiply(I))}}},{key:"sqr",value:function(a){return g.valueOf(a).selfMultiply(a)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var a=arguments[0];return g.parse(a)}if(typeof arguments[0]=="number")return new g(arguments[0])}},{key:"sqrt",value:function(a){return g.valueOf(a).sqrt()}},{key:"parse",value:function(a){for(var o=0,d=a.length;yn.isWhitespace(a.charAt(o));)o++;var x=!1;if(o<d){var C=a.charAt(o);C!=="-"&&C!=="+"||(o++,C==="-"&&(x=!0))}for(var I=new g,H=0,lt=0,dt=0,_t=!1;!(o>=d);){var St=a.charAt(o);if(o++,yn.isDigit(St)){var jt=St-"0";I.selfMultiply(g.TEN),I.selfAdd(jt),H++}else{if(St!=="."){if(St==="e"||St==="E"){var qt=a.substring(o);try{dt=Re.parseInt(qt)}catch(qe){throw qe instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+qt+" in string "+a):qe}break}throw new NumberFormatException("Unexpected character '"+St+"' at position "+o+" in string "+a)}lt=H,_t=!0}}var Qt=I;_t||(lt=H);var ee=H-lt-dt;if(ee===0)Qt=I;else if(ee>0){var Te=g.TEN.pow(ee);Qt=I.divide(Te)}else if(ee<0){var pe=g.TEN.pow(-ee);Qt=I.multiply(pe)}return x?Qt.negate():Qt}},{key:"createNaN",value:function(){return new g(J.NaN,J.NaN)}},{key:"copy",value:function(a){return new g(a)}},{key:"magnitude",value:function(a){var o=Math.abs(a),d=Math.log(o)/Math.log(10),x=Math.trunc(Math.floor(d));return 10*Math.pow(10,x)<=o&&(x+=1),x}},{key:"stringOfChar",value:function(a,o){for(var d=new bn,x=0;x<o;x++)d.append(a);return d.toString()}}])})();Vt.PI=new Vt(3.141592653589793,12246467991473532e-32),Vt.TWO_PI=new Vt(6.283185307179586,24492935982947064e-32),Vt.PI_2=new Vt(1.5707963267948966,6123233995736766e-32),Vt.E=new Vt(2.718281828459045,14456468917292502e-32),Vt.NaN=new Vt(J.NaN,J.NaN),Vt.EPS=123259516440783e-46,Vt.SPLIT=134217729,Vt.MAX_PRINT_DIGITS=32,Vt.TEN=Vt.valueOf(10),Vt.ONE=Vt.valueOf(1),Vt.SCI_NOT_EXPONENT_CHAR="E",Vt.SCI_NOT_ZERO="0.0E0";var Xr=(function(){function g(){r(this,g)}return p(g,null,[{key:"orientationIndex",value:function(a,o,d){var x=g.orientationIndexFilter(a,o,d);if(x<=1)return x;var C=Vt.valueOf(o.x).selfAdd(-a.x),I=Vt.valueOf(o.y).selfAdd(-a.y),H=Vt.valueOf(d.x).selfAdd(-o.x),lt=Vt.valueOf(d.y).selfAdd(-o.y);return C.selfMultiply(lt).selfSubtract(I.selfMultiply(H)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof Vt&&arguments[2]instanceof Vt&&arguments[0]instanceof Vt&&arguments[1]instanceof Vt){var a=arguments[1],o=arguments[2],d=arguments[3];return arguments[0].multiply(d).selfSubtract(a.multiply(o)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var x=arguments[0],C=arguments[1],I=arguments[2],H=arguments[3],lt=Vt.valueOf(x),dt=Vt.valueOf(C),_t=Vt.valueOf(I),St=Vt.valueOf(H);return lt.multiply(St).selfSubtract(dt.multiply(_t)).signum()}}},{key:"intersection",value:function(a,o,d,x){var C=new Vt(a.y).selfSubtract(o.y),I=new Vt(o.x).selfSubtract(a.x),H=new Vt(a.x).selfMultiply(o.y).selfSubtract(new Vt(o.x).selfMultiply(a.y)),lt=new Vt(d.y).selfSubtract(x.y),dt=new Vt(x.x).selfSubtract(d.x),_t=new Vt(d.x).selfMultiply(x.y).selfSubtract(new Vt(x.x).selfMultiply(d.y)),St=I.multiply(_t).selfSubtract(dt.multiply(H)),jt=lt.multiply(H).selfSubtract(C.multiply(_t)),qt=C.multiply(dt).selfSubtract(lt.multiply(I)),Qt=St.selfDivide(qt).doubleValue(),ee=jt.selfDivide(qt).doubleValue();return J.isNaN(Qt)||J.isInfinite(Qt)||J.isNaN(ee)||J.isInfinite(ee)?null:new ht(Qt,ee)}},{key:"orientationIndexFilter",value:function(a,o,d){var x=null,C=(a.x-d.x)*(o.y-d.y),I=(a.y-d.y)*(o.x-d.x),H=C-I;if(C>0){if(I<=0)return g.signum(H);x=C+I}else{if(!(C<0)||I>=0)return g.signum(H);x=-C-I}var lt=g.DP_SAFE_EPSILON*x;return H>=lt||-H>=lt?g.signum(H):2}},{key:"signum",value:function(a){return a>0?1:a<0?-1:0}}])})();Xr.DP_SAFE_EPSILON=1e-15;var ve=(function(){return p((function g(){r(this,g)}),[{key:"getM",value:function(g){if(this.hasM()){var a=this.getDimension()-this.getMeasures();return this.getOrdinate(g,a)}return J.NaN}},{key:"setOrdinate",value:function(g,a,o){}},{key:"getZ",value:function(g){return this.hasZ()?this.getOrdinate(g,2):J.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(g,a){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(g){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(g){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(g){}},{key:"copy",value:function(){}},{key:"getY",value:function(g){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[k]}}])})();ve.X=0,ve.Y=1,ve.Z=2,ve.M=3;var ie=(function(){function g(){r(this,g)}return p(g,null,[{key:"index",value:function(a,o,d){return Xr.orientationIndex(a,o,d)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var a=arguments[0],o=a.length-1;if(o<3)throw new et("Ring has fewer than 4 points, so orientation cannot be determined");for(var d=a[0],x=0,C=1;C<=o;C++){var I=a[C];I.y>d.y&&(d=I,x=C)}var H=x;do(H-=1)<0&&(H=o);while(a[H].equals2D(d)&&H!==x);var lt=x;do lt=(lt+1)%o;while(a[lt].equals2D(d)&&lt!==x);var dt=a[H],_t=a[lt];if(dt.equals2D(d)||_t.equals2D(d)||dt.equals2D(_t))return!1;var St=g.index(dt,d,_t);return St===0?dt.x>_t.x:St>0}if(Yt(arguments[0],ve)){var jt=arguments[0],qt=jt.size()-1;if(qt<3)throw new et("Ring has fewer than 4 points, so orientation cannot be determined");for(var Qt=jt.getCoordinate(0),ee=0,Te=1;Te<=qt;Te++){var pe=jt.getCoordinate(Te);pe.y>Qt.y&&(Qt=pe,ee=Te)}var qe=null,sn=ee;do(sn-=1)<0&&(sn=qt),qe=jt.getCoordinate(sn);while(qe.equals2D(Qt)&&sn!==ee);var We=null,Pi=ee;do Pi=(Pi+1)%qt,We=jt.getCoordinate(Pi);while(We.equals2D(Qt)&&Pi!==ee);if(qe.equals2D(Qt)||We.equals2D(Qt)||qe.equals2D(We))return!1;var Yn=g.index(qe,Qt,We);return Yn===0?qe.x>We.x:Yn>0}}}])})();ie.CLOCKWISE=-1,ie.RIGHT=ie.CLOCKWISE,ie.COUNTERCLOCKWISE=1,ie.LEFT=ie.COUNTERCLOCKWISE,ie.COLLINEAR=0,ie.STRAIGHT=ie.COLLINEAR;var Ei=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(g,a){var o=this.getRightmostSideOfSegment(g,a);return o<0&&(o=this.getRightmostSideOfSegment(g,a-1)),o<0&&(this._minCoord=null,this.checkForRightmostCoordinate(g)),o}},{key:"findRightmostEdgeAtVertex",value:function(){var g=this._minDe.getEdge().getCoordinates();gt.isTrue(this._minIndex>0&&this._minIndex<g.length,"rightmost point expected to be interior vertex of edge");var a=g[this._minIndex-1],o=g[this._minIndex+1],d=ie.index(this._minCoord,o,a),x=!1;(a.y<this._minCoord.y&&o.y<this._minCoord.y&&d===ie.COUNTERCLOCKWISE||a.y>this._minCoord.y&&o.y>this._minCoord.y&&d===ie.CLOCKWISE)&&(x=!0),x&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(g,a){var o=g.getEdge().getCoordinates();if(a<0||a+1>=o.length||o[a].y===o[a+1].y)return-1;var d=At.LEFT;return o[a].y<o[a+1].y&&(d=At.RIGHT),d}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(g){for(var a=g.getEdge().getCoordinates(),o=0;o<a.length-1;o++)(this._minCoord===null||a[o].x>this._minCoord.x)&&(this._minDe=g,this._minIndex=o,this._minCoord=a[o])}},{key:"findRightmostEdgeAtNode",value:function(){var g=this._minDe.getNode().getEdges();this._minDe=g.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(g){for(var a=g.iterator();a.hasNext();){var o=a.next();o.isForward()&&this.checkForRightmostCoordinate(o)}gt.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===At.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])})(),_n=(function(g){function a(o,d){var x;return r(this,a),(x=l(this,a,[d?o+" [ "+d+" ]":o])).pt=d?new ht(d):void 0,x.name=Object.keys({TopologyException:a})[0],x}return S(a,g),p(a,[{key:"getCoordinate",value:function(){return this.pt}}])})(K),On=(function(){return p((function g(){r(this,g),this.array=[]}),[{key:"addLast",value:function(g){this.array.push(g)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])})(),$t=(function(g){function a(o){var d;return r(this,a),(d=l(this,a)).array=[],o instanceof Xt&&d.addAll(o),d}return S(a,g),p(a,[{key:"interfaces_",get:function(){return[pn,Xt]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(o){return arguments.length===1?this.array.push(o):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(o){var d,x=y(o);try{for(x.s();!(d=x.n()).done;){var C=d.value;this.array.push(C)}}catch(I){x.e(I)}finally{x.f()}}},{key:"set",value:function(o,d){var x=this.array[o];return this.array[o]=d,x}},{key:"iterator",value:function(){return new di(this)}},{key:"get",value:function(o){if(o<0||o>=this.size())throw new ti;return this.array[o]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(o){o?this.array.sort((function(d,x){return o.compare(d,x)})):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(o){for(var d=0,x=this.array.length;d<x;d++)if(this.array[d]===o)return!!this.array.splice(d,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])})(pn),di=(function(){return p((function g(a){r(this,g),this.arrayList=a,this.position=0}),[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new Zt;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(g){return this.arrayList.set(this.position-1,g)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])})(),Ps=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"clearVisitedEdges",value:function(){for(var g=this._dirEdgeList.iterator();g.hasNext();)g.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(g){for(var a=null,o=g.getEdges().iterator();o.hasNext();){var d=o.next();if(d.isVisited()||d.getSym().isVisited()){a=d;break}}if(a===null)throw new _n("unable to find edge to compute depths at "+g.getCoordinate());g.getEdges().computeDepths(a);for(var x=g.getEdges().iterator();x.hasNext();){var C=x.next();C.setVisited(!0),this.copySymDepths(C)}}},{key:"computeDepth",value:function(g){this.clearVisitedEdges();var a=this._finder.getEdge();a.getNode(),a.getLabel(),a.setEdgeDepths(At.RIGHT,g),this.copySymDepths(a),this.computeDepths(a)}},{key:"create",value:function(g){this.addReachable(g),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var g=this._dirEdgeList.iterator();g.hasNext();){var a=g.next();a.getDepth(At.RIGHT)>=1&&a.getDepth(At.LEFT)<=0&&!a.isInteriorAreaEdge()&&a.setInResult(!0)}}},{key:"computeDepths",value:function(g){var a=new Le,o=new On,d=g.getNode();for(o.addLast(d),a.add(d),g.setVisited(!0);!o.isEmpty();){var x=o.removeFirst();a.add(x),this.computeNodeDepth(x);for(var C=x.getEdges().iterator();C.hasNext();){var I=C.next().getSym();if(!I.isVisited()){var H=I.getNode();a.contains(H)||(o.addLast(H),a.add(H))}}}}},{key:"compareTo",value:function(g){var a=g;return this._rightMostCoord.x<a._rightMostCoord.x?-1:this._rightMostCoord.x>a._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var g=new It,a=this._dirEdgeList.iterator();a.hasNext();)for(var o=a.next().getEdge().getCoordinates(),d=0;d<o.length-1;d++)g.expandToInclude(o[d]);this._env=g}return this._env}},{key:"addReachable",value:function(g){var a=new Fi;for(a.add(g);!a.empty();){var o=a.pop();this.add(o,a)}}},{key:"copySymDepths",value:function(g){var a=g.getSym();a.setDepth(At.LEFT,g.getDepth(At.RIGHT)),a.setDepth(At.RIGHT,g.getDepth(At.LEFT))}},{key:"add",value:function(g,a){g.setVisited(!0),this._nodes.add(g);for(var o=g.getEdges().iterator();o.hasNext();){var d=o.next();this._dirEdgeList.add(d);var x=d.getSym().getNode();x.isVisited()||a.push(x)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new $t,this._nodes=new $t,this._rightMostCoord=null,this._env=null,this._finder=new Ei}}])})(),ho=(function(){return p((function g(){r(this,g)}),null,[{key:"intersection",value:function(g,a,o,d){var x=g.x<a.x?g.x:a.x,C=g.y<a.y?g.y:a.y,I=g.x>a.x?g.x:a.x,H=g.y>a.y?g.y:a.y,lt=o.x<d.x?o.x:d.x,dt=o.y<d.y?o.y:d.y,_t=o.x>d.x?o.x:d.x,St=o.y>d.y?o.y:d.y,jt=((x>lt?x:lt)+(I<_t?I:_t))/2,qt=((C>dt?C:dt)+(H<St?H:St))/2,Qt=g.x-jt,ee=g.y-qt,Te=a.x-jt,pe=a.y-qt,qe=o.x-jt,sn=o.y-qt,We=d.x-jt,Pi=d.y-qt,Yn=ee-pe,ri=Te-Qt,Ks=Qt*pe-Te*ee,Ss=sn-Pi,Er=We-qe,Pa=qe*Pi-We*sn,zi=Yn*Er-Ss*ri,Br=(ri*Pa-Er*Ks)/zi,rs=(Ss*Ks-Yn*Pa)/zi;return J.isNaN(Br)||J.isInfinite(Br)||J.isNaN(rs)||J.isInfinite(rs)?null:new ht(Br+jt,rs+qt)}}])})(),wi=(function(){return p((function g(){r(this,g)}),null,[{key:"arraycopy",value:function(g,a,o,d,x){for(var C=0,I=a;I<a+x;I++)o[d+C]=g[I],C++}},{key:"getProperty",value:function(g){return{"line.separator":`
`}[g]}}])})(),hr=(function(){function g(){r(this,g)}return p(g,null,[{key:"log10",value:function(a){var o=Math.log(a);return J.isInfinite(o)||J.isNaN(o)?o:o/g.LOG_10}},{key:"min",value:function(a,o,d,x){var C=a;return o<C&&(C=o),d<C&&(C=d),x<C&&(C=x),C}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var a=arguments[0],o=arguments[1],d=arguments[2];return a<o?o:a>d?d:a}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var x=arguments[0],C=arguments[1],I=arguments[2];return x<C?C:x>I?I:x}}},{key:"wrap",value:function(a,o){return a<0?o- -a%o:a%o}},{key:"max",value:function(){if(arguments.length===3){var a=arguments[1],o=arguments[2],d=arguments[0];return a>d&&(d=a),o>d&&(d=o),d}if(arguments.length===4){var x=arguments[1],C=arguments[2],I=arguments[3],H=arguments[0];return x>H&&(H=x),C>H&&(H=C),I>H&&(H=I),H}}},{key:"average",value:function(a,o){return(a+o)/2}}])})();hr.LOG_10=Math.log(10);var li=(function(){function g(){r(this,g)}return p(g,null,[{key:"segmentToSegment",value:function(a,o,d,x){if(a.equals(o))return g.pointToSegment(a,d,x);if(d.equals(x))return g.pointToSegment(x,a,o);var C=!1;if(It.intersects(a,o,d,x)){var I=(o.x-a.x)*(x.y-d.y)-(o.y-a.y)*(x.x-d.x);if(I===0)C=!0;else{var H=(a.y-d.y)*(x.x-d.x)-(a.x-d.x)*(x.y-d.y),lt=((a.y-d.y)*(o.x-a.x)-(a.x-d.x)*(o.y-a.y))/I,dt=H/I;(dt<0||dt>1||lt<0||lt>1)&&(C=!0)}}else C=!0;return C?hr.min(g.pointToSegment(a,d,x),g.pointToSegment(o,d,x),g.pointToSegment(d,a,o),g.pointToSegment(x,a,o)):0}},{key:"pointToSegment",value:function(a,o,d){if(o.x===d.x&&o.y===d.y)return a.distance(o);var x=(d.x-o.x)*(d.x-o.x)+(d.y-o.y)*(d.y-o.y),C=((a.x-o.x)*(d.x-o.x)+(a.y-o.y)*(d.y-o.y))/x;if(C<=0)return a.distance(o);if(C>=1)return a.distance(d);var I=((o.y-a.y)*(d.x-o.x)-(o.x-a.x)*(d.y-o.y))/x;return Math.abs(I)*Math.sqrt(x)}},{key:"pointToLinePerpendicular",value:function(a,o,d){var x=(d.x-o.x)*(d.x-o.x)+(d.y-o.y)*(d.y-o.y),C=((o.y-a.y)*(d.x-o.x)-(o.x-a.x)*(d.y-o.y))/x;return Math.abs(C)*Math.sqrt(x)}},{key:"pointToSegmentString",value:function(a,o){if(o.length===0)throw new et("Line array must contain at least one vertex");for(var d=a.distance(o[0]),x=0;x<o.length-1;x++){var C=g.pointToSegment(a,o[x],o[x+1]);C<d&&(d=C)}return d}}])})(),cs=(function(){return p((function g(){r(this,g)}),[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||Yt(arguments[0],ve);else if(arguments.length!==2){if(arguments.length===3){var g=arguments[0],a=arguments[1];return this.create(g,a)}}}}])})(),qi=(function(){return p((function g(){r(this,g)}),[{key:"filter",value:function(g){}}])})(),wa=(function(){return p((function g(){r(this,g)}),null,[{key:"ofLine",value:function(g){var a=g.size();if(a<=1)return 0;var o=0,d=new ht;g.getCoordinate(0,d);for(var x=d.x,C=d.y,I=1;I<a;I++){g.getCoordinate(I,d);var H=d.x,lt=d.y,dt=H-x,_t=lt-C;o+=Math.sqrt(dt*dt+_t*_t),x=H,C=lt}return o}}])})(),hs=p((function g(){r(this,g)})),Vr=(function(){function g(){r(this,g)}return p(g,null,[{key:"copyCoord",value:function(a,o,d,x){for(var C=Math.min(a.getDimension(),d.getDimension()),I=0;I<C;I++)d.setOrdinate(x,I,a.getOrdinate(o,I))}},{key:"isRing",value:function(a){var o=a.size();return o===0||!(o<=3)&&a.getOrdinate(0,ve.X)===a.getOrdinate(o-1,ve.X)&&a.getOrdinate(0,ve.Y)===a.getOrdinate(o-1,ve.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(Yt(arguments[0],ve)&&Number.isInteger(arguments[1])){var a=arguments[0],o=arguments[1];g.scroll(a,o,g.isRing(a))}else if(Yt(arguments[0],ve)&&arguments[1]instanceof ht){var d=arguments[0],x=arguments[1],C=g.indexOf(x,d);if(C<=0)return null;g.scroll(d,C)}}else if(arguments.length===3){var I=arguments[0],H=arguments[1],lt=arguments[2];if(H<=0)return null;for(var dt=I.copy(),_t=lt?I.size()-1:I.size(),St=0;St<_t;St++)for(var jt=0;jt<I.getDimension();jt++)I.setOrdinate(St,jt,dt.getOrdinate((H+St)%_t,jt));if(lt)for(var qt=0;qt<I.getDimension();qt++)I.setOrdinate(_t,qt,I.getOrdinate(0,qt))}}},{key:"isEqual",value:function(a,o){var d=a.size();if(d!==o.size())return!1;for(var x=Math.min(a.getDimension(),o.getDimension()),C=0;C<d;C++)for(var I=0;I<x;I++){var H=a.getOrdinate(C,I),lt=o.getOrdinate(C,I);if(a.getOrdinate(C,I)!==o.getOrdinate(C,I)&&(!J.isNaN(H)||!J.isNaN(lt)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var a=arguments[0];return g.minCoordinateIndex(a,0,a.size()-1)}if(arguments.length===3){for(var o=arguments[0],d=arguments[2],x=-1,C=null,I=arguments[1];I<=d;I++){var H=o.getCoordinate(I);(C===null||C.compareTo(H)>0)&&(C=H,x=I)}return x}}},{key:"extend",value:function(a,o,d){var x=a.create(d,o.getDimension()),C=o.size();if(g.copy(o,0,x,0,C),C>0)for(var I=C;I<d;I++)g.copy(o,C-1,x,I,1);return x}},{key:"reverse",value:function(a){for(var o=a.size()-1,d=Math.trunc(o/2),x=0;x<=d;x++)g.swap(a,x,o-x)}},{key:"swap",value:function(a,o,d){if(o===d)return null;for(var x=0;x<a.getDimension();x++){var C=a.getOrdinate(o,x);a.setOrdinate(o,x,a.getOrdinate(d,x)),a.setOrdinate(d,x,C)}}},{key:"copy",value:function(a,o,d,x,C){for(var I=0;I<C;I++)g.copyCoord(a,o+I,d,x+I)}},{key:"ensureValidRing",value:function(a,o){var d=o.size();return d===0?o:d<=3?g.createClosedRing(a,o,4):o.getOrdinate(0,ve.X)===o.getOrdinate(d-1,ve.X)&&o.getOrdinate(0,ve.Y)===o.getOrdinate(d-1,ve.Y)?o:g.createClosedRing(a,o,d+1)}},{key:"indexOf",value:function(a,o){for(var d=0;d<o.size();d++)if(a.x===o.getOrdinate(d,ve.X)&&a.y===o.getOrdinate(d,ve.Y))return d;return-1}},{key:"createClosedRing",value:function(a,o,d){var x=a.create(d,o.getDimension()),C=o.size();g.copy(o,0,x,0,C);for(var I=C;I<d;I++)g.copy(o,0,x,I,1);return x}},{key:"minCoordinate",value:function(a){for(var o=null,d=0;d<a.size();d++){var x=a.getCoordinate(d);(o===null||o.compareTo(x)>0)&&(o=x)}return o}}])})(),Ft=(function(){function g(){r(this,g)}return p(g,null,[{key:"toDimensionSymbol",value:function(a){switch(a){case g.FALSE:return g.SYM_FALSE;case g.TRUE:return g.SYM_TRUE;case g.DONTCARE:return g.SYM_DONTCARE;case g.P:return g.SYM_P;case g.L:return g.SYM_L;case g.A:return g.SYM_A}throw new et("Unknown dimension value: "+a)}},{key:"toDimensionValue",value:function(a){switch(yn.toUpperCase(a)){case g.SYM_FALSE:return g.FALSE;case g.SYM_TRUE:return g.TRUE;case g.SYM_DONTCARE:return g.DONTCARE;case g.SYM_P:return g.P;case g.SYM_L:return g.L;case g.SYM_A:return g.A}throw new et("Unknown dimension symbol: "+a)}}])})();Ft.P=0,Ft.L=1,Ft.A=2,Ft.FALSE=-1,Ft.TRUE=-2,Ft.DONTCARE=-3,Ft.SYM_FALSE="F",Ft.SYM_TRUE="T",Ft.SYM_DONTCARE="*",Ft.SYM_P="0",Ft.SYM_L="1",Ft.SYM_A="2";var fs=(function(){return p((function g(){r(this,g)}),[{key:"filter",value:function(g){}}])})(),Gi=(function(){return p((function g(){r(this,g)}),[{key:"filter",value:function(g,a){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])})(),zs=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new It:this._points.expandEnvelope(new It)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new a(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Mt){var o=arguments[0],d=arguments[1];if(!this.isEquivalentClass(o))return!1;var x=o;if(this._points.size()!==x._points.size())return!1;for(var C=0;C<this._points.size();C++)if(!this.equal(this._points.getCoordinate(C),x._points.getCoordinate(C),d))return!1;return!0}return B(a,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var o=0;o<Math.trunc(this._points.size()/2);o++){var d=this._points.size()-1-o;if(!this._points.getCoordinate(o).equals(this._points.getCoordinate(d))){if(this._points.getCoordinate(o).compareTo(this._points.getCoordinate(d))>0){var x=this._points.copy();Vr.reverse(x),this._points=x}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Ft.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var o=this._points.copy();return Vr.reverse(o),this.getFactory().createLineString(o)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return Mt.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return wa.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var o=arguments[0],d=0,x=0;d<this._points.size()&&x<o._points.size();){var C=this._points.getCoordinate(d).compareTo(o._points.getCoordinate(x));if(C!==0)return C;d++,x++}return d<this._points.size()?1:x<o._points.size()?-1:0}if(arguments.length===2){var I=arguments[0];return arguments[1].compare(this._points,I._points)}}},{key:"apply",value:function(){if(Yt(arguments[0],qi))for(var o=arguments[0],d=0;d<this._points.size();d++)o.filter(this._points.getCoordinate(d));else if(Yt(arguments[0],Gi)){var x=arguments[0];if(this._points.size()===0)return null;for(var C=0;C<this._points.size()&&(x.filter(this._points,C),!x.isDone());C++);x.isGeometryChanged()&&this.geometryChanged()}else Yt(arguments[0],fs)?arguments[0].filter(this):Yt(arguments[0],tt)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new Bt}},{key:"isEquivalentClass",value:function(o){return o instanceof a}},{key:"getCoordinateN",value:function(o){return this._points.getCoordinate(o)}},{key:"getGeometryType",value:function(){return Mt.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(o){if(o===null&&(o=this.getFactory().getCoordinateSequenceFactory().create([])),o.size()===1)throw new et("Invalid number of points in LineString (found "+o.size()+" - must be 0 or >= 2)");this._points=o}},{key:"isCoordinate",value:function(o){for(var d=0;d<this._points.size();d++)if(this._points.getCoordinate(d).equals(o))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(o){return this.getFactory().createPoint(this._points.getCoordinate(o))}},{key:"interfaces_",get:function(){return[hs]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var o=arguments[0],d=arguments[1];Mt.constructor_.call(this,d),this.init(o)}}}}])})(Mt),fo=p((function g(){r(this,g)})),Sa=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new It;var o=new It;return o.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),o}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new a(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Mt){var o=arguments[0],d=arguments[1];return!!this.isEquivalentClass(o)&&(!(!this.isEmpty()||!o.isEmpty())||this.isEmpty()===o.isEmpty()&&this.equal(o.getCoordinate(),this.getCoordinate(),d))}return B(a,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Ft.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return Mt.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var o=arguments[0];return this.getCoordinate().compareTo(o.getCoordinate())}if(arguments.length===2){var d=arguments[0];return arguments[1].compare(this._coordinates,d._coordinates)}}},{key:"apply",value:function(){if(Yt(arguments[0],qi)){var o=arguments[0];if(this.isEmpty())return null;o.filter(this.getCoordinate())}else if(Yt(arguments[0],Gi)){var d=arguments[0];if(this.isEmpty())return null;d.filter(this._coordinates,0),d.isGeometryChanged()&&this.geometryChanged()}else Yt(arguments[0],fs)?arguments[0].filter(this):Yt(arguments[0],tt)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Mt.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(o){o===null&&(o=this.getFactory().getCoordinateSequenceFactory().create([])),gt.isTrue(o.size()<=1),this._coordinates=o}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[fo]}}],[{key:"constructor_",value:function(){this._coordinates=null;var o=arguments[0],d=arguments[1];Mt.constructor_.call(this,d),this.init(o)}}])})(Mt),go=(function(){function g(){r(this,g)}return p(g,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var a=arguments[0];return Math.abs(g.ofRingSigned(a))}if(Yt(arguments[0],ve)){var o=arguments[0];return Math.abs(g.ofRingSigned(o))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var a=arguments[0];if(a.length<3)return 0;for(var o=0,d=a[0].x,x=1;x<a.length-1;x++){var C=a[x].x-d,I=a[x+1].y;o+=C*(a[x-1].y-I)}return o/2}if(Yt(arguments[0],ve)){var H=arguments[0],lt=H.size();if(lt<3)return 0;var dt=new ht,_t=new ht,St=new ht;H.getCoordinate(0,_t),H.getCoordinate(1,St);var jt=_t.x;St.x-=jt;for(var qt=0,Qt=1;Qt<lt-1;Qt++)dt.y=_t.y,_t.x=St.x,_t.y=St.y,H.getCoordinate(Qt+1,St),St.x-=jt,qt+=_t.x*(dt.y-St.y);return qt/2}}}])})(),An=(function(){return p((function g(){r(this,g)}),null,[{key:"sort",value:function(){var g=arguments,a=arguments[0];if(arguments.length===1)a.sort((function(jt,qt){return jt.compareTo(qt)}));else if(arguments.length===2)a.sort((function(jt,qt){return g[1].compare(jt,qt)}));else if(arguments.length===3){var o=a.slice(arguments[1],arguments[2]);o.sort();var d=a.slice(0,arguments[1]).concat(o,a.slice(arguments[2],a.length));a.splice(0,a.length);var x,C=y(d);try{for(C.s();!(x=C.n()).done;){var I=x.value;a.push(I)}}catch(jt){C.e(jt)}finally{C.f()}}else if(arguments.length===4){var H=a.slice(arguments[1],arguments[2]);H.sort((function(jt,qt){return g[3].compare(jt,qt)}));var lt=a.slice(0,arguments[1]).concat(H,a.slice(arguments[2],a.length));a.splice(0,a.length);var dt,_t=y(lt);try{for(_t.s();!(dt=_t.n()).done;){var St=dt.value;a.push(St)}}catch(jt){_t.e(jt)}finally{_t.f()}}}},{key:"asList",value:function(g){var a,o=new $t,d=y(g);try{for(d.s();!(a=d.n()).done;){var x=a.value;o.add(x)}}catch(C){d.e(C)}finally{d.f()}return o}},{key:"copyOf",value:function(g,a){return g.slice(0,a)}}])})(),Kt=p((function g(){r(this,g)})),ds=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var o=new Array(this.getNumPoints()).fill(null),d=-1,x=this._shell.getCoordinates(),C=0;C<x.length;C++)o[++d]=x[C];for(var I=0;I<this._holes.length;I++)for(var H=this._holes[I].getCoordinates(),lt=0;lt<H.length;lt++)o[++d]=H[lt];return o}},{key:"getArea",value:function(){var o=0;o+=go.ofRing(this._shell.getCoordinateSequence());for(var d=0;d<this._holes.length;d++)o-=go.ofRing(this._holes[d].getCoordinateSequence());return o}},{key:"copyInternal",value:function(){for(var o=this._shell.copy(),d=new Array(this._holes.length).fill(null),x=0;x<this._holes.length;x++)d[x]=this._holes[x].copy();return new a(o,d,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var o=this._shell.getCoordinateSequence(),d=this.getEnvelopeInternal(),x=0;x<5;x++){var C=o.getX(x);if(C!==d.getMinX()&&C!==d.getMaxX())return!1;var I=o.getY(x);if(I!==d.getMinY()&&I!==d.getMaxY())return!1}for(var H=o.getX(0),lt=o.getY(0),dt=1;dt<=4;dt++){var _t=o.getX(dt),St=o.getY(dt);if(_t!==H==(St!==lt))return!1;H=_t,lt=St}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Mt){var o=arguments[0],d=arguments[1];if(!this.isEquivalentClass(o))return!1;var x=o,C=this._shell,I=x._shell;if(!C.equalsExact(I,d)||this._holes.length!==x._holes.length)return!1;for(var H=0;H<this._holes.length;H++)if(!this._holes[H].equalsExact(x._holes[H],d))return!1;return!0}return B(a,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var o=0;o<this._holes.length;o++)this._holes[o]=this.normalized(this._holes[o],!1);An.sort(this._holes)}else if(arguments.length===2){var d=arguments[0],x=arguments[1];if(d.isEmpty())return null;var C=d.getCoordinateSequence(),I=Vr.minCoordinateIndex(C,0,C.size()-2);Vr.scroll(C,I,!0),ie.isCCW(C)===x&&Vr.reverse(C)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var o=this.getExteriorRing().reverse(),d=new Array(this.getNumInteriorRing()).fill(null),x=0;x<d.length;x++)d[x]=this.getInteriorRingN(x).reverse();return this.getFactory().createPolygon(o,d)}},{key:"getTypeCode",value:function(){return Mt.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var o=0;o+=this._shell.getLength();for(var d=0;d<this._holes.length;d++)o+=this._holes[d].getLength();return o}},{key:"getNumPoints",value:function(){for(var o=this._shell.getNumPoints(),d=0;d<this._holes.length;d++)o+=this._holes[d].getNumPoints();return o}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(o,d){var x=o.copy();return this.normalize(x,d),x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var o=arguments[0],d=this._shell,x=o._shell;return d.compareToSameClass(x)}if(arguments.length===2){var C=arguments[1],I=arguments[0],H=this._shell,lt=I._shell,dt=H.compareToSameClass(lt,C);if(dt!==0)return dt;for(var _t=this.getNumInteriorRing(),St=I.getNumInteriorRing(),jt=0;jt<_t&&jt<St;){var qt=this.getInteriorRingN(jt),Qt=I.getInteriorRingN(jt),ee=qt.compareToSameClass(Qt,C);if(ee!==0)return ee;jt++}return jt<_t?1:jt<St?-1:0}}},{key:"apply",value:function(){if(Yt(arguments[0],qi)){var o=arguments[0];this._shell.apply(o);for(var d=0;d<this._holes.length;d++)this._holes[d].apply(o)}else if(Yt(arguments[0],Gi)){var x=arguments[0];if(this._shell.apply(x),!x.isDone())for(var C=0;C<this._holes.length&&(this._holes[C].apply(x),!x.isDone());C++);x.isGeometryChanged()&&this.geometryChanged()}else if(Yt(arguments[0],fs))arguments[0].filter(this);else if(Yt(arguments[0],tt)){var I=arguments[0];I.filter(this),this._shell.apply(I);for(var H=0;H<this._holes.length;H++)this._holes[H].apply(I)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var o=new Array(this._holes.length+1).fill(null);o[0]=this._shell;for(var d=0;d<this._holes.length;d++)o[d+1]=this._holes[d];return o.length<=1?this.getFactory().createLinearRing(o[0].getCoordinateSequence()):this.getFactory().createMultiLineString(o)}},{key:"getGeometryType",value:function(){return Mt.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(o){return this._holes[o]}},{key:"interfaces_",get:function(){return[Kt]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var o=arguments[0],d=arguments[1],x=arguments[2];if(Mt.constructor_.call(this,x),o===null&&(o=this.getFactory().createLinearRing()),d===null&&(d=[]),Mt.hasNullElements(d))throw new et("holes must not contain null elements");if(o.isEmpty()&&Mt.hasNonEmptyElements(d))throw new et("shell is empty but holes are not");this._shell=o,this._holes=d}}])})(Mt),po=(function(g){function a(){return r(this,a),l(this,a,arguments)}return S(a,g),p(a)})(Ut),Hi=(function(g){function a(o){var d;return r(this,a),(d=l(this,a)).array=[],o instanceof Xt&&d.addAll(o),d}return S(a,g),p(a,[{key:"contains",value:function(o){var d,x=y(this.array);try{for(x.s();!(d=x.n()).done;)if(d.value.compareTo(o)===0)return!0}catch(C){x.e(C)}finally{x.f()}return!1}},{key:"add",value:function(o){if(this.contains(o))return!1;for(var d=0,x=this.array.length;d<x;d++)if(this.array[d].compareTo(o)===1)return!!this.array.splice(d,0,o);return this.array.push(o),!0}},{key:"addAll",value:function(o){var d,x=y(o);try{for(x.s();!(d=x.n()).done;){var C=d.value;this.add(C)}}catch(I){x.e(I)}finally{x.f()}return!0}},{key:"remove",value:function(){throw new Bt}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Dn(this.array)}}])})(po),Dn=(function(){return p((function g(a){r(this,g),this.array=a,this.position=0}),[{key:"next",value:function(){if(this.position===this.array.length)throw new Zt;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new Bt}}])})(),Ue=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"computeEnvelopeInternal",value:function(){for(var o=new It,d=0;d<this._geometries.length;d++)o.expandToInclude(this._geometries[d].getEnvelopeInternal());return o}},{key:"getGeometryN",value:function(o){return this._geometries[o]}},{key:"getCoordinates",value:function(){for(var o=new Array(this.getNumPoints()).fill(null),d=-1,x=0;x<this._geometries.length;x++)for(var C=this._geometries[x].getCoordinates(),I=0;I<C.length;I++)o[++d]=C[I];return o}},{key:"getArea",value:function(){for(var o=0,d=0;d<this._geometries.length;d++)o+=this._geometries[d].getArea();return o}},{key:"copyInternal",value:function(){for(var o=new Array(this._geometries.length).fill(null),d=0;d<o.length;d++)o[d]=this._geometries[d].copy();return new a(o,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Mt){var o=arguments[0],d=arguments[1];if(!this.isEquivalentClass(o))return!1;var x=o;if(this._geometries.length!==x._geometries.length)return!1;for(var C=0;C<this._geometries.length;C++)if(!this._geometries[C].equalsExact(x._geometries[C],d))return!1;return!0}return B(a,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var o=0;o<this._geometries.length;o++)this._geometries[o].normalize();An.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var o=Ft.FALSE,d=0;d<this._geometries.length;d++)o=Math.max(o,this._geometries[d].getBoundaryDimension());return o}},{key:"reverseInternal",value:function(){for(var o=this._geometries.length,d=new $t(o),x=0;x<o;x++)d.add(this._geometries[x].reverse());return this.getFactory().buildGeometry(d)}},{key:"getTypeCode",value:function(){return Mt.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var o=Ft.FALSE,d=0;d<this._geometries.length;d++)o=Math.max(o,this._geometries[d].getDimension());return o}},{key:"getLength",value:function(){for(var o=0,d=0;d<this._geometries.length;d++)o+=this._geometries[d].getLength();return o}},{key:"getNumPoints",value:function(){for(var o=0,d=0;d<this._geometries.length;d++)o+=this._geometries[d].getNumPoints();return o}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var o=arguments[0],d=new Hi(An.asList(this._geometries)),x=new Hi(An.asList(o._geometries));return this.compare(d,x)}if(arguments.length===2){for(var C=arguments[1],I=arguments[0],H=this.getNumGeometries(),lt=I.getNumGeometries(),dt=0;dt<H&&dt<lt;){var _t=this.getGeometryN(dt),St=I.getGeometryN(dt),jt=_t.compareToSameClass(St,C);if(jt!==0)return jt;dt++}return dt<H?1:dt<lt?-1:0}}},{key:"apply",value:function(){if(Yt(arguments[0],qi))for(var o=arguments[0],d=0;d<this._geometries.length;d++)this._geometries[d].apply(o);else if(Yt(arguments[0],Gi)){var x=arguments[0];if(this._geometries.length===0)return null;for(var C=0;C<this._geometries.length&&(this._geometries[C].apply(x),!x.isDone());C++);x.isGeometryChanged()&&this.geometryChanged()}else if(Yt(arguments[0],fs)){var I=arguments[0];I.filter(this);for(var H=0;H<this._geometries.length;H++)this._geometries[H].apply(I)}else if(Yt(arguments[0],tt)){var lt=arguments[0];lt.filter(this);for(var dt=0;dt<this._geometries.length;dt++)this._geometries[dt].apply(lt)}}},{key:"getBoundary",value:function(){return Mt.checkNotGeometryCollection(this),gt.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return Mt.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var o=0;o<this._geometries.length;o++)if(!this._geometries[o].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var o=arguments[0],d=arguments[1];if(Mt.constructor_.call(this,d),o===null&&(o=[]),Mt.hasNullElements(o))throw new et("geometries must not contain null elements");this._geometries=o}}}}])})(Mt),fr=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"copyInternal",value:function(){for(var o=new Array(this._geometries.length).fill(null),d=0;d<o.length;d++)o[d]=this._geometries[d].copy();return new a(o,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Mt){var o=arguments[0],d=arguments[1];return!!this.isEquivalentClass(o)&&B(a,"equalsExact",this,1).call(this,o,d)}return B(a,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var o=arguments[0];return this._geometries[o].getCoordinate()}return B(a,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return Ft.FALSE}},{key:"getTypeCode",value:function(){return Mt.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Mt.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[fo]}}],[{key:"constructor_",value:function(){var o=arguments[0],d=arguments[1];Ue.constructor_.call(this,o,d)}}])})(Ue),Si=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"copyInternal",value:function(){return new a(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return Ft.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||B(a,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var o=this._points.copy();return Vr.reverse(o),this.getFactory().createLinearRing(o)}},{key:"getTypeCode",value:function(){return Mt.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!B(a,"isClosed",this,1).call(this))throw new et("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<a.MINIMUM_VALID_SIZE)throw new et("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return Mt.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var o=arguments[0],d=arguments[1];zs.constructor_.call(this,o,d),this.validateConstruction()}}])})(zs);Si.MINIMUM_VALID_SIZE=4;var kr=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"setOrdinate",value:function(o,d){switch(o){case a.X:this.x=d;break;case a.Y:this.y=d;break;default:throw new et("Invalid ordinate index: "+o)}}},{key:"getZ",value:function(){return ht.NULL_ORDINATE}},{key:"getOrdinate",value:function(o){switch(o){case a.X:return this.x;case a.Y:return this.y}throw new et("Invalid ordinate index: "+o)}},{key:"setZ",value:function(o){throw new et("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new a(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(o){this.x=o.x,this.y=o.y,this.z=o.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)ht.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof a){var o=arguments[0];ht.constructor_.call(this,o.x,o.y)}else if(arguments[0]instanceof ht){var d=arguments[0];ht.constructor_.call(this,d.x,d.y)}}else if(arguments.length===2){var x=arguments[0],C=arguments[1];ht.constructor_.call(this,x,C,ht.NULL_ORDINATE)}}}])})(ht);kr.X=0,kr.Y=1,kr.Z=-1,kr.M=-1;var Qr=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(o,d){switch(o){case a.X:this.x=d;break;case a.Y:this.y=d;break;case a.M:this._m=d;break;default:throw new et("Invalid ordinate index: "+o)}}},{key:"setM",value:function(o){this._m=o}},{key:"getZ",value:function(){return ht.NULL_ORDINATE}},{key:"getOrdinate",value:function(o){switch(o){case a.X:return this.x;case a.Y:return this.y;case a.M:return this._m}throw new et("Invalid ordinate index: "+o)}},{key:"setZ",value:function(o){throw new et("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new a(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(o){this.x=o.x,this.y=o.y,this.z=o.getZ(),this._m=o.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)ht.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof a){var o=arguments[0];ht.constructor_.call(this,o.x,o.y),this._m=o._m}else if(arguments[0]instanceof ht){var d=arguments[0];ht.constructor_.call(this,d.x,d.y),this._m=this.getM()}}else if(arguments.length===3){var x=arguments[0],C=arguments[1],I=arguments[2];ht.constructor_.call(this,x,C,ht.NULL_ORDINATE),this._m=I}}}])})(ht);Qr.X=0,Qr.Y=1,Qr.Z=-1,Qr.M=2;var ba=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(o,d){switch(o){case ht.X:this.x=d;break;case ht.Y:this.y=d;break;case ht.Z:this.z=d;break;case ht.M:this._m=d;break;default:throw new et("Invalid ordinate index: "+o)}}},{key:"setM",value:function(o){this._m=o}},{key:"getOrdinate",value:function(o){switch(o){case ht.X:return this.x;case ht.Y:return this.y;case ht.Z:return this.getZ();case ht.M:return this.getM()}throw new et("Invalid ordinate index: "+o)}},{key:"copy",value:function(){return new a(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(o){this.x=o.x,this.y=o.y,this.z=o.getZ(),this._m=o.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)ht.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof a){var o=arguments[0];ht.constructor_.call(this,o),this._m=o._m}else if(arguments[0]instanceof ht){var d=arguments[0];ht.constructor_.call(this,d),this._m=this.getM()}}else if(arguments.length===4){var x=arguments[0],C=arguments[1],I=arguments[2],H=arguments[3];ht.constructor_.call(this,x,C,I),this._m=H}}}])})(ht),Mr=(function(){function g(){r(this,g)}return p(g,null,[{key:"measures",value:function(a){return a instanceof kr?0:a instanceof Qr||a instanceof ba?1:0}},{key:"dimension",value:function(a){return a instanceof kr?2:a instanceof Qr?3:a instanceof ba?4:3}},{key:"create",value:function(){if(arguments.length===1){var a=arguments[0];return g.create(a,0)}if(arguments.length===2){var o=arguments[0],d=arguments[1];return o===2?new kr:o===3&&d===0?new ht:o===3&&d===1?new Qr:o===4&&d===1?new ba:new ht}}}])})(),Wr=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"getCoordinate",value:function(o){return this.get(o)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&Yt(arguments[0],Xt)){for(var o=arguments[1],d=!1,x=arguments[0].iterator();x.hasNext();)this.add(x.next(),o),d=!0;return d}return B(a,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var o=B(a,"clone",this,1).call(this),d=0;d<this.size();d++)o.add(d,this.get(d).clone());return o}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(a.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(a.coordArrayType);for(var o=this.size(),d=new Array(o).fill(null),x=0;x<o;x++)d[x]=this.get(o-x-1);return d}}},{key:"add",value:function(){if(arguments.length===1){var o=arguments[0];return B(a,"add",this,1).call(this,o)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var d=arguments[0],x=arguments[1];return this.add(d,x,!0),!0}if(arguments[0]instanceof ht&&typeof arguments[1]=="boolean"){var C=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(C))return null;B(a,"add",this,1).call(this,C)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var I=arguments[0],H=arguments[1];return this.add(I,H),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var lt=arguments[0],dt=arguments[1];if(arguments[2])for(var _t=0;_t<lt.length;_t++)this.add(lt[_t],dt);else for(var St=lt.length-1;St>=0;St--)this.add(lt[St],dt);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof ht){var jt=arguments[0],qt=arguments[1];if(!arguments[2]){var Qt=this.size();if(Qt>0&&(jt>0&&this.get(jt-1).equals2D(qt)||jt<Qt&&this.get(jt).equals2D(qt)))return null}B(a,"add",this,1).call(this,jt,qt)}}else if(arguments.length===4){var ee=arguments[0],Te=arguments[1],pe=arguments[2],qe=arguments[3],sn=1;pe>qe&&(sn=-1);for(var We=pe;We!==qe;We+=sn)this.add(ee[We],Te);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var o=this.get(0).copy();this.add(o,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var o=arguments[0];this.ensureCapacity(o.length),this.add(o,!0)}else if(arguments.length===2){var d=arguments[0],x=arguments[1];this.ensureCapacity(d.length),this.add(d,x)}}}}])})($t);Wr.coordArrayType=new Array(0).fill(null);var $e=(function(){function g(){r(this,g)}return p(g,null,[{key:"isRing",value:function(a){return!(a.length<4)&&!!a[0].equals2D(a[a.length-1])}},{key:"ptNotInList",value:function(a,o){for(var d=0;d<a.length;d++){var x=a[d];if(g.indexOf(x,o)<0)return x}return null}},{key:"scroll",value:function(a,o){var d=g.indexOf(o,a);if(d<0)return null;var x=new Array(a.length).fill(null);wi.arraycopy(a,d,x,0,a.length-d),wi.arraycopy(a,0,x,a.length-d,d),wi.arraycopy(x,0,a,0,a.length)}},{key:"equals",value:function(){if(arguments.length===2){var a=arguments[0],o=arguments[1];if(a===o)return!0;if(a===null||o===null||a.length!==o.length)return!1;for(var d=0;d<a.length;d++)if(!a[d].equals(o[d]))return!1;return!0}if(arguments.length===3){var x=arguments[0],C=arguments[1],I=arguments[2];if(x===C)return!0;if(x===null||C===null||x.length!==C.length)return!1;for(var H=0;H<x.length;H++)if(I.compare(x[H],C[H])!==0)return!1;return!0}}},{key:"intersection",value:function(a,o){for(var d=new Wr,x=0;x<a.length;x++)o.intersects(a[x])&&d.add(a[x],!0);return d.toCoordinateArray()}},{key:"measures",value:function(a){if(a===null||a.length===0)return 0;var o,d=0,x=y(a);try{for(x.s();!(o=x.n()).done;){var C=o.value;d=Math.max(d,Mr.measures(C))}}catch(I){x.e(I)}finally{x.f()}return d}},{key:"hasRepeatedPoints",value:function(a){for(var o=1;o<a.length;o++)if(a[o-1].equals(a[o]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(a){return g.hasRepeatedPoints(a)?new Wr(a,!1).toCoordinateArray():a}},{key:"reverse",value:function(a){for(var o=a.length-1,d=Math.trunc(o/2),x=0;x<=d;x++){var C=a[x];a[x]=a[o-x],a[o-x]=C}}},{key:"removeNull",value:function(a){for(var o=0,d=0;d<a.length;d++)a[d]!==null&&o++;var x=new Array(o).fill(null);if(o===0)return x;for(var C=0,I=0;I<a.length;I++)a[I]!==null&&(x[C++]=a[I]);return x}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var a=arguments[0],o=new Array(a.length).fill(null),d=0;d<a.length;d++)o[d]=a[d].copy();return o}if(arguments.length===5)for(var x=arguments[0],C=arguments[1],I=arguments[2],H=arguments[3],lt=arguments[4],dt=0;dt<lt;dt++)I[H+dt]=x[C+dt].copy()}},{key:"isEqualReversed",value:function(a,o){for(var d=0;d<a.length;d++){var x=a[d],C=o[a.length-d-1];if(x.compareTo(C)!==0)return!1}return!0}},{key:"envelope",value:function(a){for(var o=new It,d=0;d<a.length;d++)o.expandToInclude(a[d]);return o}},{key:"toCoordinateArray",value:function(a){return a.toArray(g.coordArrayType)}},{key:"dimension",value:function(a){if(a===null||a.length===0)return 3;var o,d=0,x=y(a);try{for(x.s();!(o=x.n()).done;){var C=o.value;d=Math.max(d,Mr.dimension(C))}}catch(I){x.e(I)}finally{x.f()}return d}},{key:"atLeastNCoordinatesOrNothing",value:function(a,o){return o.length>=a?o:[]}},{key:"indexOf",value:function(a,o){for(var d=0;d<o.length;d++)if(a.equals(o[d]))return d;return-1}},{key:"increasingDirection",value:function(a){for(var o=0;o<Math.trunc(a.length/2);o++){var d=a.length-1-o,x=a[o].compareTo(a[d]);if(x!==0)return x}return 1}},{key:"compare",value:function(a,o){for(var d=0;d<a.length&&d<o.length;){var x=a[d].compareTo(o[d]);if(x!==0)return x;d++}return d<o.length?-1:d<a.length?1:0}},{key:"minCoordinate",value:function(a){for(var o=null,d=0;d<a.length;d++)(o===null||o.compareTo(a[d])>0)&&(o=a[d]);return o}},{key:"extract",value:function(a,o,d){o=hr.clamp(o,0,a.length);var x=(d=hr.clamp(d,-1,a.length))-o+1;d<0&&(x=0),o>=a.length&&(x=0),d<o&&(x=0);var C=new Array(x).fill(null);if(x===0)return C;for(var I=0,H=o;H<=d;H++)C[I++]=a[H];return C}}])})(),gs=(function(){return p((function g(){r(this,g)}),[{key:"compare",value:function(g,a){var o=g,d=a;return $e.compare(o,d)}},{key:"interfaces_",get:function(){return[U]}}])})(),Nr=(function(){return p((function g(){r(this,g)}),[{key:"compare",value:function(g,a){var o=g,d=a;if(o.length<d.length)return-1;if(o.length>d.length)return 1;if(o.length===0)return 0;var x=$e.compare(o,d);return $e.isEqualReversed(o,d)?0:x}},{key:"OLDcompare",value:function(g,a){var o=g,d=a;if(o.length<d.length)return-1;if(o.length>d.length)return 1;if(o.length===0)return 0;for(var x=$e.increasingDirection(o),C=$e.increasingDirection(d),I=x>0?0:o.length-1,H=C>0?0:o.length-1,lt=0;lt<o.length;lt++){var dt=o[I].compareTo(d[H]);if(dt!==0)return dt;I+=x,H+=C}return 0}},{key:"interfaces_",get:function(){return[U]}}])})();$e.ForwardComparator=gs,$e.BidirectionalComparator=Nr,$e.coordArrayType=new Array(0).fill(null);var dr=(function(){return p((function g(a){r(this,g),this.str=a}),[{key:"append",value:function(g){this.str+=g}},{key:"setCharAt",value:function(g,a){this.str=this.str.substr(0,g)+a+this.str.substr(g+1)}},{key:"toString",value:function(){return this.str}}])})(),dn=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"getM",value:function(a){return this.hasM()?this._coordinates[a].getM():J.NaN}},{key:"setOrdinate",value:function(a,o,d){switch(o){case ve.X:this._coordinates[a].x=d;break;case ve.Y:this._coordinates[a].y=d;break;default:this._coordinates[a].setOrdinate(o,d)}}},{key:"getZ",value:function(a){return this.hasZ()?this._coordinates[a].getZ():J.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(a,o){switch(o){case ve.X:return this._coordinates[a].x;case ve.Y:return this._coordinates[a].y;default:return this._coordinates[a].getOrdinate(o)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var a=arguments[0];return this._coordinates[a]}if(arguments.length===2){var o=arguments[0];arguments[1].setCoordinate(this._coordinates[o])}}},{key:"getCoordinateCopy",value:function(a){var o=this.createCoordinate();return o.setCoordinate(this._coordinates[a]),o}},{key:"createCoordinate",value:function(){return Mr.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(a){return this._coordinates[a].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(a){for(var o=0;o<this._coordinates.length;o++)a.expandToInclude(this._coordinates[o]);return a}},{key:"copy",value:function(){for(var a=new Array(this.size()).fill(null),o=0;o<this._coordinates.length;o++){var d=this.createCoordinate();d.setCoordinate(this._coordinates[o]),a[o]=d}return new g(a,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var a=new dr(17*this._coordinates.length);a.append("("),a.append(this._coordinates[0]);for(var o=1;o<this._coordinates.length;o++)a.append(", "),a.append(this._coordinates[o]);return a.append(")"),a.toString()}return"()"}},{key:"getY",value:function(a){return this._coordinates[a].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[ve,A]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var a=arguments[0];g.constructor_.call(this,a,$e.dimension(a),$e.measures(a))}else if(Number.isInteger(arguments[0])){var o=arguments[0];this._coordinates=new Array(o).fill(null);for(var d=0;d<o;d++)this._coordinates[d]=new ht}else if(Yt(arguments[0],ve)){var x=arguments[0];if(x===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=x.getDimension(),this._measures=x.getMeasures(),this._coordinates=new Array(x.size()).fill(null);for(var C=0;C<this._coordinates.length;C++)this._coordinates[C]=x.getCoordinateCopy(C)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var I=arguments[0],H=arguments[1];g.constructor_.call(this,I,H,$e.measures(I))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var lt=arguments[0],dt=arguments[1];this._coordinates=new Array(lt).fill(null),this._dimension=dt;for(var _t=0;_t<lt;_t++)this._coordinates[_t]=Mr.create(dt)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var St=arguments[0],jt=arguments[1],qt=arguments[2];this._dimension=jt,this._measures=qt,this._coordinates=St===null?new Array(0).fill(null):St}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Qt=arguments[0],ee=arguments[1],Te=arguments[2];this._coordinates=new Array(Qt).fill(null),this._dimension=ee,this._measures=Te;for(var pe=0;pe<Qt;pe++)this._coordinates[pe]=this.createCoordinate()}}}}])})(),La=(function(){function g(){r(this,g)}return p(g,[{key:"readResolve",value:function(){return g.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new dn(arguments[0]);if(Yt(arguments[0],ve))return new dn(arguments[0])}else{if(arguments.length===2){var a=arguments[1];return a>3&&(a=3),a<2&&(a=2),new dn(arguments[0],a)}if(arguments.length===3){var o=arguments[2],d=arguments[1]-o;return o>1&&(o=1),d>3&&(d=3),d<2&&(d=2),new dn(arguments[0],d+o,o)}}}},{key:"interfaces_",get:function(){return[cs,A]}}],[{key:"instance",value:function(){return g.instanceObject}}])})();La.instanceObject=new La;var Ta=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"copyInternal",value:function(){for(var o=new Array(this._geometries.length).fill(null),d=0;d<o.length;d++)o[d]=this._geometries[d].copy();return new a(o,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Mt){var o=arguments[0],d=arguments[1];return!!this.isEquivalentClass(o)&&B(a,"equalsExact",this,1).call(this,o,d)}return B(a,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return Mt.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var o=new $t,d=0;d<this._geometries.length;d++)for(var x=this._geometries[d].getBoundary(),C=0;C<x.getNumGeometries();C++)o.add(x.getGeometryN(C));var I=new Array(o.size()).fill(null);return this.getFactory().createMultiLineString(o.toArray(I))}},{key:"getGeometryType",value:function(){return Mt.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Kt]}}],[{key:"constructor_",value:function(){var o=arguments[0],d=arguments[1];Ue.constructor_.call(this,o,d)}}])})(Ue),Or=(function(){return p((function g(){r(this,g)}),[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])})(),Ar=(function(g){function a(){var o;return r(this,a),(o=l(this,a)).map=new Map,o}return S(a,g),p(a,[{key:"get",value:function(o){return this.map.get(o)||null}},{key:"put",value:function(o,d){return this.map.set(o,d),d}},{key:"values",value:function(){for(var o=new $t,d=this.map.values(),x=d.next();!x.done;)o.add(x.value),x=d.next();return o}},{key:"entrySet",value:function(){var o=new Le;return this.map.entries().forEach((function(d){return o.add(d)})),o}},{key:"size",value:function(){return this.map.size()}}])})(Or),ei=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"equals",value:function(a){if(!(a instanceof g))return!1;var o=a;return this._modelType===o._modelType&&this._scale===o._scale}},{key:"compareTo",value:function(a){var o=a,d=this.getMaximumSignificantDigits(),x=o.getMaximumSignificantDigits();return Re.compare(d,x)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===g.FLOATING||this._modelType===g.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var a="UNKNOWN";return this._modelType===g.FLOATING?a="Floating":this._modelType===g.FLOATING_SINGLE?a="Floating-Single":this._modelType===g.FIXED&&(a="Fixed (Scale="+this.getScale()+")"),a}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var a=arguments[0];return J.isNaN(a)||this._modelType===g.FLOATING_SINGLE?a:this._modelType===g.FIXED?Math.round(a*this._scale)/this._scale:a}if(arguments[0]instanceof ht){var o=arguments[0];if(this._modelType===g.FLOATING)return null;o.x=this.makePrecise(o.x),o.y=this.makePrecise(o.y)}}},{key:"getMaximumSignificantDigits",value:function(){var a=16;return this._modelType===g.FLOATING?a=16:this._modelType===g.FLOATING_SINGLE?a=6:this._modelType===g.FIXED&&(a=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),a}},{key:"setScale",value:function(a){this._scale=Math.abs(a)}},{key:"interfaces_",get:function(){return[A,W]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=g.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Dr){var a=arguments[0];this._modelType=a,a===g.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var o=arguments[0];this._modelType=g.FIXED,this.setScale(o)}else if(arguments[0]instanceof g){var d=arguments[0];this._modelType=d._modelType,this._scale=d._scale}}}},{key:"mostPrecise",value:function(a,o){return a.compareTo(o)>=0?a:o}}])})(),Dr=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"readResolve",value:function(){return g.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[A]}}],[{key:"constructor_",value:function(){this._name=null;var a=arguments[0];this._name=a,g.nameToTypeMap.put(a,this)}}])})();Dr.nameToTypeMap=new Ar,ei.Type=Dr,ei.FIXED=new Dr("FIXED"),ei.FLOATING=new Dr("FLOATING"),ei.FLOATING_SINGLE=new Dr("FLOATING SINGLE"),ei.maximumPreciseValue=9007199254740992;var Bs=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"copyInternal",value:function(){for(var o=new Array(this._geometries.length).fill(null),d=0;d<o.length;d++)o[d]=this._geometries[d].copy();return new a(o,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Mt){var o=arguments[0],d=arguments[1];return!!this.isEquivalentClass(o)&&B(a,"equalsExact",this,1).call(this,o,d)}return B(a,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Ft.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var o=0;o<this._geometries.length;o++)if(!this._geometries[o].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return Mt.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new Bt}},{key:"getGeometryType",value:function(){return Mt.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[hs]}}],[{key:"constructor_",value:function(){var o=arguments[0],d=arguments[1];Ue.constructor_.call(this,o,d)}}])})(Ue),Yi=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"createEmpty",value:function(a){switch(a){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new et("Invalid dimension: "+a)}}},{key:"toGeometry",value:function(a){return a.isNull()?this.createPoint():a.getMinX()===a.getMaxX()&&a.getMinY()===a.getMaxY()?this.createPoint(new ht(a.getMinX(),a.getMinY())):a.getMinX()===a.getMaxX()||a.getMinY()===a.getMaxY()?this.createLineString([new ht(a.getMinX(),a.getMinY()),new ht(a.getMaxX(),a.getMaxY())]):this.createPolygon(this.createLinearRing([new ht(a.getMinX(),a.getMinY()),new ht(a.getMinX(),a.getMaxY()),new ht(a.getMaxX(),a.getMaxY()),new ht(a.getMaxX(),a.getMinY()),new ht(a.getMinX(),a.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var a=arguments[0];return this.createLineString(a!==null?this.getCoordinateSequenceFactory().create(a):null)}if(Yt(arguments[0],ve))return new zs(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new Bs(null,this):arguments.length===1?new Bs(arguments[0],this):void 0}},{key:"buildGeometry",value:function(a){for(var o=null,d=!1,x=!1,C=a.iterator();C.hasNext();){var I=C.next(),H=I.getTypeCode();o===null&&(o=H),H!==o&&(d=!0),I instanceof Ue&&(x=!0)}if(o===null)return this.createGeometryCollection();if(d||x)return this.createGeometryCollection(g.toGeometryArray(a));var lt=a.iterator().next();if(a.size()>1){if(lt instanceof ds)return this.createMultiPolygon(g.toPolygonArray(a));if(lt instanceof zs)return this.createMultiLineString(g.toLineStringArray(a));if(lt instanceof Sa)return this.createMultiPoint(g.toPointArray(a));gt.shouldNeverReachHere("Unhandled geometry type: "+lt.getGeometryType())}return lt}},{key:"createMultiPointFromCoords",value:function(a){return this.createMultiPoint(a!==null?this.getCoordinateSequenceFactory().create(a):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof ht){var a=arguments[0];return this.createPoint(a!==null?this.getCoordinateSequenceFactory().create([a]):null)}if(Yt(arguments[0],ve))return new Sa(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(Yt(arguments[0],ve)){var a=arguments[0];return this.createPolygon(this.createLinearRing(a))}if(arguments[0]instanceof Array){var o=arguments[0];return this.createPolygon(this.createLinearRing(o))}if(arguments[0]instanceof Si){var d=arguments[0];return this.createPolygon(d,null)}}else if(arguments.length===2)return new ds(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new Ue(null,this):arguments.length===1?new Ue(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var a=arguments[0];return this.createLinearRing(a!==null?this.getCoordinateSequenceFactory().create(a):null)}if(Yt(arguments[0],ve))return new Si(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new Ta(null,this):arguments.length===1?new Ta(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new fr(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new fr(arguments[0],this);if(Yt(arguments[0],ve)){var a=arguments[0];if(a===null)return this.createMultiPoint(new Array(0).fill(null));for(var o=new Array(a.size()).fill(null),d=0;d<a.size();d++){var x=this.getCoordinateSequenceFactory().create(1,a.getDimension(),a.getMeasures());Vr.copy(a,d,x,0,1),o[d]=this.createPoint(x)}return this.createMultiPoint(o)}}}},{key:"interfaces_",get:function(){return[A]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)g.constructor_.call(this,new ei,0);else if(arguments.length===1){if(Yt(arguments[0],cs)){var a=arguments[0];g.constructor_.call(this,new ei,0,a)}else if(arguments[0]instanceof ei){var o=arguments[0];g.constructor_.call(this,o,0,g.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var d=arguments[0],x=arguments[1];g.constructor_.call(this,d,x,g.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var C=arguments[0],I=arguments[1],H=arguments[2];this._precisionModel=C,this._coordinateSequenceFactory=H,this._SRID=I}}},{key:"toMultiPolygonArray",value:function(a){var o=new Array(a.size()).fill(null);return a.toArray(o)}},{key:"toGeometryArray",value:function(a){if(a===null)return null;var o=new Array(a.size()).fill(null);return a.toArray(o)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return La.instance()}},{key:"toMultiLineStringArray",value:function(a){var o=new Array(a.size()).fill(null);return a.toArray(o)}},{key:"toLineStringArray",value:function(a){var o=new Array(a.size()).fill(null);return a.toArray(o)}},{key:"toMultiPointArray",value:function(a){var o=new Array(a.size()).fill(null);return a.toArray(o)}},{key:"toLinearRingArray",value:function(a){var o=new Array(a.size()).fill(null);return a.toArray(o)}},{key:"toPointArray",value:function(a){var o=new Array(a.size()).fill(null);return a.toArray(o)}},{key:"toPolygonArray",value:function(a){var o=new Array(a.size()).fill(null);return a.toArray(o)}},{key:"createPointFromInternalCoord",value:function(a,o){return o.getPrecisionModel().makePrecise(a),o.getFactory().createPoint(a)}}])})(),xe="XY",Ke="XYZ",bi="XYM",zn="XYZM",Ir={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Ca="EMPTY",fe=1,Pe=2,gi=3,js=4,Fe=5,mo=6;for(var Us in Ir)Ir[Us].toUpperCase();var gr=(function(){return p((function g(a){r(this,g),this.wkt=a,this.index_=-1}),[{key:"isAlpha_",value:function(g){return g>="a"&&g<="z"||g>="A"&&g<="Z"}},{key:"isNumeric_",value:function(g,a){return g>="0"&&g<="9"||g=="."&&!(a!==void 0&&a)}},{key:"isWhiteSpace_",value:function(g){return g==" "||g=="	"||g=="\r"||g==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var g,a=this.nextChar_(),o=this.index_,d=a;if(a=="(")g=Pe;else if(a==",")g=Fe;else if(a==")")g=gi;else if(this.isNumeric_(a)||a=="-")g=js,d=this.readNumber_();else if(this.isAlpha_(a))g=fe,d=this.readText_();else{if(this.isWhiteSpace_(a))return this.nextToken();if(a!=="")throw new Error("Unexpected character: "+a);g=mo}return{position:o,value:d,type:g}}},{key:"readNumber_",value:function(){var g,a=this.index_,o=!1,d=!1;do g=="."?o=!0:g!="e"&&g!="E"||(d=!0),g=this.nextChar_();while(this.isNumeric_(g,o)||!d&&(g=="e"||g=="E")||d&&(g=="-"||g=="+"));return parseFloat(this.wkt.substring(a,this.index_--))}},{key:"readText_",value:function(){var g,a=this.index_;do g=this.nextChar_();while(this.isAlpha_(g));return this.wkt.substring(a,this.index_--).toUpperCase()}}])})(),tn=(function(){return p((function g(a,o){r(this,g),this.lexer_=a,this.token_,this.layout_=xe,this.factory=o}),[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(g){return this.token_.type==g}},{key:"match",value:function(g){var a=this.isTokenType(g);return a&&this.consume_(),a}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var g=xe,a=this.token_;if(this.isTokenType(fe)){var o=a.value;o==="Z"?g=Ke:o==="M"?g=bi:o==="ZM"&&(g=zn),g!==xe&&this.consume_()}return g}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(Pe)){var g=[];do g.push(this.parseGeometry_());while(this.match(Fe));if(this.match(gi))return g}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(Pe)){var g=this.parsePoint_();if(this.match(gi))return g}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(Pe)){var g=this.parsePointList_();if(this.match(gi))return g}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(Pe)){var g=this.parseLineStringTextList_();if(this.match(gi))return g}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var g;if(this.match(Pe)){if(g=this.token_.type==Pe?this.parsePointTextList_():this.parsePointList_(),this.match(gi))return g}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(Pe)){var g=this.parseLineStringTextList_();if(this.match(gi))return g}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(Pe)){var g=this.parsePolygonTextList_();if(this.match(gi))return g}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var g=[],a=this.layout_.length,o=0;o<a;++o){var d=this.token_;if(!this.match(js))break;g.push(d.value)}if(g.length==a)return g;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var g=[this.parsePoint_()];this.match(Fe);)g.push(this.parsePoint_());return g}},{key:"parsePointTextList_",value:function(){for(var g=[this.parsePointText_()];this.match(Fe);)g.push(this.parsePointText_());return g}},{key:"parseLineStringTextList_",value:function(){for(var g=[this.parseLineStringText_()];this.match(Fe);)g.push(this.parseLineStringText_());return g}},{key:"parsePolygonTextList_",value:function(){for(var g=[this.parsePolygonText_()];this.match(Fe);)g.push(this.parsePolygonText_());return g}},{key:"isEmptyGeometry_",value:function(){var g=this.isTokenType(fe)&&this.token_.value==Ca;return g&&this.consume_(),g}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var g=this.factory,a=function(ee){return c(ht,Q(ee))},o=function(ee){var Te=ee.map((function(pe){return g.createLinearRing(pe.map(a))}));return Te.length>1?g.createPolygon(Te[0],Te.slice(1)):g.createPolygon(Te[0])},d=this.token_;if(this.match(fe)){var x=d.value;if(this.layout_=this.parseGeometryLayout_(),x=="GEOMETRYCOLLECTION"){var C=this.parseGeometryCollectionText_();return g.createGeometryCollection(C)}switch(x){case"POINT":var I=this.parsePointText_();return I?g.createPoint(c(ht,Q(I))):g.createPoint();case"LINESTRING":var H=this.parseLineStringText_().map(a);return g.createLineString(H);case"LINEARRING":var lt=this.parseLineStringText_().map(a);return g.createLinearRing(lt);case"POLYGON":var dt=this.parsePolygonText_();return dt&&dt.length!==0?o(dt):g.createPolygon();case"MULTIPOINT":var _t=this.parseMultiPointText_();if(!_t||_t.length===0)return g.createMultiPoint();var St=_t.map(a).map((function(ee){return g.createPoint(ee)}));return g.createMultiPoint(St);case"MULTILINESTRING":var jt=this.parseMultiLineStringText_().map((function(ee){return g.createLineString(ee.map(a))}));return g.createMultiLineString(jt);case"MULTIPOLYGON":var qt=this.parseMultiPolygonText_();if(!qt||qt.length===0)return g.createMultiPolygon();var Qt=qt.map(o);return g.createMultiPolygon(Qt);default:throw new Error("Invalid geometry type: "+x)}}throw new Error(this.formatErrorMessage_())}}])})();function pr(g){if(g.isEmpty())return"";var a=g.getCoordinate(),o=[a.x,a.y];return a.z===void 0||Number.isNaN(a.z)||o.push(a.z),a.m===void 0||Number.isNaN(a.m)||o.push(a.m),o.join(" ")}function Zi(g){for(var a=g.getCoordinates().map((function(C){var I=[C.x,C.y];return C.z===void 0||Number.isNaN(C.z)||I.push(C.z),C.m===void 0||Number.isNaN(C.m)||I.push(C.m),I})),o=[],d=0,x=a.length;d<x;++d)o.push(a[d].join(" "));return o.join(", ")}function Di(g){var a=[];a.push("("+Zi(g.getExteriorRing())+")");for(var o=0,d=g.getNumInteriorRing();o<d;++o)a.push("("+Zi(g.getInteriorRingN(o))+")");return a.join(", ")}var vo={Point:pr,LineString:Zi,LinearRing:Zi,Polygon:Di,MultiPoint:function(g){for(var a=[],o=0,d=g.getNumGeometries();o<d;++o)a.push("("+pr(g.getGeometryN(o))+")");return a.join(", ")},MultiLineString:function(g){for(var a=[],o=0,d=g.getNumGeometries();o<d;++o)a.push("("+Zi(g.getGeometryN(o))+")");return a.join(", ")},MultiPolygon:function(g){for(var a=[],o=0,d=g.getNumGeometries();o<d;++o)a.push("("+Di(g.getGeometryN(o))+")");return a.join(", ")},GeometryCollection:function(g){for(var a=[],o=0,d=g.getNumGeometries();o<d;++o)a.push(Jr(g.getGeometryN(o)));return a.join(", ")}};function Jr(g){var a=g.getGeometryType(),o=vo[a];a=a.toUpperCase();var d=(function(x){var C="";if(x.isEmpty())return C;var I=x.getCoordinate();return I.z===void 0||Number.isNaN(I.z)||(C+="Z"),I.m===void 0||Number.isNaN(I.m)||(C+="M"),C})(g);return d.length>0&&(a+=" "+d),g.isEmpty()?a+" "+Ca:a+" ("+o(g)+")"}var ka=(function(){return p((function g(a){r(this,g),this.geometryFactory=a||new Yi,this.precisionModel=this.geometryFactory.getPrecisionModel()}),[{key:"read",value:function(g){var a=new gr(g);return new tn(a,this.geometryFactory).parse()}},{key:"write",value:function(g){return Jr(g)}}])})(),Kr=(function(){return p((function g(a){r(this,g),this.parser=new ka(a)}),[{key:"write",value:function(g){return this.parser.write(g)}}],[{key:"toLineString",value:function(g,a){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+g.x+" "+g.y+", "+a.x+" "+a.y+" )"}}])})(),Qe=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"getIndexAlongSegment",value:function(a,o){return this.computeIntLineIndex(),this._intLineIndex[a][o]}},{key:"getTopologySummary",value:function(){var a=new dr;return this.isEndPoint()&&a.append(" endpoint"),this._isProper&&a.append(" proper"),this.isCollinear()&&a.append(" collinear"),a.toString()}},{key:"computeIntersection",value:function(a,o,d,x){this._inputLines[0][0]=a,this._inputLines[0][1]=o,this._inputLines[1][0]=d,this._inputLines[1][1]=x,this._result=this.computeIntersect(a,o,d,x)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var a=arguments[0];this.getEdgeDistance(a,0)>this.getEdgeDistance(a,1)?(this._intLineIndex[a][0]=0,this._intLineIndex[a][1]=1):(this._intLineIndex[a][0]=1,this._intLineIndex[a][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(a){this._precisionModel=a}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var a=arguments[0],o=0;o<this._result;o++)if(!this._intPt[o].equals2D(this._inputLines[a][0])&&!this._intPt[o].equals2D(this._inputLines[a][1]))return!0;return!1}}},{key:"getIntersection",value:function(a){return this._intPt[a]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==g.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(a,o){return g.computeEdgeDistance(this._intPt[o],this._inputLines[a][0],this._inputLines[a][1])}},{key:"isCollinear",value:function(){return this._result===g.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Kr.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Kr.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(a,o){return this._inputLines[a][o]}},{key:"isIntersection",value:function(a){for(var o=0;o<this._result;o++)if(this._intPt[o].equals2D(a))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(a,o){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[a][o]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ht,this._intPt[1]=new ht,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(a,o,d){var x=Math.abs(d.x-o.x),C=Math.abs(d.y-o.y),I=-1;if(a.equals(o))I=0;else if(a.equals(d))I=x>C?x:C;else{var H=Math.abs(a.x-o.x),lt=Math.abs(a.y-o.y);(I=x>C?H:lt)!==0||a.equals(o)||(I=Math.max(H,lt))}return gt.isTrue(!(I===0&&!a.equals(o)),"Bad distance calculation"),I}},{key:"nonRobustComputeEdgeDistance",value:function(a,o,d){var x=a.x-o.x,C=a.y-o.y,I=Math.sqrt(x*x+C*C);return gt.isTrue(!(I===0&&!a.equals(o)),"Invalid distance calculation"),I}}])})();Qe.DONT_INTERSECT=0,Qe.DO_INTERSECT=1,Qe.COLLINEAR=2,Qe.NO_INTERSECTION=0,Qe.POINT_INTERSECTION=1,Qe.COLLINEAR_INTERSECTION=2;var mr=(function(g){function a(){return r(this,a),l(this,a)}return S(a,g),p(a,[{key:"isInSegmentEnvelopes",value:function(o){var d=new It(this._inputLines[0][0],this._inputLines[0][1]),x=new It(this._inputLines[1][0],this._inputLines[1][1]);return d.contains(o)&&x.contains(o)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return B(a,"computeIntersection",this,1).apply(this,arguments);var o=arguments[0],d=arguments[1],x=arguments[2];if(this._isProper=!1,It.intersects(d,x,o)&&ie.index(d,x,o)===0&&ie.index(x,d,o)===0)return this._isProper=!0,(o.equals(d)||o.equals(x))&&(this._isProper=!1),this._result=Qe.POINT_INTERSECTION,null;this._result=Qe.NO_INTERSECTION}},{key:"intersection",value:function(o,d,x,C){var I=this.intersectionSafe(o,d,x,C);return this.isInSegmentEnvelopes(I)||(I=new ht(a.nearestEndpoint(o,d,x,C))),this._precisionModel!==null&&this._precisionModel.makePrecise(I),I}},{key:"checkDD",value:function(o,d,x,C,I){var H=Xr.intersection(o,d,x,C),lt=this.isInSegmentEnvelopes(H);wi.out.println("DD in env = "+lt+"  --------------------- "+H),I.distance(H)>1e-4&&wi.out.println("Distance = "+I.distance(H))}},{key:"intersectionSafe",value:function(o,d,x,C){var I=ho.intersection(o,d,x,C);return I===null&&(I=a.nearestEndpoint(o,d,x,C)),I}},{key:"computeCollinearIntersection",value:function(o,d,x,C){var I=It.intersects(o,d,x),H=It.intersects(o,d,C),lt=It.intersects(x,C,o),dt=It.intersects(x,C,d);return I&&H?(this._intPt[0]=x,this._intPt[1]=C,Qe.COLLINEAR_INTERSECTION):lt&&dt?(this._intPt[0]=o,this._intPt[1]=d,Qe.COLLINEAR_INTERSECTION):I&&lt?(this._intPt[0]=x,this._intPt[1]=o,!x.equals(o)||H||dt?Qe.COLLINEAR_INTERSECTION:Qe.POINT_INTERSECTION):I&&dt?(this._intPt[0]=x,this._intPt[1]=d,!x.equals(d)||H||lt?Qe.COLLINEAR_INTERSECTION:Qe.POINT_INTERSECTION):H&&lt?(this._intPt[0]=C,this._intPt[1]=o,!C.equals(o)||I||dt?Qe.COLLINEAR_INTERSECTION:Qe.POINT_INTERSECTION):H&&dt?(this._intPt[0]=C,this._intPt[1]=d,!C.equals(d)||I||lt?Qe.COLLINEAR_INTERSECTION:Qe.POINT_INTERSECTION):Qe.NO_INTERSECTION}},{key:"computeIntersect",value:function(o,d,x,C){if(this._isProper=!1,!It.intersects(o,d,x,C))return Qe.NO_INTERSECTION;var I=ie.index(o,d,x),H=ie.index(o,d,C);if(I>0&&H>0||I<0&&H<0)return Qe.NO_INTERSECTION;var lt=ie.index(x,C,o),dt=ie.index(x,C,d);return lt>0&&dt>0||lt<0&&dt<0?Qe.NO_INTERSECTION:I===0&&H===0&&lt===0&&dt===0?this.computeCollinearIntersection(o,d,x,C):(I===0||H===0||lt===0||dt===0?(this._isProper=!1,o.equals2D(x)||o.equals2D(C)?this._intPt[0]=o:d.equals2D(x)||d.equals2D(C)?this._intPt[0]=d:I===0?this._intPt[0]=new ht(x):H===0?this._intPt[0]=new ht(C):lt===0?this._intPt[0]=new ht(o):dt===0&&(this._intPt[0]=new ht(d))):(this._isProper=!0,this._intPt[0]=this.intersection(o,d,x,C)),Qe.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(o,d,x,C){var I=o,H=li.pointToSegment(o,x,C),lt=li.pointToSegment(d,x,C);return lt<H&&(H=lt,I=d),(lt=li.pointToSegment(x,o,d))<H&&(H=lt,I=x),(lt=li.pointToSegment(C,o,d))<H&&(H=lt,I=C),I}}])})(Qe),ps=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"countSegment",value:function(a,o){if(a.x<this._p.x&&o.x<this._p.x)return null;if(this._p.x===o.x&&this._p.y===o.y)return this._isPointOnSegment=!0,null;if(a.y===this._p.y&&o.y===this._p.y){var d=a.x,x=o.x;return d>x&&(d=o.x,x=a.x),this._p.x>=d&&this._p.x<=x&&(this._isPointOnSegment=!0),null}if(a.y>this._p.y&&o.y<=this._p.y||o.y>this._p.y&&a.y<=this._p.y){var C=ie.index(a,o,this._p);if(C===ie.COLLINEAR)return this._isPointOnSegment=!0,null;o.y<a.y&&(C=-C),C===ie.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==ft.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?ft.BOUNDARY:this._crossingCount%2==1?ft.INTERIOR:ft.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var a=arguments[0];this._p=a}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof ht&&Yt(arguments[1],ve)){for(var a=arguments[1],o=new g(arguments[0]),d=new ht,x=new ht,C=1;C<a.size();C++)if(a.getCoordinate(C,d),a.getCoordinate(C-1,x),o.countSegment(d,x),o.isOnSegment())return o.getLocation();return o.getLocation()}if(arguments[0]instanceof ht&&arguments[1]instanceof Array){for(var I=arguments[1],H=new g(arguments[0]),lt=1;lt<I.length;lt++){var dt=I[lt],_t=I[lt-1];if(H.countSegment(dt,_t),H.isOnSegment())return H.getLocation()}return H.getLocation()}}}])})(),ui=(function(){function g(){r(this,g)}return p(g,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof ht&&Yt(arguments[1],ve)){for(var a=arguments[0],o=arguments[1],d=new mr,x=new ht,C=new ht,I=o.size(),H=1;H<I;H++)if(o.getCoordinate(H-1,x),o.getCoordinate(H,C),d.computeIntersection(a,x,C),d.hasIntersection())return!0;return!1}if(arguments[0]instanceof ht&&arguments[1]instanceof Array){for(var lt=arguments[0],dt=arguments[1],_t=new mr,St=1;St<dt.length;St++){var jt=dt[St-1],qt=dt[St];if(_t.computeIntersection(lt,jt,qt),_t.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(a,o){return ps.locatePointInRing(a,o)}},{key:"isInRing",value:function(a,o){return g.locateInRing(a,o)!==ft.EXTERIOR}}])})(),ni=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"setAllLocations",value:function(a){for(var o=0;o<this.location.length;o++)this.location[o]=a}},{key:"isNull",value:function(){for(var a=0;a<this.location.length;a++)if(this.location[a]!==ft.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(a){for(var o=0;o<this.location.length;o++)this.location[o]===ft.NONE&&(this.location[o]=a)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(a){if(a.location.length>this.location.length){var o=new Array(3).fill(null);o[At.ON]=this.location[At.ON],o[At.LEFT]=ft.NONE,o[At.RIGHT]=ft.NONE,this.location=o}for(var d=0;d<this.location.length;d++)this.location[d]===ft.NONE&&d<a.location.length&&(this.location[d]=a.location[d])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var a=this.location[At.LEFT];this.location[At.LEFT]=this.location[At.RIGHT],this.location[At.RIGHT]=a}},{key:"toString",value:function(){var a=new bn;return this.location.length>1&&a.append(ft.toLocationSymbol(this.location[At.LEFT])),a.append(ft.toLocationSymbol(this.location[At.ON])),this.location.length>1&&a.append(ft.toLocationSymbol(this.location[At.RIGHT])),a.toString()}},{key:"setLocations",value:function(a,o,d){this.location[At.ON]=a,this.location[At.LEFT]=o,this.location[At.RIGHT]=d}},{key:"get",value:function(a){return a<this.location.length?this.location[a]:ft.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var a=0;a<this.location.length;a++)if(this.location[a]===ft.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var a=arguments[0];this.setLocation(At.ON,a)}else if(arguments.length===2){var o=arguments[0],d=arguments[1];this.location[o]=d}}},{key:"init",value:function(a){this.location=new Array(a).fill(null),this.setAllLocations(ft.NONE)}},{key:"isEqualOnSide",value:function(a,o){return this.location[o]===a.location[o]}},{key:"allPositionsEqual",value:function(a){for(var o=0;o<this.location.length;o++)if(this.location[o]!==a)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var a=arguments[0];this.init(a.length)}else if(Number.isInteger(arguments[0])){var o=arguments[0];this.init(1),this.location[At.ON]=o}else if(arguments[0]instanceof g){var d=arguments[0];if(this.init(d.location.length),d!==null)for(var x=0;x<this.location.length;x++)this.location[x]=d.location[x]}}else if(arguments.length===3){var C=arguments[0],I=arguments[1],H=arguments[2];this.init(3),this.location[At.ON]=C,this.location[At.LEFT]=I,this.location[At.RIGHT]=H}}}])})(),Fn=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"getGeometryCount",value:function(){var a=0;return this.elt[0].isNull()||a++,this.elt[1].isNull()||a++,a}},{key:"setAllLocations",value:function(a,o){this.elt[a].setAllLocations(o)}},{key:"isNull",value:function(a){return this.elt[a].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var a=arguments[0];this.setAllLocationsIfNull(0,a),this.setAllLocationsIfNull(1,a)}else if(arguments.length===2){var o=arguments[0],d=arguments[1];this.elt[o].setAllLocationsIfNull(d)}}},{key:"isLine",value:function(a){return this.elt[a].isLine()}},{key:"merge",value:function(a){for(var o=0;o<2;o++)this.elt[o]===null&&a.elt[o]!==null?this.elt[o]=new ni(a.elt[o]):this.elt[o].merge(a.elt[o])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var a=arguments[0];return this.elt[a].get(At.ON)}if(arguments.length===2){var o=arguments[0],d=arguments[1];return this.elt[o].get(d)}}},{key:"toString",value:function(){var a=new bn;return this.elt[0]!==null&&(a.append("A:"),a.append(this.elt[0].toString())),this.elt[1]!==null&&(a.append(" B:"),a.append(this.elt[1].toString())),a.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var a=arguments[0];return this.elt[a].isArea()}}},{key:"isAnyNull",value:function(a){return this.elt[a].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var a=arguments[0],o=arguments[1];this.elt[a].setLocation(At.ON,o)}else if(arguments.length===3){var d=arguments[0],x=arguments[1],C=arguments[2];this.elt[d].setLocation(x,C)}}},{key:"isEqualOnSide",value:function(a,o){return this.elt[0].isEqualOnSide(a.elt[0],o)&&this.elt[1].isEqualOnSide(a.elt[1],o)}},{key:"allPositionsEqual",value:function(a,o){return this.elt[a].allPositionsEqual(o)}},{key:"toLine",value:function(a){this.elt[a].isArea()&&(this.elt[a]=new ni(this.elt[a].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var a=arguments[0];this.elt[0]=new ni(a),this.elt[1]=new ni(a)}else if(arguments[0]instanceof g){var o=arguments[0];this.elt[0]=new ni(o.elt[0]),this.elt[1]=new ni(o.elt[1])}}else if(arguments.length===2){var d=arguments[0],x=arguments[1];this.elt[0]=new ni(ft.NONE),this.elt[1]=new ni(ft.NONE),this.elt[d].setLocation(x)}else if(arguments.length===3){var C=arguments[0],I=arguments[1],H=arguments[2];this.elt[0]=new ni(C,I,H),this.elt[1]=new ni(C,I,H)}else if(arguments.length===4){var lt=arguments[0],dt=arguments[1],_t=arguments[2],St=arguments[3];this.elt[0]=new ni(ft.NONE,ft.NONE,ft.NONE),this.elt[1]=new ni(ft.NONE,ft.NONE,ft.NONE),this.elt[lt].setLocations(dt,_t,St)}}},{key:"toLineLabel",value:function(a){for(var o=new g(ft.NONE),d=0;d<2;d++)o.setLocation(d,a.getLocation(d));return o}}])})(),vr=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var g=new Array(this._pts.size()).fill(null),a=0;a<this._pts.size();a++)g[a]=this._pts.get(a);this._ring=this._geometryFactory.createLinearRing(g),this._isHole=ie.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(g){this._startDe=g;var a=g,o=!0;do{if(a===null)throw new _n("Found null DirectedEdge");if(a.getEdgeRing()===this)throw new _n("Directed Edge visited twice during ring-building at "+a.getCoordinate());this._edges.add(a);var d=a.getLabel();gt.isTrue(d.isArea()),this.mergeLabel(d),this.addPoints(a.getEdge(),a.isForward(),o),o=!1,this.setEdgeRing(a,this),a=this.getNext(a)}while(a!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(g){return this._pts.get(g)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var g=this._startDe;do{var a=g.getNode().getEdges().getOutgoingDegree(this);a>this._maxNodeDegree&&(this._maxNodeDegree=a),g=this.getNext(g)}while(g!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(g,a,o){var d=g.getCoordinates();if(a){var x=1;o&&(x=0);for(var C=x;C<d.length;C++)this._pts.add(d[C])}else{var I=d.length-2;o&&(I=d.length-1);for(var H=I;H>=0;H--)this._pts.add(d[H])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var g=this._startDe;do g.getEdge().setInResult(!0),g=g.getNext();while(g!==this._startDe)}},{key:"containsPoint",value:function(g){var a=this.getLinearRing();if(!a.getEnvelopeInternal().contains(g)||!ui.isInRing(g,a.getCoordinates()))return!1;for(var o=this._holes.iterator();o.hasNext();)if(o.next().containsPoint(g))return!1;return!0}},{key:"addHole",value:function(g){this._holes.add(g)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var g=arguments[0];this.mergeLabel(g,0),this.mergeLabel(g,1)}else if(arguments.length===2){var a=arguments[1],o=arguments[0].getLocation(a,At.RIGHT);if(o===ft.NONE)return null;if(this._label.getLocation(a)===ft.NONE)return this._label.setLocation(a,o),null}}},{key:"setShell",value:function(g){this._shell=g,g!==null&&g.addHole(this)}},{key:"toPolygon",value:function(g){for(var a=new Array(this._holes.size()).fill(null),o=0;o<this._holes.size();o++)a[o]=this._holes.get(o).getLinearRing();return g.createPolygon(this.getLinearRing(),a)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new $t,this._pts=new $t,this._label=new Fn(ft.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new $t,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var g=arguments[0],a=arguments[1];this._geometryFactory=a,this.computePoints(g),this.computeRing()}}}}])})(),ae=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"setEdgeRing",value:function(o,d){o.setMinEdgeRing(d)}},{key:"getNext",value:function(o){return o.getNextMin()}}],[{key:"constructor_",value:function(){var o=arguments[0],d=arguments[1];vr.constructor_.call(this,o,d)}}])})(vr),Ii=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"buildMinimalRings",value:function(){var o=new $t,d=this._startDe;do{if(d.getMinEdgeRing()===null){var x=new ae(d,this._geometryFactory);o.add(x)}d=d.getNext()}while(d!==this._startDe);return o}},{key:"setEdgeRing",value:function(o,d){o.setEdgeRing(d)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var o=this._startDe;do o.getNode().getEdges().linkMinimalDirectedEdges(this),o=o.getNext();while(o!==this._startDe)}},{key:"getNext",value:function(o){return o.getNext()}}],[{key:"constructor_",value:function(){var o=arguments[0],d=arguments[1];vr.constructor_.call(this,o,d)}}])})(vr),je=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"setVisited",value:function(g){this._isVisited=g}},{key:"setInResult",value:function(g){this._isInResult=g}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(g){this._label=g}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(g){this._isCovered=g,this._isCoveredSet=!0}},{key:"updateIM",value:function(g){gt.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(g)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var g=arguments[0];this._label=g}}}}])})(),ms=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"isIncidentEdgeInResult",value:function(){for(var o=this.getEdges().getEdges().iterator();o.hasNext();)if(o.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(o){o.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(o){}},{key:"computeMergedLocation",value:function(o,d){var x=ft.NONE;if(x=this._label.getLocation(d),!o.isNull(d)){var C=o.getLocation(d);x!==ft.BOUNDARY&&(x=C)}return x}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return B(a,"setLabel",this,1).apply(this,arguments);var o=arguments[0],d=arguments[1];this._label===null?this._label=new Fn(o,d):this._label.setLocation(o,d)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof a){var o=arguments[0];this.mergeLabel(o._label)}else if(arguments[0]instanceof Fn)for(var d=arguments[0],x=0;x<2;x++){var C=this.computeMergedLocation(d,x);this._label.getLocation(x)===ft.NONE&&this._label.setLocation(x,C)}}},{key:"add",value:function(o){this._edges.insert(o),o.setNode(this)}},{key:"setLabelBoundary",value:function(o){if(this._label===null)return null;var d=ft.NONE;this._label!==null&&(d=this._label.getLocation(o));var x=null;switch(d){case ft.BOUNDARY:x=ft.INTERIOR;break;case ft.INTERIOR:default:x=ft.BOUNDARY}this._label.setLocation(o,x)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var o=arguments[0],d=arguments[1];this._coord=o,this._edges=d,this._label=new Fn(0,ft.NONE)}}])})(je),$r=(function(g){function a(){return r(this,a),l(this,a,arguments)}return S(a,g),p(a)})(Or);function Li(g){return g==null?0:g.color}function be(g){return g==null?null:g.parent}function xn(g,a){g!==null&&(g.color=a)}function Ti(g){return g==null?null:g.left}function Rr(g){return g==null?null:g.right}var rn=(function(g){function a(){var o;return r(this,a),(o=l(this,a)).root_=null,o.size_=0,o}return S(a,g),p(a,[{key:"get",value:function(o){for(var d=this.root_;d!==null;){var x=o.compareTo(d.key);if(x<0)d=d.left;else{if(!(x>0))return d.value;d=d.right}}return null}},{key:"put",value:function(o,d){if(this.root_===null)return this.root_={key:o,value:d,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var x,C,I=this.root_;do if(x=I,(C=o.compareTo(I.key))<0)I=I.left;else{if(!(C>0)){var H=I.value;return I.value=d,H}I=I.right}while(I!==null);var lt={key:o,left:null,right:null,value:d,parent:x,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return C<0?x.left=lt:x.right=lt,this.fixAfterInsertion(lt),this.size_++,null}},{key:"fixAfterInsertion",value:function(o){var d;for(o.color=1;o!=null&&o!==this.root_&&o.parent.color===1;)be(o)===Ti(be(be(o)))?Li(d=Rr(be(be(o))))===1?(xn(be(o),0),xn(d,0),xn(be(be(o)),1),o=be(be(o))):(o===Rr(be(o))&&(o=be(o),this.rotateLeft(o)),xn(be(o),0),xn(be(be(o)),1),this.rotateRight(be(be(o)))):Li(d=Ti(be(be(o))))===1?(xn(be(o),0),xn(d,0),xn(be(be(o)),1),o=be(be(o))):(o===Ti(be(o))&&(o=be(o),this.rotateRight(o)),xn(be(o),0),xn(be(be(o)),1),this.rotateLeft(be(be(o))));this.root_.color=0}},{key:"values",value:function(){var o=new $t,d=this.getFirstEntry();if(d!==null)for(o.add(d.value);(d=a.successor(d))!==null;)o.add(d.value);return o}},{key:"entrySet",value:function(){var o=new Le,d=this.getFirstEntry();if(d!==null)for(o.add(d);(d=a.successor(d))!==null;)o.add(d);return o}},{key:"rotateLeft",value:function(o){if(o!=null){var d=o.right;o.right=d.left,d.left!=null&&(d.left.parent=o),d.parent=o.parent,o.parent==null?this.root_=d:o.parent.left===o?o.parent.left=d:o.parent.right=d,d.left=o,o.parent=d}}},{key:"rotateRight",value:function(o){if(o!=null){var d=o.left;o.left=d.right,d.right!=null&&(d.right.parent=o),d.parent=o.parent,o.parent==null?this.root_=d:o.parent.right===o?o.parent.right=d:o.parent.left=d,d.right=o,o.parent=d}}},{key:"getFirstEntry",value:function(){var o=this.root_;if(o!=null)for(;o.left!=null;)o=o.left;return o}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(o){for(var d=this.root_;d!==null;){var x=o.compareTo(d.key);if(x<0)d=d.left;else{if(!(x>0))return!0;d=d.right}}return!1}}],[{key:"successor",value:function(o){var d;if(o===null)return null;if(o.right!==null){for(d=o.right;d.left!==null;)d=d.left;return d}d=o.parent;for(var x=o;d!==null&&x===d.right;)x=d,d=d.parent;return d}}])})($r),yr=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"find",value:function(g){return this.nodeMap.get(g)}},{key:"addNode",value:function(){if(arguments[0]instanceof ht){var g=arguments[0],a=this.nodeMap.get(g);return a===null&&(a=this.nodeFact.createNode(g),this.nodeMap.put(g,a)),a}if(arguments[0]instanceof ms){var o=arguments[0],d=this.nodeMap.get(o.getCoordinate());return d===null?(this.nodeMap.put(o.getCoordinate(),o),o):(d.mergeLabel(o),d)}}},{key:"print",value:function(g){for(var a=this.iterator();a.hasNext();)a.next().print(g)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(g){for(var a=new $t,o=this.iterator();o.hasNext();){var d=o.next();d.getLabel().getLocation(g)===ft.BOUNDARY&&a.add(d)}return a}},{key:"add",value:function(g){var a=g.getCoordinate();this.addNode(a).add(g)}}],[{key:"constructor_",value:function(){this.nodeMap=new rn,this.nodeFact=null;var g=arguments[0];this.nodeFact=g}}])})(),Ln=(function(){function g(){r(this,g)}return p(g,null,[{key:"isNorthern",value:function(a){return a===g.NE||a===g.NW}},{key:"isOpposite",value:function(a,o){return a!==o&&(a-o+4)%4===2}},{key:"commonHalfPlane",value:function(a,o){if(a===o)return a;if((a-o+4)%4===2)return-1;var d=a<o?a:o;return d===0&&(a>o?a:o)===3?3:d}},{key:"isInHalfPlane",value:function(a,o){return o===g.SE?a===g.SE||a===g.SW:a===o||a===o+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var a=arguments[0],o=arguments[1];if(a===0&&o===0)throw new et("Cannot compute the quadrant for point ( "+a+", "+o+" )");return a>=0?o>=0?g.NE:g.SE:o>=0?g.NW:g.SW}if(arguments[0]instanceof ht&&arguments[1]instanceof ht){var d=arguments[0],x=arguments[1];if(x.x===d.x&&x.y===d.y)throw new et("Cannot compute the quadrant for two identical points "+d);return x.x>=d.x?x.y>=d.y?g.NE:g.SE:x.y>=d.y?g.NW:g.SW}}}])})();Ln.NE=0,Ln.NW=1,Ln.SW=2,Ln.SE=3;var vs=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"compareDirection",value:function(a){return this._dx===a._dx&&this._dy===a._dy?0:this._quadrant>a._quadrant?1:this._quadrant<a._quadrant?-1:ie.index(a._p0,a._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(a){this._node=a}},{key:"print",value:function(a){var o=Math.atan2(this._dy,this._dx),d=this.getClass().getName(),x=d.lastIndexOf("."),C=d.substring(x+1);a.print("  "+C+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+o+"   "+this._label)}},{key:"compareTo",value:function(a){var o=a;return this.compareDirection(o)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var a=Math.atan2(this._dy,this._dx),o=this.getClass().getName(),d=o.lastIndexOf(".");return"  "+o.substring(d+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+a+"   "+this._label}},{key:"computeLabel",value:function(a){}},{key:"init",value:function(a,o){this._p0=a,this._p1=o,this._dx=o.x-a.x,this._dy=o.y-a.y,this._quadrant=Ln.quadrant(this._dx,this._dy),gt.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var a=arguments[0];this._edge=a}else if(arguments.length===3){var o=arguments[0],d=arguments[1],x=arguments[2];g.constructor_.call(this,o,d,x,null)}else if(arguments.length===4){var C=arguments[0],I=arguments[1],H=arguments[2],lt=arguments[3];g.constructor_.call(this,C),this.init(I,H),this._label=lt}}}])})(),Ma=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(o){return this._depth[o]}},{key:"setVisited",value:function(o){this._isVisited=o}},{key:"computeDirectedLabel",value:function(){this._label=new Fn(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(o,d){if(this._depth[o]!==-999&&this._depth[o]!==d)throw new _n("assigned depths do not match",this.getCoordinate());this._depth[o]=d}},{key:"isInteriorAreaEdge",value:function(){for(var o=!0,d=0;d<2;d++)this._label.isArea(d)&&this._label.getLocation(d,At.LEFT)===ft.INTERIOR&&this._label.getLocation(d,At.RIGHT)===ft.INTERIOR||(o=!1);return o}},{key:"setNextMin",value:function(o){this._nextMin=o}},{key:"print",value:function(o){B(a,"print",this,1).call(this,o),o.print(" "+this._depth[At.LEFT]+"/"+this._depth[At.RIGHT]),o.print(" ("+this.getDepthDelta()+")"),this._isInResult&&o.print(" inResult")}},{key:"setMinEdgeRing",value:function(o){this._minEdgeRing=o}},{key:"isLineEdge",value:function(){var o=this._label.isLine(0)||this._label.isLine(1),d=!this._label.isArea(0)||this._label.allPositionsEqual(0,ft.EXTERIOR),x=!this._label.isArea(1)||this._label.allPositionsEqual(1,ft.EXTERIOR);return o&&d&&x}},{key:"setEdgeRing",value:function(o){this._edgeRing=o}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var o=this._edge.getDepthDelta();return this._isForward||(o=-o),o}},{key:"setInResult",value:function(o){this._isInResult=o}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(o){this.print(o),o.print(" "),this._isForward?this._edge.print(o):this._edge.printReverse(o)}},{key:"setSym",value:function(o){this._sym=o}},{key:"setVisitedEdge",value:function(o){this.setVisited(o),this._sym.setVisited(o)}},{key:"setEdgeDepths",value:function(o,d){var x=this.getEdge().getDepthDelta();this._isForward||(x=-x);var C=1;o===At.LEFT&&(C=-1);var I=At.opposite(o),H=d+x*C;this.setDepth(o,d),this.setDepth(I,H)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(o){this._next=o}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var o=arguments[0],d=arguments[1];if(vs.constructor_.call(this,o),this._isForward=d,d)this.init(o.getCoordinate(0),o.getCoordinate(1));else{var x=o.getNumPoints()-1;this.init(o.getCoordinate(x),o.getCoordinate(x-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(o,d){return o===ft.EXTERIOR&&d===ft.INTERIOR?1:o===ft.INTERIOR&&d===ft.EXTERIOR?-1:0}}])})(vs),qn=(function(){return p((function g(){r(this,g)}),[{key:"createNode",value:function(g){return new ms(g,null)}}])})(),Xi=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"printEdges",value:function(g){g.println("Edges:");for(var a=0;a<this._edges.size();a++){g.println("edge "+a+":");var o=this._edges.get(a);o.print(g),o.eiList.print(g)}}},{key:"find",value:function(g){return this._nodes.find(g)}},{key:"addNode",value:function(){if(arguments[0]instanceof ms){var g=arguments[0];return this._nodes.addNode(g)}if(arguments[0]instanceof ht){var a=arguments[0];return this._nodes.addNode(a)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var g=this._nodes.iterator();g.hasNext();)g.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(g){wi.out.println(g)}},{key:"isBoundaryNode",value:function(g,a){var o=this._nodes.find(a);if(o===null)return!1;var d=o.getLabel();return d!==null&&d.getLocation(g)===ft.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var g=this._nodes.iterator();g.hasNext();)g.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(g,a,o,d){return!!g.equals(o)&&ie.index(g,a,d)===ie.COLLINEAR&&Ln.quadrant(g,a)===Ln.quadrant(o,d)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(g){wi.out.print(g)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(g,a){for(var o=0;o<this._edges.size();o++){var d=this._edges.get(o),x=d.getCoordinates();if(this.matchInSameDirection(g,a,x[0],x[1])||this.matchInSameDirection(g,a,x[x.length-1],x[x.length-2]))return d}return null}},{key:"insertEdge",value:function(g){this._edges.add(g)}},{key:"findEdgeEnd",value:function(g){for(var a=this.getEdgeEnds().iterator();a.hasNext();){var o=a.next();if(o.getEdge()===g)return o}return null}},{key:"addEdges",value:function(g){for(var a=g.iterator();a.hasNext();){var o=a.next();this._edges.add(o);var d=new Ma(o,!0),x=new Ma(o,!1);d.setSym(x),x.setSym(d),this.add(d),this.add(x)}}},{key:"add",value:function(g){this._nodes.add(g),this._edgeEndList.add(g)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(g,a){for(var o=0;o<this._edges.size();o++){var d=this._edges.get(o),x=d.getCoordinates();if(g.equals(x[0])&&a.equals(x[1]))return d}return null}}],[{key:"constructor_",value:function(){if(this._edges=new $t,this._nodes=null,this._edgeEndList=new $t,arguments.length===0)this._nodes=new yr(new qn);else if(arguments.length===1){var g=arguments[0];this._nodes=new yr(g)}}},{key:"linkResultDirectedEdges",value:function(g){for(var a=g.iterator();a.hasNext();)a.next().getEdges().linkResultDirectedEdges()}}])})(),Na=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"sortShellsAndHoles",value:function(a,o,d){for(var x=a.iterator();x.hasNext();){var C=x.next();C.isHole()?d.add(C):o.add(C)}}},{key:"computePolygons",value:function(a){for(var o=new $t,d=a.iterator();d.hasNext();){var x=d.next().toPolygon(this._geometryFactory);o.add(x)}return o}},{key:"placeFreeHoles",value:function(a,o){for(var d=o.iterator();d.hasNext();){var x=d.next();if(x.getShell()===null){var C=g.findEdgeRingContaining(x,a);if(C===null)throw new _n("unable to assign hole to a shell",x.getCoordinate(0));x.setShell(C)}}}},{key:"buildMinimalEdgeRings",value:function(a,o,d){for(var x=new $t,C=a.iterator();C.hasNext();){var I=C.next();if(I.getMaxNodeDegree()>2){I.linkDirectedEdgesForMinimalEdgeRings();var H=I.buildMinimalRings(),lt=this.findShell(H);lt!==null?(this.placePolygonHoles(lt,H),o.add(lt)):d.addAll(H)}else x.add(I)}return x}},{key:"buildMaximalEdgeRings",value:function(a){for(var o=new $t,d=a.iterator();d.hasNext();){var x=d.next();if(x.isInResult()&&x.getLabel().isArea()&&x.getEdgeRing()===null){var C=new Ii(x,this._geometryFactory);o.add(C),C.setInResult()}}return o}},{key:"placePolygonHoles",value:function(a,o){for(var d=o.iterator();d.hasNext();){var x=d.next();x.isHole()&&x.setShell(a)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(a){for(var o=0,d=null,x=a.iterator();x.hasNext();){var C=x.next();C.isHole()||(d=C,o++)}return gt.isTrue(o<=1,"found two shells in MinimalEdgeRing list"),d}},{key:"add",value:function(){if(arguments.length===1){var a=arguments[0];this.add(a.getEdgeEnds(),a.getNodes())}else if(arguments.length===2){var o=arguments[0],d=arguments[1];Xi.linkResultDirectedEdges(d);var x=this.buildMaximalEdgeRings(o),C=new $t,I=this.buildMinimalEdgeRings(x,this._shellList,C);this.sortShellsAndHoles(I,this._shellList,C),this.placeFreeHoles(this._shellList,C)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new $t;var a=arguments[0];this._geometryFactory=a}},{key:"findEdgeRingContaining",value:function(a,o){for(var d=a.getLinearRing(),x=d.getEnvelopeInternal(),C=d.getCoordinateN(0),I=null,H=null,lt=o.iterator();lt.hasNext();){var dt=lt.next(),_t=dt.getLinearRing(),St=_t.getEnvelopeInternal();if(!St.equals(x)&&St.contains(x)){C=$e.ptNotInList(d.getCoordinates(),_t.getCoordinates());var jt=!1;ui.isInRing(C,_t.getCoordinates())&&(jt=!0),jt&&(I===null||H.contains(St))&&(H=(I=dt).getLinearRing().getEnvelopeInternal())}}return I}}])})(),ts=(function(){return p((function g(){r(this,g)}),[{key:"getBounds",value:function(){}}])})(),de=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[ts,A]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var g=arguments[0],a=arguments[1];this._bounds=g,this._item=a}}])})(),ys=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"poll",value:function(){if(this.isEmpty())return null;var g=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),g}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(g){for(var a=null,o=this._items.get(g);2*g<=this._size&&((a=2*g)!==this._size&&this._items.get(a+1).compareTo(this._items.get(a))<0&&a++,this._items.get(a).compareTo(o)<0);g=a)this._items.set(g,this._items.get(a));this._items.set(g,o)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(g){this._items.add(null),this._size+=1;var a=this._size;for(this._items.set(0,g);g.compareTo(this._items.get(Math.trunc(a/2)))<0;a/=2)this._items.set(a,this._items.get(Math.trunc(a/2)));this._items.set(a,g)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new $t,this._items.add(null)}}])})(),pi=(function(){return p((function g(){r(this,g)}),[{key:"insert",value:function(g,a){}},{key:"remove",value:function(g,a){}},{key:"query",value:function(){}}])})(),En=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(g){gt.isTrue(this._bounds===null),this._childBoundables.add(g)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[ts,A]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new $t,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var g=arguments[0];this._level=g}}}}])})(),Vi={reverseOrder:function(){return{compare:function(g,a){return a.compareTo(g)}}},min:function(g){return Vi.sort(g),g.get(0)},sort:function(g,a){var o=g.toArray();a?An.sort(o,a):An.sort(o);for(var d=g.iterator(),x=0,C=o.length;x<C;x++)d.next(),d.set(o[x])},singletonList:function(g){var a=new $t;return a.add(g),a}},Wo=(function(){function g(){r(this,g)}return p(g,null,[{key:"maxDistance",value:function(a,o,d,x,C,I,H,lt){var dt=g.distance(a,o,C,I);return dt=Math.max(dt,g.distance(a,o,H,lt)),dt=Math.max(dt,g.distance(d,x,C,I)),dt=Math.max(dt,g.distance(d,x,H,lt))}},{key:"distance",value:function(a,o,d,x){var C=d-a,I=x-o;return Math.sqrt(C*C+I*I)}},{key:"maximumDistance",value:function(a,o){var d=Math.min(a.getMinX(),o.getMinX()),x=Math.min(a.getMinY(),o.getMinY()),C=Math.max(a.getMaxX(),o.getMaxX()),I=Math.max(a.getMaxY(),o.getMaxY());return g.distance(d,x,C,I)}},{key:"minMaxDistance",value:function(a,o){var d=a.getMinX(),x=a.getMinY(),C=a.getMaxX(),I=a.getMaxY(),H=o.getMinX(),lt=o.getMinY(),dt=o.getMaxX(),_t=o.getMaxY(),St=g.maxDistance(d,x,d,I,H,lt,H,_t);return St=Math.min(St,g.maxDistance(d,x,d,I,H,lt,dt,lt)),St=Math.min(St,g.maxDistance(d,x,d,I,dt,_t,H,_t)),St=Math.min(St,g.maxDistance(d,x,d,I,dt,_t,dt,lt)),St=Math.min(St,g.maxDistance(d,x,C,x,H,lt,H,_t)),St=Math.min(St,g.maxDistance(d,x,C,x,H,lt,dt,lt)),St=Math.min(St,g.maxDistance(d,x,C,x,dt,_t,H,_t)),St=Math.min(St,g.maxDistance(d,x,C,x,dt,_t,dt,lt)),St=Math.min(St,g.maxDistance(C,I,d,I,H,lt,H,_t)),St=Math.min(St,g.maxDistance(C,I,d,I,H,lt,dt,lt)),St=Math.min(St,g.maxDistance(C,I,d,I,dt,_t,H,_t)),St=Math.min(St,g.maxDistance(C,I,d,I,dt,_t,dt,lt)),St=Math.min(St,g.maxDistance(C,I,C,x,H,lt,H,_t)),St=Math.min(St,g.maxDistance(C,I,C,x,H,lt,dt,lt)),St=Math.min(St,g.maxDistance(C,I,C,x,dt,_t,H,_t)),St=Math.min(St,g.maxDistance(C,I,C,x,dt,_t,dt,lt))}}])})(),Pr=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"maximumDistance",value:function(){return Wo.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(a,o){var d=g.isComposite(this._boundable1),x=g.isComposite(this._boundable2);if(d&&x)return g.area(this._boundable1)>g.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,a,o),null):(this.expand(this._boundable2,this._boundable1,!0,a,o),null);if(d)return this.expand(this._boundable1,this._boundable2,!1,a,o),null;if(x)return this.expand(this._boundable2,this._boundable1,!0,a,o),null;throw new et("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(g.isComposite(this._boundable1)||g.isComposite(this._boundable2))}},{key:"compareTo",value:function(a){var o=a;return this._distance<o._distance?-1:this._distance>o._distance?1:0}},{key:"expand",value:function(a,o,d,x,C){for(var I=a.getChildBoundables().iterator();I.hasNext();){var H=I.next(),lt=null;(lt=d?new g(o,H,this._itemDistance):new g(H,o,this._itemDistance)).getDistance()<C&&x.add(lt)}}},{key:"getBoundable",value:function(a){return a===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var a=arguments[0],o=arguments[1],d=arguments[2];this._boundable1=a,this._boundable2=o,this._itemDistance=d,this._distance=this.distance()}},{key:"area",value:function(a){return a.getBounds().getArea()}},{key:"isComposite",value:function(a){return a instanceof En}}])})(),Jo=(function(){return p((function g(){r(this,g)}),[{key:"visitItem",value:function(g){}}])})(),es=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"queryInternal",value:function(){if(Yt(arguments[2],Jo)&&arguments[0]instanceof Object&&arguments[1]instanceof En)for(var a=arguments[0],o=arguments[2],d=arguments[1].getChildBoundables(),x=0;x<d.size();x++){var C=d.get(x);this.getIntersectsOp().intersects(C.getBounds(),a)&&(C instanceof En?this.queryInternal(a,C,o):C instanceof de?o.visitItem(C.getItem()):gt.shouldNeverReachHere())}else if(Yt(arguments[2],pn)&&arguments[0]instanceof Object&&arguments[1]instanceof En)for(var I=arguments[0],H=arguments[2],lt=arguments[1].getChildBoundables(),dt=0;dt<lt.size();dt++){var _t=lt.get(dt);this.getIntersectsOp().intersects(_t.getBounds(),I)&&(_t instanceof En?this.queryInternal(I,_t,H):_t instanceof de?H.add(_t.getItem()):gt.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(a){return a.get(a.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var a=0,o=arguments[0].getChildBoundables().iterator();o.hasNext();){var d=o.next();d instanceof En?a+=this.size(d):d instanceof de&&(a+=1)}return a}}},{key:"removeItem",value:function(a,o){for(var d=null,x=a.getChildBoundables().iterator();x.hasNext();){var C=x.next();C instanceof de&&C.getItem()===o&&(d=C)}return d!==null&&(a.getChildBoundables().remove(d),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var a=this.itemsTree(this._root);return a===null?new $t:a}if(arguments.length===1){for(var o=arguments[0],d=new $t,x=o.getChildBoundables().iterator();x.hasNext();){var C=x.next();if(C instanceof En){var I=this.itemsTree(C);I!==null&&d.add(I)}else C instanceof de?d.add(C.getItem()):gt.shouldNeverReachHere()}return d.size()<=0?null:d}}},{key:"insert",value:function(a,o){gt.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new de(a,o))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var a=arguments[0],o=new $t;return this.boundablesAtLevel(a,this._root,o),o}if(arguments.length===3){var d=arguments[0],x=arguments[1],C=arguments[2];if(gt.isTrue(d>-2),x.getLevel()===d)return C.add(x),null;for(var I=x.getChildBoundables().iterator();I.hasNext();){var H=I.next();H instanceof En?this.boundablesAtLevel(d,H,C):(gt.isTrue(H instanceof de),d===-1&&C.add(H))}return null}}},{key:"query",value:function(){if(arguments.length===1){var a=arguments[0];this.build();var o=new $t;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),a)&&this.queryInternal(a,this._root,o),o}if(arguments.length===2){var d=arguments[0],x=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),d)&&this.queryInternal(d,this._root,x)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var a=arguments[0],o=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),a)&&this.remove(a,this._root,o)}if(arguments.length===3){var d=arguments[0],x=arguments[1],C=arguments[2],I=this.removeItem(x,C);if(I)return!0;for(var H=null,lt=x.getChildBoundables().iterator();lt.hasNext();){var dt=lt.next();if(this.getIntersectsOp().intersects(dt.getBounds(),d)&&dt instanceof En&&(I=this.remove(d,dt,C))){H=dt;break}}return H!==null&&H.getChildBoundables().isEmpty()&&x.getChildBoundables().remove(H),I}}},{key:"createHigherLevels",value:function(a,o){gt.isTrue(!a.isEmpty());var d=this.createParentBoundables(a,o+1);return d.size()===1?d.get(0):this.createHigherLevels(d,o+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var a=0,o=arguments[0].getChildBoundables().iterator();o.hasNext();){var d=o.next();if(d instanceof En){var x=this.depth(d);x>a&&(a=x)}}return a+1}}},{key:"createParentBoundables",value:function(a,o){gt.isTrue(!a.isEmpty());var d=new $t;d.add(this.createNode(o));var x=new $t(a);Vi.sort(x,this.getComparator());for(var C=x.iterator();C.hasNext();){var I=C.next();this.lastNode(d).getChildBoundables().size()===this.getNodeCapacity()&&d.add(this.createNode(o)),this.lastNode(d).addChildBoundable(I)}return d}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[A]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new $t,this._nodeCapacity=null,arguments.length===0)g.constructor_.call(this,g.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var a=arguments[0];gt.isTrue(a>1,"Node capacity must be greater than 1"),this._nodeCapacity=a}}},{key:"compareDoubles",value:function(a,o){return a>o?1:a<o?-1:0}}])})();es.IntersectsOp=function(){},es.DEFAULT_NODE_CAPACITY=10;var yo=(function(){return p((function g(){r(this,g)}),[{key:"distance",value:function(g,a){}}])})(),Qi=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"createParentBoundablesFromVerticalSlices",value:function(o,d){gt.isTrue(o.length>0);for(var x=new $t,C=0;C<o.length;C++)x.addAll(this.createParentBoundablesFromVerticalSlice(o[C],d));return x}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var o=arguments[0],d=arguments[1];return this.nearestNeighbourK(o,J.POSITIVE_INFINITY,d)}if(arguments.length===3){var x=arguments[0],C=arguments[2],I=arguments[1],H=new ys;H.add(x);for(var lt=new ys;!H.isEmpty()&&I>=0;){var dt=H.poll(),_t=dt.getDistance();if(_t>=I)break;dt.isLeaves()?lt.size()<C?lt.add(dt):(lt.peek().getDistance()>_t&&(lt.poll(),lt.add(dt)),I=lt.peek().getDistance()):dt.expandToQueue(H,I)}return a.getItems(lt)}}},{key:"createNode",value:function(o){return new Oa(o)}},{key:"size",value:function(){return arguments.length===0?B(a,"size",this,1).call(this):B(a,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof It))return B(a,"insert",this,1).apply(this,arguments);var o=arguments[0],d=arguments[1];if(o.isNull())return null;B(a,"insert",this,1).call(this,o,d)}},{key:"getIntersectsOp",value:function(){return a.intersectsOp}},{key:"verticalSlices",value:function(o,d){for(var x=Math.trunc(Math.ceil(o.size()/d)),C=new Array(d).fill(null),I=o.iterator(),H=0;H<d;H++){C[H]=new $t;for(var lt=0;I.hasNext()&&lt<x;){var dt=I.next();C[H].add(dt),lt++}}return C}},{key:"query",value:function(){if(arguments.length===1){var o=arguments[0];return B(a,"query",this,1).call(this,o)}if(arguments.length===2){var d=arguments[0],x=arguments[1];B(a,"query",this,1).call(this,d,x)}}},{key:"getComparator",value:function(){return a.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(o,d){return B(a,"createParentBoundables",this,1).call(this,o,d)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof It){var o=arguments[0],d=arguments[1];return B(a,"remove",this,1).call(this,o,d)}return B(a,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?B(a,"depth",this,1).call(this):B(a,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(o,d){gt.isTrue(!o.isEmpty());var x=Math.trunc(Math.ceil(o.size()/this.getNodeCapacity())),C=new $t(o);Vi.sort(C,a.xComparator);var I=this.verticalSlices(C,Math.trunc(Math.ceil(Math.sqrt(x))));return this.createParentBoundablesFromVerticalSlices(I,d)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(Yt(arguments[0],yo)){var o=arguments[0];if(this.isEmpty())return null;var d=new Pr(this.getRoot(),this.getRoot(),o);return this.nearestNeighbour(d)}if(arguments[0]instanceof Pr){var x=arguments[0],C=J.POSITIVE_INFINITY,I=null,H=new ys;for(H.add(x);!H.isEmpty()&&C>0;){var lt=H.poll(),dt=lt.getDistance();if(dt>=C)break;lt.isLeaves()?(C=dt,I=lt):lt.expandToQueue(H,C)}return I===null?null:[I.getBoundable(0).getItem(),I.getBoundable(1).getItem()]}}else{if(arguments.length===2){var _t=arguments[0],St=arguments[1];if(this.isEmpty()||_t.isEmpty())return null;var jt=new Pr(this.getRoot(),_t.getRoot(),St);return this.nearestNeighbour(jt)}if(arguments.length===3){var qt=arguments[2],Qt=new de(arguments[0],arguments[1]),ee=new Pr(this.getRoot(),Qt,qt);return this.nearestNeighbour(ee)[0]}if(arguments.length===4){var Te=arguments[2],pe=arguments[3],qe=new de(arguments[0],arguments[1]),sn=new Pr(this.getRoot(),qe,Te);return this.nearestNeighbourK(sn,pe)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var o=arguments[0],d=arguments[1],x=J.POSITIVE_INFINITY,C=new ys;for(C.add(o);!C.isEmpty();){var I=C.poll(),H=I.getDistance();if(H>d)return!1;if(I.maximumDistance()<=d)return!0;if(I.isLeaves()){if((x=H)<=d)return!0}else I.expandToQueue(C,x)}return!1}if(arguments.length===3){var lt=arguments[0],dt=arguments[1],_t=arguments[2],St=new Pr(this.getRoot(),lt.getRoot(),dt);return this.isWithinDistance(St,_t)}}},{key:"interfaces_",get:function(){return[pi,A]}}],[{key:"constructor_",value:function(){if(arguments.length===0)a.constructor_.call(this,a.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var o=arguments[0];es.constructor_.call(this,o)}}},{key:"centreX",value:function(o){return a.avg(o.getMinX(),o.getMaxX())}},{key:"avg",value:function(o,d){return(o+d)/2}},{key:"getItems",value:function(o){for(var d=new Array(o.size()).fill(null),x=0;!o.isEmpty();){var C=o.poll();d[x]=C.getBoundable(0).getItem(),x++}return d}},{key:"centreY",value:function(o){return a.avg(o.getMinY(),o.getMaxY())}}])})(es),Oa=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"computeBounds",value:function(){for(var o=null,d=this.getChildBoundables().iterator();d.hasNext();){var x=d.next();o===null?o=new It(x.getBounds()):o.expandToInclude(x.getBounds())}return o}}],[{key:"constructor_",value:function(){var o=arguments[0];En.constructor_.call(this,o)}}])})(En);Qi.STRtreeNode=Oa,Qi.xComparator=new((function(){return p((function g(){r(this,g)}),[{key:"interfaces_",get:function(){return[U]}},{key:"compare",value:function(g,a){return es.compareDoubles(Qi.centreX(g.getBounds()),Qi.centreX(a.getBounds()))}}])})()),Qi.yComparator=new((function(){return p((function g(){r(this,g)}),[{key:"interfaces_",get:function(){return[U]}},{key:"compare",value:function(g,a){return es.compareDoubles(Qi.centreY(g.getBounds()),Qi.centreY(a.getBounds()))}}])})()),Qi.intersectsOp=new((function(){return p((function g(){r(this,g)}),[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(g,a){return g.intersects(a)}}])})()),Qi.DEFAULT_NODE_CAPACITY=10;var Wl=(function(){function g(){r(this,g)}return p(g,null,[{key:"relativeSign",value:function(a,o){return a<o?-1:a>o?1:0}},{key:"compare",value:function(a,o,d){if(o.equals2D(d))return 0;var x=g.relativeSign(o.x,d.x),C=g.relativeSign(o.y,d.y);switch(a){case 0:return g.compareValue(x,C);case 1:return g.compareValue(C,x);case 2:return g.compareValue(C,-x);case 3:return g.compareValue(-x,C);case 4:return g.compareValue(-x,-C);case 5:return g.compareValue(-C,-x);case 6:return g.compareValue(-C,x);case 7:return g.compareValue(x,-C)}return gt.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(a,o){return a<0?-1:a>0?1:o<0?-1:o>0?1:0}}])})(),Wi=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(g){g.print(this.coord),g.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(g){var a=g;return this.segmentIndex<a.segmentIndex?-1:this.segmentIndex>a.segmentIndex?1:this.coord.equals2D(a.coord)?0:this._isInterior?a._isInterior?Wl.compare(this._segmentOctant,this.coord,a.coord):1:-1}},{key:"isEndPoint",value:function(g){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===g}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var g=arguments[0],a=arguments[1],o=arguments[2],d=arguments[3];this._segString=g,this.coord=new ht(a),this.segmentIndex=o,this._segmentOctant=d,this._isInterior=!a.equals2D(g.getCoordinate(o))}}])})(),Jl=(function(){return p((function g(){r(this,g)}),[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])})(),_o=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"getSplitCoordinates",value:function(){var g=new Wr;this.addEndpoints();for(var a=this.iterator(),o=a.next();a.hasNext();){var d=a.next();this.addEdgeCoordinates(o,d,g),o=d}return g.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var g=new $t;this.findCollapsesFromInsertedNodes(g),this.findCollapsesFromExistingVertices(g);for(var a=g.iterator();a.hasNext();){var o=a.next().intValue();this.add(this._edge.getCoordinate(o),o)}}},{key:"createSplitEdgePts",value:function(g,a){var o=a.segmentIndex-g.segmentIndex+2;if(o===2)return[new ht(g.coord),new ht(a.coord)];var d=this._edge.getCoordinate(a.segmentIndex),x=a.isInterior()||!a.coord.equals2D(d);x||o--;var C=new Array(o).fill(null),I=0;C[I++]=new ht(g.coord);for(var H=g.segmentIndex+1;H<=a.segmentIndex;H++)C[I++]=this._edge.getCoordinate(H);return x&&(C[I]=new ht(a.coord)),C}},{key:"print",value:function(g){g.println("Intersections:");for(var a=this.iterator();a.hasNext();)a.next().print(g)}},{key:"findCollapsesFromExistingVertices",value:function(g){for(var a=0;a<this._edge.size()-2;a++){var o=this._edge.getCoordinate(a);this._edge.getCoordinate(a+1);var d=this._edge.getCoordinate(a+2);o.equals2D(d)&&g.add(Re.valueOf(a+1))}}},{key:"addEdgeCoordinates",value:function(g,a,o){var d=this.createSplitEdgePts(g,a);o.add(d,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(g){this.addEndpoints(),this.addCollapsedNodes();for(var a=this.iterator(),o=a.next();a.hasNext();){var d=a.next(),x=this.createSplitEdge(o,d);g.add(x),o=d}}},{key:"findCollapseIndex",value:function(g,a,o){if(!g.coord.equals2D(a.coord))return!1;var d=a.segmentIndex-g.segmentIndex;return a.isInterior()||d--,d===1&&(o[0]=g.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(g){for(var a=new Array(1).fill(null),o=this.iterator(),d=o.next();o.hasNext();){var x=o.next();this.findCollapseIndex(d,x,a)&&g.add(Re.valueOf(a[0])),d=x}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var g=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(g),g)}},{key:"createSplitEdge",value:function(g,a){var o=this.createSplitEdgePts(g,a);return new _r(o,this._edge.getData())}},{key:"add",value:function(g,a){var o=new Wi(this._edge,g,a,this._edge.getSegmentOctant(a)),d=this._nodeMap.get(o);return d!==null?(gt.isTrue(d.coord.equals2D(g),"Found equal nodes with different coordinates"),d):(this._nodeMap.put(o,o),o)}},{key:"checkSplitEdgesCorrectness",value:function(g){var a=this._edge.getCoordinates(),o=g.get(0).getCoordinate(0);if(!o.equals2D(a[0]))throw new K("bad split edge start point at "+o);var d=g.get(g.size()-1).getCoordinates(),x=d[d.length-1];if(!x.equals2D(a[a.length-1]))throw new K("bad split edge end point at "+x)}}],[{key:"constructor_",value:function(){this._nodeMap=new rn,this._edge=null;var g=arguments[0];this._edge=g}}])})(),zr=(function(){function g(){r(this,g)}return p(g,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var a=arguments[0],o=arguments[1];if(a===0&&o===0)throw new et("Cannot compute the octant for point ( "+a+", "+o+" )");var d=Math.abs(a),x=Math.abs(o);return a>=0?o>=0?d>=x?0:1:d>=x?7:6:o>=0?d>=x?3:2:d>=x?4:5}if(arguments[0]instanceof ht&&arguments[1]instanceof ht){var C=arguments[0],I=arguments[1],H=I.x-C.x,lt=I.y-C.y;if(H===0&&lt===0)throw new et("Cannot compute the octant for two identical points "+C);return g.octant(H,lt)}}}])})(),Ko=(function(){return p((function g(){r(this,g)}),[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(g){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(g){}},{key:"getData",value:function(){}}])})(),$o=(function(){return p((function g(){r(this,g)}),[{key:"addIntersection",value:function(g,a){}},{key:"interfaces_",get:function(){return[Ko]}}])})(),_r=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(a){return this._pts[a]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(a){return a===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(a),this.getCoordinate(a+1))}},{key:"setData",value:function(a){this._data=a}},{key:"safeOctant",value:function(a,o){return a.equals2D(o)?0:zr.octant(a,o)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var a=arguments[0],o=arguments[1];this.addIntersectionNode(a,o)}else if(arguments.length===4){var d=arguments[1],x=arguments[3],C=new ht(arguments[0].getIntersection(x));this.addIntersection(C,d)}}},{key:"toString",value:function(){return Kr.toLineString(new dn(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(a,o){var d=o,x=d+1;if(x<this._pts.length){var C=this._pts[x];a.equals2D(C)&&(d=x)}return this._nodeList.add(a,d)}},{key:"addIntersections",value:function(a,o,d){for(var x=0;x<a.getIntersectionNum();x++)this.addIntersection(a,o,d,x)}},{key:"interfaces_",get:function(){return[$o]}}],[{key:"constructor_",value:function(){this._nodeList=new _o(this),this._pts=null,this._data=null;var a=arguments[0],o=arguments[1];this._pts=a,this._data=o}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var a=arguments[0],o=new $t;return g.getNodedSubstrings(a,o),o}if(arguments.length===2)for(var d=arguments[1],x=arguments[0].iterator();x.hasNext();)x.next().getNodeList().addSplitEdges(d)}}])})(),ii=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof g){var a=arguments[0],o=ie.index(this.p0,this.p1,a.p0),d=ie.index(this.p0,this.p1,a.p1);return o>=0&&d>=0||o<=0&&d<=0?Math.max(o,d):0}if(arguments[0]instanceof ht){var x=arguments[0];return ie.index(this.p0,this.p1,x)}}},{key:"toGeometry",value:function(a){return a.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(a){if(!(a instanceof g))return!1;var o=a;return this.p0.equals(o.p0)&&this.p1.equals(o.p1)}},{key:"intersection",value:function(a){var o=new mr;return o.computeIntersection(this.p0,this.p1,a.p0,a.p1),o.hasIntersection()?o.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof ht){var a=arguments[0];if(a.equals(this.p0)||a.equals(this.p1))return new ht(a);var o=this.projectionFactor(a),d=new ht;return d.x=this.p0.x+o*(this.p1.x-this.p0.x),d.y=this.p0.y+o*(this.p1.y-this.p0.y),d}if(arguments[0]instanceof g){var x=arguments[0],C=this.projectionFactor(x.p0),I=this.projectionFactor(x.p1);if(C>=1&&I>=1||C<=0&&I<=0)return null;var H=this.project(x.p0);C<0&&(H=this.p0),C>1&&(H=this.p1);var lt=this.project(x.p1);return I<0&&(lt=this.p0),I>1&&(lt=this.p1),new g(H,lt)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(a){return a===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(a){return li.pointToLinePerpendicular(a,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return g.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(a){if(a.equals(this.p0))return 0;if(a.equals(this.p1))return 1;var o=this.p1.x-this.p0.x,d=this.p1.y-this.p0.y,x=o*o+d*d;return x<=0?J.NaN:((a.x-this.p0.x)*o+(a.y-this.p0.y)*d)/x}},{key:"closestPoints",value:function(a){var o=this.intersection(a);if(o!==null)return[o,o];var d=new Array(2).fill(null),x=J.MAX_VALUE,C=null,I=this.closestPoint(a.p0);x=I.distance(a.p0),d[0]=I,d[1]=a.p0;var H=this.closestPoint(a.p1);(C=H.distance(a.p1))<x&&(x=C,d[0]=H,d[1]=a.p1);var lt=a.closestPoint(this.p0);(C=lt.distance(this.p0))<x&&(x=C,d[0]=this.p0,d[1]=lt);var dt=a.closestPoint(this.p1);return(C=dt.distance(this.p1))<x&&(x=C,d[0]=this.p1,d[1]=dt),d}},{key:"closestPoint",value:function(a){var o=this.projectionFactor(a);return o>0&&o<1?this.project(a):this.p0.distance(a)<this.p1.distance(a)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(a){var o=a,d=this.p0.compareTo(o.p0);return d!==0?d:this.p1.compareTo(o.p1)}},{key:"reverse",value:function(){var a=this.p0;this.p0=this.p1,this.p1=a}},{key:"equalsTopo",value:function(a){return this.p0.equals(a.p0)&&this.p1.equals(a.p1)||this.p0.equals(a.p1)&&this.p1.equals(a.p0)}},{key:"lineIntersection",value:function(a){return ho.intersection(this.p0,this.p1,a.p0,a.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(a,o){var d=this.p0.x+a*(this.p1.x-this.p0.x),x=this.p0.y+a*(this.p1.y-this.p0.y),C=this.p1.x-this.p0.x,I=this.p1.y-this.p0.y,H=Math.sqrt(C*C+I*I),lt=0,dt=0;if(o!==0){if(H<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");lt=o*C/H,dt=o*I/H}return new ht(d-dt,x+lt)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var a=arguments[0];this.setCoordinates(a.p0,a.p1)}else if(arguments.length===2){var o=arguments[0],d=arguments[1];this.p0.x=o.x,this.p0.y=o.y,this.p1.x=d.x,this.p1.y=d.y}}},{key:"segmentFraction",value:function(a){var o=this.projectionFactor(a);return o<0?o=0:(o>1||J.isNaN(o))&&(o=1),o}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(a){var o=this.p1.getY()-this.p0.getY(),d=this.p0.getX()-this.p1.getX(),x=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),C=o*o+d*d,I=o*o-d*d,H=a.getX(),lt=a.getY();return new ht((-I*H-2*o*d*lt-2*o*x)/C,(I*lt-2*o*d*H-2*d*x)/C)}},{key:"distance",value:function(){if(arguments[0]instanceof g){var a=arguments[0];return li.segmentToSegment(this.p0,this.p1,a.p0,a.p1)}if(arguments[0]instanceof ht){var o=arguments[0];return li.pointToSegment(o,this.p0,this.p1)}}},{key:"pointAlong",value:function(a){var o=new ht;return o.x=this.p0.x+a*(this.p1.x-this.p0.x),o.y=this.p0.y+a*(this.p1.y-this.p0.y),o}},{key:"hashCode",value:function(){var a=J.doubleToLongBits(this.p0.x);a^=31*J.doubleToLongBits(this.p0.y);var o=Math.trunc(a)^Math.trunc(a>>32),d=J.doubleToLongBits(this.p1.x);return d^=31*J.doubleToLongBits(this.p1.y),o^(Math.trunc(d)^Math.trunc(d>>32))}},{key:"interfaces_",get:function(){return[W,A]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)g.constructor_.call(this,new ht,new ht);else if(arguments.length===1){var a=arguments[0];g.constructor_.call(this,a.p0,a.p1)}else if(arguments.length===2){var o=arguments[0],d=arguments[1];this.p0=o,this.p1=d}else if(arguments.length===4){var x=arguments[0],C=arguments[1],I=arguments[2],H=arguments[3];g.constructor_.call(this,new ht(x,C),new ht(I,H))}}},{key:"midPoint",value:function(a,o){return new ht((a.x+o.x)/2,(a.y+o.y)/2)}}])})(),tl=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var g=arguments[1],a=arguments[2],o=arguments[3];arguments[0].getLineSegment(g,this._overlapSeg1),a.getLineSegment(o,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new ii,this._overlapSeg2=new ii}}])})(),xo=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"getLineSegment",value:function(g,a){a.p0=this._pts[g],a.p1=this._pts[g+1]}},{key:"computeSelect",value:function(g,a,o,d){var x=this._pts[a],C=this._pts[o];if(o-a==1)return d.select(this,a),null;if(!g.intersects(x,C))return null;var I=Math.trunc((a+o)/2);a<I&&this.computeSelect(g,a,I,d),I<o&&this.computeSelect(g,I,o,d)}},{key:"getCoordinates",value:function(){for(var g=new Array(this._end-this._start+1).fill(null),a=0,o=this._start;o<=this._end;o++)g[a++]=this._pts[o];return g}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var g=arguments[0],a=arguments[1];this.computeOverlaps(this._start,this._end,g,g._start,g._end,a)}else if(arguments.length===6){var o=arguments[0],d=arguments[1],x=arguments[2],C=arguments[3],I=arguments[4],H=arguments[5];if(d-o==1&&I-C==1)return H.overlap(this,o,x,C),null;if(!this.overlaps(o,d,x,C,I))return null;var lt=Math.trunc((o+d)/2),dt=Math.trunc((C+I)/2);o<lt&&(C<dt&&this.computeOverlaps(o,lt,x,C,dt,H),dt<I&&this.computeOverlaps(o,lt,x,dt,I,H)),lt<d&&(C<dt&&this.computeOverlaps(lt,d,x,C,dt,H),dt<I&&this.computeOverlaps(lt,d,x,dt,I,H))}}},{key:"setId",value:function(g){this._id=g}},{key:"select",value:function(g,a){this.computeSelect(g,this._start,this._end,a)}},{key:"getEnvelope",value:function(){if(this._env===null){var g=this._pts[this._start],a=this._pts[this._end];this._env=new It(g,a)}return this._env}},{key:"overlaps",value:function(g,a,o,d,x){return It.intersects(this._pts[g],this._pts[a],o._pts[d],o._pts[x])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var g=arguments[0],a=arguments[1],o=arguments[2],d=arguments[3];this._pts=g,this._start=a,this._end=o,this._context=d}}])})(),Kl=(function(){function g(){r(this,g)}return p(g,null,[{key:"findChainEnd",value:function(a,o){for(var d=o;d<a.length-1&&a[d].equals2D(a[d+1]);)d++;if(d>=a.length-1)return a.length-1;for(var x=Ln.quadrant(a[d],a[d+1]),C=o+1;C<a.length&&!(!a[C-1].equals2D(a[C])&&Ln.quadrant(a[C-1],a[C])!==x);)C++;return C-1}},{key:"getChains",value:function(){if(arguments.length===1){var a=arguments[0];return g.getChains(a,null)}if(arguments.length===2){var o=arguments[0],d=arguments[1],x=new $t,C=0;do{var I=g.findChainEnd(o,C),H=new xo(o,C,I,d);x.add(H),C=I}while(C<o.length-1);return x}}}])})(),Aa=(function(){return p((function g(){r(this,g)}),[{key:"computeNodes",value:function(g){}},{key:"getNodedSubstrings",value:function(){}}])})(),Da=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"setSegmentIntersector",value:function(g){this._segInt=g}},{key:"interfaces_",get:function(){return[Aa]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var g=arguments[0];this.setSegmentIntersector(g)}}}}])})(),Eo=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return _r.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(o){for(var d=Kl.getChains(o.getCoordinates(),o).iterator();d.hasNext();){var x=d.next();x.setId(this._idCounter++),this._index.insert(x.getEnvelope(),x),this._monoChains.add(x)}}},{key:"computeNodes",value:function(o){this._nodedSegStrings=o;for(var d=o.iterator();d.hasNext();)this.add(d.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var o=new wo(this._segInt),d=this._monoChains.iterator();d.hasNext();)for(var x=d.next(),C=this._index.query(x.getEnvelope()).iterator();C.hasNext();){var I=C.next();if(I.getId()>x.getId()&&(x.computeOverlaps(I,o),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new $t,this._index=new Qi,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var o=arguments[0];Da.constructor_.call(this,o)}}}}])})(Da),wo=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"overlap",value:function(){if(arguments.length!==4)return B(a,"overlap",this,1).apply(this,arguments);var o=arguments[1],d=arguments[2],x=arguments[3],C=arguments[0].getContext(),I=d.getContext();this._si.processIntersections(C,o,I,x)}}],[{key:"constructor_",value:function(){this._si=null;var o=arguments[0];this._si=o}}])})(tl);Eo.SegmentOverlapAction=wo;var Ci=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"isDeletable",value:function(a,o,d,x){var C=this._inputLine[a],I=this._inputLine[o],H=this._inputLine[d];return!!this.isConcave(C,I,H)&&!!this.isShallow(C,I,H,x)&&this.isShallowSampled(C,I,a,d,x)}},{key:"deleteShallowConcavities",value:function(){for(var a=1,o=this.findNextNonDeletedIndex(a),d=this.findNextNonDeletedIndex(o),x=!1;d<this._inputLine.length;){var C=!1;this.isDeletable(a,o,d,this._distanceTol)&&(this._isDeleted[o]=g.DELETE,C=!0,x=!0),a=C?d:o,o=this.findNextNonDeletedIndex(a),d=this.findNextNonDeletedIndex(o)}return x}},{key:"isShallowConcavity",value:function(a,o,d,x){return ie.index(a,o,d)===this._angleOrientation&&li.pointToSegment(o,a,d)<x}},{key:"isShallowSampled",value:function(a,o,d,x,C){var I=Math.trunc((x-d)/g.NUM_PTS_TO_CHECK);I<=0&&(I=1);for(var H=d;H<x;H+=I)if(!this.isShallow(a,o,this._inputLine[H],C))return!1;return!0}},{key:"isConcave",value:function(a,o,d){var x=ie.index(a,o,d)===this._angleOrientation;return x}},{key:"simplify",value:function(a){this._distanceTol=Math.abs(a),a<0&&(this._angleOrientation=ie.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var o=!1;do o=this.deleteShallowConcavities();while(o);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(a){for(var o=a+1;o<this._inputLine.length&&this._isDeleted[o]===g.DELETE;)o++;return o}},{key:"isShallow",value:function(a,o,d,x){return li.pointToSegment(o,a,d)<x}},{key:"collapseLine",value:function(){for(var a=new Wr,o=0;o<this._inputLine.length;o++)this._isDeleted[o]!==g.DELETE&&a.add(this._inputLine[o]);return a.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ie.COUNTERCLOCKWISE;var a=arguments[0];this._inputLine=a}},{key:"simplify",value:function(a,o){return new g(a).simplify(o)}}])})();Ci.INIT=0,Ci.DELETE=1,Ci.KEEP=1,Ci.NUM_PTS_TO_CHECK=10;var Fs=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"getCoordinates",value:function(){return this._ptList.toArray(g.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(a){this._precisionModel=a}},{key:"addPt",value:function(a){var o=new ht(a);if(this._precisionModel.makePrecise(o),this.isRedundant(o))return null;this._ptList.add(o)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(a,o){if(o)for(var d=0;d<a.length;d++)this.addPt(a[d]);else for(var x=a.length-1;x>=0;x--)this.addPt(a[x])}},{key:"isRedundant",value:function(a){if(this._ptList.size()<1)return!1;var o=this._ptList.get(this._ptList.size()-1);return a.distance(o)<this._minimimVertexDistance}},{key:"toString",value:function(){return new Yi().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var a=new ht(this._ptList.get(0)),o=this._ptList.get(this._ptList.size()-1);if(a.equals(o))return null;this._ptList.add(a)}},{key:"setMinimumVertexDistance",value:function(a){this._minimimVertexDistance=a}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new $t}}])})();Fs.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Tn=(function(){function g(){r(this,g)}return p(g,null,[{key:"toDegrees",value:function(a){return 180*a/Math.PI}},{key:"normalize",value:function(a){for(;a>Math.PI;)a-=g.PI_TIMES_2;for(;a<=-Math.PI;)a+=g.PI_TIMES_2;return a}},{key:"angle",value:function(){if(arguments.length===1){var a=arguments[0];return Math.atan2(a.y,a.x)}if(arguments.length===2){var o=arguments[0],d=arguments[1],x=d.x-o.x,C=d.y-o.y;return Math.atan2(C,x)}}},{key:"isAcute",value:function(a,o,d){var x=a.x-o.x,C=a.y-o.y;return x*(d.x-o.x)+C*(d.y-o.y)>0}},{key:"isObtuse",value:function(a,o,d){var x=a.x-o.x,C=a.y-o.y;return x*(d.x-o.x)+C*(d.y-o.y)<0}},{key:"interiorAngle",value:function(a,o,d){var x=g.angle(o,a),C=g.angle(o,d);return Math.abs(C-x)}},{key:"normalizePositive",value:function(a){if(a<0){for(;a<0;)a+=g.PI_TIMES_2;a>=g.PI_TIMES_2&&(a=0)}else{for(;a>=g.PI_TIMES_2;)a-=g.PI_TIMES_2;a<0&&(a=0)}return a}},{key:"angleBetween",value:function(a,o,d){var x=g.angle(o,a),C=g.angle(o,d);return g.diff(x,C)}},{key:"diff",value:function(a,o){var d=null;return(d=a<o?o-a:a-o)>Math.PI&&(d=2*Math.PI-d),d}},{key:"toRadians",value:function(a){return a*Math.PI/180}},{key:"getTurn",value:function(a,o){var d=Math.sin(o-a);return d>0?g.COUNTERCLOCKWISE:d<0?g.CLOCKWISE:g.NONE}},{key:"angleBetweenOriented",value:function(a,o,d){var x=g.angle(o,a),C=g.angle(o,d)-x;return C<=-Math.PI?C+g.PI_TIMES_2:C>Math.PI?C-g.PI_TIMES_2:C}}])})();Tn.PI_TIMES_2=2*Math.PI,Tn.PI_OVER_2=Math.PI/2,Tn.PI_OVER_4=Math.PI/4,Tn.COUNTERCLOCKWISE=ie.COUNTERCLOCKWISE,Tn.CLOCKWISE=ie.CLOCKWISE,Tn.NONE=ie.COLLINEAR;var qs=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"addNextSegment",value:function(a,o){if(this._s0=this._s1,this._s1=this._s2,this._s2=a,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var d=ie.index(this._s0,this._s1,this._s2),x=d===ie.CLOCKWISE&&this._side===At.LEFT||d===ie.COUNTERCLOCKWISE&&this._side===At.RIGHT;d===0?this.addCollinear(o):x?this.addOutsideTurn(d,o):this.addInsideTurn(d,o)}},{key:"addLineEndCap",value:function(a,o){var d=new ii(a,o),x=new ii;this.computeOffsetSegment(d,At.LEFT,this._distance,x);var C=new ii;this.computeOffsetSegment(d,At.RIGHT,this._distance,C);var I=o.x-a.x,H=o.y-a.y,lt=Math.atan2(H,I);switch(this._bufParams.getEndCapStyle()){case Y.CAP_ROUND:this._segList.addPt(x.p1),this.addDirectedFillet(o,lt+Math.PI/2,lt-Math.PI/2,ie.CLOCKWISE,this._distance),this._segList.addPt(C.p1);break;case Y.CAP_FLAT:this._segList.addPt(x.p1),this._segList.addPt(C.p1);break;case Y.CAP_SQUARE:var dt=new ht;dt.x=Math.abs(this._distance)*Math.cos(lt),dt.y=Math.abs(this._distance)*Math.sin(lt);var _t=new ht(x.p1.x+dt.x,x.p1.y+dt.y),St=new ht(C.p1.x+dt.x,C.p1.y+dt.y);this._segList.addPt(_t),this._segList.addPt(St)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(a,o,d,x){var C=ho.intersection(o.p0,o.p1,d.p0,d.p1);if(C!==null&&(x<=0?1:C.distance(a)/Math.abs(x))<=this._bufParams.getMitreLimit())return this._segList.addPt(C),null;this.addLimitedMitreJoin(o,d,x,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(a,o){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*g.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Y.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Y.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(o&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,a,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(a){this._segList.addPt(new ht(a.x+this._distance,a.y+this._distance)),this._segList.addPt(new ht(a.x+this._distance,a.y-this._distance)),this._segList.addPt(new ht(a.x-this._distance,a.y-this._distance)),this._segList.addPt(new ht(a.x-this._distance,a.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(a,o){this._segList.addPts(a,o)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(a,o,d,x,C){var I=o.x-a.x,H=o.y-a.y,lt=Math.atan2(H,I),dt=d.x-a.x,_t=d.y-a.y,St=Math.atan2(_t,dt);x===ie.CLOCKWISE?lt<=St&&(lt+=2*Math.PI):lt>=St&&(lt-=2*Math.PI),this._segList.addPt(o),this.addDirectedFillet(a,lt,St,x,C),this._segList.addPt(d)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(a,o,d){this._s1=a,this._s2=o,this._side=d,this._seg1.setCoordinates(a,o),this.computeOffsetSegment(this._seg1,d,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(a,o,d,x){var C=this._seg0.p1,I=Tn.angle(C,this._seg0.p0),H=Tn.angleBetweenOriented(this._seg0.p0,C,this._seg1.p1)/2,lt=Tn.normalize(I+H),dt=Tn.normalize(lt+Math.PI),_t=x*d,St=d-_t*Math.abs(Math.sin(H)),jt=C.x+_t*Math.cos(dt),qt=C.y+_t*Math.sin(dt),Qt=new ht(jt,qt),ee=new ii(C,Qt),Te=ee.pointAlongOffset(1,St),pe=ee.pointAlongOffset(1,-St);this._side===At.LEFT?(this._segList.addPt(Te),this._segList.addPt(pe)):(this._segList.addPt(pe),this._segList.addPt(Te))}},{key:"addDirectedFillet",value:function(a,o,d,x,C){var I=x===ie.CLOCKWISE?-1:1,H=Math.abs(o-d),lt=Math.trunc(H/this._filletAngleQuantum+.5);if(lt<1)return null;for(var dt=H/lt,_t=new ht,St=0;St<lt;St++){var jt=o+I*St*dt;_t.x=a.x+C*Math.cos(jt),_t.y=a.y+C*Math.sin(jt),this._segList.addPt(_t)}}},{key:"computeOffsetSegment",value:function(a,o,d,x){var C=o===At.LEFT?1:-1,I=a.p1.x-a.p0.x,H=a.p1.y-a.p0.y,lt=Math.sqrt(I*I+H*H),dt=C*d*I/lt,_t=C*d*H/lt;x.p0.x=a.p0.x-_t,x.p0.y=a.p0.y+dt,x.p1.x=a.p1.x-_t,x.p1.y=a.p1.y+dt}},{key:"addInsideTurn",value:function(a,o){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*g.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var d=new ht((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(d);var x=new ht((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(x)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(a){var o=new ht(a.x+this._distance,a.y);this._segList.addPt(o),this.addDirectedFillet(a,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(a,o){this._segList.addPt(a.p1),this._segList.addPt(o.p0)}},{key:"init",value:function(a){this._distance=a,this._maxCurveSegmentError=a*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Fs,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(a*g.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(a){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Y.JOIN_BEVEL||this._bufParams.getJoinStyle()===Y.JOIN_MITRE?(a&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,ie.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ii,this._seg1=new ii,this._offset0=new ii,this._offset1=new ii,this._side=0,this._hasNarrowConcaveAngle=!1;var a=arguments[0],o=arguments[1],d=arguments[2];this._precisionModel=a,this._bufParams=o,this._li=new mr,this._filletAngleQuantum=Math.PI/2/o.getQuadrantSegments(),o.getQuadrantSegments()>=8&&o.getJoinStyle()===Y.JOIN_ROUND&&(this._closingSegLengthFactor=g.MAX_CLOSING_SEG_LEN_FACTOR),this.init(d)}}])})();qs.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,qs.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,qs.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,qs.MAX_CLOSING_SEG_LEN_FACTOR=80;var Gs=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"getOffsetCurve",value:function(a,o){if(this._distance=o,o===0)return null;var d=o<0,x=Math.abs(o),C=this.getSegGen(x);a.length<=1?this.computePointCurve(a[0],C):this.computeOffsetCurve(a,d,C);var I=C.getCoordinates();return d&&$e.reverse(I),I}},{key:"computeSingleSidedBufferCurve",value:function(a,o,d){var x=this.simplifyTolerance(this._distance);if(o){d.addSegments(a,!0);var C=Ci.simplify(a,-x),I=C.length-1;d.initSideSegments(C[I],C[I-1],At.LEFT),d.addFirstSegment();for(var H=I-2;H>=0;H--)d.addNextSegment(C[H],!0)}else{d.addSegments(a,!1);var lt=Ci.simplify(a,x),dt=lt.length-1;d.initSideSegments(lt[0],lt[1],At.LEFT),d.addFirstSegment();for(var _t=2;_t<=dt;_t++)d.addNextSegment(lt[_t],!0)}d.addLastSegment(),d.closeRing()}},{key:"computeRingBufferCurve",value:function(a,o,d){var x=this.simplifyTolerance(this._distance);o===At.RIGHT&&(x=-x);var C=Ci.simplify(a,x),I=C.length-1;d.initSideSegments(C[I-1],C[0],o);for(var H=1;H<=I;H++){var lt=H!==1;d.addNextSegment(C[H],lt)}d.closeRing()}},{key:"computeLineBufferCurve",value:function(a,o){var d=this.simplifyTolerance(this._distance),x=Ci.simplify(a,d),C=x.length-1;o.initSideSegments(x[0],x[1],At.LEFT);for(var I=2;I<=C;I++)o.addNextSegment(x[I],!0);o.addLastSegment(),o.addLineEndCap(x[C-1],x[C]);var H=Ci.simplify(a,-d),lt=H.length-1;o.initSideSegments(H[lt],H[lt-1],At.LEFT);for(var dt=lt-2;dt>=0;dt--)o.addNextSegment(H[dt],!0);o.addLastSegment(),o.addLineEndCap(H[1],H[0]),o.closeRing()}},{key:"computePointCurve",value:function(a,o){switch(this._bufParams.getEndCapStyle()){case Y.CAP_ROUND:o.createCircle(a);break;case Y.CAP_SQUARE:o.createSquare(a)}}},{key:"getLineCurve",value:function(a,o){if(this._distance=o,this.isLineOffsetEmpty(o))return null;var d=Math.abs(o),x=this.getSegGen(d);if(a.length<=1)this.computePointCurve(a[0],x);else if(this._bufParams.isSingleSided()){var C=o<0;this.computeSingleSidedBufferCurve(a,C,x)}else this.computeLineBufferCurve(a,x);return x.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(a){return a*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(a,o,d){if(this._distance=d,a.length<=2)return this.getLineCurve(a,d);if(d===0)return g.copyCoordinates(a);var x=this.getSegGen(d);return this.computeRingBufferCurve(a,o,x),x.getCoordinates()}},{key:"computeOffsetCurve",value:function(a,o,d){var x=this.simplifyTolerance(this._distance);if(o){var C=Ci.simplify(a,-x),I=C.length-1;d.initSideSegments(C[I],C[I-1],At.LEFT),d.addFirstSegment();for(var H=I-2;H>=0;H--)d.addNextSegment(C[H],!0)}else{var lt=Ci.simplify(a,x),dt=lt.length-1;d.initSideSegments(lt[0],lt[1],At.LEFT),d.addFirstSegment();for(var _t=2;_t<=dt;_t++)d.addNextSegment(lt[_t],!0)}d.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(a){return a===0||a<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(a){return new qs(this._precisionModel,this._bufParams,a)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var a=arguments[0],o=arguments[1];this._precisionModel=a,this._bufParams=o}},{key:"copyCoordinates",value:function(a){for(var o=new Array(a.length).fill(null),d=0;d<o.length;d++)o[d]=new ht(a[d]);return o}}])})(),mi=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var g=arguments[0],a=new $t,o=this._subgraphs.iterator();o.hasNext();){var d=o.next(),x=d.getEnvelope();g.y<x.getMinY()||g.y>x.getMaxY()||this.findStabbedSegments(g,d.getDirectedEdges(),a)}return a}if(arguments.length===3){if(Yt(arguments[2],pn)&&arguments[0]instanceof ht&&arguments[1]instanceof Ma){for(var C=arguments[0],I=arguments[1],H=arguments[2],lt=I.getEdge().getCoordinates(),dt=0;dt<lt.length-1;dt++)if(this._seg.p0=lt[dt],this._seg.p1=lt[dt+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<C.x||this._seg.isHorizontal()||C.y<this._seg.p0.y||C.y>this._seg.p1.y||ie.index(this._seg.p0,this._seg.p1,C)===ie.RIGHT)){var _t=I.getDepth(At.LEFT);this._seg.p0.equals(lt[dt])||(_t=I.getDepth(At.RIGHT));var St=new Hs(this._seg,_t);H.add(St)}}else if(Yt(arguments[2],pn)&&arguments[0]instanceof ht&&Yt(arguments[1],pn))for(var jt=arguments[0],qt=arguments[2],Qt=arguments[1].iterator();Qt.hasNext();){var ee=Qt.next();ee.isForward()&&this.findStabbedSegments(jt,ee,qt)}}}},{key:"getDepth",value:function(g){var a=this.findStabbedSegments(g);return a.size()===0?0:Vi.min(a)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new ii;var g=arguments[0];this._subgraphs=g}}])})(),Hs=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"compareTo",value:function(g){var a=g;if(this._upwardSeg.minX()>=a._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=a._upwardSeg.minX())return-1;var o=this._upwardSeg.orientationIndex(a._upwardSeg);return o!==0||(o=-1*a._upwardSeg.orientationIndex(this._upwardSeg))!==0?o:this._upwardSeg.compareTo(a._upwardSeg)}},{key:"compareX",value:function(g,a){var o=g.p0.compareTo(a.p0);return o!==0?o:g.p1.compareTo(a.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var g=arguments[0],a=arguments[1];this._upwardSeg=new ii(g),this._leftDepth=a}}])})();mi.DepthSegment=Hs;var ns=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,null,[{key:"constructor_",value:function(){V.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])})(V),So=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"getY",value:function(){var a=this.y/this.w;if(J.isNaN(a)||J.isInfinite(a))throw new ns;return a}},{key:"getX",value:function(){var a=this.x/this.w;if(J.isNaN(a)||J.isInfinite(a))throw new ns;return a}},{key:"getCoordinate",value:function(){var a=new ht;return a.x=this.getX(),a.y=this.getY(),a}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var a=arguments[0];this.x=a.x,this.y=a.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var o=arguments[0],d=arguments[1];this.x=o,this.y=d,this.w=1}else if(arguments[0]instanceof g&&arguments[1]instanceof g){var x=arguments[0],C=arguments[1];this.x=x.y*C.w-C.y*x.w,this.y=C.x*x.w-x.x*C.w,this.w=x.x*C.y-C.x*x.y}else if(arguments[0]instanceof ht&&arguments[1]instanceof ht){var I=arguments[0],H=arguments[1];this.x=I.y-H.y,this.y=H.x-I.x,this.w=I.x*H.y-H.x*I.y}}else if(arguments.length===3){var lt=arguments[0],dt=arguments[1],_t=arguments[2];this.x=lt,this.y=dt,this.w=_t}else if(arguments.length===4){var St=arguments[0],jt=arguments[1],qt=arguments[2],Qt=arguments[3],ee=St.y-jt.y,Te=jt.x-St.x,pe=St.x*jt.y-jt.x*St.y,qe=qt.y-Qt.y,sn=Qt.x-qt.x,We=qt.x*Qt.y-Qt.x*qt.y;this.x=Te*We-sn*pe,this.y=qe*pe-ee*We,this.w=ee*sn-qe*Te}}}])})(),Ia=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"area",value:function(){return g.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return g.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(a){if(a===null)throw new et("Supplied point is null.");return g.interpolateZ(a,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return g.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return g.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return g.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return g.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return g.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return g.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var a=arguments[0],o=arguments[1],d=arguments[2];this.p0=a,this.p1=o,this.p2=d}},{key:"area",value:function(a,o,d){return Math.abs(((d.x-a.x)*(o.y-a.y)-(o.x-a.x)*(d.y-a.y))/2)}},{key:"signedArea",value:function(a,o,d){return((d.x-a.x)*(o.y-a.y)-(o.x-a.x)*(d.y-a.y))/2}},{key:"det",value:function(a,o,d,x){return a*x-o*d}},{key:"interpolateZ",value:function(a,o,d,x){var C=o.x,I=o.y,H=d.x-C,lt=x.x-C,dt=d.y-I,_t=x.y-I,St=H*_t-lt*dt,jt=a.x-C,qt=a.y-I,Qt=(_t*jt-lt*qt)/St,ee=(-dt*jt+H*qt)/St;return o.getZ()+Qt*(d.getZ()-o.getZ())+ee*(x.getZ()-o.getZ())}},{key:"longestSideLength",value:function(a,o,d){var x=a.distance(o),C=o.distance(d),I=d.distance(a),H=x;return C>H&&(H=C),I>H&&(H=I),H}},{key:"circumcentreDD",value:function(a,o,d){var x=Vt.valueOf(a.x).subtract(d.x),C=Vt.valueOf(a.y).subtract(d.y),I=Vt.valueOf(o.x).subtract(d.x),H=Vt.valueOf(o.y).subtract(d.y),lt=Vt.determinant(x,C,I,H).multiply(2),dt=x.sqr().add(C.sqr()),_t=I.sqr().add(H.sqr()),St=Vt.determinant(C,dt,H,_t),jt=Vt.determinant(x,dt,I,_t),qt=Vt.valueOf(d.x).subtract(St.divide(lt)).doubleValue(),Qt=Vt.valueOf(d.y).add(jt.divide(lt)).doubleValue();return new ht(qt,Qt)}},{key:"isAcute",value:function(a,o,d){return!!Tn.isAcute(a,o,d)&&!!Tn.isAcute(o,d,a)&&!!Tn.isAcute(d,a,o)}},{key:"circumcentre",value:function(a,o,d){var x=d.x,C=d.y,I=a.x-x,H=a.y-C,lt=o.x-x,dt=o.y-C,_t=2*g.det(I,H,lt,dt),St=g.det(H,I*I+H*H,dt,lt*lt+dt*dt),jt=g.det(I,I*I+H*H,lt,lt*lt+dt*dt);return new ht(x-St/_t,C+jt/_t)}},{key:"perpendicularBisector",value:function(a,o){var d=o.x-a.x,x=o.y-a.y,C=new So(a.x+d/2,a.y+x/2,1),I=new So(a.x-x+d/2,a.y+d+x/2,1);return new So(C,I)}},{key:"angleBisector",value:function(a,o,d){var x=o.distance(a),C=x/(x+o.distance(d)),I=d.x-a.x,H=d.y-a.y;return new ht(a.x+C*I,a.y+C*H)}},{key:"area3D",value:function(a,o,d){var x=o.x-a.x,C=o.y-a.y,I=o.getZ()-a.getZ(),H=d.x-a.x,lt=d.y-a.y,dt=d.getZ()-a.getZ(),_t=C*dt-I*lt,St=I*H-x*dt,jt=x*lt-C*H,qt=_t*_t+St*St+jt*jt,Qt=Math.sqrt(qt)/2;return Qt}},{key:"centroid",value:function(a,o,d){var x=(a.x+o.x+d.x)/3,C=(a.y+o.y+d.y)/3;return new ht(x,C)}},{key:"inCentre",value:function(a,o,d){var x=o.distance(d),C=a.distance(d),I=a.distance(o),H=x+C+I,lt=(x*a.x+C*o.x+I*d.x)/H,dt=(x*a.y+C*o.y+I*d.y)/H;return new ht(lt,dt)}}])})(),Ra=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"addRingSide",value:function(g,a,o,d,x){if(a===0&&g.length<Si.MINIMUM_VALID_SIZE)return null;var C=d,I=x;g.length>=Si.MINIMUM_VALID_SIZE&&ie.isCCW(g)&&(C=x,I=d,o=At.opposite(o));var H=this._curveBuilder.getRingCurve(g,o,a);this.addCurve(H,C,I)}},{key:"addRingBothSides",value:function(g,a){this.addRingSide(g,a,At.LEFT,ft.EXTERIOR,ft.INTERIOR),this.addRingSide(g,a,At.RIGHT,ft.INTERIOR,ft.EXTERIOR)}},{key:"addPoint",value:function(g){if(this._distance<=0)return null;var a=g.getCoordinates(),o=this._curveBuilder.getLineCurve(a,this._distance);this.addCurve(o,ft.EXTERIOR,ft.INTERIOR)}},{key:"addPolygon",value:function(g){var a=this._distance,o=At.LEFT;this._distance<0&&(a=-this._distance,o=At.RIGHT);var d=g.getExteriorRing(),x=$e.removeRepeatedPoints(d.getCoordinates());if(this._distance<0&&this.isErodedCompletely(d,this._distance)||this._distance<=0&&x.length<3)return null;this.addRingSide(x,a,o,ft.EXTERIOR,ft.INTERIOR);for(var C=0;C<g.getNumInteriorRing();C++){var I=g.getInteriorRingN(C),H=$e.removeRepeatedPoints(I.getCoordinates());this._distance>0&&this.isErodedCompletely(I,-this._distance)||this.addRingSide(H,a,At.opposite(o),ft.INTERIOR,ft.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(g,a){var o=new Ia(g[0],g[1],g[2]),d=o.inCentre();return li.pointToSegment(d,o.p0,o.p1)<Math.abs(a)}},{key:"addLineString",value:function(g){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var a=$e.removeRepeatedPoints(g.getCoordinates());if($e.isRing(a)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(a,this._distance);else{var o=this._curveBuilder.getLineCurve(a,this._distance);this.addCurve(o,ft.EXTERIOR,ft.INTERIOR)}}},{key:"addCurve",value:function(g,a,o){if(g===null||g.length<2)return null;var d=new _r(g,new Fn(0,ft.BOUNDARY,a,o));this._curveList.add(d)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(g){if(g.isEmpty())return null;if(g instanceof ds)this.addPolygon(g);else if(g instanceof zs)this.addLineString(g);else if(g instanceof Sa)this.addPoint(g);else if(g instanceof fr)this.addCollection(g);else if(g instanceof Bs)this.addCollection(g);else if(g instanceof Ta)this.addCollection(g);else{if(!(g instanceof Ue))throw new Bt(g.getGeometryType());this.addCollection(g)}}},{key:"isErodedCompletely",value:function(g,a){var o=g.getCoordinates();if(o.length<4)return a<0;if(o.length===4)return this.isTriangleErodedCompletely(o,a);var d=g.getEnvelopeInternal(),x=Math.min(d.getHeight(),d.getWidth());return a<0&&2*Math.abs(a)>x}},{key:"addCollection",value:function(g){for(var a=0;a<g.getNumGeometries();a++){var o=g.getGeometryN(a);this.add(o)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new $t;var g=arguments[0],a=arguments[1],o=arguments[2];this._inputGeom=g,this._distance=a,this._curveBuilder=o}}])})(),el=(function(){return p((function g(){r(this,g)}),[{key:"locate",value:function(g){}}])})(),nl=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,g.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Zt;var a=this._parent.getGeometryN(this._index++);return a instanceof Ue?(this._subcollectionIterator=new g(a),this._subcollectionIterator.next()):a}},{key:"remove",value:function(){throw new Bt(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[Jl]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var a=arguments[0];this._parent=a,this._atStart=!0,this._index=0,this._max=a.getNumGeometries()}},{key:"isAtomic",value:function(a){return!(a instanceof Ue)}}])})(),bo=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"locate",value:function(a){return g.locate(a,this._geom)}},{key:"interfaces_",get:function(){return[el]}}],[{key:"constructor_",value:function(){this._geom=null;var a=arguments[0];this._geom=a}},{key:"locatePointInPolygon",value:function(a,o){if(o.isEmpty())return ft.EXTERIOR;var d=o.getExteriorRing(),x=g.locatePointInRing(a,d);if(x!==ft.INTERIOR)return x;for(var C=0;C<o.getNumInteriorRing();C++){var I=o.getInteriorRingN(C),H=g.locatePointInRing(a,I);if(H===ft.BOUNDARY)return ft.BOUNDARY;if(H===ft.INTERIOR)return ft.EXTERIOR}return ft.INTERIOR}},{key:"locatePointInRing",value:function(a,o){return o.getEnvelopeInternal().intersects(a)?ui.locateInRing(a,o.getCoordinates()):ft.EXTERIOR}},{key:"containsPointInPolygon",value:function(a,o){return ft.EXTERIOR!==g.locatePointInPolygon(a,o)}},{key:"locateInGeometry",value:function(a,o){if(o instanceof ds)return g.locatePointInPolygon(a,o);if(o instanceof Ue)for(var d=new nl(o);d.hasNext();){var x=d.next();if(x!==o){var C=g.locateInGeometry(a,x);if(C!==ft.EXTERIOR)return C}}return ft.EXTERIOR}},{key:"isContained",value:function(a,o){return ft.EXTERIOR!==g.locate(a,o)}},{key:"locate",value:function(a,o){return o.isEmpty()?ft.EXTERIOR:o.getEnvelopeInternal().intersects(a)?g.locateInGeometry(a,o):ft.EXTERIOR}}])})(),_s=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"getNextCW",value:function(g){this.getEdges();var a=this._edgeList.indexOf(g),o=a-1;return a===0&&(o=this._edgeList.size()-1),this._edgeList.get(o)}},{key:"propagateSideLabels",value:function(g){for(var a=ft.NONE,o=this.iterator();o.hasNext();){var d=o.next().getLabel();d.isArea(g)&&d.getLocation(g,At.LEFT)!==ft.NONE&&(a=d.getLocation(g,At.LEFT))}if(a===ft.NONE)return null;for(var x=a,C=this.iterator();C.hasNext();){var I=C.next(),H=I.getLabel();if(H.getLocation(g,At.ON)===ft.NONE&&H.setLocation(g,At.ON,x),H.isArea(g)){var lt=H.getLocation(g,At.LEFT),dt=H.getLocation(g,At.RIGHT);if(dt!==ft.NONE){if(dt!==x)throw new _n("side location conflict",I.getCoordinate());lt===ft.NONE&&gt.shouldNeverReachHere("found single null side (at "+I.getCoordinate()+")"),x=lt}else gt.isTrue(H.getLocation(g,At.LEFT)===ft.NONE,"found single null side"),H.setLocation(g,At.RIGHT,x),H.setLocation(g,At.LEFT,x)}}}},{key:"getCoordinate",value:function(){var g=this.iterator();return g.hasNext()?g.next().getCoordinate():null}},{key:"print",value:function(g){wi.out.println("EdgeEndStar:   "+this.getCoordinate());for(var a=this.iterator();a.hasNext();)a.next().print(g)}},{key:"isAreaLabelsConsistent",value:function(g){return this.computeEdgeEndLabels(g.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(g){var a=this.getEdges();if(a.size()<=0)return!0;var o=a.size()-1,d=a.get(o).getLabel().getLocation(g,At.LEFT);gt.isTrue(d!==ft.NONE,"Found unlabelled area edge");for(var x=d,C=this.iterator();C.hasNext();){var I=C.next().getLabel();gt.isTrue(I.isArea(g),"Found non-area edge");var H=I.getLocation(g,At.LEFT),lt=I.getLocation(g,At.RIGHT);if(H===lt||lt!==x)return!1;x=H}return!0}},{key:"findIndex",value:function(g){this.iterator();for(var a=0;a<this._edgeList.size();a++)if(this._edgeList.get(a)===g)return a;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new $t(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(g,a,o){return this._ptInAreaLocation[g]===ft.NONE&&(this._ptInAreaLocation[g]=bo.locate(a,o[g].getGeometry())),this._ptInAreaLocation[g]}},{key:"toString",value:function(){var g=new bn;g.append("EdgeEndStar:   "+this.getCoordinate()),g.append(`
`);for(var a=this.iterator();a.hasNext();){var o=a.next();g.append(o),g.append(`
`)}return g.toString()}},{key:"computeEdgeEndLabels",value:function(g){for(var a=this.iterator();a.hasNext();)a.next().computeLabel(g)}},{key:"computeLabelling",value:function(g){this.computeEdgeEndLabels(g[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var a=[!1,!1],o=this.iterator();o.hasNext();)for(var d=o.next().getLabel(),x=0;x<2;x++)d.isLine(x)&&d.getLocation(x)===ft.BOUNDARY&&(a[x]=!0);for(var C=this.iterator();C.hasNext();)for(var I=C.next(),H=I.getLabel(),lt=0;lt<2;lt++)if(H.isAnyNull(lt)){var dt=ft.NONE;if(a[lt])dt=ft.EXTERIOR;else{var _t=I.getCoordinate();dt=this.getLocation(lt,_t,g)}H.setAllLocationsIfNull(lt,dt)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(g,a){this._edgeMap.put(g,a),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new rn,this._edgeList=null,this._ptInAreaLocation=[ft.NONE,ft.NONE]}}])})(),Ri=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var o=null,d=null,x=this._SCANNING_FOR_INCOMING,C=0;C<this._resultAreaEdgeList.size();C++){var I=this._resultAreaEdgeList.get(C),H=I.getSym();if(I.getLabel().isArea())switch(o===null&&I.isInResult()&&(o=I),x){case this._SCANNING_FOR_INCOMING:if(!H.isInResult())continue;d=H,x=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!I.isInResult())continue;d.setNext(I),x=this._SCANNING_FOR_INCOMING}}if(x===this._LINKING_TO_OUTGOING){if(o===null)throw new _n("no outgoing dirEdge found",this.getCoordinate());gt.isTrue(o.isInResult(),"unable to link last incoming dirEdge"),d.setNext(o)}}},{key:"insert",value:function(o){var d=o;this.insertEdgeEnd(d,d)}},{key:"getRightmostEdge",value:function(){var o=this.getEdges(),d=o.size();if(d<1)return null;var x=o.get(0);if(d===1)return x;var C=o.get(d-1),I=x.getQuadrant(),H=C.getQuadrant();return Ln.isNorthern(I)&&Ln.isNorthern(H)?x:Ln.isNorthern(I)||Ln.isNorthern(H)?x.getDy()!==0?x:C.getDy()!==0?C:(gt.shouldNeverReachHere("found two horizontal edges incident on node"),null):C}},{key:"print",value:function(o){wi.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var d=this.iterator();d.hasNext();){var x=d.next();o.print("out "),x.print(o),o.println(),o.print("in "),x.getSym().print(o),o.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new $t;for(var o=this.iterator();o.hasNext();){var d=o.next();(d.isInResult()||d.getSym().isInResult())&&this._resultAreaEdgeList.add(d)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(o){for(var d=this.iterator();d.hasNext();){var x=d.next().getLabel();x.setAllLocationsIfNull(0,o.getLocation(0)),x.setAllLocationsIfNull(1,o.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var o=null,d=null,x=this._edgeList.size()-1;x>=0;x--){var C=this._edgeList.get(x),I=C.getSym();d===null&&(d=I),o!==null&&I.setNext(o),o=C}d.setNext(o)}},{key:"computeDepths",value:function(){if(arguments.length===1){var o=arguments[0],d=this.findIndex(o),x=o.getDepth(At.LEFT),C=o.getDepth(At.RIGHT),I=this.computeDepths(d+1,this._edgeList.size(),x);if(this.computeDepths(0,d,I)!==C)throw new _n("depth mismatch at "+o.getCoordinate())}else if(arguments.length===3){for(var H=arguments[1],lt=arguments[2],dt=arguments[0];dt<H;dt++){var _t=this._edgeList.get(dt);_t.setEdgeDepths(At.RIGHT,lt),lt=_t.getDepth(At.LEFT)}return lt}}},{key:"mergeSymLabels",value:function(){for(var o=this.iterator();o.hasNext();){var d=o.next();d.getLabel().merge(d.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(o){for(var d=null,x=null,C=this._SCANNING_FOR_INCOMING,I=this._resultAreaEdgeList.size()-1;I>=0;I--){var H=this._resultAreaEdgeList.get(I),lt=H.getSym();switch(d===null&&H.getEdgeRing()===o&&(d=H),C){case this._SCANNING_FOR_INCOMING:if(lt.getEdgeRing()!==o)continue;x=lt,C=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(H.getEdgeRing()!==o)continue;x.setNextMin(H),C=this._SCANNING_FOR_INCOMING}}C===this._LINKING_TO_OUTGOING&&(gt.isTrue(d!==null,"found null for first outgoing dirEdge"),gt.isTrue(d.getEdgeRing()===o,"unable to link last incoming dirEdge"),x.setNextMin(d))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var o=0,d=this.iterator();d.hasNext();)d.next().isInResult()&&o++;return o}if(arguments.length===1){for(var x=arguments[0],C=0,I=this.iterator();I.hasNext();)I.next().getEdgeRing()===x&&C++;return C}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var o=ft.NONE,d=this.iterator();d.hasNext();){var x=d.next(),C=x.getSym();if(!x.isLineEdge()){if(x.isInResult()){o=ft.INTERIOR;break}if(C.isInResult()){o=ft.EXTERIOR;break}}}if(o===ft.NONE)return null;for(var I=o,H=this.iterator();H.hasNext();){var lt=H.next(),dt=lt.getSym();lt.isLineEdge()?lt.getEdge().setCovered(I===ft.INTERIOR):(lt.isInResult()&&(I=ft.EXTERIOR),dt.isInResult()&&(I=ft.INTERIOR))}}},{key:"computeLabelling",value:function(o){B(a,"computeLabelling",this,1).call(this,o),this._label=new Fn(ft.NONE);for(var d=this.iterator();d.hasNext();)for(var x=d.next().getEdge().getLabel(),C=0;C<2;C++){var I=x.getLocation(C);I!==ft.INTERIOR&&I!==ft.BOUNDARY||this._label.setLocation(C,ft.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])})(_s),xs=(function(g){function a(){return r(this,a),l(this,a)}return S(a,g),p(a,[{key:"createNode",value:function(o){return new ms(o,new Ri)}}])})(qn),il=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"compareTo",value:function(a){var o=a;return g.compareOriented(this._pts,this._orientation,o._pts,o._orientation)}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var a=arguments[0];this._pts=a,this._orientation=g.orientation(a)}},{key:"orientation",value:function(a){return $e.increasingDirection(a)===1}},{key:"compareOriented",value:function(a,o,d,x){for(var C=o?1:-1,I=x?1:-1,H=o?a.length:-1,lt=x?d.length:-1,dt=o?0:a.length-1,_t=x?0:d.length-1;;){var St=a[dt].compareTo(d[_t]);if(St!==0)return St;var jt=(dt+=C)===H,qt=(_t+=I)===lt;if(jt&&!qt)return-1;if(!jt&&qt)return 1;if(jt&&qt)return 0}}}])})(),Ji=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"print",value:function(g){g.print("MULTILINESTRING ( ");for(var a=0;a<this._edges.size();a++){var o=this._edges.get(a);a>0&&g.print(","),g.print("(");for(var d=o.getCoordinates(),x=0;x<d.length;x++)x>0&&g.print(","),g.print(d[x].x+" "+d[x].y);g.println(")")}g.print(")  ")}},{key:"addAll",value:function(g){for(var a=g.iterator();a.hasNext();)this.add(a.next())}},{key:"findEdgeIndex",value:function(g){for(var a=0;a<this._edges.size();a++)if(this._edges.get(a).equals(g))return a;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(g){return this._edges.get(g)}},{key:"findEqualEdge",value:function(g){var a=new il(g.getCoordinates());return this._ocaMap.get(a)}},{key:"add",value:function(g){this._edges.add(g);var a=new il(g.getCoordinates());this._ocaMap.put(a,g)}}],[{key:"constructor_",value:function(){this._edges=new $t,this._ocaMap=new rn}}])})(),Lo=(function(){return p((function g(){r(this,g)}),[{key:"processIntersections",value:function(g,a,o,d){}},{key:"isDone",value:function(){}}])})(),Ki=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"isTrivialIntersection",value:function(a,o,d,x){if(a===d&&this._li.getIntersectionNum()===1){if(g.isAdjacentSegments(o,x))return!0;if(a.isClosed()){var C=a.size()-1;if(o===0&&x===C||x===0&&o===C)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(a,o,d,x){if(a===d&&o===x)return null;this.numTests++;var C=a.getCoordinates()[o],I=a.getCoordinates()[o+1],H=d.getCoordinates()[x],lt=d.getCoordinates()[x+1];this._li.computeIntersection(C,I,H,lt),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(a,o,d,x)||(this._hasIntersection=!0,a.addIntersections(this._li,o,0),d.addIntersections(this._li,x,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Lo]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var a=arguments[0];this._li=a}},{key:"isAdjacentSegments",value:function(a,o){return Math.abs(a-o)===1}}])})(),Ys=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(g){g.print(this.coord),g.print(" seg # = "+this.segmentIndex),g.println(" dist = "+this.dist)}},{key:"compareTo",value:function(g){var a=g;return this.compare(a.segmentIndex,a.dist)}},{key:"isEndPoint",value:function(g){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===g}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(g,a){return this.segmentIndex<g?-1:this.segmentIndex>g?1:this.dist<a?-1:this.dist>a?1:0}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var g=arguments[0],a=arguments[1],o=arguments[2];this.coord=new ht(g),this.segmentIndex=a,this.dist=o}}])})(),Zs=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"print",value:function(g){g.println("Intersections:");for(var a=this.iterator();a.hasNext();)a.next().print(g)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(g){this.addEndpoints();for(var a=this.iterator(),o=a.next();a.hasNext();){var d=a.next(),x=this.createSplitEdge(o,d);g.add(x),o=d}}},{key:"addEndpoints",value:function(){var g=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[g],g,0)}},{key:"createSplitEdge",value:function(g,a){var o=a.segmentIndex-g.segmentIndex+2,d=this.edge.pts[a.segmentIndex],x=a.dist>0||!a.coord.equals2D(d);x||o--;var C=new Array(o).fill(null),I=0;C[I++]=new ht(g.coord);for(var H=g.segmentIndex+1;H<=a.segmentIndex;H++)C[I++]=this.edge.pts[H];return x&&(C[I]=a.coord),new To(C,new Fn(this.edge._label))}},{key:"add",value:function(g,a,o){var d=new Ys(g,a,o),x=this._nodeMap.get(d);return x!==null?x:(this._nodeMap.put(d,d),d)}},{key:"isIntersection",value:function(g){for(var a=this.iterator();a.hasNext();)if(a.next().coord.equals(g))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new rn,this.edge=null;var g=arguments[0];this.edge=g}}])})(),Xs=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(g.isTrue(this._matrix[ft.INTERIOR][ft.INTERIOR])||g.isTrue(this._matrix[ft.INTERIOR][ft.BOUNDARY])||g.isTrue(this._matrix[ft.BOUNDARY][ft.INTERIOR])||g.isTrue(this._matrix[ft.BOUNDARY][ft.BOUNDARY]))&&this._matrix[ft.EXTERIOR][ft.INTERIOR]===Ft.FALSE&&this._matrix[ft.EXTERIOR][ft.BOUNDARY]===Ft.FALSE}},{key:"isCoveredBy",value:function(){return(g.isTrue(this._matrix[ft.INTERIOR][ft.INTERIOR])||g.isTrue(this._matrix[ft.INTERIOR][ft.BOUNDARY])||g.isTrue(this._matrix[ft.BOUNDARY][ft.INTERIOR])||g.isTrue(this._matrix[ft.BOUNDARY][ft.BOUNDARY]))&&this._matrix[ft.INTERIOR][ft.EXTERIOR]===Ft.FALSE&&this._matrix[ft.BOUNDARY][ft.EXTERIOR]===Ft.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var a=arguments[0],o=0;o<a.length;o++){var d=Math.trunc(o/3),x=o%3;this._matrix[d][x]=Ft.toDimensionValue(a.charAt(o))}else if(arguments.length===3){var C=arguments[0],I=arguments[1],H=arguments[2];this._matrix[C][I]=H}}},{key:"isContains",value:function(){return g.isTrue(this._matrix[ft.INTERIOR][ft.INTERIOR])&&this._matrix[ft.EXTERIOR][ft.INTERIOR]===Ft.FALSE&&this._matrix[ft.EXTERIOR][ft.BOUNDARY]===Ft.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var a=arguments[0],o=0;o<a.length;o++){var d=Math.trunc(o/3),x=o%3;this.setAtLeast(d,x,Ft.toDimensionValue(a.charAt(o)))}else if(arguments.length===3){var C=arguments[0],I=arguments[1],H=arguments[2];this._matrix[C][I]<H&&(this._matrix[C][I]=H)}}},{key:"setAtLeastIfValid",value:function(a,o,d){a>=0&&o>=0&&this.setAtLeast(a,o,d)}},{key:"isWithin",value:function(){return g.isTrue(this._matrix[ft.INTERIOR][ft.INTERIOR])&&this._matrix[ft.INTERIOR][ft.EXTERIOR]===Ft.FALSE&&this._matrix[ft.BOUNDARY][ft.EXTERIOR]===Ft.FALSE}},{key:"isTouches",value:function(a,o){return a>o?this.isTouches(o,a):(a===Ft.A&&o===Ft.A||a===Ft.L&&o===Ft.L||a===Ft.L&&o===Ft.A||a===Ft.P&&o===Ft.A||a===Ft.P&&o===Ft.L)&&this._matrix[ft.INTERIOR][ft.INTERIOR]===Ft.FALSE&&(g.isTrue(this._matrix[ft.INTERIOR][ft.BOUNDARY])||g.isTrue(this._matrix[ft.BOUNDARY][ft.INTERIOR])||g.isTrue(this._matrix[ft.BOUNDARY][ft.BOUNDARY]))}},{key:"isOverlaps",value:function(a,o){return a===Ft.P&&o===Ft.P||a===Ft.A&&o===Ft.A?g.isTrue(this._matrix[ft.INTERIOR][ft.INTERIOR])&&g.isTrue(this._matrix[ft.INTERIOR][ft.EXTERIOR])&&g.isTrue(this._matrix[ft.EXTERIOR][ft.INTERIOR]):a===Ft.L&&o===Ft.L&&this._matrix[ft.INTERIOR][ft.INTERIOR]===1&&g.isTrue(this._matrix[ft.INTERIOR][ft.EXTERIOR])&&g.isTrue(this._matrix[ft.EXTERIOR][ft.INTERIOR])}},{key:"isEquals",value:function(a,o){return a===o&&g.isTrue(this._matrix[ft.INTERIOR][ft.INTERIOR])&&this._matrix[ft.INTERIOR][ft.EXTERIOR]===Ft.FALSE&&this._matrix[ft.BOUNDARY][ft.EXTERIOR]===Ft.FALSE&&this._matrix[ft.EXTERIOR][ft.INTERIOR]===Ft.FALSE&&this._matrix[ft.EXTERIOR][ft.BOUNDARY]===Ft.FALSE}},{key:"toString",value:function(){for(var a=new dr("123456789"),o=0;o<3;o++)for(var d=0;d<3;d++)a.setCharAt(3*o+d,Ft.toDimensionSymbol(this._matrix[o][d]));return a.toString()}},{key:"setAll",value:function(a){for(var o=0;o<3;o++)for(var d=0;d<3;d++)this._matrix[o][d]=a}},{key:"get",value:function(a,o){return this._matrix[a][o]}},{key:"transpose",value:function(){var a=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=a,a=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=a,a=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=a,this}},{key:"matches",value:function(a){if(a.length!==9)throw new et("Should be length 9: "+a);for(var o=0;o<3;o++)for(var d=0;d<3;d++)if(!g.matches(this._matrix[o][d],a.charAt(3*o+d)))return!1;return!0}},{key:"add",value:function(a){for(var o=0;o<3;o++)for(var d=0;d<3;d++)this.setAtLeast(o,d,a.get(o,d))}},{key:"isDisjoint",value:function(){return this._matrix[ft.INTERIOR][ft.INTERIOR]===Ft.FALSE&&this._matrix[ft.INTERIOR][ft.BOUNDARY]===Ft.FALSE&&this._matrix[ft.BOUNDARY][ft.INTERIOR]===Ft.FALSE&&this._matrix[ft.BOUNDARY][ft.BOUNDARY]===Ft.FALSE}},{key:"isCrosses",value:function(a,o){return a===Ft.P&&o===Ft.L||a===Ft.P&&o===Ft.A||a===Ft.L&&o===Ft.A?g.isTrue(this._matrix[ft.INTERIOR][ft.INTERIOR])&&g.isTrue(this._matrix[ft.INTERIOR][ft.EXTERIOR]):a===Ft.L&&o===Ft.P||a===Ft.A&&o===Ft.P||a===Ft.A&&o===Ft.L?g.isTrue(this._matrix[ft.INTERIOR][ft.INTERIOR])&&g.isTrue(this._matrix[ft.EXTERIOR][ft.INTERIOR]):a===Ft.L&&o===Ft.L&&this._matrix[ft.INTERIOR][ft.INTERIOR]===0}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map((function(){return Array(3)})),this.setAll(Ft.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var a=arguments[0];g.constructor_.call(this),this.set(a)}else if(arguments[0]instanceof g){var o=arguments[0];g.constructor_.call(this),this._matrix[ft.INTERIOR][ft.INTERIOR]=o._matrix[ft.INTERIOR][ft.INTERIOR],this._matrix[ft.INTERIOR][ft.BOUNDARY]=o._matrix[ft.INTERIOR][ft.BOUNDARY],this._matrix[ft.INTERIOR][ft.EXTERIOR]=o._matrix[ft.INTERIOR][ft.EXTERIOR],this._matrix[ft.BOUNDARY][ft.INTERIOR]=o._matrix[ft.BOUNDARY][ft.INTERIOR],this._matrix[ft.BOUNDARY][ft.BOUNDARY]=o._matrix[ft.BOUNDARY][ft.BOUNDARY],this._matrix[ft.BOUNDARY][ft.EXTERIOR]=o._matrix[ft.BOUNDARY][ft.EXTERIOR],this._matrix[ft.EXTERIOR][ft.INTERIOR]=o._matrix[ft.EXTERIOR][ft.INTERIOR],this._matrix[ft.EXTERIOR][ft.BOUNDARY]=o._matrix[ft.EXTERIOR][ft.BOUNDARY],this._matrix[ft.EXTERIOR][ft.EXTERIOR]=o._matrix[ft.EXTERIOR][ft.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var a=arguments[0],o=arguments[1];return o===Ft.SYM_DONTCARE||o===Ft.SYM_TRUE&&(a>=0||a===Ft.TRUE)||o===Ft.SYM_FALSE&&a===Ft.FALSE||o===Ft.SYM_P&&a===Ft.P||o===Ft.SYM_L&&a===Ft.L||o===Ft.SYM_A&&a===Ft.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var d=arguments[1];return new g(arguments[0]).matches(d)}}},{key:"isTrue",value:function(a){return a>=0||a===Ft.TRUE}}])})(),Vs=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(a){return a===null||a.length===0?null:(this.ensureCapacity(this._size+a.length),wi.arraycopy(a,0,this._data,this._size,a.length),void(this._size+=a.length))}},{key:"ensureCapacity",value:function(a){if(a<=this._data.length)return null;var o=Math.max(a,2*this._data.length);this._data=An.copyOf(this._data,o)}},{key:"toArray",value:function(){var a=new Array(this._size).fill(null);return wi.arraycopy(this._data,0,a,0,this._size),a}},{key:"add",value:function(a){this.ensureCapacity(this._size+1),this._data[this._size]=a,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)g.constructor_.call(this,10);else if(arguments.length===1){var a=arguments[0];this._data=new Array(a).fill(null)}}}])})(),rl=(function(){function g(){r(this,g)}return p(g,[{key:"getChainStartIndices",value:function(a){var o=0,d=new Vs(Math.trunc(a.length/2));d.add(o);do{var x=this.findChainEnd(a,o);d.add(x),o=x}while(o<a.length-1);return d.toArray()}},{key:"findChainEnd",value:function(a,o){for(var d=Ln.quadrant(a[o],a[o+1]),x=o+1;x<a.length&&Ln.quadrant(a[x-1],a[x])===d;)x++;return x-1}},{key:"OLDgetChainStartIndices",value:function(a){var o=0,d=new $t;d.add(o);do{var x=this.findChainEnd(a,o);d.add(x),o=x}while(o<a.length-1);return g.toIntArray(d)}}],[{key:"toIntArray",value:function(a){for(var o=new Array(a.size()).fill(null),d=0;d<o.length;d++)o[d]=a.get(d).intValue();return o}}])})(),$i=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(g){var a=this.pts[this.startIndex[g]].x,o=this.pts[this.startIndex[g+1]].x;return a>o?a:o}},{key:"getMinX",value:function(g){var a=this.pts[this.startIndex[g]].x,o=this.pts[this.startIndex[g+1]].x;return a<o?a:o}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var g=arguments[0],a=arguments[1],o=arguments[2],d=arguments[3];this.computeIntersectsForChain(this.startIndex[g],this.startIndex[g+1],a,a.startIndex[o],a.startIndex[o+1],d)}else if(arguments.length===6){var x=arguments[0],C=arguments[1],I=arguments[2],H=arguments[3],lt=arguments[4],dt=arguments[5];if(C-x==1&&lt-H==1)return dt.addIntersections(this.e,x,I.e,H),null;if(!this.overlaps(x,C,I,H,lt))return null;var _t=Math.trunc((x+C)/2),St=Math.trunc((H+lt)/2);x<_t&&(H<St&&this.computeIntersectsForChain(x,_t,I,H,St,dt),St<lt&&this.computeIntersectsForChain(x,_t,I,St,lt,dt)),_t<C&&(H<St&&this.computeIntersectsForChain(_t,C,I,H,St,dt),St<lt&&this.computeIntersectsForChain(_t,C,I,St,lt,dt))}}},{key:"overlaps",value:function(g,a,o,d,x){return It.intersects(this.pts[g],this.pts[a],o.pts[d],o.pts[x])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(g,a){for(var o=0;o<this.startIndex.length-1;o++)for(var d=0;d<g.startIndex.length-1;d++)this.computeIntersectsForChain(o,g,d,a)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var g=arguments[0];this.e=g,this.pts=g.getCoordinates();var a=new rl;this.startIndex=a.getChainStartIndices(this.pts)}}])})(),is=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"getDepth",value:function(a,o){return this._depth[a][o]}},{key:"setDepth",value:function(a,o,d){this._depth[a][o]=d}},{key:"isNull",value:function(){if(arguments.length===0){for(var a=0;a<2;a++)for(var o=0;o<3;o++)if(this._depth[a][o]!==g.NULL_VALUE)return!1;return!0}if(arguments.length===1){var d=arguments[0];return this._depth[d][1]===g.NULL_VALUE}if(arguments.length===2){var x=arguments[0],C=arguments[1];return this._depth[x][C]===g.NULL_VALUE}}},{key:"normalize",value:function(){for(var a=0;a<2;a++)if(!this.isNull(a)){var o=this._depth[a][1];this._depth[a][2]<o&&(o=this._depth[a][2]),o<0&&(o=0);for(var d=1;d<3;d++){var x=0;this._depth[a][d]>o&&(x=1),this._depth[a][d]=x}}}},{key:"getDelta",value:function(a){return this._depth[a][At.RIGHT]-this._depth[a][At.LEFT]}},{key:"getLocation",value:function(a,o){return this._depth[a][o]<=0?ft.EXTERIOR:ft.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var a=arguments[0],o=0;o<2;o++)for(var d=1;d<3;d++){var x=a.getLocation(o,d);x!==ft.EXTERIOR&&x!==ft.INTERIOR||(this.isNull(o,d)?this._depth[o][d]=g.depthAtLocation(x):this._depth[o][d]+=g.depthAtLocation(x))}else if(arguments.length===3){var C=arguments[0],I=arguments[1];arguments[2]===ft.INTERIOR&&this._depth[C][I]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var a=0;a<2;a++)for(var o=0;o<3;o++)this._depth[a][o]=g.NULL_VALUE}},{key:"depthAtLocation",value:function(a){return a===ft.EXTERIOR?0:a===ft.INTERIOR?1:g.NULL_VALUE}}])})();is.NULL_VALUE=-1;var To=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var o=new Array(2).fill(null);return o[0]=this.pts[0],o[1]=this.pts[1],new a(o,Fn.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(o){this._isIsolated=o}},{key:"setName",value:function(o){this._name=o}},{key:"equals",value:function(o){if(!(o instanceof a))return!1;var d=o;if(this.pts.length!==d.pts.length)return!1;for(var x=!0,C=!0,I=this.pts.length,H=0;H<this.pts.length;H++)if(this.pts[H].equals2D(d.pts[H])||(x=!1),this.pts[H].equals2D(d.pts[--I])||(C=!1),!x&&!C)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var o=arguments[0];return this.pts[o]}}},{key:"print",value:function(o){o.print("edge "+this._name+": "),o.print("LINESTRING (");for(var d=0;d<this.pts.length;d++)d>0&&o.print(","),o.print(this.pts[d].x+" "+this.pts[d].y);o.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(o){a.updateIM(this._label,o)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(o){o.print("edge "+this._name+": ");for(var d=this.pts.length-1;d>=0;d--)o.print(this.pts[d]+" ");o.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new $i(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new It;for(var o=0;o<this.pts.length;o++)this._env.expandToInclude(this.pts[o])}return this._env}},{key:"addIntersection",value:function(o,d,x,C){var I=new ht(o.getIntersection(C)),H=d,lt=o.getEdgeDistance(x,C),dt=H+1;if(dt<this.pts.length){var _t=this.pts[dt];I.equals2D(_t)&&(H=dt,lt=0)}this.eiList.add(I,H,lt)}},{key:"toString",value:function(){var o=new dr;o.append("edge "+this._name+": "),o.append("LINESTRING (");for(var d=0;d<this.pts.length;d++)d>0&&o.append(","),o.append(this.pts[d].x+" "+this.pts[d].y);return o.append(")  "+this._label+" "+this._depthDelta),o.toString()}},{key:"isPointwiseEqual",value:function(o){if(this.pts.length!==o.pts.length)return!1;for(var d=0;d<this.pts.length;d++)if(!this.pts[d].equals2D(o.pts[d]))return!1;return!0}},{key:"setDepthDelta",value:function(o){this._depthDelta=o}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(o,d,x){for(var C=0;C<o.getIntersectionNum();C++)this.addIntersection(o,d,x,C)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Zs(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new is,this._depthDelta=0,arguments.length===1){var o=arguments[0];a.constructor_.call(this,o,null)}else if(arguments.length===2){var d=arguments[0],x=arguments[1];this.pts=d,this._label=x}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Xs&&arguments[0]instanceof Fn))return B(a,"updateIM",this).apply(this,arguments);var o=arguments[0],d=arguments[1];d.setAtLeastIfValid(o.getLocation(0,At.ON),o.getLocation(1,At.ON),1),o.isArea()&&(d.setAtLeastIfValid(o.getLocation(0,At.LEFT),o.getLocation(1,At.LEFT),2),d.setAtLeastIfValid(o.getLocation(0,At.RIGHT),o.getLocation(1,At.RIGHT),2))}}])})(je),Qs=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"setWorkingPrecisionModel",value:function(a){this._workingPrecisionModel=a}},{key:"insertUniqueEdge",value:function(a){var o=this._edgeList.findEqualEdge(a);if(o!==null){var d=o.getLabel(),x=a.getLabel();o.isPointwiseEqual(a)||(x=new Fn(a.getLabel())).flip(),d.merge(x);var C=g.depthDelta(x),I=o.getDepthDelta()+C;o.setDepthDelta(I)}else this._edgeList.add(a),a.setDepthDelta(g.depthDelta(a.getLabel()))}},{key:"buildSubgraphs",value:function(a,o){for(var d=new $t,x=a.iterator();x.hasNext();){var C=x.next(),I=C.getRightmostCoordinate(),H=new mi(d).getDepth(I);C.computeDepth(H),C.findResultEdges(),d.add(C),o.add(C.getDirectedEdges(),C.getNodes())}}},{key:"createSubgraphs",value:function(a){for(var o=new $t,d=a.getNodes().iterator();d.hasNext();){var x=d.next();if(!x.isVisited()){var C=new Ps;C.create(x),o.add(C)}}return Vi.sort(o,Vi.reverseOrder()),o}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(a){if(this._workingNoder!==null)return this._workingNoder;var o=new Eo,d=new mr;return d.setPrecisionModel(a),o.setSegmentIntersector(new Ki(d)),o}},{key:"buffer",value:function(a,o){var d=this._workingPrecisionModel;d===null&&(d=a.getPrecisionModel()),this._geomFact=a.getFactory();var x=new Gs(d,this._bufParams),C=new Ra(a,o,x).getCurves();if(C.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(C,d),this._graph=new Xi(new xs),this._graph.addEdges(this._edgeList.getEdges());var I=this.createSubgraphs(this._graph),H=new Na(this._geomFact);this.buildSubgraphs(I,H);var lt=H.getPolygons();return lt.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(lt)}},{key:"computeNodedEdges",value:function(a,o){var d=this.getNoder(o);d.computeNodes(a);for(var x=d.getNodedSubstrings().iterator();x.hasNext();){var C=x.next(),I=C.getCoordinates();if(I.length!==2||!I[0].equals2D(I[1])){var H=C.getData(),lt=new To(C.getCoordinates(),new Fn(H));this.insertUniqueEdge(lt)}}}},{key:"setNoder",value:function(a){this._workingNoder=a}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Ji;var a=arguments[0];this._bufParams=a}},{key:"depthDelta",value:function(a){var o=a.getLocation(0,At.LEFT),d=a.getLocation(0,At.RIGHT);return o===ft.INTERIOR&&d===ft.EXTERIOR?1:o===ft.EXTERIOR&&d===ft.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(a){for(var o=new Yi,d=new $t;a.hasNext();){var x=a.next(),C=o.createLineString(x.getCoordinates());d.add(C)}return o.buildGeometry(d)}}])})(),sl=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"rescale",value:function(){if(Yt(arguments[0],Xt))for(var a=arguments[0].iterator();a.hasNext();){var o=a.next();this.rescale(o.getCoordinates())}else if(arguments[0]instanceof Array){for(var d=arguments[0],x=0;x<d.length;x++)d[x].x=d[x].x/this._scaleFactor+this._offsetX,d[x].y=d[x].y/this._scaleFactor+this._offsetY;d.length===2&&d[0].equals2D(d[1])&&wi.out.println(d)}}},{key:"scale",value:function(){if(Yt(arguments[0],Xt)){for(var a=arguments[0],o=new $t(a.size()),d=a.iterator();d.hasNext();){var x=d.next();o.add(new _r(this.scale(x.getCoordinates()),x.getData()))}return o}if(arguments[0]instanceof Array){for(var C=arguments[0],I=new Array(C.length).fill(null),H=0;H<C.length;H++)I[H]=new ht(Math.round((C[H].x-this._offsetX)*this._scaleFactor),Math.round((C[H].y-this._offsetY)*this._scaleFactor),C[H].getZ());return $e.removeRepeatedPoints(I)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var a=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(a),a}},{key:"computeNodes",value:function(a){var o=a;this._isScaled&&(o=this.scale(a)),this._noder.computeNodes(o)}},{key:"interfaces_",get:function(){return[Aa]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var a=arguments[0],o=arguments[1];g.constructor_.call(this,a,o,0,0)}else if(arguments.length===4){var d=arguments[0],x=arguments[1];this._noder=d,this._scaleFactor=x,this._isScaled=!this.isIntegerPrecision()}}}])})(),tr=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var a=this._segStrings.iterator();a.hasNext();){var o=a.next().getCoordinates();this.checkEndPtVertexIntersections(o[0],this._segStrings),this.checkEndPtVertexIntersections(o[o.length-1],this._segStrings)}else if(arguments.length===2){for(var d=arguments[0],x=arguments[1].iterator();x.hasNext();)for(var C=x.next().getCoordinates(),I=1;I<C.length-1;I++)if(C[I].equals(d))throw new K("found endpt/interior pt intersection at index "+I+" :pt "+d)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var a=this._segStrings.iterator();a.hasNext();)for(var o=a.next(),d=this._segStrings.iterator();d.hasNext();){var x=d.next();this.checkInteriorIntersections(o,x)}else if(arguments.length===2)for(var C=arguments[0],I=arguments[1],H=C.getCoordinates(),lt=I.getCoordinates(),dt=0;dt<H.length-1;dt++)for(var _t=0;_t<lt.length-1;_t++)this.checkInteriorIntersections(C,dt,I,_t);else if(arguments.length===4){var St=arguments[0],jt=arguments[1],qt=arguments[2],Qt=arguments[3];if(St===qt&&jt===Qt)return null;var ee=St.getCoordinates()[jt],Te=St.getCoordinates()[jt+1],pe=qt.getCoordinates()[Qt],qe=qt.getCoordinates()[Qt+1];if(this._li.computeIntersection(ee,Te,pe,qe),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,ee,Te)||this.hasInteriorIntersection(this._li,pe,qe)))throw new K("found non-noded intersection at "+ee+"-"+Te+" and "+pe+"-"+qe)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var a=this._segStrings.iterator();a.hasNext();){var o=a.next();this.checkCollapses(o)}else if(arguments.length===1)for(var d=arguments[0].getCoordinates(),x=0;x<d.length-2;x++)this.checkCollapse(d[x],d[x+1],d[x+2])}},{key:"hasInteriorIntersection",value:function(a,o,d){for(var x=0;x<a.getIntersectionNum();x++){var C=a.getIntersection(x);if(!C.equals(o)&&!C.equals(d))return!0}return!1}},{key:"checkCollapse",value:function(a,o,d){if(a.equals(d))throw new K("found non-noded collapse at "+g.fact.createLineString([a,o,d]))}}],[{key:"constructor_",value:function(){this._li=new mr,this._segStrings=null;var a=arguments[0];this._segStrings=a}}])})();tr.fact=new Yi;var Co=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"intersectsScaled",value:function(a,o){var d=Math.min(a.x,o.x),x=Math.max(a.x,o.x),C=Math.min(a.y,o.y),I=Math.max(a.y,o.y),H=this._maxx<d||this._minx>x||this._maxy<C||this._miny>I;if(H)return!1;var lt=this.intersectsToleranceSquare(a,o);return gt.isTrue(!(H&&lt),"Found bad envelope test"),lt}},{key:"initCorners",value:function(a){var o=.5;this._minx=a.x-o,this._maxx=a.x+o,this._miny=a.y-o,this._maxy=a.y+o,this._corner[0]=new ht(this._maxx,this._maxy),this._corner[1]=new ht(this._minx,this._maxy),this._corner[2]=new ht(this._minx,this._miny),this._corner[3]=new ht(this._maxx,this._miny)}},{key:"intersects",value:function(a,o){return this._scaleFactor===1?this.intersectsScaled(a,o):(this.copyScaled(a,this._p0Scaled),this.copyScaled(o,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(a){return Math.round(a*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(a,o){o.x=this.scale(a.x),o.y=this.scale(a.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var a=g.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new It(this._originalPt.x-a,this._originalPt.x+a,this._originalPt.y-a,this._originalPt.y+a)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(a,o){return this._li.computeIntersection(a,o,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(a,o,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(a,o,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(a,o,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(a,o){var d=!1,x=!1;return this._li.computeIntersection(a,o,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(a,o,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(d=!0),this._li.computeIntersection(a,o,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(x=!0),this._li.computeIntersection(a,o,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!d||!x)||!!a.equals(this._pt)||!!o.equals(this._pt))))}},{key:"addSnappedNode",value:function(a,o){var d=a.getCoordinate(o),x=a.getCoordinate(o+1);return!!this.intersects(d,x)&&(a.addIntersection(this.getCoordinate(),o),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var a=arguments[0],o=arguments[1],d=arguments[2];if(this._originalPt=a,this._pt=a,this._scaleFactor=o,this._li=d,o<=0)throw new et("Scale factor must be non-zero");o!==1&&(this._pt=new ht(this.scale(a.x),this.scale(a.y)),this._p0Scaled=new ht,this._p1Scaled=new ht),this.initCorners(this._pt)}}])})();Co.SAFE_ENV_EXPANSION_FACTOR=.75;var Es=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var g=arguments[1];arguments[0].getLineSegment(g,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new ii}}])})(),al=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"snap",value:function(){if(arguments.length===1){var g=arguments[0];return this.snap(g,null,-1)}if(arguments.length===3){var a=arguments[0],o=arguments[1],d=arguments[2],x=a.getSafeEnvelope(),C=new er(a,o,d);return this._index.query(x,new((function(){return p((function I(){r(this,I)}),[{key:"interfaces_",get:function(){return[Jo]}},{key:"visitItem",value:function(I){I.select(x,C)}}])})())),C.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var g=arguments[0];this._index=g}}])})(),er=(function(g){function a(){var o;return r(this,a),o=l(this,a),a.constructor_.apply(o,arguments),o}return S(a,g),p(a,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof xo))return B(a,"select",this,1).apply(this,arguments);var o=arguments[1],d=arguments[0].getContext();if(this._parentEdge===d&&(o===this._hotPixelVertexIndex||o+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(d,o)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var o=arguments[0],d=arguments[1],x=arguments[2];this._hotPixel=o,this._parentEdge=d,this._hotPixelVertexIndex=x}}])})(Es);al.HotPixelSnapAction=er;var Gn=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"processIntersections",value:function(g,a,o,d){if(g===o&&a===d)return null;var x=g.getCoordinates()[a],C=g.getCoordinates()[a+1],I=o.getCoordinates()[d],H=o.getCoordinates()[d+1];if(this._li.computeIntersection(x,C,I,H),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var lt=0;lt<this._li.getIntersectionNum();lt++)this._interiorIntersections.add(this._li.getIntersection(lt));g.addIntersections(this._li,a,0),o.addIntersections(this._li,d,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Lo]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var g=arguments[0];this._li=g,this._interiorIntersections=new $t}}])})(),ws=(function(){return p((function g(){r(this,g),g.constructor_.apply(this,arguments)}),[{key:"checkCorrectness",value:function(g){var a=_r.getNodedSubstrings(g),o=new tr(a);try{o.checkValid()}catch(d){if(!(d instanceof V))throw d;d.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return _r.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(g,a){var o=this.findInteriorIntersections(g,a);this.computeIntersectionSnaps(o),this.computeVertexSnaps(g)}},{key:"findInteriorIntersections",value:function(g,a){var o=new Gn(a);return this._noder.setSegmentIntersector(o),this._noder.computeNodes(g),o.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(Yt(arguments[0],Xt))for(var g=arguments[0].iterator();g.hasNext();){var a=g.next();this.computeVertexSnaps(a)}else if(arguments[0]instanceof _r)for(var o=arguments[0],d=o.getCoordinates(),x=0;x<d.length;x++){var C=new Co(d[x],this._scaleFactor,this._li);this._pointSnapper.snap(C,o,x)&&o.addIntersection(d[x],x)}}},{key:"computeNodes",value:function(g){this._nodedSegStrings=g,this._noder=new Eo,this._pointSnapper=new al(this._noder.getIndex()),this.snapRound(g,this._li)}},{key:"computeIntersectionSnaps",value:function(g){for(var a=g.iterator();a.hasNext();){var o=a.next(),d=new Co(o,this._scaleFactor,this._li);this._pointSnapper.snap(d)}}},{key:"interfaces_",get:function(){return[Aa]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var g=arguments[0];this._pm=g,this._li=new mr,this._li.setPrecisionModel(g),this._scaleFactor=g.getScale()}}])})(),xr=(function(){function g(){r(this,g),g.constructor_.apply(this,arguments)}return p(g,[{key:"bufferFixedPrecision",value:function(a){var o=new sl(new ws(new ei(1)),a.getScale()),d=new Qs(this._bufParams);d.setWorkingPrecisionModel(a),d.setNoder(o),this._resultGeometry=d.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var a=g.MAX_PRECISION_DIGITS;a>=0;a--){try{this.bufferReducedPrecision(a)}catch(C){if(!(C instanceof _n))throw C;this._saveException=C}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var o=arguments[0],d=g.precisionScaleFactor(this._argGeom,this._distance,o),x=new ei(d);this.bufferFixedPrecision(x)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var a=this._argGeom.getFactory().getPrecisionModel();a.getType()===ei.FIXED?this.bufferFixedPrecision(a):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(a){this._bufParams.setQuadrantSegments(a)}},{key:"bufferOriginalPrecision",value:function(){try{var a=new Qs(this._bufParams);this._resultGeometry=a.buffer(this._argGeom,this._distance)}catch(o){if(!(o instanceof K))throw o;this._saveException=o}}},{key:"getResultGeometry",value:function(a){return this._distance=a,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(a){this._bufParams.setEndCapStyle(a)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Y,this._resultGeometry=null,this._saveException=null,arguments.length===1){var a=arguments[0];this._argGeom=a}else if(arguments.length===2){var o=arguments[0],d=arguments[1];this._argGeom=o,this._bufParams=d}}},{key:"bufferOp",value:function(){if(arguments.length===2){var a=arguments[1];return new g(arguments[0]).getResultGeometry(a)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Mt&&typeof arguments[1]=="number"){var o=arguments[1],d=arguments[2],x=new g(arguments[0]);return x.setQuadrantSegments(d),x.getResultGeometry(o)}if(arguments[2]instanceof Y&&arguments[0]instanceof Mt&&typeof arguments[1]=="number"){var C=arguments[1];return new g(arguments[0],arguments[2]).getResultGeometry(C)}}else if(arguments.length===4){var I=arguments[1],H=arguments[2],lt=arguments[3],dt=new g(arguments[0]);return dt.setQuadrantSegments(H),dt.setEndCapStyle(lt),dt.getResultGeometry(I)}}},{key:"precisionScaleFactor",value:function(a,o,d){var x=a.getEnvelopeInternal(),C=hr.max(Math.abs(x.getMaxX()),Math.abs(x.getMaxY()),Math.abs(x.getMinX()),Math.abs(x.getMinY()))+2*(o>0?o:0),I=d-Math.trunc(Math.log(C)/Math.log(10)+1);return Math.pow(10,I)}}])})();xr.CAP_ROUND=Y.CAP_ROUND,xr.CAP_BUTT=Y.CAP_FLAT,xr.CAP_FLAT=Y.CAP_FLAT,xr.CAP_SQUARE=Y.CAP_SQUARE,xr.MAX_PRECISION_DIGITS=12;var Ws=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Js=(function(){return p((function g(a){r(this,g),this.geometryFactory=a||new Yi}),[{key:"read",value:function(g){var a,o=(a=typeof g=="string"?JSON.parse(g):g).type;if(!Hn[o])throw new Error("Unknown GeoJSON type: "+a.type);return Ws.indexOf(o)!==-1?Hn[o].call(this,a.coordinates):o==="GeometryCollection"?Hn[o].call(this,a.geometries):Hn[o].call(this,a)}},{key:"write",value:function(g){var a=g.getGeometryType();if(!Bn[a])throw new Error("Geometry is not supported");return Bn[a].call(this,g)}}])})(),Hn={Feature:function(g){var a={};for(var o in g)a[o]=g[o];if(g.geometry){var d=g.geometry.type;if(!Hn[d])throw new Error("Unknown GeoJSON type: "+g.type);a.geometry=this.read(g.geometry)}return g.bbox&&(a.bbox=Hn.bbox.call(this,g.bbox)),a},FeatureCollection:function(g){var a={};if(g.features){a.features=[];for(var o=0;o<g.features.length;++o)a.features.push(this.read(g.features[o]))}return g.bbox&&(a.bbox=this.parse.bbox.call(this,g.bbox)),a},coordinates:function(g){for(var a=[],o=0;o<g.length;++o){var d=g[o];a.push(c(ht,Q(d)))}return a},bbox:function(g){return this.geometryFactory.createLinearRing([new ht(g[0],g[1]),new ht(g[2],g[1]),new ht(g[2],g[3]),new ht(g[0],g[3]),new ht(g[0],g[1])])},Point:function(g){var a=c(ht,Q(g));return this.geometryFactory.createPoint(a)},MultiPoint:function(g){for(var a=[],o=0;o<g.length;++o)a.push(Hn.Point.call(this,g[o]));return this.geometryFactory.createMultiPoint(a)},LineString:function(g){var a=Hn.coordinates.call(this,g);return this.geometryFactory.createLineString(a)},MultiLineString:function(g){for(var a=[],o=0;o<g.length;++o)a.push(Hn.LineString.call(this,g[o]));return this.geometryFactory.createMultiLineString(a)},Polygon:function(g){for(var a=Hn.coordinates.call(this,g[0]),o=this.geometryFactory.createLinearRing(a),d=[],x=1;x<g.length;++x){var C=g[x],I=Hn.coordinates.call(this,C),H=this.geometryFactory.createLinearRing(I);d.push(H)}return this.geometryFactory.createPolygon(o,d)},MultiPolygon:function(g){for(var a=[],o=0;o<g.length;++o){var d=g[o];a.push(Hn.Polygon.call(this,d))}return this.geometryFactory.createMultiPolygon(a)},GeometryCollection:function(g){for(var a=[],o=0;o<g.length;++o){var d=g[o];a.push(this.read(d))}return this.geometryFactory.createGeometryCollection(a)}},Bn={coordinate:function(g){var a=[g.x,g.y];return g.z&&a.push(g.z),g.m&&a.push(g.m),a},Point:function(g){return{type:"Point",coordinates:Bn.coordinate.call(this,g.getCoordinate())}},MultiPoint:function(g){for(var a=[],o=0;o<g._geometries.length;++o){var d=g._geometries[o],x=Bn.Point.call(this,d);a.push(x.coordinates)}return{type:"MultiPoint",coordinates:a}},LineString:function(g){for(var a=[],o=g.getCoordinates(),d=0;d<o.length;++d){var x=o[d];a.push(Bn.coordinate.call(this,x))}return{type:"LineString",coordinates:a}},MultiLineString:function(g){for(var a=[],o=0;o<g._geometries.length;++o){var d=g._geometries[o],x=Bn.LineString.call(this,d);a.push(x.coordinates)}return{type:"MultiLineString",coordinates:a}},Polygon:function(g){var a=[],o=Bn.LineString.call(this,g._shell);a.push(o.coordinates);for(var d=0;d<g._holes.length;++d){var x=g._holes[d],C=Bn.LineString.call(this,x);a.push(C.coordinates)}return{type:"Polygon",coordinates:a}},MultiPolygon:function(g){for(var a=[],o=0;o<g._geometries.length;++o){var d=g._geometries[o],x=Bn.Polygon.call(this,d);a.push(x.coordinates)}return{type:"MultiPolygon",coordinates:a}},GeometryCollection:function(g){for(var a=[],o=0;o<g._geometries.length;++o){var d=g._geometries[o],x=d.getGeometryType();a.push(Bn[x].call(this,d))}return{type:"GeometryCollection",geometries:a}}};return{BufferOp:xr,GeoJSONReader:(function(){return p((function g(a){r(this,g),this.parser=new Js(a||new Yi)}),[{key:"read",value:function(g){return this.parser.read(g)}}])})(),GeoJSONWriter:(function(){return p((function g(){r(this,g),this.parser=new Js(this.geometryFactory)}),[{key:"write",value:function(g){return this.parser.write(g)}}])})()}}))})(Rh)),Rh.exports}var _b=yb();const xb=oo(_b);function uo(){return new Zh}function Zh(){this.reset()}Zh.prototype={constructor:Zh,reset:function(){this.s=this.t=0},add:function(e){__(wh,e,this.t),__(this,wh.s,this.s),this.s?this.t+=wh.t:this.s=wh.t},valueOf:function(){return this.s}};var wh=new Zh;function __(e,n,i){var l=e.s=n+i,r=l-n,c=l-r;e.t=n-c+(i-r)}var gn=1e-6,Xe=Math.PI,Ns=Xe/2,x_=Xe/4,Rs=Xe*2,no=180/Xe,Zr=Xe/180,fi=Math.abs,Eb=Math.atan,ql=Math.atan2,Mn=Math.cos,Nn=Math.sin,Ql=Math.sqrt;function Nx(e){return e>1?0:e<-1?Xe:Math.acos(e)}function Qo(e){return e>1?Ns:e<-1?-Ns:Math.asin(e)}function Wu(){}function Xh(e,n){e&&w_.hasOwnProperty(e.type)&&w_[e.type](e,n)}var E_={Feature:function(e,n){Xh(e.geometry,n)},FeatureCollection:function(e,n){for(var i=e.features,l=-1,r=i.length;++l<r;)Xh(i[l].geometry,n)}},w_={Sphere:function(e,n){n.sphere()},Point:function(e,n){e=e.coordinates,n.point(e[0],e[1],e[2])},MultiPoint:function(e,n){for(var i=e.coordinates,l=-1,r=i.length;++l<r;)e=i[l],n.point(e[0],e[1],e[2])},LineString:function(e,n){Hg(e.coordinates,n,0)},MultiLineString:function(e,n){for(var i=e.coordinates,l=-1,r=i.length;++l<r;)Hg(i[l],n,0)},Polygon:function(e,n){S_(e.coordinates,n)},MultiPolygon:function(e,n){for(var i=e.coordinates,l=-1,r=i.length;++l<r;)S_(i[l],n)},GeometryCollection:function(e,n){for(var i=e.geometries,l=-1,r=i.length;++l<r;)Xh(i[l],n)}};function Hg(e,n,i){var l=-1,r=e.length-i,c;for(n.lineStart();++l<r;)c=e[l],n.point(c[0],c[1],c[2]);n.lineEnd()}function S_(e,n){var i=-1,l=e.length;for(n.polygonStart();++i<l;)Hg(e[i],n,1);n.polygonEnd()}function wb(e,n){e&&E_.hasOwnProperty(e.type)?E_[e.type](e,n):Xh(e,n)}uo();uo();function Yg(e){return[ql(e[1],e[0]),Qo(e[2])]}function Gl(e){var n=e[0],i=e[1],l=Mn(i);return[l*Mn(n),l*Nn(n),Nn(i)]}function Sh(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}function Vh(e,n){return[e[1]*n[2]-e[2]*n[1],e[2]*n[0]-e[0]*n[2],e[0]*n[1]-e[1]*n[0]]}function Sg(e,n){e[0]+=n[0],e[1]+=n[1],e[2]+=n[2]}function bh(e,n){return[e[0]*n,e[1]*n,e[2]*n]}function Zg(e){var n=Ql(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=n,e[1]/=n,e[2]/=n}uo();function Ox(e,n){function i(l,r){return l=e(l,r),n(l[0],l[1])}return e.invert&&n.invert&&(i.invert=function(l,r){return l=n.invert(l,r),l&&e.invert(l[0],l[1])}),i}function Xg(e,n){return[e>Xe?e-Rs:e<-Xe?e+Rs:e,n]}Xg.invert=Xg;function Sb(e,n,i){return(e%=Rs)?n||i?Ox(L_(e),T_(n,i)):L_(e):n||i?T_(n,i):Xg}function b_(e){return function(n,i){return n+=e,[n>Xe?n-Rs:n<-Xe?n+Rs:n,i]}}function L_(e){var n=b_(e);return n.invert=b_(-e),n}function T_(e,n){var i=Mn(e),l=Nn(e),r=Mn(n),c=Nn(n);function f(p,y){var _=Mn(y),E=Mn(p)*_,S=Nn(p)*_,M=Nn(y),O=M*i+E*l;return[ql(S*r-O*c,E*i-M*l),Qo(O*r+S*c)]}return f.invert=function(p,y){var _=Mn(y),E=Mn(p)*_,S=Nn(p)*_,M=Nn(y),O=M*r-S*c;return[ql(S*r+M*c,E*i+O*l),Qo(O*i-E*l)]},f}function bb(e,n,i,l,r,c){if(i){var f=Mn(n),p=Nn(n),y=l*i;r==null?(r=n+l*Rs,c=n-y/2):(r=C_(f,r),c=C_(f,c),(l>0?r<c:r>c)&&(r+=l*Rs));for(var _,E=r;l>0?E>c:E<c;E-=y)_=Yg([f,-p*Mn(E),-p*Nn(E)]),e.point(_[0],_[1])}}function C_(e,n){n=Gl(n),n[0]-=e,Zg(n);var i=Nx(-n[1]);return((-n[2]<0?-i:i)+Rs-gn)%Rs}function Ax(){var e=[],n;return{point:function(i,l){n.push([i,l])},lineStart:function(){e.push(n=[])},lineEnd:Wu,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],n=null,i}}}function Lb(e,n,i,l,r,c){var f=e[0],p=e[1],y=n[0],_=n[1],E=0,S=1,M=y-f,O=_-p,B;if(B=i-f,!(!M&&B>0)){if(B/=M,M<0){if(B<E)return;B<S&&(S=B)}else if(M>0){if(B>S)return;B>E&&(E=B)}if(B=r-f,!(!M&&B<0)){if(B/=M,M<0){if(B>S)return;B>E&&(E=B)}else if(M>0){if(B<E)return;B<S&&(S=B)}if(B=l-p,!(!O&&B>0)){if(B/=O,O<0){if(B<E)return;B<S&&(S=B)}else if(O>0){if(B>S)return;B>E&&(E=B)}if(B=c-p,!(!O&&B<0)){if(B/=O,O<0){if(B>S)return;B>E&&(E=B)}else if(O>0){if(B<E)return;B<S&&(S=B)}return E>0&&(e[0]=f+E*M,e[1]=p+E*O),S<1&&(n[0]=f+S*M,n[1]=p+S*O),!0}}}}}function Ph(e,n){return fi(e[0]-n[0])<gn&&fi(e[1]-n[1])<gn}function Lh(e,n,i,l){this.x=e,this.z=n,this.o=i,this.e=l,this.v=!1,this.n=this.p=null}function Dx(e,n,i,l,r){var c=[],f=[],p,y;if(e.forEach(function(B){if(!((Q=B.length-1)<=0)){var Q,st=B[0],rt=B[Q],j;if(Ph(st,rt)){for(r.lineStart(),p=0;p<Q;++p)r.point((st=B[p])[0],st[1]);r.lineEnd();return}c.push(j=new Lh(st,B,null,!0)),f.push(j.o=new Lh(st,null,j,!1)),c.push(j=new Lh(rt,B,null,!1)),f.push(j.o=new Lh(rt,null,j,!0))}}),!!c.length){for(f.sort(n),k_(c),k_(f),p=0,y=f.length;p<y;++p)f[p].e=i=!i;for(var _=c[0],E,S;;){for(var M=_,O=!0;M.v;)if((M=M.n)===_)return;E=M.z,r.lineStart();do{if(M.v=M.o.v=!0,M.e){if(O)for(p=0,y=E.length;p<y;++p)r.point((S=E[p])[0],S[1]);else l(M.x,M.n.x,1,r);M=M.n}else{if(O)for(E=M.p.z,p=E.length-1;p>=0;--p)r.point((S=E[p])[0],S[1]);else l(M.x,M.p.x,-1,r);M=M.p}M=M.o,E=M.z,O=!O}while(!M.v);r.lineEnd()}}}function k_(e){if(n=e.length){for(var n,i=0,l=e[0],r;++i<n;)l.n=r=e[i],r.p=l,l=r;l.n=r=e[0],r.p=l}}function Ix(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function Tb(e){return e.length===1&&(e=Cb(e)),{left:function(n,i,l,r){for(l==null&&(l=0),r==null&&(r=n.length);l<r;){var c=l+r>>>1;e(n[c],i)<0?l=c+1:r=c}return l},right:function(n,i,l,r){for(l==null&&(l=0),r==null&&(r=n.length);l<r;){var c=l+r>>>1;e(n[c],i)>0?r=c:l=c+1}return l}}}function Cb(e){return function(n,i){return Ix(e(n),i)}}Tb(Ix);function Rx(e){for(var n=e.length,i,l=-1,r=0,c,f;++l<n;)r+=e[l].length;for(c=new Array(r);--n>=0;)for(f=e[n],i=f.length;--i>=0;)c[--r]=f[i];return c}var Ju=1e9,Th=-Ju;function kb(e,n,i,l){function r(_,E){return e<=_&&_<=i&&n<=E&&E<=l}function c(_,E,S,M){var O=0,B=0;if(_==null||(O=f(_,S))!==(B=f(E,S))||y(_,E)<0^S>0)do M.point(O===0||O===3?e:i,O>1?l:n);while((O=(O+S+4)%4)!==B);else M.point(E[0],E[1])}function f(_,E){return fi(_[0]-e)<gn?E>0?0:3:fi(_[0]-i)<gn?E>0?2:1:fi(_[1]-n)<gn?E>0?1:0:E>0?3:2}function p(_,E){return y(_.x,E.x)}function y(_,E){var S=f(_,1),M=f(E,1);return S!==M?S-M:S===0?E[1]-_[1]:S===1?_[0]-E[0]:S===2?_[1]-E[1]:E[0]-_[0]}return function(_){var E=_,S=Ax(),M,O,B,Q,st,rt,j,Y,V,et,tt,W={point:k,lineStart:Z,lineEnd:nt,polygonStart:q,polygonEnd:X};function k(it,D){r(it,D)&&E.point(it,D)}function A(){for(var it=0,D=0,z=O.length;D<z;++D)for(var P=O[D],$=1,J=P.length,U=P[0],K,ct,gt=U[0],pt=U[1];$<J;++$)K=gt,ct=pt,U=P[$],gt=U[0],pt=U[1],ct<=l?pt>l&&(gt-K)*(l-ct)>(pt-ct)*(e-K)&&++it:pt<=l&&(gt-K)*(l-ct)<(pt-ct)*(e-K)&&--it;return it}function q(){E=S,M=[],O=[],tt=!0}function X(){var it=A(),D=tt&&it,z=(M=Rx(M)).length;(D||z)&&(_.polygonStart(),D&&(_.lineStart(),c(null,null,1,_),_.lineEnd()),z&&Dx(M,p,it,c,_),_.polygonEnd()),E=_,M=O=B=null}function Z(){W.point=at,O&&O.push(B=[]),et=!0,V=!1,j=Y=NaN}function nt(){M&&(at(Q,st),rt&&V&&S.rejoin(),M.push(S.result())),W.point=k,V&&E.lineEnd()}function at(it,D){var z=r(it,D);if(O&&B.push([it,D]),et)Q=it,st=D,rt=z,et=!1,z&&(E.lineStart(),E.point(it,D));else if(z&&V)E.point(it,D);else{var P=[j=Math.max(Th,Math.min(Ju,j)),Y=Math.max(Th,Math.min(Ju,Y))],$=[it=Math.max(Th,Math.min(Ju,it)),D=Math.max(Th,Math.min(Ju,D))];Lb(P,$,e,n,i,l)?(V||(E.lineStart(),E.point(P[0],P[1])),E.point($[0],$[1]),z||E.lineEnd(),tt=!1):z&&(E.lineStart(),E.point(it,D),tt=!1)}j=it,Y=D,V=z}return W}}var bg=uo();function Mb(e,n){var i=n[0],l=n[1],r=[Nn(i),-Mn(i),0],c=0,f=0;bg.reset();for(var p=0,y=e.length;p<y;++p)if(E=(_=e[p]).length)for(var _,E,S=_[E-1],M=S[0],O=S[1]/2+x_,B=Nn(O),Q=Mn(O),st=0;st<E;++st,M=j,B=V,Q=et,S=rt){var rt=_[st],j=rt[0],Y=rt[1]/2+x_,V=Nn(Y),et=Mn(Y),tt=j-M,W=tt>=0?1:-1,k=W*tt,A=k>Xe,q=B*V;if(bg.add(ql(q*W*Nn(k),Q*et+q*Mn(k))),c+=A?tt+W*Rs:tt,A^M>=i^j>=i){var X=Vh(Gl(S),Gl(rt));Zg(X);var Z=Vh(r,X);Zg(Z);var nt=(A^tt>=0?-1:1)*Qo(Z[2]);(l>nt||l===nt&&(X[0]||X[1]))&&(f+=A^tt>=0?1:-1)}}return(c<-gn||c<gn&&bg<-gn)^f&1}uo();function M_(e){return e}uo();uo();var Hl=1/0,Qh=Hl,cc=-Hl,Wh=cc,N_={point:Nb,lineStart:Wu,lineEnd:Wu,polygonStart:Wu,polygonEnd:Wu,result:function(){var e=[[Hl,Qh],[cc,Wh]];return cc=Wh=-(Qh=Hl=1/0),e}};function Nb(e,n){e<Hl&&(Hl=e),e>cc&&(cc=e),n<Qh&&(Qh=n),n>Wh&&(Wh=n)}uo();function Px(e,n,i,l){return function(r,c){var f=n(c),p=r.invert(l[0],l[1]),y=Ax(),_=n(y),E=!1,S,M,O,B={point:Q,lineStart:rt,lineEnd:j,polygonStart:function(){B.point=Y,B.lineStart=V,B.lineEnd=et,M=[],S=[]},polygonEnd:function(){B.point=Q,B.lineStart=rt,B.lineEnd=j,M=Rx(M);var tt=Mb(S,p);M.length?(E||(c.polygonStart(),E=!0),Dx(M,Ab,tt,i,c)):tt&&(E||(c.polygonStart(),E=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),E&&(c.polygonEnd(),E=!1),M=S=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function Q(tt,W){var k=r(tt,W);e(tt=k[0],W=k[1])&&c.point(tt,W)}function st(tt,W){var k=r(tt,W);f.point(k[0],k[1])}function rt(){B.point=st,f.lineStart()}function j(){B.point=Q,f.lineEnd()}function Y(tt,W){O.push([tt,W]);var k=r(tt,W);_.point(k[0],k[1])}function V(){_.lineStart(),O=[]}function et(){Y(O[0][0],O[0][1]),_.lineEnd();var tt=_.clean(),W=y.result(),k,A=W.length,q,X,Z;if(O.pop(),S.push(O),O=null,!!A){if(tt&1){if(X=W[0],(q=X.length-1)>0){for(E||(c.polygonStart(),E=!0),c.lineStart(),k=0;k<q;++k)c.point((Z=X[k])[0],Z[1]);c.lineEnd()}return}A>1&&tt&2&&W.push(W.pop().concat(W.shift())),M.push(W.filter(Ob))}}return B}}function Ob(e){return e.length>1}function Ab(e,n){return((e=e.x)[0]<0?e[1]-Ns-gn:Ns-e[1])-((n=n.x)[0]<0?n[1]-Ns-gn:Ns-n[1])}const O_=Px(function(){return!0},Db,Rb,[-Xe,-Ns]);function Db(e){var n=NaN,i=NaN,l=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(c,f){var p=c>0?Xe:-Xe,y=fi(c-n);fi(y-Xe)<gn?(e.point(n,i=(i+f)/2>0?Ns:-Ns),e.point(l,i),e.lineEnd(),e.lineStart(),e.point(p,i),e.point(c,i),r=0):l!==p&&y>=Xe&&(fi(n-l)<gn&&(n-=l*gn),fi(c-p)<gn&&(c-=p*gn),i=Ib(n,i,c,f),e.point(l,i),e.lineEnd(),e.lineStart(),e.point(p,i),r=0),e.point(n=c,i=f),l=p},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-r}}}function Ib(e,n,i,l){var r,c,f=Nn(e-i);return fi(f)>gn?Eb((Nn(n)*(c=Mn(l))*Nn(i)-Nn(l)*(r=Mn(n))*Nn(e))/(r*c*f)):(n+l)/2}function Rb(e,n,i,l){var r;if(e==null)r=i*Ns,l.point(-Xe,r),l.point(0,r),l.point(Xe,r),l.point(Xe,0),l.point(Xe,-r),l.point(0,-r),l.point(-Xe,-r),l.point(-Xe,0),l.point(-Xe,r);else if(fi(e[0]-n[0])>gn){var c=e[0]<n[0]?Xe:-Xe;r=i*c/2,l.point(-c,r),l.point(0,r),l.point(c,r)}else l.point(n[0],n[1])}function Pb(e,n){var i=Mn(e),l=i>0,r=fi(i)>gn;function c(E,S,M,O){bb(O,e,n,M,E,S)}function f(E,S){return Mn(E)*Mn(S)>i}function p(E){var S,M,O,B,Q;return{lineStart:function(){B=O=!1,Q=1},point:function(st,rt){var j=[st,rt],Y,V=f(st,rt),et=l?V?0:_(st,rt):V?_(st+(st<0?Xe:-Xe),rt):0;if(!S&&(B=O=V)&&E.lineStart(),V!==O&&(Y=y(S,j),(!Y||Ph(S,Y)||Ph(j,Y))&&(j[0]+=gn,j[1]+=gn,V=f(j[0],j[1]))),V!==O)Q=0,V?(E.lineStart(),Y=y(j,S),E.point(Y[0],Y[1])):(Y=y(S,j),E.point(Y[0],Y[1]),E.lineEnd()),S=Y;else if(r&&S&&l^V){var tt;!(et&M)&&(tt=y(j,S,!0))&&(Q=0,l?(E.lineStart(),E.point(tt[0][0],tt[0][1]),E.point(tt[1][0],tt[1][1]),E.lineEnd()):(E.point(tt[1][0],tt[1][1]),E.lineEnd(),E.lineStart(),E.point(tt[0][0],tt[0][1])))}V&&(!S||!Ph(S,j))&&E.point(j[0],j[1]),S=j,O=V,M=et},lineEnd:function(){O&&E.lineEnd(),S=null},clean:function(){return Q|(B&&O)<<1}}}function y(E,S,M){var O=Gl(E),B=Gl(S),Q=[1,0,0],st=Vh(O,B),rt=Sh(st,st),j=st[0],Y=rt-j*j;if(!Y)return!M&&E;var V=i*rt/Y,et=-i*j/Y,tt=Vh(Q,st),W=bh(Q,V),k=bh(st,et);Sg(W,k);var A=tt,q=Sh(W,A),X=Sh(A,A),Z=q*q-X*(Sh(W,W)-1);if(!(Z<0)){var nt=Ql(Z),at=bh(A,(-q-nt)/X);if(Sg(at,W),at=Yg(at),!M)return at;var it=E[0],D=S[0],z=E[1],P=S[1],$;D<it&&($=it,it=D,D=$);var J=D-it,U=fi(J-Xe)<gn,K=U||J<gn;if(!U&&P<z&&($=z,z=P,P=$),K?U?z+P>0^at[1]<(fi(at[0]-it)<gn?z:P):z<=at[1]&&at[1]<=P:J>Xe^(it<=at[0]&&at[0]<=D)){var ct=bh(A,(-q+nt)/X);return Sg(ct,W),[at,Yg(ct)]}}}function _(E,S){var M=l?e:Xe-e,O=0;return E<-M?O|=1:E>M&&(O|=2),S<-M?O|=4:S>M&&(O|=8),O}return Px(f,p,c,l?[0,-e]:[-Xe,e-Xe])}function zx(e){return function(n){var i=new Vg;for(var l in e)i[l]=e[l];return i.stream=n,i}}function Vg(){}Vg.prototype={constructor:Vg,point:function(e,n){this.stream.point(e,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Bx(e,n,i){var l=n[1][0]-n[0][0],r=n[1][1]-n[0][1],c=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),c!=null&&e.clipExtent(null),wb(i,e.stream(N_));var f=N_.result(),p=Math.min(l/(f[1][0]-f[0][0]),r/(f[1][1]-f[0][1])),y=+n[0][0]+(l-p*(f[1][0]+f[0][0]))/2,_=+n[0][1]+(r-p*(f[1][1]+f[0][1]))/2;return c!=null&&e.clipExtent(c),e.scale(p*150).translate([y,_])}function zb(e,n,i){return Bx(e,[[0,0],n],i)}var A_=16,Bb=Mn(30*Zr);function D_(e,n){return+n?Ub(e,n):jb(e)}function jb(e){return zx({point:function(n,i){n=e(n,i),this.stream.point(n[0],n[1])}})}function Ub(e,n){function i(l,r,c,f,p,y,_,E,S,M,O,B,Q,st){var rt=_-l,j=E-r,Y=rt*rt+j*j;if(Y>4*n&&Q--){var V=f+M,et=p+O,tt=y+B,W=Ql(V*V+et*et+tt*tt),k=Qo(tt/=W),A=fi(fi(tt)-1)<gn||fi(c-S)<gn?(c+S)/2:ql(et,V),q=e(A,k),X=q[0],Z=q[1],nt=X-l,at=Z-r,it=j*nt-rt*at;(it*it/Y>n||fi((rt*nt+j*at)/Y-.5)>.3||f*M+p*O+y*B<Bb)&&(i(l,r,c,f,p,y,X,Z,A,V/=W,et/=W,tt,Q,st),st.point(X,Z),i(X,Z,A,V,et,tt,_,E,S,M,O,B,Q,st))}}return function(l){var r,c,f,p,y,_,E,S,M,O,B,Q,st={point:rt,lineStart:j,lineEnd:V,polygonStart:function(){l.polygonStart(),st.lineStart=et},polygonEnd:function(){l.polygonEnd(),st.lineStart=j}};function rt(k,A){k=e(k,A),l.point(k[0],k[1])}function j(){S=NaN,st.point=Y,l.lineStart()}function Y(k,A){var q=Gl([k,A]),X=e(k,A);i(S,M,E,O,B,Q,S=X[0],M=X[1],E=k,O=q[0],B=q[1],Q=q[2],A_,l),l.point(S,M)}function V(){st.point=rt,l.lineEnd()}function et(){j(),st.point=tt,st.lineEnd=W}function tt(k,A){Y(r=k,A),c=S,f=M,p=O,y=B,_=Q,st.point=Y}function W(){i(S,M,E,O,B,Q,c,f,r,p,y,_,A_,l),st.lineEnd=V,V()}return st}}var Fb=zx({point:function(e,n){this.stream.point(e*Zr,n*Zr)}});function qb(e){return Gb(function(){return e})()}function Gb(e){var n,i=150,l=480,r=250,c,f,p=0,y=0,_=0,E=0,S=0,M,O,B=null,Q=O_,st=null,rt,j,Y,V=M_,et=.5,tt=D_(X,et),W,k;function A(at){return at=O(at[0]*Zr,at[1]*Zr),[at[0]*i+c,f-at[1]*i]}function q(at){return at=O.invert((at[0]-c)/i,(f-at[1])/i),at&&[at[0]*no,at[1]*no]}function X(at,it){return at=n(at,it),[at[0]*i+c,f-at[1]*i]}A.stream=function(at){return W&&k===at?W:W=Fb(Q(M,tt(V(k=at))))},A.clipAngle=function(at){return arguments.length?(Q=+at?Pb(B=at*Zr,6*Zr):(B=null,O_),nt()):B*no},A.clipExtent=function(at){return arguments.length?(V=at==null?(st=rt=j=Y=null,M_):kb(st=+at[0][0],rt=+at[0][1],j=+at[1][0],Y=+at[1][1]),nt()):st==null?null:[[st,rt],[j,Y]]},A.scale=function(at){return arguments.length?(i=+at,Z()):i},A.translate=function(at){return arguments.length?(l=+at[0],r=+at[1],Z()):[l,r]},A.center=function(at){return arguments.length?(p=at[0]%360*Zr,y=at[1]%360*Zr,Z()):[p*no,y*no]},A.rotate=function(at){return arguments.length?(_=at[0]%360*Zr,E=at[1]%360*Zr,S=at.length>2?at[2]%360*Zr:0,Z()):[_*no,E*no,S*no]},A.precision=function(at){return arguments.length?(tt=D_(X,et=at*at),nt()):Ql(et)},A.fitExtent=function(at,it){return Bx(A,at,it)},A.fitSize=function(at,it){return zb(A,at,it)};function Z(){O=Ox(M=Sb(_,E,S),n);var at=n(p,y);return c=l-at[0]*i,f=r+at[1]*i,nt()}function nt(){return W=k=null,A}return function(){return n=e.apply(this,arguments),A.invert=n.invert&&q,Z()}}function jx(e){return function(n,i){var l=Mn(n),r=Mn(i),c=e(l*r);return[c*r*Nn(n),c*Nn(i)]}}function Ux(e){return function(n,i){var l=Ql(n*n+i*i),r=e(l),c=Nn(r),f=Mn(r);return[ql(n*c,l*f),Qo(l&&i*c/l)]}}var Hb=jx(function(e){return Ql(2/(1+e))});Hb.invert=Ux(function(e){return 2*Qo(e/2)});var Fx=jx(function(e){return(e=Nx(e))&&e/Nn(e)});Fx.invert=Ux(function(e){return e});function Yb(){return qb(Fx).scale(79.4188).clipAngle(180-.001)}function I_(e,n){return[e,n]}I_.invert=I_;var{BufferOp:Zb,GeoJSONReader:Xb,GeoJSONWriter:Vb}=xb;function Qb(e,n,i){i=i||{};var l=i.units||"kilometers",r=i.steps||8;if(!e)throw new Error("geojson is required");if(typeof i!="object")throw new Error("options must be an object");if(typeof r!="number")throw new Error("steps must be an number");if(n===void 0)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var c=[];switch(e.type){case"GeometryCollection":return xi(e,function(f){var p=zh(f,n,l,r);p&&c.push(p)}),Jt(c);case"FeatureCollection":return Ie(e,function(f){var p=zh(f,n,l,r);p&&Ie(p,function(y){y&&c.push(y)})}),Jt(c)}return zh(e,n,l,r)}function zh(e,n,i,l){var r=e.properties||{},c=e.type==="Feature"?e.geometry:e;if(c.type==="GeometryCollection"){var f=[];return xi(e,function(Q){var st=zh(Q,n,i,l);st&&f.push(st)}),Jt(f)}var p=Wb(c),y={type:c.type,coordinates:Gx(c.coordinates,p)},_=new Xb,E=_.read(y),S=mc(Xl(n,i),"meters"),M=Zb.bufferOp(E,S,l),O=new Vb;if(M=O.write(M),!qx(M.coordinates)){var B={type:M.type,coordinates:Hx(M.coordinates,p)};return Sn(B,r)}}function qx(e){return Array.isArray(e[0])?qx(e[0]):isNaN(e[0])}function Gx(e,n){return typeof e[0]!="object"?n(e):e.map(function(i){return Gx(i,n)})}function Hx(e,n){return typeof e[0]!="object"?n.invert(e):e.map(function(i){return Hx(i,n)})}function Wb(e){var n=df(e).geometry.coordinates,i=[-n[0],-n[1]];return Yb().rotate(i).scale(Wn)}function Lp(e,n={}){let i=0,l=0,r=0;return xi(e,function(c,f,p){let y=n.weight?p?.[n.weight]:void 0;if(y=y??1,!Kn(y))throw new Error("weight value must be a number for feature index "+f);y=Number(y),y>0&&vn(c,function(_){i+=_[0]*y,l+=_[1]*y,r+=y})}),ue([i/r,l/r],n.properties,n)}function _a(e,n={}){let i=0,l=0,r=0;return vn(e,function(c){i+=c[0],l+=c[1],r++},!0),ue([i/r,l/r],n.properties)}function Jb(e,n={}){if(n=n||{},!Be(n))throw new Error("options is invalid");var i=n.counter||10;if(!Kn(i))throw new Error("counter must be a number");var l=n.weight,r=Lp(e,{weight:n.weight}),c=Jt([]);Ie(e,function(p){var y;c.features.push(_a(p,{properties:{weight:(y=p.properties)==null?void 0:y[l]}}))});const f={tolerance:n.tolerance,medianCandidates:[]};return Yx(r.geometry.coordinates,[0,0],c,f,i)}function Yx(e,n,i,l,r){var c=l.tolerance||.001,f=0,p=0,y=0,_=0;if(Ie(i,function(M){var O,B=(O=M.properties)==null?void 0:O.weight,Q=B??1;if(Q=Number(Q),!Kn(Q))throw new Error("weight value must be a number");if(Q>0){_+=1;var st=Q*fn(M,e);st===0&&(st=1);var rt=Q/st;f+=M.geometry.coordinates[0]*rt,p+=M.geometry.coordinates[1]*rt,y+=rt}}),_<1)throw new Error("no features to measure");var E=f/y,S=p/y;return _===1||r===0||Math.abs(E-n[0])<c&&Math.abs(S-n[1])<c?ue([E,S],{medianCandidates:l.medianCandidates}):(l.medianCandidates.push([E,S]),Yx([E,S],e,i,l,r-1))}var Ch={exports:{}},Bh={exports:{}},Kb=Bh.exports,R_;function $b(){return R_||(R_=1,(function(e,n){(function(i,l){e.exports=l()})(Kb,function(){function i(j,Y,V,et,tt){(function W(k,A,q,X,Z){for(;X>q;){if(X-q>600){var nt=X-q+1,at=A-q+1,it=Math.log(nt),D=.5*Math.exp(2*it/3),z=.5*Math.sqrt(it*D*(nt-D)/nt)*(at-nt/2<0?-1:1),P=Math.max(q,Math.floor(A-at*D/nt+z)),$=Math.min(X,Math.floor(A+(nt-at)*D/nt+z));W(k,A,P,$,Z)}var J=k[A],U=q,K=X;for(l(k,q,A),Z(k[X],J)>0&&l(k,q,X);U<K;){for(l(k,U,K),U++,K--;Z(k[U],J)<0;)U++;for(;Z(k[K],J)>0;)K--}Z(k[q],J)===0?l(k,q,K):l(k,++K,X),K<=A&&(q=K+1),A<=K&&(X=K-1)}})(j,Y,V||0,et||j.length-1,tt||r)}function l(j,Y,V){var et=j[Y];j[Y]=j[V],j[V]=et}function r(j,Y){return j<Y?-1:j>Y?1:0}var c=function(j){j===void 0&&(j=9),this._maxEntries=Math.max(4,j),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function f(j,Y,V){if(!V)return Y.indexOf(j);for(var et=0;et<Y.length;et++)if(V(j,Y[et]))return et;return-1}function p(j,Y){y(j,0,j.children.length,Y,j)}function y(j,Y,V,et,tt){tt||(tt=st(null)),tt.minX=1/0,tt.minY=1/0,tt.maxX=-1/0,tt.maxY=-1/0;for(var W=Y;W<V;W++){var k=j.children[W];_(tt,j.leaf?et(k):k)}return tt}function _(j,Y){return j.minX=Math.min(j.minX,Y.minX),j.minY=Math.min(j.minY,Y.minY),j.maxX=Math.max(j.maxX,Y.maxX),j.maxY=Math.max(j.maxY,Y.maxY),j}function E(j,Y){return j.minX-Y.minX}function S(j,Y){return j.minY-Y.minY}function M(j){return(j.maxX-j.minX)*(j.maxY-j.minY)}function O(j){return j.maxX-j.minX+(j.maxY-j.minY)}function B(j,Y){return j.minX<=Y.minX&&j.minY<=Y.minY&&Y.maxX<=j.maxX&&Y.maxY<=j.maxY}function Q(j,Y){return Y.minX<=j.maxX&&Y.minY<=j.maxY&&Y.maxX>=j.minX&&Y.maxY>=j.minY}function st(j){return{children:j,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function rt(j,Y,V,et,tt){for(var W=[Y,V];W.length;)if(!((V=W.pop())-(Y=W.pop())<=et)){var k=Y+Math.ceil((V-Y)/et/2)*et;i(j,k,Y,V,tt),W.push(Y,k,k,V)}}return c.prototype.all=function(){return this._all(this.data,[])},c.prototype.search=function(j){var Y=this.data,V=[];if(!Q(j,Y))return V;for(var et=this.toBBox,tt=[];Y;){for(var W=0;W<Y.children.length;W++){var k=Y.children[W],A=Y.leaf?et(k):k;Q(j,A)&&(Y.leaf?V.push(k):B(j,A)?this._all(k,V):tt.push(k))}Y=tt.pop()}return V},c.prototype.collides=function(j){var Y=this.data;if(!Q(j,Y))return!1;for(var V=[];Y;){for(var et=0;et<Y.children.length;et++){var tt=Y.children[et],W=Y.leaf?this.toBBox(tt):tt;if(Q(j,W)){if(Y.leaf||B(j,W))return!0;V.push(tt)}}Y=V.pop()}return!1},c.prototype.load=function(j){if(!j||!j.length)return this;if(j.length<this._minEntries){for(var Y=0;Y<j.length;Y++)this.insert(j[Y]);return this}var V=this._build(j.slice(),0,j.length-1,0);if(this.data.children.length)if(this.data.height===V.height)this._splitRoot(this.data,V);else{if(this.data.height<V.height){var et=this.data;this.data=V,V=et}this._insert(V,this.data.height-V.height-1,!0)}else this.data=V;return this},c.prototype.insert=function(j){return j&&this._insert(j,this.data.height-1),this},c.prototype.clear=function(){return this.data=st([]),this},c.prototype.remove=function(j,Y){if(!j)return this;for(var V,et,tt,W=this.data,k=this.toBBox(j),A=[],q=[];W||A.length;){if(W||(W=A.pop(),et=A[A.length-1],V=q.pop(),tt=!0),W.leaf){var X=f(j,W.children,Y);if(X!==-1)return W.children.splice(X,1),A.push(W),this._condense(A),this}tt||W.leaf||!B(W,k)?et?(V++,W=et.children[V],tt=!1):W=null:(A.push(W),q.push(V),V=0,et=W,W=W.children[0])}return this},c.prototype.toBBox=function(j){return j},c.prototype.compareMinX=function(j,Y){return j.minX-Y.minX},c.prototype.compareMinY=function(j,Y){return j.minY-Y.minY},c.prototype.toJSON=function(){return this.data},c.prototype.fromJSON=function(j){return this.data=j,this},c.prototype._all=function(j,Y){for(var V=[];j;)j.leaf?Y.push.apply(Y,j.children):V.push.apply(V,j.children),j=V.pop();return Y},c.prototype._build=function(j,Y,V,et){var tt,W=V-Y+1,k=this._maxEntries;if(W<=k)return p(tt=st(j.slice(Y,V+1)),this.toBBox),tt;et||(et=Math.ceil(Math.log(W)/Math.log(k)),k=Math.ceil(W/Math.pow(k,et-1))),(tt=st([])).leaf=!1,tt.height=et;var A=Math.ceil(W/k),q=A*Math.ceil(Math.sqrt(k));rt(j,Y,V,q,this.compareMinX);for(var X=Y;X<=V;X+=q){var Z=Math.min(X+q-1,V);rt(j,X,Z,A,this.compareMinY);for(var nt=X;nt<=Z;nt+=A){var at=Math.min(nt+A-1,Z);tt.children.push(this._build(j,nt,at,et-1))}}return p(tt,this.toBBox),tt},c.prototype._chooseSubtree=function(j,Y,V,et){for(;et.push(Y),!Y.leaf&&et.length-1!==V;){for(var tt=1/0,W=1/0,k=void 0,A=0;A<Y.children.length;A++){var q=Y.children[A],X=M(q),Z=(nt=j,at=q,(Math.max(at.maxX,nt.maxX)-Math.min(at.minX,nt.minX))*(Math.max(at.maxY,nt.maxY)-Math.min(at.minY,nt.minY))-X);Z<W?(W=Z,tt=X<tt?X:tt,k=q):Z===W&&X<tt&&(tt=X,k=q)}Y=k||Y.children[0]}var nt,at;return Y},c.prototype._insert=function(j,Y,V){var et=V?j:this.toBBox(j),tt=[],W=this._chooseSubtree(et,this.data,Y,tt);for(W.children.push(j),_(W,et);Y>=0&&tt[Y].children.length>this._maxEntries;)this._split(tt,Y),Y--;this._adjustParentBBoxes(et,tt,Y)},c.prototype._split=function(j,Y){var V=j[Y],et=V.children.length,tt=this._minEntries;this._chooseSplitAxis(V,tt,et);var W=this._chooseSplitIndex(V,tt,et),k=st(V.children.splice(W,V.children.length-W));k.height=V.height,k.leaf=V.leaf,p(V,this.toBBox),p(k,this.toBBox),Y?j[Y-1].children.push(k):this._splitRoot(V,k)},c.prototype._splitRoot=function(j,Y){this.data=st([j,Y]),this.data.height=j.height+1,this.data.leaf=!1,p(this.data,this.toBBox)},c.prototype._chooseSplitIndex=function(j,Y,V){for(var et,tt,W,k,A,q,X,Z=1/0,nt=1/0,at=Y;at<=V-Y;at++){var it=y(j,0,at,this.toBBox),D=y(j,at,V,this.toBBox),z=(tt=it,W=D,k=void 0,A=void 0,q=void 0,X=void 0,k=Math.max(tt.minX,W.minX),A=Math.max(tt.minY,W.minY),q=Math.min(tt.maxX,W.maxX),X=Math.min(tt.maxY,W.maxY),Math.max(0,q-k)*Math.max(0,X-A)),P=M(it)+M(D);z<Z?(Z=z,et=at,nt=P<nt?P:nt):z===Z&&P<nt&&(nt=P,et=at)}return et||V-Y},c.prototype._chooseSplitAxis=function(j,Y,V){var et=j.leaf?this.compareMinX:E,tt=j.leaf?this.compareMinY:S;this._allDistMargin(j,Y,V,et)<this._allDistMargin(j,Y,V,tt)&&j.children.sort(et)},c.prototype._allDistMargin=function(j,Y,V,et){j.children.sort(et);for(var tt=this.toBBox,W=y(j,0,Y,tt),k=y(j,V-Y,V,tt),A=O(W)+O(k),q=Y;q<V-Y;q++){var X=j.children[q];_(W,j.leaf?tt(X):X),A+=O(W)}for(var Z=V-Y-1;Z>=Y;Z--){var nt=j.children[Z];_(k,j.leaf?tt(nt):nt),A+=O(k)}return A},c.prototype._adjustParentBBoxes=function(j,Y,V){for(var et=V;et>=0;et--)_(Y[et],j)},c.prototype._condense=function(j){for(var Y=j.length-1,V=void 0;Y>=0;Y--)j[Y].children.length===0?Y>0?(V=j[Y-1].children).splice(V.indexOf(j[Y]),1):this.clear():p(j[Y],this.toBBox)},c})})(Bh)),Bh.exports}class Zx{constructor(n=[],i=tL){if(this.data=n,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:i,compare:l}=this,r=i[n];for(;n>0;){const c=n-1>>1,f=i[c];if(l(r,f)>=0)break;i[n]=f,n=c}i[n]=r}_down(n){const{data:i,compare:l}=this,r=this.length>>1,c=i[n];for(;n<r;){let f=(n<<1)+1,p=i[f];const y=f+1;if(y<this.length&&l(i[y],p)<0&&(f=y,p=i[y]),l(p,c)>=0)break;i[n]=p,n=f}i[n]=c}}function tL(e,n){return e<n?-1:e>n?1:0}const eL=Object.freeze(Object.defineProperty({__proto__:null,default:Zx},Symbol.toStringTag,{value:"Module"})),nL=pw(eL);var Bu={exports:{}},Lg,P_;function iL(){return P_||(P_=1,Lg=function(n,i,l,r){var c=n[0],f=n[1],p=!1;l===void 0&&(l=0),r===void 0&&(r=i.length);for(var y=(r-l)/2,_=0,E=y-1;_<y;E=_++){var S=i[l+_*2+0],M=i[l+_*2+1],O=i[l+E*2+0],B=i[l+E*2+1],Q=M>f!=B>f&&c<(O-S)*(f-M)/(B-M)+S;Q&&(p=!p)}return p}),Lg}var Tg,z_;function rL(){return z_||(z_=1,Tg=function(n,i,l,r){var c=n[0],f=n[1],p=!1;l===void 0&&(l=0),r===void 0&&(r=i.length);for(var y=r-l,_=0,E=y-1;_<y;E=_++){var S=i[_+l][0],M=i[_+l][1],O=i[E+l][0],B=i[E+l][1],Q=M>f!=B>f&&c<(O-S)*(f-M)/(B-M)+S;Q&&(p=!p)}return p}),Tg}var B_;function sL(){if(B_)return Bu.exports;B_=1;var e=iL(),n=rL();return Bu.exports=function(l,r,c,f){return r.length>0&&Array.isArray(r[0])?n(l,r,c,f):e(l,r,c,f)},Bu.exports.nested=n,Bu.exports.flat=e,Bu.exports}var Ku={exports:{}},aL=Ku.exports,j_;function oL(){return j_||(j_=1,(function(e,n){(function(i,l){l(n)})(aL,function(i){const r=33306690738754706e-32;function c(Q,st,rt,j,Y){let V,et,tt,W,k=st[0],A=j[0],q=0,X=0;A>k==A>-k?(V=k,k=st[++q]):(V=A,A=j[++X]);let Z=0;if(q<Q&&X<rt)for(A>k==A>-k?(tt=V-((et=k+V)-k),k=st[++q]):(tt=V-((et=A+V)-A),A=j[++X]),V=et,tt!==0&&(Y[Z++]=tt);q<Q&&X<rt;)A>k==A>-k?(tt=V-((et=V+k)-(W=et-V))+(k-W),k=st[++q]):(tt=V-((et=V+A)-(W=et-V))+(A-W),A=j[++X]),V=et,tt!==0&&(Y[Z++]=tt);for(;q<Q;)tt=V-((et=V+k)-(W=et-V))+(k-W),k=st[++q],V=et,tt!==0&&(Y[Z++]=tt);for(;X<rt;)tt=V-((et=V+A)-(W=et-V))+(A-W),A=j[++X],V=et,tt!==0&&(Y[Z++]=tt);return V===0&&Z!==0||(Y[Z++]=V),Z}function f(Q){return new Float64Array(Q)}const p=33306690738754716e-32,y=22204460492503146e-32,_=11093356479670487e-47,E=f(4),S=f(8),M=f(12),O=f(16),B=f(4);i.orient2d=function(Q,st,rt,j,Y,V){const et=(st-V)*(rt-Y),tt=(Q-Y)*(j-V),W=et-tt;if(et===0||tt===0||et>0!=tt>0)return W;const k=Math.abs(et+tt);return Math.abs(W)>=p*k?W:-(function(A,q,X,Z,nt,at,it){let D,z,P,$,J,U,K,ct,gt,pt,yt,Tt,ht,Dt,It,Mt,ft,Xt;const Zt=A-nt,Bt=X-nt,Ut=q-at,Le=Z-at;J=(It=(ct=Zt-(K=(U=134217729*Zt)-(U-Zt)))*(pt=Le-(gt=(U=134217729*Le)-(U-Le)))-((Dt=Zt*Le)-K*gt-ct*gt-K*pt))-(yt=It-(ft=(ct=Ut-(K=(U=134217729*Ut)-(U-Ut)))*(pt=Bt-(gt=(U=134217729*Bt)-(U-Bt)))-((Mt=Ut*Bt)-K*gt-ct*gt-K*pt))),E[0]=It-(yt+J)+(J-ft),J=(ht=Dt-((Tt=Dt+yt)-(J=Tt-Dt))+(yt-J))-(yt=ht-Mt),E[1]=ht-(yt+J)+(J-Mt),J=(Xt=Tt+yt)-Tt,E[2]=Tt-(Xt-J)+(yt-J),E[3]=Xt;let he=(function(Fi,Yt){let bn=Yt[0];for(let Re=1;Re<Fi;Re++)bn+=Yt[Re];return bn})(4,E),At=y*it;if(he>=At||-he>=At||(D=A-(Zt+(J=A-Zt))+(J-nt),P=X-(Bt+(J=X-Bt))+(J-nt),z=q-(Ut+(J=q-Ut))+(J-at),$=Z-(Le+(J=Z-Le))+(J-at),D===0&&z===0&&P===0&&$===0)||(At=_*it+r*Math.abs(he),(he+=Zt*$+Le*D-(Ut*P+Bt*z))>=At||-he>=At))return he;J=(It=(ct=D-(K=(U=134217729*D)-(U-D)))*(pt=Le-(gt=(U=134217729*Le)-(U-Le)))-((Dt=D*Le)-K*gt-ct*gt-K*pt))-(yt=It-(ft=(ct=z-(K=(U=134217729*z)-(U-z)))*(pt=Bt-(gt=(U=134217729*Bt)-(U-Bt)))-((Mt=z*Bt)-K*gt-ct*gt-K*pt))),B[0]=It-(yt+J)+(J-ft),J=(ht=Dt-((Tt=Dt+yt)-(J=Tt-Dt))+(yt-J))-(yt=ht-Mt),B[1]=ht-(yt+J)+(J-Mt),J=(Xt=Tt+yt)-Tt,B[2]=Tt-(Xt-J)+(yt-J),B[3]=Xt;const Ve=c(4,E,4,B,S);J=(It=(ct=Zt-(K=(U=134217729*Zt)-(U-Zt)))*(pt=$-(gt=(U=134217729*$)-(U-$)))-((Dt=Zt*$)-K*gt-ct*gt-K*pt))-(yt=It-(ft=(ct=Ut-(K=(U=134217729*Ut)-(U-Ut)))*(pt=P-(gt=(U=134217729*P)-(U-P)))-((Mt=Ut*P)-K*gt-ct*gt-K*pt))),B[0]=It-(yt+J)+(J-ft),J=(ht=Dt-((Tt=Dt+yt)-(J=Tt-Dt))+(yt-J))-(yt=ht-Mt),B[1]=ht-(yt+J)+(J-Mt),J=(Xt=Tt+yt)-Tt,B[2]=Tt-(Xt-J)+(yt-J),B[3]=Xt;const ti=c(Ve,S,4,B,M);J=(It=(ct=D-(K=(U=134217729*D)-(U-D)))*(pt=$-(gt=(U=134217729*$)-(U-$)))-((Dt=D*$)-K*gt-ct*gt-K*pt))-(yt=It-(ft=(ct=z-(K=(U=134217729*z)-(U-z)))*(pt=P-(gt=(U=134217729*P)-(U-P)))-((Mt=z*P)-K*gt-ct*gt-K*pt))),B[0]=It-(yt+J)+(J-ft),J=(ht=Dt-((Tt=Dt+yt)-(J=Tt-Dt))+(yt-J))-(yt=ht-Mt),B[1]=ht-(yt+J)+(J-Mt),J=(Xt=Tt+yt)-Tt,B[2]=Tt-(Xt-J)+(yt-J),B[3]=Xt;const pn=c(ti,M,4,B,O);return O[pn-1]})(Q,st,rt,j,Y,V,k)},i.orient2dfast=function(Q,st,rt,j,Y,V){return(st-V)*(rt-Y)-(Q-Y)*(j-V)},Object.defineProperty(i,"__esModule",{value:!0})})})(Ku,Ku.exports)),Ku.exports}var U_;function lL(){if(U_)return Ch.exports;U_=1;var e=$b(),n=nL,i=sL(),l=oL().orient2d;n.default&&(n=n.default),Ch.exports=r,Ch.exports.default=r;function r(V,et,tt){et=Math.max(0,et===void 0?2:et),tt=tt||0;var W=O(V),k=new e(16);k.toBBox=function(K){return{minX:K[0],minY:K[1],maxX:K[0],maxY:K[1]}},k.compareMinX=function(K,ct){return K[0]-ct[0]},k.compareMinY=function(K,ct){return K[1]-ct[1]},k.load(V);for(var A=[],q=0,X;q<W.length;q++){var Z=W[q];k.remove(Z),X=B(Z,X),A.push(X)}var nt=new e(16);for(q=0;q<A.length;q++)nt.insert(M(A[q]));for(var at=et*et,it=tt*tt;A.length;){var D=A.shift(),z=D.p,P=D.next.p,$=Q(z,P);if(!($<it)){var J=$/at;Z=c(k,D.prev.p,z,P,D.next.next.p,J,nt),Z&&Math.min(Q(Z,z),Q(Z,P))<=J&&(A.push(D),A.push(B(Z,D)),k.remove(Z),nt.remove(D),nt.insert(M(D)),nt.insert(M(D.next)))}}D=X;var U=[];do U.push(D.p),D=D.next;while(D!==X);return U.push(D.p),U}function c(V,et,tt,W,k,A,q){for(var X=new n([],f),Z=V.data;Z;){for(var nt=0;nt<Z.children.length;nt++){var at=Z.children[nt],it=Z.leaf?st(at,tt,W):p(tt,W,at);it>A||X.push({node:at,dist:it})}for(;X.length&&!X.peek().node.children;){var D=X.pop(),z=D.node,P=st(z,et,tt),$=st(z,W,k);if(D.dist<P&&D.dist<$&&_(tt,z,q)&&_(W,z,q))return z}Z=X.pop(),Z&&(Z=Z.node)}return null}function f(V,et){return V.dist-et.dist}function p(V,et,tt){if(y(V,tt)||y(et,tt))return 0;var W=rt(V[0],V[1],et[0],et[1],tt.minX,tt.minY,tt.maxX,tt.minY);if(W===0)return 0;var k=rt(V[0],V[1],et[0],et[1],tt.minX,tt.minY,tt.minX,tt.maxY);if(k===0)return 0;var A=rt(V[0],V[1],et[0],et[1],tt.maxX,tt.minY,tt.maxX,tt.maxY);if(A===0)return 0;var q=rt(V[0],V[1],et[0],et[1],tt.minX,tt.maxY,tt.maxX,tt.maxY);return q===0?0:Math.min(W,k,A,q)}function y(V,et){return V[0]>=et.minX&&V[0]<=et.maxX&&V[1]>=et.minY&&V[1]<=et.maxY}function _(V,et,tt){for(var W=Math.min(V[0],et[0]),k=Math.min(V[1],et[1]),A=Math.max(V[0],et[0]),q=Math.max(V[1],et[1]),X=tt.search({minX:W,minY:k,maxX:A,maxY:q}),Z=0;Z<X.length;Z++)if(S(X[Z].p,X[Z].next.p,V,et))return!1;return!0}function E(V,et,tt){return l(V[0],V[1],et[0],et[1],tt[0],tt[1])}function S(V,et,tt,W){return V!==W&&et!==tt&&E(V,et,tt)>0!=E(V,et,W)>0&&E(tt,W,V)>0!=E(tt,W,et)>0}function M(V){var et=V.p,tt=V.next.p;return V.minX=Math.min(et[0],tt[0]),V.minY=Math.min(et[1],tt[1]),V.maxX=Math.max(et[0],tt[0]),V.maxY=Math.max(et[1],tt[1]),V}function O(V){for(var et=V[0],tt=V[0],W=V[0],k=V[0],A=0;A<V.length;A++){var q=V[A];q[0]<et[0]&&(et=q),q[0]>W[0]&&(W=q),q[1]<tt[1]&&(tt=q),q[1]>k[1]&&(k=q)}var X=[et,tt,W,k],Z=X.slice();for(A=0;A<V.length;A++)i(V[A],X)||Z.push(V[A]);return Y(Z)}function B(V,et){var tt={p:V,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return et?(tt.next=et.next,tt.prev=et,et.next.prev=tt,et.next=tt):(tt.prev=tt,tt.next=tt),tt}function Q(V,et){var tt=V[0]-et[0],W=V[1]-et[1];return tt*tt+W*W}function st(V,et,tt){var W=et[0],k=et[1],A=tt[0]-W,q=tt[1]-k;if(A!==0||q!==0){var X=((V[0]-W)*A+(V[1]-k)*q)/(A*A+q*q);X>1?(W=tt[0],k=tt[1]):X>0&&(W+=A*X,k+=q*X)}return A=V[0]-W,q=V[1]-k,A*A+q*q}function rt(V,et,tt,W,k,A,q,X){var Z=tt-V,nt=W-et,at=q-k,it=X-A,D=V-k,z=et-A,P=Z*Z+nt*nt,$=Z*at+nt*it,J=at*at+it*it,U=Z*D+nt*z,K=at*D+it*z,ct=P*J-$*$,gt,pt,yt,Tt,ht=ct,Dt=ct;ct===0?(pt=0,ht=1,Tt=K,Dt=J):(pt=$*K-J*U,Tt=P*K-$*U,pt<0?(pt=0,Tt=K,Dt=J):pt>ht&&(pt=ht,Tt=K+$,Dt=J)),Tt<0?(Tt=0,-U<0?pt=0:-U>P?pt=ht:(pt=-U,ht=P)):Tt>Dt&&(Tt=Dt,-U+$<0?pt=0:-U+$>P?pt=ht:(pt=-U+$,ht=P)),gt=pt===0?0:pt/ht,yt=Tt===0?0:Tt/Dt;var It=(1-gt)*V+gt*tt,Mt=(1-gt)*et+gt*W,ft=(1-yt)*k+yt*q,Xt=(1-yt)*A+yt*X,Zt=ft-It,Bt=Xt-Mt;return Zt*Zt+Bt*Bt}function j(V,et){return V[0]===et[0]?V[1]-et[1]:V[0]-et[0]}function Y(V){V.sort(j);for(var et=[],tt=0;tt<V.length;tt++){for(;et.length>=2&&E(et[et.length-2],et[et.length-1],V[tt])<=0;)et.pop();et.push(V[tt])}for(var W=[],k=V.length-1;k>=0;k--){for(;W.length>=2&&E(W[W.length-2],W[W.length-1],V[k])<=0;)W.pop();W.push(V[k])}return W.pop(),et.pop(),et.concat(W)}return Ch.exports}var uL=lL();const cL=oo(uL);function Xx(e,n={}){n.concavity=n.concavity||1/0;const i=[];if(vn(e,r=>{i.push([r[0],r[1]])}),!i.length)return null;const l=cL(i,n.concavity);return l.length>3?le([l]):null}function Vx(e,n={}){switch(cr(e)){case"Point":return ue(ze(e),n.properties);case"Polygon":var i=[];vn(e,function(V){i.push(V)});var l=_a(e,{properties:n.properties}),r=l.geometry.coordinates,c=0,f=0,p=0,y,_,E,S,M,O,B,Q,st=i.map(function(V){return[V[0]-r[0],V[1]-r[1]]});for(y=0;y<i.length-1;y++)_=st[y],S=_[0],O=_[1],E=st[y+1],M=E[0],B=E[1],Q=S*B-M*O,p+=Q,c+=(S+M)*Q,f+=(O+B)*Q;if(p===0)return l;var rt=p*.5,j=1/(6*rt);return ue([r[0]+j*c,r[1]+j*f],n.properties);default:var Y=Xx(e);return Y?Vx(Y,{properties:n.properties}):_a(e,{properties:n.properties})}}function gf(e,n,i={}){const l=i.steps||64,r=i.properties?i.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},c=[];for(let f=0;f<l;f++)c.push(so(e,n,f*-360/l,i).geometry.coordinates);return c.push(c[0]),le([c],r)}function oi(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return Qx(e);case"FeatureCollection":return hL(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Tp(e);default:throw new Error("unknown GeoJSON type")}}function Qx(e){const n={type:"Feature"};return Object.keys(e).forEach(i=>{switch(i){case"type":case"properties":case"geometry":return;default:n[i]=e[i]}}),n.properties=pf(e.properties),e.geometry==null?n.geometry=null:n.geometry=Tp(e.geometry),n}function pf(e){const n={};return e&&Object.keys(e).forEach(i=>{const l=e[i];typeof l=="object"?l===null?n[i]=null:Array.isArray(l)?n[i]=l.map(r=>r):n[i]=pf(l):n[i]=l}),n}function hL(e){const n={type:"FeatureCollection"};return Object.keys(e).forEach(i=>{switch(i){case"type":case"features":return;default:n[i]=e[i]}}),n.features=e.features.map(i=>Qx(i)),n}function Tp(e){const n={type:e.type};return e.bbox&&(n.bbox=e.bbox),e.type==="GeometryCollection"?(n.geometries=e.geometries.map(i=>Tp(i)),n):(n.coordinates=Wx(e.coordinates),n)}function Wx(e){const n=e;return typeof n[0]!="object"?n.slice():n.map(i=>Wx(i))}function Jx(e,n){if(!e)throw new Error("geojson is required");if(e.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(n==null)throw new Error("filter is required");var i=[];return Ie(e,function(l){mf(l.properties,n)&&i.push(l)}),Jt(i)}function Cp(e,n,i){if(!e)throw new Error("geojson is required");if(e.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(n==null)throw new Error("property is required");for(var l=kp(e,n),r=Object.keys(l),c=0;c<r.length;c++){for(var f=r[c],p=l[f],y=[],_=0;_<p.length;_++)y.push(e.features[p[_]]);i(Jt(y),f,c)}}function Kx(e,n,i,l){var r=l;return Cp(e,n,function(c,f,p){p===0&&l===void 0?r=c:r=i(r,c,f,p)}),r}function kp(e,n){var i={};return Ie(e,function(l,r){var c=l.properties||{};if(Object.prototype.hasOwnProperty.call(c,String(n))){var f=c[n];Object.prototype.hasOwnProperty.call(i,f)?i[f].push(r):i[f]=[r]}}),i}function mf(e,n){if(e===void 0)return!1;var i=typeof n;if(i==="number"||i==="string")return Object.prototype.hasOwnProperty.call(e,n);if(Array.isArray(n)){for(var l=0;l<n.length;l++)if(!mf(e,n[l]))return!1;return!0}else return Mp(e,n)}function Mp(e,n){for(var i=Object.keys(n),l=0;l<i.length;l++){var r=i[l];if(e[r]!==n[r])return!1}return!0}function $x(e,n){if(!n)return{};if(!n.length)return{};for(var i={},l=0;l<n.length;l++){var r=n[l];Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i}const fL=Object.freeze(Object.defineProperty({__proto__:null,applyFilter:mf,clusterEach:Cp,clusterReduce:Kx,createBins:kp,filterProperties:$x,getCluster:Jx,propertiesContainsFilter:Mp},Symbol.toStringTag,{value:"Module"})),F_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Cg=1,ju=8;class Np{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,l]=new Uint8Array(n,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");const r=l>>4;if(r!==Cg)throw new Error(`Got v${r} data when expected v${Cg}.`);const c=F_[l&15];if(!c)throw new Error("Unrecognized array type.");const[f]=new Uint16Array(n,2,1),[p]=new Uint32Array(n,4,1);return new Np(p,f,c,n)}constructor(n,i=64,l=Float64Array,r){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=l,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const c=F_.indexOf(this.ArrayType),f=n*2*this.ArrayType.BYTES_PER_ELEMENT,p=n*this.IndexArrayType.BYTES_PER_ELEMENT,y=(8-p%8)%8;if(c<0)throw new Error(`Unexpected typed array class: ${l}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,ju,n),this.coords=new this.ArrayType(this.data,ju+p+y,n*2),this._pos=n*2,this._finished=!0):(this.data=new ArrayBuffer(ju+f+p+y),this.ids=new this.IndexArrayType(this.data,ju,n),this.coords=new this.ArrayType(this.data,ju+p+y,n*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Cg<<4)+c]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=n)}add(n,i){const l=this._pos>>1;return this.ids[l]=l,this.coords[this._pos++]=n,this.coords[this._pos++]=i,l}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Qg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,i,l,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:c,coords:f,nodeSize:p}=this,y=[0,c.length-1,0],_=[];for(;y.length;){const E=y.pop()||0,S=y.pop()||0,M=y.pop()||0;if(S-M<=p){for(let st=M;st<=S;st++){const rt=f[2*st],j=f[2*st+1];rt>=n&&rt<=l&&j>=i&&j<=r&&_.push(c[st])}continue}const O=M+S>>1,B=f[2*O],Q=f[2*O+1];B>=n&&B<=l&&Q>=i&&Q<=r&&_.push(c[O]),(E===0?n<=B:i<=Q)&&(y.push(M),y.push(O-1),y.push(1-E)),(E===0?l>=B:r>=Q)&&(y.push(O+1),y.push(S),y.push(1-E))}return _}within(n,i,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:c,nodeSize:f}=this,p=[0,r.length-1,0],y=[],_=l*l;for(;p.length;){const E=p.pop()||0,S=p.pop()||0,M=p.pop()||0;if(S-M<=f){for(let st=M;st<=S;st++)q_(c[2*st],c[2*st+1],n,i)<=_&&y.push(r[st]);continue}const O=M+S>>1,B=c[2*O],Q=c[2*O+1];q_(B,Q,n,i)<=_&&y.push(r[O]),(E===0?n-l<=B:i-l<=Q)&&(p.push(M),p.push(O-1),p.push(1-E)),(E===0?n+l>=B:i+l>=Q)&&(p.push(O+1),p.push(S),p.push(1-E))}return y}}function Qg(e,n,i,l,r,c){if(r-l<=i)return;const f=l+r>>1;t1(e,n,f,l,r,c),Qg(e,n,i,l,f-1,1-c),Qg(e,n,i,f+1,r,1-c)}function t1(e,n,i,l,r,c){for(;r>l;){if(r-l>600){const _=r-l+1,E=i-l+1,S=Math.log(_),M=.5*Math.exp(2*S/3),O=.5*Math.sqrt(S*M*(_-M)/_)*(E-_/2<0?-1:1),B=Math.max(l,Math.floor(i-E*M/_+O)),Q=Math.min(r,Math.floor(i+(_-E)*M/_+O));t1(e,n,i,B,Q,c)}const f=n[2*i+c];let p=l,y=r;for(Uu(e,n,l,i),n[2*r+c]>f&&Uu(e,n,l,r);p<y;){for(Uu(e,n,p,y),p++,y--;n[2*p+c]<f;)p++;for(;n[2*y+c]>f;)y--}n[2*l+c]===f?Uu(e,n,l,y):(y++,Uu(e,n,y,r)),y<=i&&(l=y+1),i<=y&&(r=y-1)}}function Uu(e,n,i,l){kg(e,i,l),kg(n,2*i,2*l),kg(n,2*i+1,2*l+1)}function kg(e,n,i){const l=e[n];e[n]=e[i],e[i]=l}function q_(e,n,i,l){const r=e-i,c=n-l;return r*r+c*c}const dL=6371,Os=Math.PI/180;function gL(e,n,i,l=1/0,r=1/0,c){let f=1;const p=[];l===void 0&&(l=1/0),r!==void 0&&(f=Yo(r/dL));const y=new Zx([],pL);let _={left:0,right:e.ids.length-1,axis:0,minLng:-180,minLat:-90,maxLng:180,maxLat:90};const E=Math.cos(i*Os);for(;_;){const S=_.right,M=_.left;if(S-M<=e.nodeSize)for(let O=M;O<=S;O++){const B=e.ids[O];{const Q=H_(n,i,e.coords[2*O],e.coords[2*O+1],E);y.push({id:B,dist:Q})}}else{const O=M+S>>1,B=e.coords[2*O],Q=e.coords[2*O+1],st=e.ids[O];{const V=H_(n,i,B,Q,E);y.push({id:st,dist:V})}const rt=(_.axis+1)%2,j={left:M,right:O-1,axis:rt,minLng:_.minLng,minLat:_.minLat,maxLng:_.axis===0?B:_.maxLng,maxLat:_.axis===1?Q:_.maxLat,dist:0},Y={left:O+1,right:S,axis:rt,minLng:_.axis===0?B:_.minLng,minLat:_.axis===1?Q:_.minLat,maxLng:_.maxLng,maxLat:_.maxLat,dist:0};j.dist=G_(n,i,E,j),Y.dist=G_(n,i,E,Y),y.push(j),y.push(Y)}for(;y.length&&y.peek().id!=null;){const O=y.pop();if(O.dist>f||(p.push(O.id),p.length===l))return p}_=y.pop()}return p}function G_(e,n,i,l){const r=l.minLng,c=l.maxLng,f=l.minLat,p=l.maxLat;if(e>=r&&e<=c)return n<f?Yo((n-f)*Os):n>p?Yo((n-p)*Os):0;const y=Math.min(Yo((e-r)*Os),Yo((e-c)*Os)),_=mL(n,y);return _>f&&_<p?jh(y,i,n,_):Math.min(jh(y,i,n,f),jh(y,i,n,p))}function pL(e,n){return e.dist-n.dist}function Yo(e){const n=Math.sin(e/2);return n*n}function jh(e,n,i,l){return n*Math.cos(l*Os)*e+Yo((i-l)*Os)}function H_(e,n,i,l,r){const c=Yo((e-i)*Os);return jh(c,r,n,l)}function mL(e,n){const i=1-2*n;return i<=0?e>0?90:-90:Math.atan(Math.tan(e*Os)/i)/Os}function vL(e,n,i={}){i.mutate!==!0&&(e=oi(e));const l=i.minPoints||3,r=new Np(e.features.length);for(const M of e.features)r.add(M.geometry.coordinates[0],M.geometry.coordinates[1]);r.finish();var c=e.features.map(M=>!1),f=e.features.map(M=>!1),p=e.features.map(M=>!1),y=e.features.map(M=>-1);const _=M=>{const O=e.features[M],[B,Q]=O.geometry.coordinates;return gL(r,B,Q,void 0,n).map(st=>({minX:e.features[st].geometry.coordinates[0],minY:e.features[st].geometry.coordinates[1],maxX:e.features[st].geometry.coordinates[0],maxY:e.features[st].geometry.coordinates[1],index:st}))},E=(M,O)=>{for(var B=0;B<O.length;B++){var Q=O[B];const st=Q.index;if(!c[st]){c[st]=!0;const rt=_(st);rt.length>=l&&O.push(...rt)}f[st]||(f[st]=!0,y[st]=M)}};var S=0;return e.features.forEach((M,O)=>{if(c[O])return;const B=_(O);if(B.length>=l){const Q=S;S++,c[O]=!0,E(Q,B)}else p[O]=!0}),e.features.forEach((M,O)=>{var B=e.features[O];B.properties||(B.properties={}),y[O]>=0?(B.properties.dbscan=p[O]?"edge":"core",B.properties.cluster=y[O]):B.properties.dbscan="noise"}),e}var Mg,Y_;function e1(){return Y_||(Y_=1,Mg={eudist:function(n,i,l){for(var r=n.length,c=0,f=0;f<r;f++){var p=(n[f]||0)-(i[f]||0);c+=p*p}return l?Math.sqrt(c):c},mandist:function(n,i,l){for(var r=n.length,c=0,f=0;f<r;f++)c+=Math.abs((n[f]||0)-(i[f]||0));return l?Math.sqrt(c):c},dist:function(n,i,l){var r=Math.abs(n-i);return l?r:r*r}}),Mg}var Ng,Z_;function yL(){if(Z_)return Ng;Z_=1;var e=e1(),n=e.eudist,i=e.dist;return Ng={kmrand:function(r,c){for(var f={},p=[],y=c<<2,_=r.length,E=r[0].length>0;p.length<c&&y-- >0;){var S=r[Math.floor(Math.random()*_)],M=E?S.join("_"):""+S;f[M]||(f[M]=!0,p.push(S))}if(p.length<c)throw new Error("Error initializating clusters");return p},kmpp:function(r,c){var f=r[0].length?n:i,p=[],y=r.length,_=r[0].length>0,E=r[Math.floor(Math.random()*y)];for(_?E.join("_"):""+E,p.push(E);p.length<c;){for(var S=[],M=p.length,O=0,B=[],Q=0;Q<y;Q++){for(var st=1/0,rt=0;rt<M;rt++){var j=f(r[Q],p[rt]);j<=st&&(st=j)}S[Q]=st}for(var Y=0;Y<y;Y++)O+=S[Y];for(var V=0;V<y;V++)B[V]={i:V,v:r[V],pr:S[V]/O,cs:0};B.sort(function(k,A){return k.pr-A.pr}),B[0].cs=B[0].pr;for(var et=1;et<y;et++)B[et].cs=B[et-1].cs+B[et].pr;for(var tt=Math.random(),W=0;W<y-1&&B[W++].cs<tt;);p.push(B[W-1].v)}return p}},Ng}var Og,X_;function _L(){if(X_)return Og;X_=1;var e=e1(),n=yL(),i=e.eudist;e.mandist,e.dist;var l=n.kmrand,r=n.kmpp,c=1e4;function f(y,_,E){E=E||[];for(var S=0;S<y;S++)E[S]=_;return E}function p(y,_,E,S){var M=[],O=[],B=[],Q=[],st=!1,rt=S||c,j=y.length,Y=y[0].length,V=Y>0,et=[];if(E)E=="kmrand"?M=l(y,_):E=="kmpp"?M=r(y,_):M=E;else for(var tt={};M.length<_;){var W=Math.floor(Math.random()*j);tt[W]||(tt[W]=!0,M.push(y[W]))}do{f(_,0,et);for(var k=0;k<j;k++){for(var A=1/0,q=0,X=0;X<_;X++){var Q=V?i(y[k],M[X]):Math.abs(y[k]-M[X]);Q<=A&&(A=Q,q=X)}B[k]=q,et[q]++}for(var Z=[],O=[],nt=0;nt<_;nt++)Z[nt]=V?f(Y,0,Z[nt]):0,O[nt]=M[nt];if(V){for(var at=0;at<_;at++)M[at]=[];for(var it=0;it<j;it++)for(var D=B[it],z=Z[D],P=y[it],$=0;$<Y;$++)z[$]+=P[$];st=!0;for(var J=0;J<_;J++){for(var U=M[J],K=Z[J],ct=O[J],gt=et[J],pt=0;pt<Y;pt++)U[pt]=K[pt]/gt||0;if(st){for(var yt=0;yt<Y;yt++)if(ct[yt]!=U[yt]){st=!1;break}}}}else{for(var Tt=0;Tt<j;Tt++){var ht=B[Tt];Z[ht]+=y[Tt]}for(var Dt=0;Dt<_;Dt++)M[Dt]=Z[Dt]/et[Dt]||0;st=!0;for(var It=0;It<_;It++)if(O[It]!=M[It]){st=!1;break}}st=st||--rt<=0}while(!st);return{it:c-rt,k:_,idxs:B,centroids:M}}return Og=p,Og}var xL=_L();const EL=oo(xL);function wL(e,n={}){var i=e.features.length;n.numberOfClusters=n.numberOfClusters||Math.round(Math.sqrt(i/2)),n.numberOfClusters>i&&(n.numberOfClusters=i),n.mutate!==!0&&(e=oi(e));var l=lc(e),r=l.slice(0,n.numberOfClusters),c=EL(l,n.numberOfClusters,r),f={};return c.centroids.forEach(function(p,y){f[y]=p}),Ie(e,function(p,y){var _=c.idxs[y];p.properties.cluster=_,p.properties.centroid=f[_]}),e}function SL(e,n,i,l){var r=new hf(6),c=n.features.map(function(f){var p;return{minX:f.geometry.coordinates[0],minY:f.geometry.coordinates[1],maxX:f.geometry.coordinates[0],maxY:f.geometry.coordinates[1],property:(p=f.properties)==null?void 0:p[i]}});return r.load(c),e.features.forEach(function(f){f.properties||(f.properties={});var p=Ne(f),y=r.search({minX:p[0],minY:p[1],maxX:p[2],maxY:p[3]}),_=[];y.forEach(function(E){re([E.minX,E.minY],f)&&_.push(E.property)}),f.properties[l]=_}),e}function bL(e){var n={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return Ie(e,i=>{var l;switch((l=i.geometry)==null?void 0:l.type){case"Point":n.MultiPoint.coordinates.push(i.geometry.coordinates),n.MultiPoint.properties.push(i.properties);break;case"MultiPoint":n.MultiPoint.coordinates.push(...i.geometry.coordinates),n.MultiPoint.properties.push(i.properties);break;case"LineString":n.MultiLineString.coordinates.push(i.geometry.coordinates),n.MultiLineString.properties.push(i.properties);break;case"MultiLineString":n.MultiLineString.coordinates.push(...i.geometry.coordinates),n.MultiLineString.properties.push(i.properties);break;case"Polygon":n.MultiPolygon.coordinates.push(i.geometry.coordinates),n.MultiPolygon.properties.push(i.properties);break;case"MultiPolygon":n.MultiPolygon.coordinates.push(...i.geometry.coordinates),n.MultiPolygon.properties.push(i.properties);break}}),Jt(Object.keys(n).filter(function(i){return n[i].coordinates.length}).sort().map(function(i){var l={type:i,coordinates:n[i].coordinates},r={collectedProperties:n[i].properties};return Sn(l,r)}))}function n1(e,n){let i=!1;return Jt(CL(e.features.map(l=>{const r={x:l.geometry.coordinates[0],y:l.geometry.coordinates[1]};return n?r.z=l.properties[n]:l.geometry.coordinates.length===3&&(i=!0,r.z=l.geometry.coordinates[2]),r})).map(l=>{const r=[l.a.x,l.a.y],c=[l.b.x,l.b.y],f=[l.c.x,l.c.y];let p={};return i?(r.push(l.a.z),c.push(l.b.z),f.push(l.c.z)):p={a:l.a.z,b:l.b.z,c:l.c.z},le([[r,c,f,r]],p)}))}var V_=class{constructor(e,n,i){this.a=e,this.b=n,this.c=i;const l=n.x-e.x,r=n.y-e.y,c=i.x-e.x,f=i.y-e.y,p=l*(e.x+n.x)+r*(e.y+n.y),y=c*(e.x+i.x)+f*(e.y+i.y),_=2*(l*(i.y-n.y)-r*(i.x-n.x));let E,S;this.x=(f*p-r*y)/_,this.y=(l*y-c*p)/_,E=this.x-e.x,S=this.y-e.y,this.r=E*E+S*S}};function LL(e,n){return n.x-e.x}function TL(e){let n=e.length,i,l,r,c,f;t:for(;n;)for(l=e[--n],i=e[--n],r=n;r;)if(f=e[--r],c=e[--r],i===c&&l===f||i===f&&l===c){e.splice(n,2),e.splice(r,2),n-=2;continue t}}function CL(e){if(e.length<3)return[];e.sort(LL);let n=e.length-1;const i=e[n].x,l=e[0].x;let r=e[n].y,c=r;const f=1e-12;let p,y,_,E,S,M;for(;n--;)e[n].y<r&&(r=e[n].y),e[n].y>c&&(c=e[n].y);let O=l-i,B=c-r;const Q=O>B?O:B,st=(l+i)*.5,rt=(c+r)*.5,j=[new V_({__sentinel:!0,x:st-20*Q,y:rt-Q},{__sentinel:!0,x:st,y:rt+20*Q},{__sentinel:!0,x:st+20*Q,y:rt-Q})],Y=[],V=[];let et;for(n=e.length;n--;){for(V.length=0,et=j.length;et--;){if(O=e[n].x-j[et].x,O>0&&O*O>j[et].r){Y.push(j[et]),j.splice(et,1);continue}B=e[n].y-j[et].y,!(O*O+B*B>j[et].r)&&(V.push(j[et].a,j[et].b,j[et].b,j[et].c,j[et].c,j[et].a),j.splice(et,1))}for(TL(V),et=V.length;et;)y=V[--et],p=V[--et],_=e[n],E=y.x-p.x,S=y.y-p.y,M=2*(E*(_.y-y.y)-S*(_.x-y.x)),Math.abs(M)>f&&j.push(new V_(p,y,_))}for(Array.prototype.push.apply(Y,j),n=Y.length;n--;)(Y[n].a.__sentinel||Y[n].b.__sentinel||Y[n].c.__sentinel)&&Y.splice(n,1);return Y}function kL(e){return e}function ML(e){if(e==null)return kL;var n,i,l=e.scale[0],r=e.scale[1],c=e.translate[0],f=e.translate[1];return function(p,y){y||(n=i=0);var _=2,E=p.length,S=new Array(E);for(S[0]=(n+=p[0])*l+c,S[1]=(i+=p[1])*r+f;_<E;)S[_]=p[_],++_;return S}}function NL(e,n){for(var i,l=e.length,r=l-n;r<--l;)i=e[r],e[r++]=e[l],e[l]=i}function OL(e,n){return typeof n=="string"&&(n=e.objects[n]),n.type==="GeometryCollection"?{type:"FeatureCollection",features:n.geometries.map(function(i){return Q_(e,i)})}:Q_(e,n)}function Q_(e,n){var i=n.id,l=n.bbox,r=n.properties==null?{}:n.properties,c=Op(e,n);return i==null&&l==null?{type:"Feature",properties:r,geometry:c}:l==null?{type:"Feature",id:i,properties:r,geometry:c}:{type:"Feature",id:i,bbox:l,properties:r,geometry:c}}function Op(e,n){var i=ML(e.transform),l=e.arcs;function r(E,S){S.length&&S.pop();for(var M=l[E<0?~E:E],O=0,B=M.length;O<B;++O)S.push(i(M[O],O));E<0&&NL(S,B)}function c(E){return i(E)}function f(E){for(var S=[],M=0,O=E.length;M<O;++M)r(E[M],S);return S.length<2&&S.push(S[0]),S}function p(E){for(var S=f(E);S.length<4;)S.push(S[0]);return S}function y(E){return E.map(p)}function _(E){var S=E.type,M;switch(S){case"GeometryCollection":return{type:S,geometries:E.geometries.map(_)};case"Point":M=c(E.coordinates);break;case"MultiPoint":M=E.coordinates.map(c);break;case"LineString":M=f(E.arcs);break;case"MultiLineString":M=E.arcs.map(f);break;case"Polygon":M=y(E.arcs);break;case"MultiPolygon":M=E.arcs.map(y);break;default:return null}return{type:S,coordinates:M}}return _(n)}function AL(e,n){var i={},l={},r={},c=[],f=-1;n.forEach(function(_,E){var S=e.arcs[_<0?~_:_],M;S.length<3&&!S[1][0]&&!S[1][1]&&(M=n[++f],n[f]=_,n[E]=M)}),n.forEach(function(_){var E=p(_),S=E[0],M=E[1],O,B;if(O=r[S])if(delete r[O.end],O.push(_),O.end=M,B=l[M]){delete l[B.start];var Q=B===O?O:O.concat(B);l[Q.start=O.start]=r[Q.end=B.end]=Q}else l[O.start]=r[O.end]=O;else if(O=l[M])if(delete l[O.start],O.unshift(_),O.start=S,B=r[S]){delete r[B.end];var st=B===O?O:B.concat(O);l[st.start=B.start]=r[st.end=O.end]=st}else l[O.start]=r[O.end]=O;else O=[_],l[O.start=S]=r[O.end=M]=O});function p(_){var E=e.arcs[_<0?~_:_],S=E[0],M;return e.transform?(M=[0,0],E.forEach(function(O){M[0]+=O[0],M[1]+=O[1]})):M=E[E.length-1],_<0?[M,S]:[S,M]}function y(_,E){for(var S in _){var M=_[S];delete E[M.start],delete M.start,delete M.end,M.forEach(function(O){i[O<0?~O:O]=1}),c.push(M)}}return y(r,l),y(l,r),n.forEach(function(_){i[_<0?~_:_]||c.push([_])}),c}function DL(e){for(var n=-1,i=e.length,l,r=e[i-1],c=0;++n<i;)l=r,r=e[n],c+=l[0]*r[1]-l[1]*r[0];return Math.abs(c)}function IL(e){return Op(e,RL.apply(this,arguments))}function RL(e,n){var i={},l=[],r=[];n.forEach(c);function c(y){switch(y.type){case"GeometryCollection":y.geometries.forEach(c);break;case"Polygon":f(y.arcs);break;case"MultiPolygon":y.arcs.forEach(f);break}}function f(y){y.forEach(function(_){_.forEach(function(E){(i[E=E<0?~E:E]||(i[E]=[])).push(y)})}),l.push(y)}function p(y){return DL(Op(e,{type:"Polygon",arcs:[y]}).coordinates[0])}return l.forEach(function(y){if(!y._){var _=[],E=[y];for(y._=1,r.push(_);y=E.pop();)_.push(y),y.forEach(function(S){S.forEach(function(M){i[M<0?~M:M].forEach(function(O){O._||(O._=1,E.push(O))})})})}}),l.forEach(function(y){delete y._}),{type:"MultiPolygon",arcs:r.map(function(y){var _=[],E;if(y.forEach(function(Q){Q.forEach(function(st){st.forEach(function(rt){i[rt<0?~rt:rt].length<2&&_.push(rt)})})}),_=AL(e,_),(E=_.length)>1)for(var S=1,M=p(_[0]),O,B;S<E;++S)(O=p(_[S]))>M&&(B=_[0],_[0]=_[S],_[S]=B,M=O);return _}).filter(function(y){return y.length>0})}}var Ap=Object.prototype.hasOwnProperty;function PL(e){var n=1/0,i=1/0,l=-1/0,r=-1/0;function c(S){S!=null&&Ap.call(f,S.type)&&f[S.type](S)}var f={GeometryCollection:function(S){S.geometries.forEach(c)},Point:function(S){p(S.coordinates)},MultiPoint:function(S){S.coordinates.forEach(p)},LineString:function(S){y(S.arcs)},MultiLineString:function(S){S.arcs.forEach(y)},Polygon:function(S){S.arcs.forEach(y)},MultiPolygon:function(S){S.arcs.forEach(_)}};function p(S){var M=S[0],O=S[1];M<n&&(n=M),M>l&&(l=M),O<i&&(i=O),O>r&&(r=O)}function y(S){S.forEach(p)}function _(S){S.forEach(y)}for(var E in e)c(e[E]);return l>=n&&r>=i?[n,i,l,r]:void 0}function zL(e,n,i,l,r){arguments.length===3&&(l=Array,r=null);for(var c=new l(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),f=e-1,p=0;p<e;++p)c[p]=r;function y(S){for(var M=n(S)&f,O=c[M],B=0;O!=r;){if(i(O,S))return!0;if(++B>=e)throw new Error("full hashset");O=c[M=M+1&f]}return c[M]=S,!0}function _(S){for(var M=n(S)&f,O=c[M],B=0;O!=r;){if(i(O,S))return!0;if(++B>=e)break;O=c[M=M+1&f]}return!1}function E(){for(var S=[],M=0,O=c.length;M<O;++M){var B=c[M];B!=r&&S.push(B)}return S}return{add:y,has:_,values:E}}function Dp(e,n,i,l,r,c){arguments.length===3&&(l=c=Array,r=null);for(var f=new l(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),p=new c(e),y=e-1,_=0;_<e;++_)f[_]=r;function E(B,Q){for(var st=n(B)&y,rt=f[st],j=0;rt!=r;){if(i(rt,B))return p[st]=Q;if(++j>=e)throw new Error("full hashmap");rt=f[st=st+1&y]}return f[st]=B,p[st]=Q,Q}function S(B,Q){for(var st=n(B)&y,rt=f[st],j=0;rt!=r;){if(i(rt,B))return p[st];if(++j>=e)throw new Error("full hashmap");rt=f[st=st+1&y]}return f[st]=B,p[st]=Q,Q}function M(B,Q){for(var st=n(B)&y,rt=f[st],j=0;rt!=r;){if(i(rt,B))return p[st];if(++j>=e)break;rt=f[st=st+1&y]}return Q}function O(){for(var B=[],Q=0,st=f.length;Q<st;++Q){var rt=f[Q];rt!=r&&B.push(rt)}return B}return{set:E,maybeSet:S,get:M,keys:O}}function Go(e,n){return e[0]===n[0]&&e[1]===n[1]}var i1=new ArrayBuffer(16),W_=new Float64Array(i1),kh=new Uint32Array(i1);function Wg(e){W_[0]=e[0],W_[1]=e[1];var n=kh[0]^kh[1];return n=n<<5^n>>7^kh[2]^kh[3],n&2147483647}function BL(e){var n=e.coordinates,i=e.lines,l=e.rings,r=tt(),c=new Int32Array(n.length),f=new Int32Array(n.length),p=new Int32Array(n.length),y=new Int8Array(n.length),_=0,E,S,M,O,B;for(E=0,S=n.length;E<S;++E)c[E]=f[E]=p[E]=-1;for(E=0,S=i.length;E<S;++E){var Q=i[E],st=Q[0],rt=Q[1];for(O=r[st],B=r[++st],++_,y[O]=1;++st<=rt;)et(E,M=O,O=B,B=r[st]);++_,y[B]=1}for(E=0,S=n.length;E<S;++E)c[E]=-1;for(E=0,S=l.length;E<S;++E){var j=l[E],Y=j[0]+1,V=j[1];for(M=r[V-1],O=r[Y-1],B=r[Y],et(E,M,O,B);++Y<=V;)et(E,M=O,O=B,B=r[Y])}function et(X,Z,nt,at){if(c[nt]!==X){c[nt]=X;var it=f[nt];if(it>=0){var D=p[nt];(it!==Z||D!==at)&&(it!==at||D!==Z)&&(++_,y[nt]=1)}else f[nt]=Z,p[nt]=at}}function tt(){for(var X=Dp(n.length*1.4,W,k,Int32Array,-1,Int32Array),Z=new Int32Array(n.length),nt=0,at=n.length;nt<at;++nt)Z[nt]=X.maybeSet(nt,nt);return Z}function W(X){return Wg(n[X])}function k(X,Z){return Go(n[X],n[Z])}c=f=p=null;var A=zL(_*1.4,Wg,Go),q;for(E=0,S=n.length;E<S;++E)y[q=r[E]]&&A.add(n[q]);return A}function jL(e){var n=BL(e),i=e.coordinates,l=e.lines,r=e.rings,c,f,p;for(f=0,p=l.length;f<p;++f)for(var y=l[f],_=y[0],E=y[1];++_<E;)n.has(i[_])&&(c={0:_,1:y[1]},y[1]=_,y=y.next=c);for(f=0,p=r.length;f<p;++f)for(var S=r[f],M=S[0],O=M,B=S[1],Q=n.has(i[M]);++O<B;)n.has(i[O])&&(Q?(c={0:O,1:S[1]},S[1]=O,S=S.next=c):(UL(i,M,B,B-O),i[B]=i[M],Q=!0,O=M));return e}function UL(e,n,i,l){Ag(e,n,i),Ag(e,n,n+l),Ag(e,n+l,i)}function Ag(e,n,i){for(var l=n+(i---n>>1),r;n<l;++n,--i)r=e[n],e[n]=e[i],e[i]=r}function FL(e){var n=e.coordinates,i=e.lines,l,r=e.rings,c,f=i.length+r.length,p,y;for(delete e.lines,delete e.rings,p=0,y=i.length;p<y;++p)for(l=i[p];l=l.next;)++f;for(p=0,y=r.length;p<y;++p)for(c=r[p];c=c.next;)++f;var _=Dp(f*2*1.4,Wg,Go),E=e.arcs=[];for(p=0,y=i.length;p<y;++p){l=i[p];do S(l);while(l=l.next)}for(p=0,y=r.length;p<y;++p)if(c=r[p],c.next)do S(c);while(c=c.next);else M(c);function S(j){var Y,V,et,tt,W,k,A,q;if(et=_.get(Y=n[j[0]])){for(A=0,q=et.length;A<q;++A)if(tt=et[A],O(tt,j)){j[0]=tt[0],j[1]=tt[1];return}}if(W=_.get(V=n[j[1]])){for(A=0,q=W.length;A<q;++A)if(k=W[A],B(k,j)){j[1]=k[0],j[0]=k[1];return}}et?et.push(j):_.set(Y,[j]),W?W.push(j):_.set(V,[j]),E.push(j)}function M(j){var Y,V,et,tt,W;if(V=_.get(Y=n[j[0]]))for(tt=0,W=V.length;tt<W;++tt){if(et=V[tt],Q(et,j)){j[0]=et[0],j[1]=et[1];return}if(st(et,j)){j[0]=et[1],j[1]=et[0];return}}if(V=_.get(Y=n[j[0]+rt(j)]))for(tt=0,W=V.length;tt<W;++tt){if(et=V[tt],Q(et,j)){j[0]=et[0],j[1]=et[1];return}if(st(et,j)){j[0]=et[1],j[1]=et[0];return}}V?V.push(j):_.set(Y,[j]),E.push(j)}function O(j,Y){var V=j[0],et=Y[0],tt=j[1],W=Y[1];if(V-tt!==et-W)return!1;for(;V<=tt;++V,++et)if(!Go(n[V],n[et]))return!1;return!0}function B(j,Y){var V=j[0],et=Y[0],tt=j[1],W=Y[1];if(V-tt!==et-W)return!1;for(;V<=tt;++V,--W)if(!Go(n[V],n[W]))return!1;return!0}function Q(j,Y){var V=j[0],et=Y[0],tt=j[1],W=Y[1],k=tt-V;if(k!==W-et)return!1;for(var A=rt(j),q=rt(Y),X=0;X<k;++X)if(!Go(n[V+(X+A)%k],n[et+(X+q)%k]))return!1;return!0}function st(j,Y){var V=j[0],et=Y[0],tt=j[1],W=Y[1],k=tt-V;if(k!==W-et)return!1;for(var A=rt(j),q=k-rt(Y),X=0;X<k;++X)if(!Go(n[V+(X+A)%k],n[W-(X+q)%k]))return!1;return!0}function rt(j){for(var Y=j[0],V=j[1],et=Y,tt=et,W=n[et];++et<V;){var k=n[et];(k[0]<W[0]||k[0]===W[0]&&k[1]<W[1])&&(tt=et,W=k)}return tt-Y}return e}function qL(e){var n=-1,i=[],l=[],r=[];function c(S){S&&Ap.call(f,S.type)&&f[S.type](S)}var f={GeometryCollection:function(S){S.geometries.forEach(c)},LineString:function(S){S.arcs=p(S.arcs)},MultiLineString:function(S){S.arcs=S.arcs.map(p)},Polygon:function(S){S.arcs=S.arcs.map(y)},MultiPolygon:function(S){S.arcs=S.arcs.map(_)}};function p(S){for(var M=0,O=S.length;M<O;++M)r[++n]=S[M];var B={0:n-O+1,1:n};return i.push(B),B}function y(S){for(var M=0,O=S.length;M<O;++M)r[++n]=S[M];var B={0:n-O+1,1:n};return l.push(B),B}function _(S){return S.map(y)}for(var E in e)c(e[E]);return{type:"Topology",coordinates:r,lines:i,rings:l,objects:e}}function GL(e){var n={},i;for(i in e)n[i]=HL(e[i]);return n}function HL(e){return e==null?{type:null}:(e.type==="FeatureCollection"?YL:e.type==="Feature"?r1:Ip)(e)}function YL(e){var n={type:"GeometryCollection",geometries:e.features.map(r1)};return e.bbox!=null&&(n.bbox=e.bbox),n}function r1(e){var n=Ip(e.geometry),i;e.id!=null&&(n.id=e.id),e.bbox!=null&&(n.bbox=e.bbox);for(i in e.properties){n.properties=e.properties;break}return n}function Ip(e){if(e==null)return{type:null};var n=e.type==="GeometryCollection"?{type:"GeometryCollection",geometries:e.geometries.map(Ip)}:e.type==="Point"||e.type==="MultiPoint"?{type:e.type,coordinates:e.coordinates}:{type:e.type,arcs:e.coordinates};return e.bbox!=null&&(n.bbox=e.bbox),n}function ZL(e,n){var i=PL(e=GL(e)),l=FL(jL(qL(e))),r=l.coordinates,c=Dp(l.arcs.length*1.4,XL,VL);e=l.objects,l.bbox=i,l.arcs=l.arcs.map(function(S,M){return c.set(S,M),r.slice(S[0],S[1]+1)}),delete l.coordinates,r=null;function f(S){S&&Ap.call(p,S.type)&&p[S.type](S)}var p={GeometryCollection:function(S){S.geometries.forEach(f)},LineString:function(S){S.arcs=y(S.arcs)},MultiLineString:function(S){S.arcs=S.arcs.map(y)},Polygon:function(S){S.arcs=S.arcs.map(y)},MultiPolygon:function(S){S.arcs=S.arcs.map(_)}};function y(S){var M=[];do{var O=c.get(S);M.push(S[0]<S[1]?O:~O)}while(S=S.next);return M}function _(S){return S.map(y)}for(var E in e)f(e[E]);return l}function XL(e){var n=e[0],i=e[1],l;return i<n&&(l=n,n=i,i=l),n+31*i}function VL(e,n){var i=e[0],l=e[1],r=n[0],c=n[1],f;return l<i&&(f=i,i=l,l=f),c<r&&(f=r,r=c,c=f),i===r&&l===c}function QL(e,n={}){if(n=n||{},!Be(n))throw new Error("options is invalid");const i=n.mutate;if(cr(e)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");(i===!1||i===void 0)&&(e=oi(e));const l=[],r=yp(e,(c,f)=>{const p=WL(c,f);return p||(l.push(c),f)});return r&&l.push(r),l.length?l.length===1?l[0]:lo(l.map(c=>c.coordinates)):null}function Mh(e){return e[0].toString()+","+e[1].toString()}function WL(e,n){const i=e.geometry.coordinates,l=n.geometry.coordinates,r=Mh(i[0]),c=Mh(i[i.length-1]),f=Mh(l[0]),p=Mh(l[l.length-1]);let y;if(r===p)y=l.concat(i.slice(1));else if(f===c)y=i.concat(l.slice(1));else if(r===f)y=i.slice(1).reverse().concat(l);else if(c===p)y=i.concat(l.reverse().slice(1));else return null;return Se(y)}function JL(e,n={}){if(cr(e)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");(n.mutate===!1||n.mutate===void 0)&&(e=oi(e));const i=[];$n(e,c=>{i.push(c.geometry)});const l=ZL({geoms:lp(i).geometry});return IL(l,l.objects.geoms.geometries)}function KL(e,n={}){if(n=n||{},!Be(n))throw new Error("options is invalid");const i=n.mutate;if(cr(e)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");(i===!1||i===void 0)&&(e=oi(e));const l=$L(e);if(!l)throw new Error("geojson must be homogenous");const r=e;switch(l){case"LineString":return QL(r,n);case"Polygon":return JL(r,n);default:throw new Error(l+" is not supported")}}function $L(e){const n={};$n(e,l=>{n[l.geometry.type]=!0});const i=Object.keys(n);return i.length===1?i[0]:null}function tT(e,n={}){const i=n.maxEdge||1/0,l=eT(e),r=n1(l);if(r.features=r.features.filter(f=>{const p=f.geometry.coordinates[0][0],y=f.geometry.coordinates[0][1],_=f.geometry.coordinates[0][2],E=fn(p,y,n),S=fn(y,_,n),M=fn(p,_,n);return E<=i&&S<=i&&M<=i}),r.features.length<1)return null;const c=KL(r);return c.coordinates.length===1&&(c.coordinates=c.coordinates[0],c.type="Polygon"),Sn(c)}function eT(e){const n=[],i={};return Ie(e,l=>{if(!l.geometry)return;const r=l.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(i,r)||(n.push(l),i[r]=!0)}),Jt(n)}var nT=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Dg=Math.ceil,Hr=Math.floor,lr="[BigNumber Error] ",J_=lr+"Number primitive has more than 15 significant digits: ",us=1e14,ye=14,Ig=9007199254740991,Rg=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],io=1e7,hi=1e9;function s1(e){var n,i,l,r=j.prototype={constructor:j,toString:null,valueOf:null},c=new j(1),f=20,p=4,y=-7,_=21,E=-1e7,S=1e7,M=!1,O=1,B=0,Q={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},st="0123456789abcdefghijklmnopqrstuvwxyz",rt=!0;function j(k,A){var q,X,Z,nt,at,it,D,z,P=this;if(!(P instanceof j))return new j(k,A);if(A==null){if(k&&k._isBigNumber===!0){P.s=k.s,!k.c||k.e>S?P.c=P.e=null:k.e<E?P.c=[P.e=0]:(P.e=k.e,P.c=k.c.slice());return}if((it=typeof k=="number")&&k*0==0){if(P.s=1/k<0?(k=-k,-1):1,k===~~k){for(nt=0,at=k;at>=10;at/=10,nt++);nt>S?P.c=P.e=null:(P.e=nt,P.c=[k]);return}z=String(k)}else{if(!nT.test(z=String(k)))return l(P,z,it);P.s=z.charCodeAt(0)==45?(z=z.slice(1),-1):1}(nt=z.indexOf("."))>-1&&(z=z.replace(".","")),(at=z.search(/e/i))>0?(nt<0&&(nt=at),nt+=+z.slice(at+1),z=z.substring(0,at)):nt<0&&(nt=z.length)}else{if(kn(A,2,st.length,"Base"),A==10&&rt)return P=new j(k),tt(P,f+P.e+1,p);if(z=String(k),it=typeof k=="number"){if(k*0!=0)return l(P,z,it,A);if(P.s=1/k<0?(z=z.slice(1),-1):1,j.DEBUG&&z.replace(/^0\.0*|\./,"").length>15)throw Error(J_+k)}else P.s=z.charCodeAt(0)===45?(z=z.slice(1),-1):1;for(q=st.slice(0,A),nt=at=0,D=z.length;at<D;at++)if(q.indexOf(X=z.charAt(at))<0){if(X=="."){if(at>nt){nt=D;continue}}else if(!Z&&(z==z.toUpperCase()&&(z=z.toLowerCase())||z==z.toLowerCase()&&(z=z.toUpperCase()))){Z=!0,at=-1,nt=0;continue}return l(P,String(k),it,A)}it=!1,z=i(z,A,10,P.s),(nt=z.indexOf("."))>-1?z=z.replace(".",""):nt=z.length}for(at=0;z.charCodeAt(at)===48;at++);for(D=z.length;z.charCodeAt(--D)===48;);if(z=z.slice(at,++D)){if(D-=at,it&&j.DEBUG&&D>15&&(k>Ig||k!==Hr(k)))throw Error(J_+P.s*k);if((nt=nt-at-1)>S)P.c=P.e=null;else if(nt<E)P.c=[P.e=0];else{if(P.e=nt,P.c=[],at=(nt+1)%ye,nt<0&&(at+=ye),at<D){for(at&&P.c.push(+z.slice(0,at)),D-=ye;at<D;)P.c.push(+z.slice(at,at+=ye));at=ye-(z=z.slice(at)).length}else at-=D;for(;at--;z+="0");P.c.push(+z)}}else P.c=[P.e=0]}j.clone=s1,j.ROUND_UP=0,j.ROUND_DOWN=1,j.ROUND_CEIL=2,j.ROUND_FLOOR=3,j.ROUND_HALF_UP=4,j.ROUND_HALF_DOWN=5,j.ROUND_HALF_EVEN=6,j.ROUND_HALF_CEIL=7,j.ROUND_HALF_FLOOR=8,j.EUCLID=9,j.config=j.set=function(k){var A,q;if(k!=null)if(typeof k=="object"){if(k.hasOwnProperty(A="DECIMAL_PLACES")&&(q=k[A],kn(q,0,hi,A),f=q),k.hasOwnProperty(A="ROUNDING_MODE")&&(q=k[A],kn(q,0,8,A),p=q),k.hasOwnProperty(A="EXPONENTIAL_AT")&&(q=k[A],q&&q.pop?(kn(q[0],-hi,0,A),kn(q[1],0,hi,A),y=q[0],_=q[1]):(kn(q,-hi,hi,A),y=-(_=q<0?-q:q))),k.hasOwnProperty(A="RANGE"))if(q=k[A],q&&q.pop)kn(q[0],-hi,-1,A),kn(q[1],1,hi,A),E=q[0],S=q[1];else if(kn(q,-hi,hi,A),q)E=-(S=q<0?-q:q);else throw Error(lr+A+" cannot be zero: "+q);if(k.hasOwnProperty(A="CRYPTO"))if(q=k[A],q===!!q)if(q)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))M=q;else throw M=!q,Error(lr+"crypto unavailable");else M=q;else throw Error(lr+A+" not true or false: "+q);if(k.hasOwnProperty(A="MODULO_MODE")&&(q=k[A],kn(q,0,9,A),O=q),k.hasOwnProperty(A="POW_PRECISION")&&(q=k[A],kn(q,0,hi,A),B=q),k.hasOwnProperty(A="FORMAT"))if(q=k[A],typeof q=="object")Q=q;else throw Error(lr+A+" not an object: "+q);if(k.hasOwnProperty(A="ALPHABET"))if(q=k[A],typeof q=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(q))rt=q.slice(0,10)=="0123456789",st=q;else throw Error(lr+A+" invalid: "+q)}else throw Error(lr+"Object expected: "+k);return{DECIMAL_PLACES:f,ROUNDING_MODE:p,EXPONENTIAL_AT:[y,_],RANGE:[E,S],CRYPTO:M,MODULO_MODE:O,POW_PRECISION:B,FORMAT:Q,ALPHABET:st}},j.isBigNumber=function(k){if(!k||k._isBigNumber!==!0)return!1;if(!j.DEBUG)return!0;var A,q,X=k.c,Z=k.e,nt=k.s;t:if({}.toString.call(X)=="[object Array]"){if((nt===1||nt===-1)&&Z>=-hi&&Z<=hi&&Z===Hr(Z)){if(X[0]===0){if(Z===0&&X.length===1)return!0;break t}if(A=(Z+1)%ye,A<1&&(A+=ye),String(X[0]).length==A){for(A=0;A<X.length;A++)if(q=X[A],q<0||q>=us||q!==Hr(q))break t;if(q!==0)return!0}}}else if(X===null&&Z===null&&(nt===null||nt===1||nt===-1))return!0;throw Error(lr+"Invalid BigNumber: "+k)},j.maximum=j.max=function(){return V(arguments,-1)},j.minimum=j.min=function(){return V(arguments,1)},j.random=(function(){var k=9007199254740992,A=Math.random()*k&2097151?function(){return Hr(Math.random()*k)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(q){var X,Z,nt,at,it,D=0,z=[],P=new j(c);if(q==null?q=f:kn(q,0,hi),at=Dg(q/ye),M)if(crypto.getRandomValues){for(X=crypto.getRandomValues(new Uint32Array(at*=2));D<at;)it=X[D]*131072+(X[D+1]>>>11),it>=9e15?(Z=crypto.getRandomValues(new Uint32Array(2)),X[D]=Z[0],X[D+1]=Z[1]):(z.push(it%1e14),D+=2);D=at/2}else if(crypto.randomBytes){for(X=crypto.randomBytes(at*=7);D<at;)it=(X[D]&31)*281474976710656+X[D+1]*1099511627776+X[D+2]*4294967296+X[D+3]*16777216+(X[D+4]<<16)+(X[D+5]<<8)+X[D+6],it>=9e15?crypto.randomBytes(7).copy(X,D):(z.push(it%1e14),D+=7);D=at/7}else throw M=!1,Error(lr+"crypto unavailable");if(!M)for(;D<at;)it=A(),it<9e15&&(z[D++]=it%1e14);for(at=z[--D],q%=ye,at&&q&&(it=Rg[ye-q],z[D]=Hr(at/it)*it);z[D]===0;z.pop(),D--);if(D<0)z=[nt=0];else{for(nt=-1;z[0]===0;z.splice(0,1),nt-=ye);for(D=1,it=z[0];it>=10;it/=10,D++);D<ye&&(nt-=ye-D)}return P.e=nt,P.c=z,P}})(),j.sum=function(){for(var k=1,A=arguments,q=new j(A[0]);k<A.length;)q=q.plus(A[k++]);return q},i=(function(){var k="0123456789";function A(q,X,Z,nt){for(var at,it=[0],D,z=0,P=q.length;z<P;){for(D=it.length;D--;it[D]*=X);for(it[0]+=nt.indexOf(q.charAt(z++)),at=0;at<it.length;at++)it[at]>Z-1&&(it[at+1]==null&&(it[at+1]=0),it[at+1]+=it[at]/Z|0,it[at]%=Z)}return it.reverse()}return function(q,X,Z,nt,at){var it,D,z,P,$,J,U,K,ct=q.indexOf("."),gt=f,pt=p;for(ct>=0&&(P=B,B=0,q=q.replace(".",""),K=new j(X),J=K.pow(q.length-ct),B=P,K.c=A(ga(Gr(J.c),J.e,"0"),10,Z,k),K.e=K.c.length),U=A(q,X,Z,at?(it=st,k):(it=k,st)),z=P=U.length;U[--P]==0;U.pop());if(!U[0])return it.charAt(0);if(ct<0?--z:(J.c=U,J.e=z,J.s=nt,J=n(J,K,gt,pt,Z),U=J.c,$=J.r,z=J.e),D=z+gt+1,ct=U[D],P=Z/2,$=$||D<0||U[D+1]!=null,$=pt<4?(ct!=null||$)&&(pt==0||pt==(J.s<0?3:2)):ct>P||ct==P&&(pt==4||$||pt==6&&U[D-1]&1||pt==(J.s<0?8:7)),D<1||!U[0])q=$?ga(it.charAt(1),-gt,it.charAt(0)):it.charAt(0);else{if(U.length=D,$)for(--Z;++U[--D]>Z;)U[D]=0,D||(++z,U=[1].concat(U));for(P=U.length;!U[--P];);for(ct=0,q="";ct<=P;q+=it.charAt(U[ct++]));q=ga(q,z,it.charAt(0))}return q}})(),n=(function(){function k(X,Z,nt){var at,it,D,z,P=0,$=X.length,J=Z%io,U=Z/io|0;for(X=X.slice();$--;)D=X[$]%io,z=X[$]/io|0,at=U*D+z*J,it=J*D+at%io*io+P,P=(it/nt|0)+(at/io|0)+U*z,X[$]=it%nt;return P&&(X=[P].concat(X)),X}function A(X,Z,nt,at){var it,D;if(nt!=at)D=nt>at?1:-1;else for(it=D=0;it<nt;it++)if(X[it]!=Z[it]){D=X[it]>Z[it]?1:-1;break}return D}function q(X,Z,nt,at){for(var it=0;nt--;)X[nt]-=it,it=X[nt]<Z[nt]?1:0,X[nt]=it*at+X[nt]-Z[nt];for(;!X[0]&&X.length>1;X.splice(0,1));}return function(X,Z,nt,at,it){var D,z,P,$,J,U,K,ct,gt,pt,yt,Tt,ht,Dt,It,Mt,ft,Xt=X.s==Z.s?1:-1,Zt=X.c,Bt=Z.c;if(!Zt||!Zt[0]||!Bt||!Bt[0])return new j(!X.s||!Z.s||(Zt?Bt&&Zt[0]==Bt[0]:!Bt)?NaN:Zt&&Zt[0]==0||!Bt?Xt*0:Xt/0);for(ct=new j(Xt),gt=ct.c=[],z=X.e-Z.e,Xt=nt+z+1,it||(it=us,z=Yr(X.e/ye)-Yr(Z.e/ye),Xt=Xt/ye|0),P=0;Bt[P]==(Zt[P]||0);P++);if(Bt[P]>(Zt[P]||0)&&z--,Xt<0)gt.push(1),$=!0;else{for(Dt=Zt.length,Mt=Bt.length,P=0,Xt+=2,J=Hr(it/(Bt[0]+1)),J>1&&(Bt=k(Bt,J,it),Zt=k(Zt,J,it),Mt=Bt.length,Dt=Zt.length),ht=Mt,pt=Zt.slice(0,Mt),yt=pt.length;yt<Mt;pt[yt++]=0);ft=Bt.slice(),ft=[0].concat(ft),It=Bt[0],Bt[1]>=it/2&&It++;do{if(J=0,D=A(Bt,pt,Mt,yt),D<0){if(Tt=pt[0],Mt!=yt&&(Tt=Tt*it+(pt[1]||0)),J=Hr(Tt/It),J>1)for(J>=it&&(J=it-1),U=k(Bt,J,it),K=U.length,yt=pt.length;A(U,pt,K,yt)==1;)J--,q(U,Mt<K?ft:Bt,K,it),K=U.length,D=1;else J==0&&(D=J=1),U=Bt.slice(),K=U.length;if(K<yt&&(U=[0].concat(U)),q(pt,U,yt,it),yt=pt.length,D==-1)for(;A(Bt,pt,Mt,yt)<1;)J++,q(pt,Mt<yt?ft:Bt,yt,it),yt=pt.length}else D===0&&(J++,pt=[0]);gt[P++]=J,pt[0]?pt[yt++]=Zt[ht]||0:(pt=[Zt[ht]],yt=1)}while((ht++<Dt||pt[0]!=null)&&Xt--);$=pt[0]!=null,gt[0]||gt.splice(0,1)}if(it==us){for(P=1,Xt=gt[0];Xt>=10;Xt/=10,P++);tt(ct,nt+(ct.e=P+z*ye-1)+1,at,$)}else ct.e=z,ct.r=+$;return ct}})();function Y(k,A,q,X){var Z,nt,at,it,D;if(q==null?q=p:kn(q,0,8),!k.c)return k.toString();if(Z=k.c[0],at=k.e,A==null)D=Gr(k.c),D=X==1||X==2&&(at<=y||at>=_)?Oh(D,at):ga(D,at,"0");else if(k=tt(new j(k),A,q),nt=k.e,D=Gr(k.c),it=D.length,X==1||X==2&&(A<=nt||nt<=y)){for(;it<A;D+="0",it++);D=Oh(D,nt)}else if(A-=at+(X===2&&nt>at),D=ga(D,nt,"0"),nt+1>it){if(--A>0)for(D+=".";A--;D+="0");}else if(A+=nt-it,A>0)for(nt+1==it&&(D+=".");A--;D+="0");return k.s<0&&Z?"-"+D:D}function V(k,A){for(var q,X,Z=1,nt=new j(k[0]);Z<k.length;Z++)X=new j(k[Z]),(!X.s||(q=Fo(nt,X))===A||q===0&&nt.s===A)&&(nt=X);return nt}function et(k,A,q){for(var X=1,Z=A.length;!A[--Z];A.pop());for(Z=A[0];Z>=10;Z/=10,X++);return(q=X+q*ye-1)>S?k.c=k.e=null:q<E?k.c=[k.e=0]:(k.e=q,k.c=A),k}l=(function(){var k=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,q=/^\.([^.]+)$/,X=/^-?(Infinity|NaN)$/,Z=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(nt,at,it,D){var z,P=it?at:at.replace(Z,"");if(X.test(P))nt.s=isNaN(P)?null:P<0?-1:1;else{if(!it&&(P=P.replace(k,function($,J,U){return z=(U=U.toLowerCase())=="x"?16:U=="b"?2:8,!D||D==z?J:$}),D&&(z=D,P=P.replace(A,"$1").replace(q,"0.$1")),at!=P))return new j(P,z);if(j.DEBUG)throw Error(lr+"Not a"+(D?" base "+D:"")+" number: "+at);nt.s=null}nt.c=nt.e=null}})();function tt(k,A,q,X){var Z,nt,at,it,D,z,P,$=k.c,J=Rg;if($){t:{for(Z=1,it=$[0];it>=10;it/=10,Z++);if(nt=A-Z,nt<0)nt+=ye,at=A,D=$[z=0],P=Hr(D/J[Z-at-1]%10);else if(z=Dg((nt+1)/ye),z>=$.length)if(X){for(;$.length<=z;$.push(0));D=P=0,Z=1,nt%=ye,at=nt-ye+1}else break t;else{for(D=it=$[z],Z=1;it>=10;it/=10,Z++);nt%=ye,at=nt-ye+Z,P=at<0?0:Hr(D/J[Z-at-1]%10)}if(X=X||A<0||$[z+1]!=null||(at<0?D:D%J[Z-at-1]),X=q<4?(P||X)&&(q==0||q==(k.s<0?3:2)):P>5||P==5&&(q==4||X||q==6&&(nt>0?at>0?D/J[Z-at]:0:$[z-1])%10&1||q==(k.s<0?8:7)),A<1||!$[0])return $.length=0,X?(A-=k.e+1,$[0]=J[(ye-A%ye)%ye],k.e=-A||0):$[0]=k.e=0,k;if(nt==0?($.length=z,it=1,z--):($.length=z+1,it=J[ye-nt],$[z]=at>0?Hr(D/J[Z-at]%J[at])*it:0),X)for(;;)if(z==0){for(nt=1,at=$[0];at>=10;at/=10,nt++);for(at=$[0]+=it,it=1;at>=10;at/=10,it++);nt!=it&&(k.e++,$[0]==us&&($[0]=1));break}else{if($[z]+=it,$[z]!=us)break;$[z--]=0,it=1}for(nt=$.length;$[--nt]===0;$.pop());}k.e>S?k.c=k.e=null:k.e<E&&(k.c=[k.e=0])}return k}function W(k){var A,q=k.e;return q===null?k.toString():(A=Gr(k.c),A=q<=y||q>=_?Oh(A,q):ga(A,q,"0"),k.s<0?"-"+A:A)}return r.absoluteValue=r.abs=function(){var k=new j(this);return k.s<0&&(k.s=1),k},r.comparedTo=function(k,A){return Fo(this,new j(k,A))},r.decimalPlaces=r.dp=function(k,A){var q,X,Z,nt=this;if(k!=null)return kn(k,0,hi),A==null?A=p:kn(A,0,8),tt(new j(nt),k+nt.e+1,A);if(!(q=nt.c))return null;if(X=((Z=q.length-1)-Yr(this.e/ye))*ye,Z=q[Z])for(;Z%10==0;Z/=10,X--);return X<0&&(X=0),X},r.dividedBy=r.div=function(k,A){return n(this,new j(k,A),f,p)},r.dividedToIntegerBy=r.idiv=function(k,A){return n(this,new j(k,A),0,1)},r.exponentiatedBy=r.pow=function(k,A){var q,X,Z,nt,at,it,D,z,P,$=this;if(k=new j(k),k.c&&!k.isInteger())throw Error(lr+"Exponent not an integer: "+W(k));if(A!=null&&(A=new j(A)),it=k.e>14,!$.c||!$.c[0]||$.c[0]==1&&!$.e&&$.c.length==1||!k.c||!k.c[0])return P=new j(Math.pow(+W($),it?k.s*(2-Nh(k)):+W(k))),A?P.mod(A):P;if(D=k.s<0,A){if(A.c?!A.c[0]:!A.s)return new j(NaN);X=!D&&$.isInteger()&&A.isInteger(),X&&($=$.mod(A))}else{if(k.e>9&&($.e>0||$.e<-1||($.e==0?$.c[0]>1||it&&$.c[1]>=24e7:$.c[0]<8e13||it&&$.c[0]<=9999975e7)))return nt=$.s<0&&Nh(k)?-0:0,$.e>-1&&(nt=1/nt),new j(D?1/nt:nt);B&&(nt=Dg(B/ye+2))}for(it?(q=new j(.5),D&&(k.s=1),z=Nh(k)):(Z=Math.abs(+W(k)),z=Z%2),P=new j(c);;){if(z){if(P=P.times($),!P.c)break;nt?P.c.length>nt&&(P.c.length=nt):X&&(P=P.mod(A))}if(Z){if(Z=Hr(Z/2),Z===0)break;z=Z%2}else if(k=k.times(q),tt(k,k.e+1,1),k.e>14)z=Nh(k);else{if(Z=+W(k),Z===0)break;z=Z%2}$=$.times($),nt?$.c&&$.c.length>nt&&($.c.length=nt):X&&($=$.mod(A))}return X?P:(D&&(P=c.div(P)),A?P.mod(A):nt?tt(P,B,p,at):P)},r.integerValue=function(k){var A=new j(this);return k==null?k=p:kn(k,0,8),tt(A,A.e+1,k)},r.isEqualTo=r.eq=function(k,A){return Fo(this,new j(k,A))===0},r.isFinite=function(){return!!this.c},r.isGreaterThan=r.gt=function(k,A){return Fo(this,new j(k,A))>0},r.isGreaterThanOrEqualTo=r.gte=function(k,A){return(A=Fo(this,new j(k,A)))===1||A===0},r.isInteger=function(){return!!this.c&&Yr(this.e/ye)>this.c.length-2},r.isLessThan=r.lt=function(k,A){return Fo(this,new j(k,A))<0},r.isLessThanOrEqualTo=r.lte=function(k,A){return(A=Fo(this,new j(k,A)))===-1||A===0},r.isNaN=function(){return!this.s},r.isNegative=function(){return this.s<0},r.isPositive=function(){return this.s>0},r.isZero=function(){return!!this.c&&this.c[0]==0},r.minus=function(k,A){var q,X,Z,nt,at=this,it=at.s;if(k=new j(k,A),A=k.s,!it||!A)return new j(NaN);if(it!=A)return k.s=-A,at.plus(k);var D=at.e/ye,z=k.e/ye,P=at.c,$=k.c;if(!D||!z){if(!P||!$)return P?(k.s=-A,k):new j($?at:NaN);if(!P[0]||!$[0])return $[0]?(k.s=-A,k):new j(P[0]?at:p==3?-0:0)}if(D=Yr(D),z=Yr(z),P=P.slice(),it=D-z){for((nt=it<0)?(it=-it,Z=P):(z=D,Z=$),Z.reverse(),A=it;A--;Z.push(0));Z.reverse()}else for(X=(nt=(it=P.length)<(A=$.length))?it:A,it=A=0;A<X;A++)if(P[A]!=$[A]){nt=P[A]<$[A];break}if(nt&&(Z=P,P=$,$=Z,k.s=-k.s),A=(X=$.length)-(q=P.length),A>0)for(;A--;P[q++]=0);for(A=us-1;X>it;){if(P[--X]<$[X]){for(q=X;q&&!P[--q];P[q]=A);--P[q],P[X]+=us}P[X]-=$[X]}for(;P[0]==0;P.splice(0,1),--z);return P[0]?et(k,P,z):(k.s=p==3?-1:1,k.c=[k.e=0],k)},r.modulo=r.mod=function(k,A){var q,X,Z=this;return k=new j(k,A),!Z.c||!k.s||k.c&&!k.c[0]?new j(NaN):!k.c||Z.c&&!Z.c[0]?new j(Z):(O==9?(X=k.s,k.s=1,q=n(Z,k,0,3),k.s=X,q.s*=X):q=n(Z,k,0,O),k=Z.minus(q.times(k)),!k.c[0]&&O==1&&(k.s=Z.s),k)},r.multipliedBy=r.times=function(k,A){var q,X,Z,nt,at,it,D,z,P,$,J,U,K,ct,gt,pt=this,yt=pt.c,Tt=(k=new j(k,A)).c;if(!yt||!Tt||!yt[0]||!Tt[0])return!pt.s||!k.s||yt&&!yt[0]&&!Tt||Tt&&!Tt[0]&&!yt?k.c=k.e=k.s=null:(k.s*=pt.s,!yt||!Tt?k.c=k.e=null:(k.c=[0],k.e=0)),k;for(X=Yr(pt.e/ye)+Yr(k.e/ye),k.s*=pt.s,D=yt.length,$=Tt.length,D<$&&(K=yt,yt=Tt,Tt=K,Z=D,D=$,$=Z),Z=D+$,K=[];Z--;K.push(0));for(ct=us,gt=io,Z=$;--Z>=0;){for(q=0,J=Tt[Z]%gt,U=Tt[Z]/gt|0,at=D,nt=Z+at;nt>Z;)z=yt[--at]%gt,P=yt[at]/gt|0,it=U*z+P*J,z=J*z+it%gt*gt+K[nt]+q,q=(z/ct|0)+(it/gt|0)+U*P,K[nt--]=z%ct;K[nt]=q}return q?++X:K.splice(0,1),et(k,K,X)},r.negated=function(){var k=new j(this);return k.s=-k.s||null,k},r.plus=function(k,A){var q,X=this,Z=X.s;if(k=new j(k,A),A=k.s,!Z||!A)return new j(NaN);if(Z!=A)return k.s=-A,X.minus(k);var nt=X.e/ye,at=k.e/ye,it=X.c,D=k.c;if(!nt||!at){if(!it||!D)return new j(Z/0);if(!it[0]||!D[0])return D[0]?k:new j(it[0]?X:Z*0)}if(nt=Yr(nt),at=Yr(at),it=it.slice(),Z=nt-at){for(Z>0?(at=nt,q=D):(Z=-Z,q=it),q.reverse();Z--;q.push(0));q.reverse()}for(Z=it.length,A=D.length,Z-A<0&&(q=D,D=it,it=q,A=Z),Z=0;A;)Z=(it[--A]=it[A]+D[A]+Z)/us|0,it[A]=us===it[A]?0:it[A]%us;return Z&&(it=[Z].concat(it),++at),et(k,it,at)},r.precision=r.sd=function(k,A){var q,X,Z,nt=this;if(k!=null&&k!==!!k)return kn(k,1,hi),A==null?A=p:kn(A,0,8),tt(new j(nt),k,A);if(!(q=nt.c))return null;if(Z=q.length-1,X=Z*ye+1,Z=q[Z]){for(;Z%10==0;Z/=10,X--);for(Z=q[0];Z>=10;Z/=10,X++);}return k&&nt.e+1>X&&(X=nt.e+1),X},r.shiftedBy=function(k){return kn(k,-Ig,Ig),this.times("1e"+k)},r.squareRoot=r.sqrt=function(){var k,A,q,X,Z,nt=this,at=nt.c,it=nt.s,D=nt.e,z=f+4,P=new j("0.5");if(it!==1||!at||!at[0])return new j(!it||it<0&&(!at||at[0])?NaN:at?nt:1/0);if(it=Math.sqrt(+W(nt)),it==0||it==1/0?(A=Gr(at),(A.length+D)%2==0&&(A+="0"),it=Math.sqrt(+A),D=Yr((D+1)/2)-(D<0||D%2),it==1/0?A="5e"+D:(A=it.toExponential(),A=A.slice(0,A.indexOf("e")+1)+D),q=new j(A)):q=new j(it+""),q.c[0]){for(D=q.e,it=D+z,it<3&&(it=0);;)if(Z=q,q=P.times(Z.plus(n(nt,Z,z,1))),Gr(Z.c).slice(0,it)===(A=Gr(q.c)).slice(0,it))if(q.e<D&&--it,A=A.slice(it-3,it+1),A=="9999"||!X&&A=="4999"){if(!X&&(tt(Z,Z.e+f+2,0),Z.times(Z).eq(nt))){q=Z;break}z+=4,it+=4,X=1}else{(!+A||!+A.slice(1)&&A.charAt(0)=="5")&&(tt(q,q.e+f+2,1),k=!q.times(q).eq(nt));break}}return tt(q,q.e+f+1,p,k)},r.toExponential=function(k,A){return k!=null&&(kn(k,0,hi),k++),Y(this,k,A,1)},r.toFixed=function(k,A){return k!=null&&(kn(k,0,hi),k=k+this.e+1),Y(this,k,A)},r.toFormat=function(k,A,q){var X,Z=this;if(q==null)k!=null&&A&&typeof A=="object"?(q=A,A=null):k&&typeof k=="object"?(q=k,k=A=null):q=Q;else if(typeof q!="object")throw Error(lr+"Argument not an object: "+q);if(X=Z.toFixed(k,A),Z.c){var nt,at=X.split("."),it=+q.groupSize,D=+q.secondaryGroupSize,z=q.groupSeparator||"",P=at[0],$=at[1],J=Z.s<0,U=J?P.slice(1):P,K=U.length;if(D&&(nt=it,it=D,D=nt,K-=nt),it>0&&K>0){for(nt=K%it||it,P=U.substr(0,nt);nt<K;nt+=it)P+=z+U.substr(nt,it);D>0&&(P+=z+U.slice(nt)),J&&(P="-"+P)}X=$?P+(q.decimalSeparator||"")+((D=+q.fractionGroupSize)?$.replace(new RegExp("\\d{"+D+"}\\B","g"),"$&"+(q.fractionGroupSeparator||"")):$):P}return(q.prefix||"")+X+(q.suffix||"")},r.toFraction=function(k){var A,q,X,Z,nt,at,it,D,z,P,$,J,U=this,K=U.c;if(k!=null&&(it=new j(k),!it.isInteger()&&(it.c||it.s!==1)||it.lt(c)))throw Error(lr+"Argument "+(it.isInteger()?"out of range: ":"not an integer: ")+W(it));if(!K)return new j(U);for(A=new j(c),z=q=new j(c),X=D=new j(c),J=Gr(K),nt=A.e=J.length-U.e-1,A.c[0]=Rg[(at=nt%ye)<0?ye+at:at],k=!k||it.comparedTo(A)>0?nt>0?A:z:it,at=S,S=1/0,it=new j(J),D.c[0]=0;P=n(it,A,0,1),Z=q.plus(P.times(X)),Z.comparedTo(k)!=1;)q=X,X=Z,z=D.plus(P.times(Z=z)),D=Z,A=it.minus(P.times(Z=A)),it=Z;return Z=n(k.minus(q),X,0,1),D=D.plus(Z.times(z)),q=q.plus(Z.times(X)),D.s=z.s=U.s,nt=nt*2,$=n(z,X,nt,p).minus(U).abs().comparedTo(n(D,q,nt,p).minus(U).abs())<1?[z,X]:[D,q],S=at,$},r.toNumber=function(){return+W(this)},r.toPrecision=function(k,A){return k!=null&&kn(k,1,hi),Y(this,k,A,2)},r.toString=function(k){var A,q=this,X=q.s,Z=q.e;return Z===null?X?(A="Infinity",X<0&&(A="-"+A)):A="NaN":(k==null?A=Z<=y||Z>=_?Oh(Gr(q.c),Z):ga(Gr(q.c),Z,"0"):k===10&&rt?(q=tt(new j(q),f+Z+1,p),A=ga(Gr(q.c),q.e,"0")):(kn(k,2,st.length,"Base"),A=i(ga(Gr(q.c),Z,"0"),10,k,X,!0)),X<0&&q.c[0]&&(A="-"+A)),A},r.valueOf=r.toJSON=function(){return W(this)},r._isBigNumber=!0,r[Symbol.toStringTag]="BigNumber",r[Symbol.for("nodejs.util.inspect.custom")]=r.valueOf,e!=null&&j.set(e),j}function Yr(e){var n=e|0;return e>0||e===n?n:n-1}function Gr(e){for(var n,i,l=1,r=e.length,c=e[0]+"";l<r;){for(n=e[l++]+"",i=ye-n.length;i--;n="0"+n);c+=n}for(r=c.length;c.charCodeAt(--r)===48;);return c.slice(0,r+1||1)}function Fo(e,n){var i,l,r=e.c,c=n.c,f=e.s,p=n.s,y=e.e,_=n.e;if(!f||!p)return null;if(i=r&&!r[0],l=c&&!c[0],i||l)return i?l?0:-p:f;if(f!=p)return f;if(i=f<0,l=y==_,!r||!c)return l?0:!r^i?1:-1;if(!l)return y>_^i?1:-1;for(p=(y=r.length)<(_=c.length)?y:_,f=0;f<p;f++)if(r[f]!=c[f])return r[f]>c[f]^i?1:-1;return y==_?0:y>_^i?1:-1}function kn(e,n,i,l){if(e<n||e>i||e!==Hr(e))throw Error(lr+(l||"Argument")+(typeof e=="number"?e<n||e>i?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function Nh(e){var n=e.c.length-1;return Yr(e.e/ye)==n&&e.c[n]%2!=0}function Oh(e,n){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(n<0?"e":"e+")+n}function ga(e,n,i){var l,r;if(n<0){for(r=i+".";++n;r+=i);e=r+e}else if(l=e.length,++n>l){for(r=i,n-=l;--n;r+=i);e+=r}else n<l&&(e=e.slice(0,n)+"."+e.slice(n));return e}var As=s1(),iT=class{key;left=null;right=null;constructor(e){this.key=e}},Fu=class extends iT{constructor(e){super(e)}},rT=class{size=0;modificationCount=0;splayCount=0;splay(e){const n=this.root;if(n==null)return this.compare(e,e),-1;let i=null,l=null,r=null,c=null,f=n;const p=this.compare;let y;for(;;)if(y=p(f.key,e),y>0){let _=f.left;if(_==null||(y=p(_.key,e),y>0&&(f.left=_.right,_.right=f,f=_,_=f.left,_==null)))break;i==null?l=f:i.left=f,i=f,f=_}else if(y<0){let _=f.right;if(_==null||(y=p(_.key,e),y<0&&(f.right=_.left,_.left=f,f=_,_=f.right,_==null)))break;r==null?c=f:r.right=f,r=f,f=_}else break;return r!=null&&(r.right=f.left,f.left=c),i!=null&&(i.left=f.right,f.right=l),this.root!==f&&(this.root=f,this.splayCount++),y}splayMin(e){let n=e,i=n.left;for(;i!=null;){const l=i;n.left=l.right,l.right=n,n=l,i=n.left}return n}splayMax(e){let n=e,i=n.right;for(;i!=null;){const l=i;n.right=l.left,l.left=n,n=l,i=n.right}return n}_delete(e){if(this.root==null||this.splay(e)!=0)return null;let i=this.root;const l=i,r=i.left;if(this.size--,r==null)this.root=i.right;else{const c=i.right;i=this.splayMax(r),i.right=c,this.root=i}return this.modificationCount++,l}addNewRoot(e,n){this.size++,this.modificationCount++;const i=this.root;if(i==null){this.root=e;return}n<0?(e.left=i,e.right=i.right,i.right=null):(e.right=i,e.left=i.left,i.left=null),this.root=e}_first(){const e=this.root;return e==null?null:(this.root=this.splayMin(e),this.root)}_last(){const e=this.root;return e==null?null:(this.root=this.splayMax(e),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(e){return this.validKey(e)&&this.splay(e)==0}defaultCompare(){return(e,n)=>e<n?-1:e>n?1:0}wrap(){return{getRoot:()=>this.root,setRoot:e=>{this.root=e},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:e=>{this.splayCount=e},splay:e=>this.splay(e),has:e=>this.has(e)}}},Jh=class $u extends rT{root=null;compare;validKey;constructor(n,i){super(),this.compare=n??this.defaultCompare(),this.validKey=i??(l=>l!=null&&l!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const i of n)this.delete(i)}forEach(n){const i=this[Symbol.iterator]();let l;for(;l=i.next(),!l.done;)n(l.value,l.value,this)}add(n){const i=this.splay(n);return i!=0&&this.addNewRoot(new Fu(n),i),this}addAndReturn(n){const i=this.splay(n);return i!=0&&this.addNewRoot(new Fu(n),i),this.root.key}addAll(n){for(const i of n)this.add(i)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let l=this.root.left;if(l==null)return null;let r=l.right;for(;r!=null;)l=r,r=l.right;return l.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let l=this.root.right;if(l==null)return null;let r=l.left;for(;r!=null;)l=r,r=l.left;return l.key}retainAll(n){const i=new $u(this.compare,this.validKey),l=this.modificationCount;for(const r of n){if(l!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(r)&&this.splay(r)==0&&i.add(this.root.key)}i.size!=this.size&&(this.root=i.root,this.size=i.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const i=new $u(this.compare,this.validKey);for(const l of this)n.has(l)&&i.add(l);return i}difference(n){const i=new $u(this.compare,this.validKey);for(const l of this)n.has(l)||i.add(l);return i}union(n){const i=this.clone();return i.addAll(n),i}clone(){const n=new $u(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function i(r,c){let f,p;do{if(f=r.left,p=r.right,f!=null){const y=new Fu(f.key);c.left=y,i(f,y)}if(p!=null){const y=new Fu(p.key);c.right=y,r=p,c=y}}while(p!=null)}const l=new Fu(n.key);return i(n,l),l}toSet(){return this.clone()}entries(){return new aT(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[Symbol.iterator](){return new sT(this.wrap())}[Symbol.toStringTag]="[object Set]"},a1=class{tree;path=new Array;modificationCount=null;splayCount;constructor(e){this.tree=e,this.splayCount=e.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const e=this.path[this.path.length-1];return this.getValue(e)}rebuildPath(e){this.path.splice(0,this.path.length),this.tree.splay(e),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(e){for(;e!=null;)this.path.push(e),e=e.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let i=this.tree.getRoot();for(;i!=null;)this.path.push(i),i=i.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let e=this.path[this.path.length-1],n=e.right;if(n!=null){for(;n!=null;)this.path.push(n),n=n.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}},sT=class extends a1{getValue(e){return e.key}},aT=class extends a1{getValue(e){return[e.key,e.key]}},o1=e=>()=>e,Jg=e=>{const n=e?(i,l)=>l.minus(i).abs().isLessThanOrEqualTo(e):o1(!1);return(i,l)=>n(i,l)?0:i.comparedTo(l)};function oT(e){const n=e?(i,l,r,c,f)=>i.exponentiatedBy(2).isLessThanOrEqualTo(c.minus(l).exponentiatedBy(2).plus(f.minus(r).exponentiatedBy(2)).times(e)):o1(!1);return(i,l,r)=>{const c=i.x,f=i.y,p=r.x,y=r.y,_=f.minus(y).times(l.x.minus(p)).minus(c.minus(p).times(l.y.minus(y)));return n(_,c,f,p,y)?0:_.comparedTo(0)}}var lT=e=>e,uT=e=>{if(e){const n=new Jh(Jg(e)),i=new Jh(Jg(e)),l=(c,f)=>f.addAndReturn(c),r=c=>({x:l(c.x,n),y:l(c.y,i)});return r({x:new As(0),y:new As(0)}),r}return lT},Kg=e=>({set:n=>{xa=Kg(n)},reset:()=>Kg(e),compare:Jg(e),snap:uT(e),orient:oT(e)}),xa=Kg(),qu=(e,n)=>e.ll.x.isLessThanOrEqualTo(n.x)&&n.x.isLessThanOrEqualTo(e.ur.x)&&e.ll.y.isLessThanOrEqualTo(n.y)&&n.y.isLessThanOrEqualTo(e.ur.y),$g=(e,n)=>{if(n.ur.x.isLessThan(e.ll.x)||e.ur.x.isLessThan(n.ll.x)||n.ur.y.isLessThan(e.ll.y)||e.ur.y.isLessThan(n.ll.y))return null;const i=e.ll.x.isLessThan(n.ll.x)?n.ll.x:e.ll.x,l=e.ur.x.isLessThan(n.ur.x)?e.ur.x:n.ur.x,r=e.ll.y.isLessThan(n.ll.y)?n.ll.y:e.ll.y,c=e.ur.y.isLessThan(n.ur.y)?e.ur.y:n.ur.y;return{ll:{x:i,y:r},ur:{x:l,y:c}}},Uh=(e,n)=>e.x.times(n.y).minus(e.y.times(n.x)),l1=(e,n)=>e.x.times(n.x).plus(e.y.times(n.y)),Kh=e=>l1(e,e).sqrt(),cT=(e,n,i)=>{const l={x:n.x.minus(e.x),y:n.y.minus(e.y)},r={x:i.x.minus(e.x),y:i.y.minus(e.y)};return Uh(r,l).div(Kh(r)).div(Kh(l))},hT=(e,n,i)=>{const l={x:n.x.minus(e.x),y:n.y.minus(e.y)},r={x:i.x.minus(e.x),y:i.y.minus(e.y)};return l1(r,l).div(Kh(r)).div(Kh(l))},K_=(e,n,i)=>n.y.isZero()?null:{x:e.x.plus(n.x.div(n.y).times(i.minus(e.y))),y:i},$_=(e,n,i)=>n.x.isZero()?null:{x:i,y:e.y.plus(n.y.div(n.x).times(i.minus(e.x)))},fT=(e,n,i,l)=>{if(n.x.isZero())return $_(i,l,e.x);if(l.x.isZero())return $_(e,n,i.x);if(n.y.isZero())return K_(i,l,e.y);if(l.y.isZero())return K_(e,n,i.y);const r=Uh(n,l);if(r.isZero())return null;const c={x:i.x.minus(e.x),y:i.y.minus(e.y)},f=Uh(c,n).div(r),p=Uh(c,l).div(r),y=e.x.plus(p.times(n.x)),_=i.x.plus(f.times(l.x)),E=e.y.plus(p.times(n.y)),S=i.y.plus(f.times(l.y)),M=y.plus(_).div(2),O=E.plus(S).div(2);return{x:M,y:O}},Ms=class u1{point;isLeft;segment;otherSE;consumedBy;static compare(n,i){const l=u1.comparePoints(n.point,i.point);return l!==0?l:(n.point!==i.point&&n.link(i),n.isLeft!==i.isLeft?n.isLeft?1:-1:$h.compare(n.segment,i.segment))}static comparePoints(n,i){return n.x.isLessThan(i.x)?-1:n.x.isGreaterThan(i.x)?1:n.y.isLessThan(i.y)?-1:n.y.isGreaterThan(i.y)?1:0}constructor(n,i){n.events===void 0?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=i}link(n){if(n.point===this.point)throw new Error("Tried to link already linked events");const i=n.point.events;for(let l=0,r=i.length;l<r;l++){const c=i[l];this.point.events.push(c),c.point=this.point}this.checkForConsuming()}checkForConsuming(){const n=this.point.events.length;for(let i=0;i<n;i++){const l=this.point.events[i];if(l.segment.consumedBy===void 0)for(let r=i+1;r<n;r++){const c=this.point.events[r];c.consumedBy===void 0&&l.otherSE.point.events===c.otherSE.point.events&&l.segment.consume(c.segment)}}}getAvailableLinkedEvents(){const n=[];for(let i=0,l=this.point.events.length;i<l;i++){const r=this.point.events[i];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&n.push(r)}return n}getLeftmostComparator(n){const i=new Map,l=r=>{const c=r.otherSE;i.set(r,{sine:cT(this.point,n.point,c.point),cosine:hT(this.point,n.point,c.point)})};return(r,c)=>{i.has(r)||l(r),i.has(c)||l(c);const{sine:f,cosine:p}=i.get(r),{sine:y,cosine:_}=i.get(c);return f.isGreaterThanOrEqualTo(0)&&y.isGreaterThanOrEqualTo(0)?p.isLessThan(_)?1:p.isGreaterThan(_)?-1:0:f.isLessThan(0)&&y.isLessThan(0)?p.isLessThan(_)?-1:p.isGreaterThan(_)?1:0:y.isLessThan(f)?-1:y.isGreaterThan(f)?1:0}}},dT=class tp{events;poly;_isExteriorRing;_enclosingRing;static factory(n){const i=[];for(let l=0,r=n.length;l<r;l++){const c=n[l];if(!c.isInResult()||c.ringOut)continue;let f=null,p=c.leftSE,y=c.rightSE;const _=[p],E=p.point,S=[];for(;f=p,p=y,_.push(p),p.point!==E;)for(;;){const M=p.getAvailableLinkedEvents();if(M.length===0){const Q=_[0].point,st=_[_.length-1].point;throw new Error(`Unable to complete output ring starting at [${Q.x}, ${Q.y}]. Last matching segment found ends at [${st.x}, ${st.y}].`)}if(M.length===1){y=M[0].otherSE;break}let O=null;for(let Q=0,st=S.length;Q<st;Q++)if(S[Q].point===p.point){O=Q;break}if(O!==null){const Q=S.splice(O)[0],st=_.splice(Q.index);st.unshift(st[0].otherSE),i.push(new tp(st.reverse()));continue}S.push({index:_.length,point:p.point});const B=p.getLeftmostComparator(f);y=M.sort(B)[0].otherSE;break}i.push(new tp(_))}return i}constructor(n){this.events=n;for(let i=0,l=n.length;i<l;i++)n[i].segment.ringOut=this;this.poly=null}getGeom(){let n=this.events[0].point;const i=[n];for(let _=1,E=this.events.length-1;_<E;_++){const S=this.events[_].point,M=this.events[_+1].point;xa.orient(S,n,M)!==0&&(i.push(S),n=S)}if(i.length===1)return null;const l=i[0],r=i[1];xa.orient(l,n,r)===0&&i.shift(),i.push(i[0]);const c=this.isExteriorRing()?1:-1,f=this.isExteriorRing()?0:i.length-1,p=this.isExteriorRing()?i.length:-1,y=[];for(let _=f;_!=p;_+=c)y.push([i[_].x.toNumber(),i[_].y.toNumber()]);return y}isExteriorRing(){if(this._isExteriorRing===void 0){const n=this.enclosingRing();this._isExteriorRing=n?!n.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let n=this.events[0];for(let r=1,c=this.events.length;r<c;r++){const f=this.events[r];Ms.compare(n,f)>0&&(n=f)}let i=n.segment.prevInResult(),l=i?i.prevInResult():null;for(;;){if(!i)return null;if(!l)return i.ringOut;if(l.ringOut!==i.ringOut)return l.ringOut?.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut?.enclosingRing();i=l.prevInResult(),l=i?i.prevInResult():null}}},t0=class{exteriorRing;interiorRings;constructor(e){this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=this.exteriorRing.getGeom();if(e===null)return null;const n=[e];for(let i=0,l=this.interiorRings.length;i<l;i++){const r=this.interiorRings[i].getGeom();r!==null&&n.push(r)}return n}},gT=class{rings;polys;constructor(e){this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let n=0,i=this.polys.length;n<i;n++){const l=this.polys[n].getGeom();l!==null&&e.push(l)}return e}_composePolys(e){const n=[];for(let i=0,l=e.length;i<l;i++){const r=e[i];if(!r.poly)if(r.isExteriorRing())n.push(new t0(r));else{const c=r.enclosingRing();c?.poly||n.push(new t0(c)),c?.poly?.addInterior(r)}}return n}},pT=class{queue;tree;segments;constructor(e,n=$h.compare){this.queue=e,this.tree=new Jh(n),this.segments=[]}process(e){const n=e.segment,i=[];if(e.consumedBy)return e.isLeft?this.queue.delete(e.otherSE):this.tree.delete(n),i;e.isLeft&&this.tree.add(n);let l=n,r=n;do l=this.tree.lastBefore(l);while(l!=null&&l.consumedBy!=null);do r=this.tree.firstAfter(r);while(r!=null&&r.consumedBy!=null);if(e.isLeft){let c=null;if(l){const p=l.getIntersection(n);if(p!==null&&(n.isAnEndpoint(p)||(c=p),!l.isAnEndpoint(p))){const y=this._splitSafely(l,p);for(let _=0,E=y.length;_<E;_++)i.push(y[_])}}let f=null;if(r){const p=r.getIntersection(n);if(p!==null&&(n.isAnEndpoint(p)||(f=p),!r.isAnEndpoint(p))){const y=this._splitSafely(r,p);for(let _=0,E=y.length;_<E;_++)i.push(y[_])}}if(c!==null||f!==null){let p=null;c===null?p=f:f===null?p=c:p=Ms.comparePoints(c,f)<=0?c:f,this.queue.delete(n.rightSE),i.push(n.rightSE);const y=n.split(p);for(let _=0,E=y.length;_<E;_++)i.push(y[_])}i.length>0?(this.tree.delete(n),i.push(e)):(this.segments.push(n),n.prev=l)}else{if(l&&r){const c=l.getIntersection(r);if(c!==null){if(!l.isAnEndpoint(c)){const f=this._splitSafely(l,c);for(let p=0,y=f.length;p<y;p++)i.push(f[p])}if(!r.isAnEndpoint(c)){const f=this._splitSafely(r,c);for(let p=0,y=f.length;p<y;p++)i.push(f[p])}}}this.tree.delete(n)}return i}_splitSafely(e,n){this.tree.delete(e);const i=e.rightSE;this.queue.delete(i);const l=e.split(n);return l.push(i),e.consumedBy===void 0&&this.tree.add(e),l}},mT=class{type;numMultiPolys;run(e,n,i){tc.type=e;const l=[new n0(n,!0)];for(let _=0,E=i.length;_<E;_++)l.push(new n0(i[_],!1));if(tc.numMultiPolys=l.length,tc.type==="difference"){const _=l[0];let E=1;for(;E<l.length;)$g(l[E].bbox,_.bbox)!==null?E++:l.splice(E,1)}if(tc.type==="intersection")for(let _=0,E=l.length;_<E;_++){const S=l[_];for(let M=_+1,O=l.length;M<O;M++)if($g(S.bbox,l[M].bbox)===null)return[]}const r=new Jh(Ms.compare);for(let _=0,E=l.length;_<E;_++){const S=l[_].getSweepEvents();for(let M=0,O=S.length;M<O;M++)r.add(S[M])}const c=new pT(r);let f=null;for(r.size!=0&&(f=r.first(),r.delete(f));f;){const _=c.process(f);for(let E=0,S=_.length;E<S;E++){const M=_[E];M.consumedBy===void 0&&r.add(M)}r.size!=0?(f=r.first(),r.delete(f)):f=null}xa.reset();const p=dT.factory(c.segments);return new gT(p).getGeom()}},tc=new mT,Yl=tc,vT=0,$h=class Fh{id;leftSE;rightSE;rings;windings;ringOut;consumedBy;prev;_prevInResult;_beforeState;_afterState;_isInResult;static compare(n,i){const l=n.leftSE.point.x,r=i.leftSE.point.x,c=n.rightSE.point.x,f=i.rightSE.point.x;if(f.isLessThan(l))return 1;if(c.isLessThan(r))return-1;const p=n.leftSE.point.y,y=i.leftSE.point.y,_=n.rightSE.point.y,E=i.rightSE.point.y;if(l.isLessThan(r)){if(y.isLessThan(p)&&y.isLessThan(_))return 1;if(y.isGreaterThan(p)&&y.isGreaterThan(_))return-1;const S=n.comparePoint(i.leftSE.point);if(S<0)return 1;if(S>0)return-1;const M=i.comparePoint(n.rightSE.point);return M!==0?M:-1}if(l.isGreaterThan(r)){if(p.isLessThan(y)&&p.isLessThan(E))return-1;if(p.isGreaterThan(y)&&p.isGreaterThan(E))return 1;const S=i.comparePoint(n.leftSE.point);if(S!==0)return S;const M=n.comparePoint(i.rightSE.point);return M<0?1:M>0?-1:1}if(p.isLessThan(y))return-1;if(p.isGreaterThan(y))return 1;if(c.isLessThan(f)){const S=i.comparePoint(n.rightSE.point);if(S!==0)return S}if(c.isGreaterThan(f)){const S=n.comparePoint(i.rightSE.point);if(S<0)return 1;if(S>0)return-1}if(!c.eq(f)){const S=_.minus(p),M=c.minus(l),O=E.minus(y),B=f.minus(r);if(S.isGreaterThan(M)&&O.isLessThan(B))return 1;if(S.isLessThan(M)&&O.isGreaterThan(B))return-1}return c.isGreaterThan(f)?1:c.isLessThan(f)||_.isLessThan(E)?-1:_.isGreaterThan(E)?1:n.id<i.id?-1:n.id>i.id?1:0}constructor(n,i,l,r){this.id=++vT,this.leftSE=n,n.segment=this,n.otherSE=i,this.rightSE=i,i.segment=this,i.otherSE=n,this.rings=l,this.windings=r}static fromRing(n,i,l){let r,c,f;const p=Ms.comparePoints(n,i);if(p<0)r=n,c=i,f=1;else if(p>0)r=i,c=n,f=-1;else throw new Error(`Tried to create degenerate segment at [${n.x}, ${n.y}]`);const y=new Ms(r,!0),_=new Ms(c,!1);return new Fh(y,_,[l],[f])}replaceRightSE(n){this.rightSE=n,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const n=this.leftSE.point.y,i=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:n.isLessThan(i)?n:i},ur:{x:this.rightSE.point.x,y:n.isGreaterThan(i)?n:i}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(n){return n.x.eq(this.leftSE.point.x)&&n.y.eq(this.leftSE.point.y)||n.x.eq(this.rightSE.point.x)&&n.y.eq(this.rightSE.point.y)}comparePoint(n){return xa.orient(this.leftSE.point,n,this.rightSE.point)}getIntersection(n){const i=this.bbox(),l=n.bbox(),r=$g(i,l);if(r===null)return null;const c=this.leftSE.point,f=this.rightSE.point,p=n.leftSE.point,y=n.rightSE.point,_=qu(i,p)&&this.comparePoint(p)===0,E=qu(l,c)&&n.comparePoint(c)===0,S=qu(i,y)&&this.comparePoint(y)===0,M=qu(l,f)&&n.comparePoint(f)===0;if(E&&_)return M&&!S?f:!M&&S?y:null;if(E)return S&&c.x.eq(y.x)&&c.y.eq(y.y)?null:c;if(_)return M&&f.x.eq(p.x)&&f.y.eq(p.y)?null:p;if(M&&S)return null;if(M)return f;if(S)return y;const O=fT(c,this.vector(),p,n.vector());return O===null||!qu(r,O)?null:xa.snap(O)}split(n){const i=[],l=n.events!==void 0,r=new Ms(n,!0),c=new Ms(n,!1),f=this.rightSE;this.replaceRightSE(c),i.push(c),i.push(r);const p=new Fh(r,f,this.rings.slice(),this.windings.slice());return Ms.comparePoints(p.leftSE.point,p.rightSE.point)>0&&p.swapEvents(),Ms.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),l&&(r.checkForConsuming(),c.checkForConsuming()),i}swapEvents(){const n=this.rightSE;this.rightSE=this.leftSE,this.leftSE=n,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let i=0,l=this.windings.length;i<l;i++)this.windings[i]*=-1}consume(n){let i=this,l=n;for(;i.consumedBy;)i=i.consumedBy;for(;l.consumedBy;)l=l.consumedBy;const r=Fh.compare(i,l);if(r!==0){if(r>0){const c=i;i=l,l=c}if(i.prev===l){const c=i;i=l,l=c}for(let c=0,f=l.rings.length;c<f;c++){const p=l.rings[c],y=l.windings[c],_=i.rings.indexOf(p);_===-1?(i.rings.push(p),i.windings.push(y)):i.windings[_]+=y}l.rings=null,l.windings=null,l.consumedBy=i,l.leftSE.consumedBy=i.leftSE,l.rightSE.consumedBy=i.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const n=this.prev.consumedBy||this.prev;this._beforeState=n.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const n=this.beforeState();this._afterState={rings:n.rings.slice(0),windings:n.windings.slice(0),multiPolys:[]};const i=this._afterState.rings,l=this._afterState.windings,r=this._afterState.multiPolys;for(let p=0,y=this.rings.length;p<y;p++){const _=this.rings[p],E=this.windings[p],S=i.indexOf(_);S===-1?(i.push(_),l.push(E)):l[S]+=E}const c=[],f=[];for(let p=0,y=i.length;p<y;p++){if(l[p]===0)continue;const _=i[p],E=_.poly;if(f.indexOf(E)===-1)if(_.isExterior)c.push(E);else{f.indexOf(E)===-1&&f.push(E);const S=c.indexOf(_.poly);S!==-1&&c.splice(S,1)}}for(let p=0,y=c.length;p<y;p++){const _=c[p].multiPoly;r.indexOf(_)===-1&&r.push(_)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const n=this.beforeState().multiPolys,i=this.afterState().multiPolys;switch(Yl.type){case"union":{const l=n.length===0,r=i.length===0;this._isInResult=l!==r;break}case"intersection":{let l,r;n.length<i.length?(l=n.length,r=i.length):(l=i.length,r=n.length),this._isInResult=r===Yl.numMultiPolys&&l<r;break}case"xor":{const l=Math.abs(n.length-i.length);this._isInResult=l%2===1;break}case"difference":{const l=r=>r.length===1&&r[0].isSubject;this._isInResult=l(n)!==l(i);break}}return this._isInResult}},e0=class{poly;isExterior;segments;bbox;constructor(e,n,i){if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=i,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const l=xa.snap({x:new As(e[0][0]),y:new As(e[0][1])});this.bbox={ll:{x:l.x,y:l.y},ur:{x:l.x,y:l.y}};let r=l;for(let c=1,f=e.length;c<f;c++){if(typeof e[c][0]!="number"||typeof e[c][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const p=xa.snap({x:new As(e[c][0]),y:new As(e[c][1])});p.x.eq(r.x)&&p.y.eq(r.y)||(this.segments.push($h.fromRing(r,p,this)),p.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=p.x),p.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=p.y),p.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=p.x),p.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=p.y),r=p)}(!l.x.eq(r.x)||!l.y.eq(r.y))&&this.segments.push($h.fromRing(r,l,this))}getSweepEvents(){const e=[];for(let n=0,i=this.segments.length;n<i;n++){const l=this.segments[n];e.push(l.leftSE),e.push(l.rightSE)}return e}},yT=class{multiPoly;exteriorRing;interiorRings;bbox;constructor(e,n){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new e0(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let i=1,l=e.length;i<l;i++){const r=new e0(e[i],this,!1);r.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=r.bbox.ur.y),this.interiorRings.push(r)}this.multiPoly=n}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let n=0,i=this.interiorRings.length;n<i;n++){const l=this.interiorRings[n].getSweepEvents();for(let r=0,c=l.length;r<c;r++)e.push(l[r])}return e}},n0=class{isSubject;polys;bbox;constructor(e,n){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:new As(Number.POSITIVE_INFINITY),y:new As(Number.POSITIVE_INFINITY)},ur:{x:new As(Number.NEGATIVE_INFINITY),y:new As(Number.NEGATIVE_INFINITY)}};for(let i=0,l=e.length;i<l;i++){const r=new yT(e[i],this);r.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=r.bbox.ur.y),this.polys.push(r)}this.isSubject=n}getSweepEvents(){const e=[];for(let n=0,i=this.polys.length;n<i;n++){const l=this.polys[n].getSweepEvents();for(let r=0,c=l.length;r<c;r++)e.push(l[r])}return e}},ao=(e,...n)=>Yl.run("union",e,n),c1=(e,...n)=>Yl.run("intersection",e,n),_T=(e,...n)=>Yl.run("xor",e,n),h1=(e,...n)=>Yl.run("difference",e,n),xT=xa.set;const ET=Object.freeze(Object.defineProperty({__proto__:null,difference:h1,intersection:c1,setPrecision:xT,union:ao,xor:_T},Symbol.toStringTag,{value:"Module"}));function wT(e){const n=[];if(xi(e,r=>{n.push(r.coordinates)}),n.length<2)throw new Error("Must have at least two features");const i=e.features[0].properties||{},l=h1(n[0],...n.slice(1));return l.length===0?null:l.length===1?le(l[0],i):ur(l,i)}function ep(e){if(!e)throw new Error("geojson is required");var n=[];return $n(e,function(i){n.push(i)}),Jt(n)}function ST(e,n={}){if(n=n||{},!Be(n))throw new Error("options is invalid");const{propertyName:i}=n;Ea(e,"Polygon","dissolve");const l=[];if(i){const r={};Ie(e,function(f){f.properties&&(Object.prototype.hasOwnProperty.call(r,f.properties[i])||(r[f.properties[i]]=[]),r[f.properties[i]].push(f))});const c=Object.keys(r);for(let f=0;f<c.length;f++){const p=ur(ao.apply(null,r[c[f]].map(function(y){return y.geometry.coordinates})));p&&p.properties&&(p.properties[i]=c[f],l.push(p))}}else return ep(ur(ao.apply(null,e.features.map(function(r){return r.geometry.coordinates}))));return ep(Jt(l))}function bT(e,n,i=2){const l=ze(e),r=ze(n),c=l[0]-r[0],f=l[1]-r[1];return i===1?Math.abs(c)+Math.abs(f):Math.pow(Math.pow(c,i)+Math.pow(f,i),1/i)}function f1(e,n){var i,l;n=n||{};const r=n.threshold||1e4,c=n.p||2,f=(i=n.binary)!=null?i:!1,p=n.alpha||-1,y=(l=n.standardization)!=null?l:!1,_=[];Ie(e,S=>{_.push(_a(S))});const E=[];for(let S=0;S<_.length;S++)E[S]=[];for(let S=0;S<_.length;S++)for(let M=S;M<_.length;M++){S===M&&(E[S][M]=0);const O=bT(_[S],_[M],c);E[S][M]=O,E[M][S]=O}for(let S=0;S<_.length;S++)for(let M=0;M<_.length;M++){const O=E[S][M];O!==0&&(f?O<=r?E[S][M]=1:E[S][M]=0:O<=r?E[S][M]=Math.pow(O,p):E[S][M]=0)}if(y)for(let S=0;S<_.length;S++){const M=E[S].reduce((O,B)=>O+B,0);for(let O=0;O<_.length;O++)E[S][O]=E[S][O]/M}return E}function zl(e,n,i={}){const l=ze(e),r=ze(n);r[0]+=r[0]-l[0]>180?-360:l[0]-r[0]>180?360:0;const c=LT(l,r);return Zo(c,"meters",i.units)}function LT(e,n,i){i=i===void 0?Wn:Number(i);const l=i,r=e[1]*Math.PI/180,c=n[1]*Math.PI/180,f=c-r;let p=Math.abs(n[0]-e[0])*Math.PI/180;p>Math.PI&&(p-=2*Math.PI);const y=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),_=Math.abs(y)>1e-11?f/y:Math.cos(r);return Math.sqrt(f*f+_*_*p*p)*l}function vf(e,n,i,l={}){const r=n<0;let c=Zo(Math.abs(n),l.units,"meters");r&&(c=-Math.abs(c));const f=ze(e),p=TT(f,c,i);return p[0]+=p[0]-f[0]>180?-360:f[0]-p[0]>180?360:0,ue(p,l.properties)}function TT(e,n,i,l){l=l===void 0?Wn:Number(l);const r=n/l,c=e[0]*Math.PI/180,f=Jn(e[1]),p=Jn(i),y=r*Math.cos(p);let _=f+y;Math.abs(_)>Math.PI/2&&(_=_>0?Math.PI-_:-Math.PI-_);const E=Math.log(Math.tan(_/2+Math.PI/4)/Math.tan(f/2+Math.PI/4)),S=Math.abs(E)>1e-11?y/E:Math.cos(f),M=r*Math.sin(p)/S;return[((c+M)*180/Math.PI+540)%360-180,_*180/Math.PI]}function d1(e,n,i){if(i=i||{},!Be(i))throw new Error("options is invalid");const l=i.pivot,r=i.mutate;if(!e)throw new Error("geojson is required");if(n==null||isNaN(n))throw new Error("angle is required");if(n===0)return e;const c=l??_a(e);return(r===!1||r===void 0)&&(e=oi(e)),vn(e,function(f){const y=Xo(c,f)+n,_=zl(c,f),E=ce(vf(c,_,y));f[0]=E[0],f[1]=E[1]}),e}function g1(e,n,i,l){l=l||{};let r=l.steps||64;const c=l.units||"kilometers";let f=l.angle||0;const p=l.pivot||e,y=l.properties||{};if(!e)throw new Error("center is required");if(!n)throw new Error("xSemiAxis is required");if(!i)throw new Error("ySemiAxis is required");if(!Be(l))throw new Error("options must be an object");if(!Kn(r))throw new Error("steps must be a number");if(!Kn(f))throw new Error("angle must be a number");const _=ze(d1(ue(ze(e)),f,{pivot:p}));f=-90+f,r=Math.ceil(r/4);let E=[],S=[];const M=n,O=i,B=O,Q=(M-O)/(Math.PI/2),st=(M+O)*Math.PI/4,rt=.5,j=r;let Y=0,V=0;for(let tt=0;tt<r;tt++)V+=Y,Q===0?Y=st/j/B:Y=(-(Q*V+B)+Math.sqrt(Math.pow(Q*V+B,2)-4*(rt*Q)*-(st/j)))/(2*(rt*Q)),V!=0&&E.push(V);S.push(0);for(let tt=0;tt<E.length;tt++)S.push(E[tt]);S.push(Math.PI/2);for(let tt=0;tt<E.length;tt++)S.push(Math.PI-E[E.length-tt-1]);S.push(Math.PI);for(let tt=0;tt<E.length;tt++)S.push(Math.PI+E[tt]);S.push(3*Math.PI/2);for(let tt=0;tt<E.length;tt++)S.push(2*Math.PI-E[E.length-tt-1]);S.push(0);const et=[];for(const tt of S){const W=Math.atan2(O*Math.sin(tt),M*Math.cos(tt)),k=Math.sqrt(Math.pow(M,2)*Math.pow(O,2)/(Math.pow(M*Math.sin(W),2)+Math.pow(O*Math.cos(W),2)));et.push(so(_,k,f+Ds(W),{units:c}).geometry.coordinates)}return le([et],y)}function p1(e){return yc(Ne(e))}function yf(e){const n=[];return e.type==="FeatureCollection"?Ie(e,function(i){vn(i,function(l){n.push(ue(l,i.properties))})}):e.type==="Feature"?vn(e,function(i){n.push(ue(i,e.properties))}):vn(e,function(i){n.push(ue(i))}),Jt(n)}function CT(e,n){var i;if(n=n||{},!Be(n))throw new Error("options is invalid");const l=(i=n.mutate)!=null?i:!1;if(!e)throw new Error("geojson is required");return(l===!1||l===void 0)&&(e=oi(e)),vn(e,function(r){var c=r[0],f=r[1];r[0]=f,r[1]=c}),e}function kT(e){const i=Math.pow(10,6),l=[];for(let r=0;r<e.length;r++){const c=e[r];c!==void 0&&(l[r]=Math.round((c+Number.EPSILON)*i)/i)}return l}const i0=Math.PI/180,r0=180/Math.PI;class tf{lon;lat;x;y;constructor(n,i){this.lon=n,this.lat=i,this.x=i0*n,this.y=i0*i}view(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)}antipode(){const n=-1*this.lat,i=this.lon<0?180+this.lon:(180-this.lon)*-1;return new tf(i,n)}}class MT{properties={};geometries=[];constructor(n){n&&(this.properties=n)}json(){if(this.geometries.length===0)return{type:"Feature",geometry:{type:"LineString",coordinates:null},properties:this.properties};if(this.geometries.length===1){const i=this.geometries[0];return i?{type:"Feature",geometry:{type:"LineString",coordinates:i.coords},properties:this.properties}:{type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:this.properties}}return{type:"Feature",geometry:{type:"MultiLineString",coordinates:this.geometries.filter(i=>i!==void 0).map(i=>i.coords)},properties:this.properties}}wkt(){if(this.geometries.length===0)return"";let n=[];for(const i of this.geometries){if(!i||i.coords.length===0){n.push("LINESTRING EMPTY");continue}const l=i.coords.filter(r=>r!==void 0).map(r=>{const c=r[0]??0,f=r[1]??0;return`${c} ${f}`});l.length===0?n.push("LINESTRING EMPTY"):n.push(`LINESTRING(${l.join(",")})`)}return n.join("; ")}}class NT{coords=[];length=0;move_to(n){this.length++,this.coords.push(n)}}class OT{start;end;properties;g;constructor(n,i,l){if(!n||n.x===void 0||n.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!i||i.x===void 0||i.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new tf(n.x,n.y),this.end=new tf(i.x,i.y),this.properties=l||{};const r=this.start.x-this.end.x,c=this.start.y-this.end.y,f=Math.pow(Math.sin(c/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(f)),this.g===Math.PI)throw new Error("it appears "+this.start.view()+" and "+this.end.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+i)}interpolate(n){const i=Math.sin((1-n)*this.g)/Math.sin(this.g),l=Math.sin(n*this.g)/Math.sin(this.g),r=i*Math.cos(this.start.y)*Math.cos(this.start.x)+l*Math.cos(this.end.y)*Math.cos(this.end.x),c=i*Math.cos(this.start.y)*Math.sin(this.start.x)+l*Math.cos(this.end.y)*Math.sin(this.end.x),f=i*Math.sin(this.start.y)+l*Math.sin(this.end.y),p=r0*Math.atan2(f,Math.sqrt(Math.pow(r,2)+Math.pow(c,2)));return[r0*Math.atan2(c,r),p]}Arc(n,i){let l=[];if(!n||n<=2)l.push([this.start.lon,this.start.lat]),l.push([this.end.lon,this.end.lat]);else{const M=1/(n-1);for(let O=0;O<n;++O){const B=M*O,Q=this.interpolate(B);l.push(Q)}}let r=!1,c=0;const f=i?.offset??10,p=180-f,y=-180+f,_=360-f;for(let M=1;M<l.length;++M){const O=l[M-1]?.[0]??0,B=l[M]?.[0]??0,Q=Math.abs(B-O);Q>_&&(B>p&&O<y||O>p&&B<y)?r=!0:Q>c&&(c=Q)}const E=[];if(r&&c<f){let M=[];E.push(M);for(let O=0;O<l.length;++O){const B=parseFloat((l[O]?.[0]??0).toString());if(O>0&&Math.abs(B-(l[O-1]?.[0]??0))>_){const Q=parseFloat((l[O-1]?.[0]??0).toString()),st=parseFloat((l[O-1]?.[1]??0).toString()),rt=parseFloat((l[O]?.[0]??0).toString()),j=parseFloat((l[O]?.[1]??0).toString());if(Q>-180&&Q<y&&rt===180&&O+1<l.length&&(l[O-1]?.[0]??0)>-180&&(l[O-1]?.[0]??0)<y){M.push([-180,l[O]?.[1]??0]),O++,M.push([l[O]?.[0]??0,l[O]?.[1]??0]);continue}else if(Q>p&&Q<180&&rt===-180&&O+1<l.length&&(l[O-1]?.[0]??0)>p&&(l[O-1]?.[0]??0)<180){M.push([180,l[O]?.[1]??0]),O++,M.push([l[O]?.[0]??0,l[O]?.[1]??0]);continue}if(Q<=180&&rt>=180&&Q<rt){const Y=(180-Q)/(rt-Q),V=Y*j+(1-Y)*st;M.push([(l[O-1]?.[0]??0)>p?180:-180,V]),M=[],M.push([(l[O-1]?.[0]??0)>p?-180:180,V]),E.push(M)}else M=[],E.push(M);M.push([B,l[O]?.[1]??0])}else M.push([l[O]?.[0]??0,l[O]?.[1]??0])}}else{const M=[];E.push(M);for(let O=0;O<l.length;++O)M.push([l[O]?.[0]??0,l[O]?.[1]??0])}const S=new MT(this.properties);for(let M=0;M<E.length;++M){const O=new NT;S.geometries.push(O);const B=E[M];if(B)for(let Q=0;Q<B.length;++Q){const st=B[Q];st&&O.move_to(kT([st[0],st[1]]))}}return S}}function AT(e,n,i={}){if(typeof i!="object")throw new Error("options is invalid");const{properties:l={},npoints:r=100,offset:c=10}=i,f=ze(e),p=ze(n);if(f[0]===p[0]&&f[1]===p[1]){const E=Array(r).fill([f[0],f[1]]);return Se(E,l)}return new OT({x:f[0],y:f[1]},{x:p[0],y:p[1]},l||{}).Arc(r,{offset:c}).json()}function hc(e,n={}){const i=[];if(xi(e,r=>{i.push(r.coordinates)}),i.length<2)throw new Error("Must specify at least 2 geometries");const l=c1(i[0],...i.slice(1));return l.length===0?null:l.length===1?le(l[0],n.properties):ur(l,n.properties)}function m1(e,n,i={}){const l=JSON.stringify(i.properties||{}),[r,c,f,p]=e,y=(c+p)/2,_=(r+f)/2,S=n*2/fn([r,y],[f,y],i)*(f-r),O=n*2/fn([_,c],[_,p],i)*(p-c),B=S/2,Q=B*2,st=Math.sqrt(3)/2*O,rt=f-r,j=p-c,Y=3/4*Q,V=st,et=(rt-Q)/(Q-B/2),tt=Math.floor(et),W=(tt*Y-B/2-rt)/2-B/2+Y/2,k=Math.floor((j-st)/st);let A=(j-k*st)/2;const q=k*st-j>st/2;q&&(A-=st/4);const X=[],Z=[];for(let at=0;at<6;at++){const it=2*Math.PI/6*at;X.push(Math.cos(it)),Z.push(Math.sin(it))}const nt=[];for(let at=0;at<=tt;at++)for(let it=0;it<=k;it++){const D=at%2===1;if(it===0&&D||it===0&&q)continue;const z=at*Y+r-W;let P=it*V+c+A;if(D&&(P-=st/2),i.triangles===!0)IT([z,P],S/2,O/2,JSON.parse(l),X,Z).forEach(function($){i.mask?hc(Jt([i.mask,$]))&&nt.push($):nt.push($)});else{const $=DT([z,P],S/2,O/2,JSON.parse(l),X,Z);i.mask?hc(Jt([i.mask,$]))&&nt.push($):nt.push($)}}return Jt(nt)}function DT(e,n,i,l,r,c){const f=[];for(let p=0;p<6;p++){const y=e[0]+n*r[p],_=e[1]+i*c[p];f.push([y,_])}return f.push(f[0].slice()),le([f],l)}function IT(e,n,i,l,r,c){const f=[];for(let p=0;p<6;p++){const y=[];y.push(e),y.push([e[0]+n*r[p],e[1]+i*c[p]]),y.push([e[0]+n*r[(p+1)%6],e[1]+i*c[(p+1)%6]]),y.push(e),f.push(le([y],l))}return f}function v1(e,n,i={}){i.mask&&!i.units&&(i.units="kilometers");for(var l=[],r=e[0],c=e[1],f=e[2],p=e[3],y=n/fn([r,c],[f,c],i),_=y*(f-r),E=n/fn([r,c],[r,p],i),S=E*(p-c),M=f-r,O=p-c,B=Math.floor(M/_),Q=Math.floor(O/S),st=(M-B*_)/2,rt=(O-Q*S)/2,j=r+st;j<=f;){for(var Y=c+rt;Y<=p;){var V=ue([j,Y],i.properties);i.mask?Cx(V,i.mask)&&l.push(V):l.push(V),Y+=S}j+=_}return Jt(l)}function y1(e,n,i,l={}){const r=[],c=e[0],f=e[1],p=e[2],y=e[3],_=p-c,E=Zo(n,l.units,"degrees"),S=y-f,M=Zo(i,l.units,"degrees"),O=Math.floor(Math.abs(_)/E),B=Math.floor(Math.abs(S)/M),Q=(_-O*E)/2,st=(S-B*M)/2;let rt=c+Q;for(let j=0;j<O;j++){let Y=f+st;for(let V=0;V<B;V++){const et=le([[[rt,Y],[rt,Y+M],[rt+E,Y+M],[rt+E,Y],[rt,Y]]],l.properties);l.mask?Lx(l.mask,et)&&r.push(et):r.push(et),Y+=M}rt+=E}return Jt(r)}function Rp(e,n,i={}){return y1(e,n,n,i)}function _1(e,n,i={}){for(var l=[],r=n/fn([e[0],e[1]],[e[2],e[1]],i),c=r*(e[2]-e[0]),f=n/fn([e[0],e[1]],[e[0],e[3]],i),p=f*(e[3]-e[1]),y=0,_=e[0];_<=e[2];){for(var E=0,S=e[1];S<=e[3];){var M=null,O=null;y%2===0&&E%2===0?(M=le([[[_,S],[_,S+p],[_+c,S],[_,S]]],i.properties),O=le([[[_,S+p],[_+c,S+p],[_+c,S],[_,S+p]]],i.properties)):y%2===0&&E%2===1?(M=le([[[_,S],[_+c,S+p],[_+c,S],[_,S]]],i.properties),O=le([[[_,S],[_,S+p],[_+c,S+p],[_,S]]],i.properties)):E%2===0&&y%2===1?(M=le([[[_,S],[_,S+p],[_+c,S+p],[_,S]]],i.properties),O=le([[[_,S],[_+c,S+p],[_+c,S],[_,S]]],i.properties)):E%2===1&&y%2===1&&(M=le([[[_,S],[_,S+p],[_+c,S],[_,S]]],i.properties),O=le([[[_,S+p],[_+c,S+p],[_+c,S],[_,S+p]]],i.properties)),i.mask?(hc(Jt([i.mask,M]))&&l.push(M),hc(Jt([i.mask,O]))&&l.push(O)):(l.push(M),l.push(O)),S+=p,E++}y++,_+=c}return Jt(l)}function RT(e,n,i){var l,r,c,f;if(i=i||{},typeof i!="object")throw new Error("options is invalid");if(!e)throw new Error("points is required");if(Ea(e,"Point","input must contain Points"),!n)throw new Error("cellSize is required");var p=(l=i.gridType)!=null?l:"square",y=(r=i.property)!=null?r:"elevation",_=(c=i.weight)!=null?c:1,E=(f=i.bbox)!=null?f:Ne(e);if(_!==void 0&&typeof _!="number")throw new Error("weight must be a number");ac(E);var S;switch(p){case"point":case"points":S=v1(E,n,i);break;case"square":case"squares":S=Rp(E,n,i);break;case"hex":case"hexes":S=m1(E,n,i);break;case"triangle":case"triangles":S=_1(E,n,i);break;default:throw new Error("invalid gridType")}var M=[];return Ie(S,function(O){var B,Q=0,st=0;Ie(e,function(j){var Y,V=p==="point"?O:_a(O),et=fn(V,j,i),tt;if(y!==void 0&&(tt=(Y=j.properties)==null?void 0:Y[y]),tt===void 0&&(tt=j.geometry.coordinates[2]),tt===void 0)throw new Error("zValue is missing");et===0&&(Q=tt);var W=1/Math.pow(et,_);st+=W,Q+=W*tt});var rt=oi(O);(B=rt.properties)!=null||(rt.properties={}),rt.properties[y]=Q/st,M.push(rt)}),Jt(M)}var PT=Object.defineProperty,s0=Object.getOwnPropertySymbols,zT=Object.prototype.hasOwnProperty,BT=Object.prototype.propertyIsEnumerable,a0=(e,n,i)=>n in e?PT(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,o0=(e,n)=>{for(var i in n||(n={}))zT.call(n,i)&&a0(e,i,n[i]);if(s0)for(var i of s0(n))BT.call(n,i)&&a0(e,i,n[i]);return e};function jT(e,n={}){if(!Be(n))throw new Error("options is invalid");const{zProperty:i="elevation",flip:l=!1,flags:r=!1}=n;Ea(e,"Point","input must contain Points");for(var c=UT(e,l),f=[],p=0;p<c.length;p++){for(var y=c[p],_=[],E=0;E<y.length;E++){var S=y[E];S.properties==null&&(S.properties={}),S.properties[i]?_.push(S.properties[i]):_.push(0),r===!0&&(S.properties.matrixPosition=[p,E])}f.push(_)}return f}function UT(e,n){var i={};Ie(e,r=>{var c=ce(r)[1];i[c]||(i[c]=[]),i[c].push(r)});const l=[];for(const r of Object.values(i))l.push(r.sort((c,f)=>ce(c)[0]-ce(f)[0]));return l.sort(n?(r,c)=>ce(r[0])[1]-ce(c[0])[1]:(r,c)=>ce(c[0])[1]-ce(r[0])[1]),l}function FT(e,n,i){if(i=i||{},!Be(i))throw new Error("options is invalid");const l=i.zProperty||"elevation",r=i.commonProperties||{},c=i.breaksProperties||[];if(Ea(e,"Point","Input must contain Points"),!n)throw new Error("breaks is required");if(!Array.isArray(n))throw new Error("breaks is not an Array");if(!Be(r))throw new Error("commonProperties is not an Object");if(!Array.isArray(c))throw new Error("breaksProperties is not an Array");const f=jT(e,{zProperty:l,flip:!0}),p=f[0].length;if(f.length<2||p<2)throw new Error("Matrix of points must be at least 2x2");for(let E=1;E<f.length;E++)if(f[E].length!==p)throw new Error("Matrix of points is not uniform in the x dimension");let y=qT(f,n,l);y=HT(y,f,e);const _=y.map((E,S)=>{if(c[S]&&!Be(c[S]))throw new Error("Each mappedProperty is required to be an Object");const M=o0(o0({},r),c[S]);return M[l]=E[l],ur(E.groupedRings,M)});return Jt(_)}function qT(e,n,i){const l=[];let r;for(let c=1;c<n.length;c++){c===1&&(r=l0(e,+n[0]));const f=+n[c],p=+n[c-1],y=l0(e,f),_=y.map(O=>O.map(B=>[B[0],B[1]]).reverse()),E=GT(r.concat(_),e),S=YT(E),M=ZT(S);if(M.length===0&&e[0][0]<f&&e[0][0]>=p){const O=e[0].length,B=e.length;M.push([[[0,0],[O-1,0],[O-1,B-1],[0,B-1],[0,0]]])}l.push({groupedRings:M,[i]:p+"-"+f}),r=y}return l}function l0(e,n){const i=[],l=e[0].length,r=e.length;for(let f=0;f<r-1;f++)for(let p=0;p<l-1;p++){const y=e[f+1][p+1],_=e[f][p+1],E=e[f][p],S=e[f+1][p];switch((S>=n?8:0)|(y>=n?4:0)|(_>=n?2:0)|(E>=n?1:0)){case 0:continue;case 1:i.push([[p+c(E,_),f],[p,f+c(E,S)]]);break;case 2:i.push([[p+1,f+c(_,y)],[p+c(E,_),f]]);break;case 3:i.push([[p+1,f+c(_,y)],[p,f+c(E,S)]]);break;case 4:i.push([[p+c(S,y),f+1],[p+1,f+c(_,y)]]);break;case 5:{(S+y+_+E)/4>=n?i.push([[p+c(S,y),f+1],[p,f+c(E,S)]],[[p+c(E,_),f],[p+1,f+c(_,y)]]):i.push([[p+c(S,y),f+1],[p+1,f+c(_,y)]],[[p+c(E,_),f],[p,f+c(E,S)]]);break}case 6:i.push([[p+c(S,y),f+1],[p+c(E,_),f]]);break;case 7:i.push([[p+c(S,y),f+1],[p,f+c(E,S)]]);break;case 8:i.push([[p,f+c(E,S)],[p+c(S,y),f+1]]);break;case 9:i.push([[p+c(E,_),f],[p+c(S,y),f+1]]);break;case 10:{(S+y+_+E)/4>=n?i.push([[p,f+c(E,S)],[p+c(E,_),f]],[[p+1,f+c(_,y)],[p+c(S,y),f+1]]):i.push([[p,f+c(E,S)],[p+c(S,y),f+1]],[[p+1,f+c(_,y)],[p+c(E,_),f]]);break}case 11:i.push([[p+1,f+c(_,y)],[p+c(S,y),f+1]]);break;case 12:i.push([[p,f+c(E,S)],[p+1,f+c(_,y)]]);break;case 13:i.push([[p+c(E,_),f],[p+1,f+c(_,y)]]);break;case 14:i.push([[p,f+c(E,S)],[p+c(E,_),f]]);break;case 15:continue}}return i;function c(f,p){if(f===p)return .5;let y=(n-f)/(p-f);return y>1?1:y<0?0:y}}function GT(e,n){const i=n.length,l=n[0].length,r=[],c=[];for(;e.length>0;){const f=[...e.shift()];r.push(f);let p;do{p=!1;for(let y=0;y<e.length;y++){const _=e[y];if(_[0][0]===f[f.length-1][0]&&_[0][1]===f[f.length-1][1]){p=!0,f.push(_[1]),e.splice(y,1);break}if(_[1][0]===f[0][0]&&_[1][1]===f[0][1]){p=!0,f.unshift(_[0]),e.splice(y,1);break}}}while(p)}for(;r.length>0;){const f=r[0];if(f[0][0]===f[f.length-1][0]&&f[0][1]===f[f.length-1][1]){c.push(f),r.shift();continue}const p=f[f.length-1];let y,_;if(p[0]===0&&p[1]!==0)y=Ah(r,E=>E[0][0]===0&&E[0][1]<p[1],(E,S)=>S[0][1]-E[0][1]),_=[0,0];else if(p[1]===0&&p[0]!==l-1)y=Ah(r,E=>E[0][1]===0&&E[0][0]>p[0],(E,S)=>E[0][0]-S[0][0]),_=[l-1,0];else if(p[0]===l-1&&p[1]!==i-1)y=Ah(r,E=>E[0][0]===l-1&&E[0][1]>p[1],(E,S)=>E[0][1]-S[0][1]),_=[l-1,i-1];else if(p[1]===i-1&&p[0]!==0)y=Ah(r,E=>E[0][1]===i-1&&E[0][0]<p[0],(E,S)=>S[0][0]-E[0][0]),_=[0,i-1];else throw new Error("Contour not closed but is not along an edge");if(y===-1)f.push(_);else if(y===0)f.push([f[0][0],f[0][1]]),c.push(f),r.shift();else{const E=r[y];r.splice(y,1);for(const S of E)f.push(S)}}for(let f=0;f<c.length;f++)c[f].length<4&&(c.splice(f,1),f--);return c}function HT(e,n,i){const l=Ne(i),r=l[2]-l[0],c=l[3]-l[1],f=l[0],p=l[1],y=n[0].length-1,_=n.length-1,E=r/y,S=c/_;return e.map(function(M){return M.groupedRings=M.groupedRings.map(function(O){return O.map(function(B){return B.map(Q=>[Q[0]*E+f,Q[1]*S+p])})}),M})}function YT(e){const n=e.map(function(i){return{ring:i,area:vc(le([i]))}});return n.sort(function(i,l){return l.area-i.area}),n.map(function(i){return i.ring})}function ZT(e){const n=e.map(l=>({lrCoordinates:l,grouped:!1})),i=[];for(;!XT(n);)for(let l=0;l<n.length;l++)if(!n[l].grouped){const r=[];r.push(n[l].lrCoordinates),n[l].grouped=!0;const c=le([n[l].lrCoordinates]);t:for(let f=l+1;f<n.length;f++)if(!n[f].grouped){const p=le([n[f].lrCoordinates]);if(u0(p,c)){for(let y=1;y<r.length;y++)if(u0(p,le([r[y]])))continue t;r.push(n[f].lrCoordinates),n[f].grouped=!0}}i.push(r)}return i}function u0(e,n){const i=yf(e);for(let l=0;l<i.features.length;l++)if(!re(i.features[l],n))return!1;return!0}function XT(e){for(let n=0;n<e.length;n++)if(e[n].grouped===!1)return!1;return!0}function Ah(e,n,i){let l=-1;for(let r=0;r<e.length;r++)n(e[r])&&(l===-1||i(e[l],e[r])>0)&&(l=r);return l}var VT=Object.defineProperty,c0=Object.getOwnPropertySymbols,QT=Object.prototype.hasOwnProperty,WT=Object.prototype.propertyIsEnumerable,h0=(e,n,i)=>n in e?VT(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,f0=(e,n)=>{for(var i in n||(n={}))QT.call(n,i)&&h0(e,i,n[i]);if(c0)for(var i of c0(n))WT.call(n,i)&&h0(e,i,n[i]);return e};function JT(e,n={}){if(!Be(n))throw new Error("options is invalid");const{zProperty:i="elevation",flip:l=!1,flags:r=!1}=n;Ea(e,"Point","input must contain Points");for(var c=KT(e,l),f=[],p=0;p<c.length;p++){for(var y=c[p],_=[],E=0;E<y.length;E++){var S=y[E];S.properties==null&&(S.properties={}),S.properties[i]?_.push(S.properties[i]):_.push(0),r===!0&&(S.properties.matrixPosition=[p,E])}f.push(_)}return f}function KT(e,n){var i={};Ie(e,r=>{var c=ce(r)[1];i[c]||(i[c]=[]),i[c].push(r)});const l=[];for(const r of Object.values(i))l.push(r.sort((c,f)=>ce(c)[0]-ce(f)[0]));return l.sort(n?(r,c)=>ce(r[0])[1]-ce(c[0])[1]:(r,c)=>ce(c[0])[1]-ce(r[0])[1]),l}function $T(e,n,i){if(i=i||{},!Be(i))throw new Error("options is invalid");const l=i.zProperty||"elevation",r=i.commonProperties||{},c=i.breaksProperties||[];if(Ea(e,"Point","Input must contain Points"),!n)throw new Error("breaks is required");if(!Array.isArray(n))throw new Error("breaks must be an Array");if(!Be(r))throw new Error("commonProperties must be an Object");if(!Array.isArray(c))throw new Error("breaksProperties must be an Array");const f=JT(e,{zProperty:l,flip:!0}),p=f[0].length;if(f.length<2||p<2)throw new Error("Matrix of points must be at least 2x2");for(let E=1;E<f.length;E++)if(f[E].length!==p)throw new Error("Matrix of points is not uniform in the x dimension");const y=tC(f,n,l,r,c),_=nC(y,f,e);return Jt(_)}function tC(e,n,i,l,r){const c=[];for(let f=0;f<n.length;f++){const p=+n[f],y=f0(f0({},l),r[f]);y[i]=p;const _=lo(eC(e,p),y);c.push(_)}return c}function eC(e,n){const i=[],l=e.length,r=e[0].length;for(let p=0;p<l-1;p++)for(let y=0;y<r-1;y++){const _=e[p+1][y+1],E=e[p][y+1],S=e[p][y],M=e[p+1][y];switch((M>=n?8:0)|(_>=n?4:0)|(E>=n?2:0)|(S>=n?1:0)){case 0:continue;case 1:i.push([[y+f(S,E),p],[y,p+f(S,M)]]);break;case 2:i.push([[y+1,p+f(E,_)],[y+f(S,E),p]]);break;case 3:i.push([[y+1,p+f(E,_)],[y,p+f(S,M)]]);break;case 4:i.push([[y+f(M,_),p+1],[y+1,p+f(E,_)]]);break;case 5:{(M+_+E+S)/4>=n?i.push([[y+f(M,_),p+1],[y,p+f(S,M)]],[[y+f(S,E),p],[y+1,p+f(E,_)]]):i.push([[y+f(M,_),p+1],[y+1,p+f(E,_)]],[[y+f(S,E),p],[y,p+f(S,M)]]);break}case 6:i.push([[y+f(M,_),p+1],[y+f(S,E),p]]);break;case 7:i.push([[y+f(M,_),p+1],[y,p+f(S,M)]]);break;case 8:i.push([[y,p+f(S,M)],[y+f(M,_),p+1]]);break;case 9:i.push([[y+f(S,E),p],[y+f(M,_),p+1]]);break;case 10:{(M+_+E+S)/4>=n?i.push([[y,p+f(S,M)],[y+f(S,E),p]],[[y+1,p+f(E,_)],[y+f(M,_),p+1]]):i.push([[y,p+f(S,M)],[y+f(M,_),p+1]],[[y+1,p+f(E,_)],[y+f(S,E),p]]);break}case 11:i.push([[y+1,p+f(E,_)],[y+f(M,_),p+1]]);break;case 12:i.push([[y,p+f(S,M)],[y+1,p+f(E,_)]]);break;case 13:i.push([[y+f(S,E),p],[y+1,p+f(E,_)]]);break;case 14:i.push([[y,p+f(S,M)],[y+f(S,E),p]]);break;case 15:continue}}const c=[];for(;i.length>0;){const p=[...i.shift()];c.push(p);let y;do{y=!1;for(let _=0;_<i.length;_++){const E=i[_];if(E[0][0]===p[p.length-1][0]&&E[0][1]===p[p.length-1][1]){y=!0,p.push(E[1]),i.splice(_,1);break}if(E[1][0]===p[0][0]&&E[1][1]===p[0][1]){y=!0,p.unshift(E[0]),i.splice(_,1);break}}}while(y)}return c;function f(p,y){if(p===y)return .5;let _=(n-p)/(y-p);return _>1?1:_<0?0:_}}function nC(e,n,i){const l=Ne(i),r=l[2]-l[0],c=l[3]-l[1],f=l[0],p=l[1],y=n[0].length-1,_=n.length-1,E=r/y,S=c/_,M=O=>{O[0]=O[0]*E+f,O[1]=O[1]*S+p};return e.forEach(O=>{vn(O,M)}),e}function iC(e){let n,i;const l={type:"FeatureCollection",features:[]};if(e.type==="Feature"?i=e.geometry:i=e,i.type==="LineString")n=[i.coordinates];else if(i.type==="MultiLineString")n=i.coordinates;else if(i.type==="MultiPolygon")n=[].concat(...i.coordinates);else if(i.type==="Polygon")n=i.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return n.forEach(r=>{n.forEach(c=>{for(let f=0;f<r.length-1;f++)for(let p=f;p<c.length-1;p++){if(r===c&&(Math.abs(f-p)===1||f===0&&p===r.length-2&&r[f][0]===r[r.length-1][0]&&r[f][1]===r[r.length-1][1]))continue;const y=rC(r[f][0],r[f][1],r[f+1][0],r[f+1][1],c[p][0],c[p][1],c[p+1][0],c[p+1][1]);y&&l.features.push(ue([y[0],y[1]]))}})}),l}function rC(e,n,i,l,r,c,f,p){let y,_,E,S,M;const O={x:null,y:null,onLine1:!1,onLine2:!1};return y=(p-c)*(i-e)-(f-r)*(l-n),y===0?O.x!==null&&O.y!==null?O:!1:(_=n-c,E=e-r,S=(f-r)*_-(p-c)*E,M=(i-e)*_-(l-n)*E,_=S/y,E=M/y,O.x=e+_*(i-e),O.y=n+_*(l-n),_>=0&&_<=1&&(O.onLine1=!0),E>=0&&E<=1&&(O.onLine2=!0),O.onLine1&&O.onLine2?[O.x,O.y]:!1)}function x1(e,n={}){return mp(e,(i,l)=>{const r=l.geometry.coordinates;return i+fn(r[0],r[1],n)},0)}function E1(e,n,i,l,r={}){const c=r.steps||64,f=d0(i),p=d0(l),y=!Array.isArray(e)&&e.type==="Feature"?e.properties:{};if(f===p)return Se(gf(e,n,r).geometry.coordinates[0],y);const _=f,E=f<p?p:p+360;let S=_;const M=[];let O=0;const B=(E-_)/c;for(;S<=E;)M.push(so(e,n,S,r).geometry.coordinates),O++,S=_+O*B;return Se(M,y)}function d0(e){let n=e%360;return n<0&&(n+=360),n}function w1(e,n,i,l={}){if(!Be(l))throw new Error("options is invalid");const{units:r="kilometers"}=l;var c,f=[];if(e.type==="Feature")c=e.geometry.coordinates;else if(e.type==="LineString")c=e.coordinates;else throw new Error("input must be a LineString Feature or Geometry");const p=c.length;let y=0,_,E,S;for(let O=0;O<c.length&&!(n>=y&&O===c.length-1);O++){if(y>n&&f.length===0){let B=n-y;if(!B)return f.push(c[O]),Se(f);E=ro(c[O],c[O-1])-180,S=so(c[O],B,E,{units:r}),f.push(S.geometry.coordinates)}if(y>=i)return _=i-y,_?(E=ro(c[O],c[O-1])-180,S=so(c[O],_,E,{units:r}),f.push(S.geometry.coordinates),Se(f)):(f.push(c[O]),Se(f));if(y>=n&&f.push(c[O]),O===c.length-1)return Se(f);y+=fn(c[O],c[O+1],{units:r})}if(y<n&&c.length===p)throw new Error("Start position is beyond line");var M=c[c.length-1];return Se([M,M])}function sC(e,n,i={}){if(!Be(i))throw new Error("options is invalid");const{units:l="kilometers",reverse:r=!1}=i;if(!e)throw new Error("geojson is required");if(n<=0)throw new Error("segmentLength must be greater than 0");const c=[];return $n(e,f=>{r&&(f.geometry.coordinates=f.geometry.coordinates.reverse()),aC(f,n,l,p=>{c.push(p)})}),Jt(c)}function aC(e,n,i,l){var r=x1(e,{units:i});if(r<=n)return l(e);var c=r/n;Number.isInteger(c)||(c=Math.floor(c)+1);for(var f=0;f<c;f++){var p=w1(e,n*f,n*(f+1),{units:i});l(p)}}function ef(e){var n=e[0],i=e[1];return[i[0]-n[0],i[1]-n[1]]}function np(e,n){return e[0]*n[1]-n[0]*e[1]}function oC(e,n){return[e[0]+n[0],e[1]+n[1]]}function lC(e,n){return[e[0]-n[0],e[1]-n[1]]}function uC(e,n){return[e*n[0],e*n[1]]}function cC(e,n){var i=e[0],l=ef(e),r=n[0],c=ef(n),f=np(l,c),p=lC(r,i),y=np(p,c),_=y/f,E=oC(i,uC(_,l));return E}function hC(e,n){var i=ef(e),l=ef(n);return np(i,l)===0}function fC(e,n){return hC(e,n)?!1:cC(e,n)}function dC(e,n,i={}){if(i=i||{},!Be(i))throw new Error("options is invalid");const{units:l="kilometers"}=i;if(!e)throw new Error("geojson is required");if(n==null||isNaN(n))throw new Error("distance is required");var r=cr(e),c=e.type==="Feature"?e.properties:{};switch(r){case"LineString":return g0(e,n,l);case"MultiLineString":var f=[];return $n(e,function(p){f.push(g0(p,n,l).geometry.coordinates)}),lo(f,c);default:throw new Error("geometry "+r+" is not supported")}}function g0(e,n,i){var l=[],r=up(n,i),c=ce(e),f=[];return c.forEach(function(p,y){if(y!==c.length-1){var _=gC(p,c[y+1],r);if(l.push(_),y>0){var E=l[y-1],S=fC(_,E);S!==!1&&(E[1]=S,_[0]=S),f.push(E[0]),y===c.length-2&&(f.push(_[0]),f.push(_[1]))}c.length===2&&(f.push(_[0]),f.push(_[1]))}}),Se(f,e.type==="Feature"?e.properties:{})}function gC(e,n,i){var l=Math.sqrt((e[0]-n[0])*(e[0]-n[0])+(e[1]-n[1])*(e[1]-n[1])),r=e[0]+i*(n[1]-e[1])/l,c=n[0]+i*(n[1]-e[1])/l,f=e[1]+i*(e[0]-n[0])/l,p=n[1]+i*(e[0]-n[0])/l;return[[r,f],[c,p]]}function pC(e,n,i){const l=ce(i);if(cr(i)!=="LineString")throw new Error("line must be a LineString");const r=ma(i,e),c=ma(i,n),f=r.properties.index<=c.properties.index?[r,c]:[c,r],p=[f[0].geometry.coordinates];for(let y=f[0].properties.index+1;y<f[1].properties.index+1;y++)p.push(l[y]);return p.push(f[1].geometry.coordinates),Se(p,i.type==="Feature"?i.properties:{})}function mC(e,n={}){var i,l,r,c=n.properties,f=(i=n.autoComplete)!=null?i:!0,p=(l=n.orderCoords)!=null?l:!0,y=(r=n.mutate)!=null?r:!1;if(y||(e=oi(e)),e.type==="FeatureCollection"){var _=[];return e.features.forEach(function(E){_.push(ce(p0(E,{},f,p)))}),ur(_,c)}else return p0(e,c,f,p)}function p0(e,n,i,l){n=n||(e.type==="Feature"?e.properties:{});var r=cn(e),c=r.coordinates,f=r.type;if(!c.length)throw new Error("line must contain coordinates");switch(f){case"LineString":return i&&(c=m0(c)),le([c],n);case"MultiLineString":var p=[],y=0;return c.forEach(function(_){if(i&&(_=m0(_)),l){var E=vC(Ne(Se(_)));E>y?(p.unshift(_),y=E):p.push(_)}else p.push(_)}),le(p,n);default:throw new Error("geometry type "+f+" is not supported")}}function m0(e){var n=e[0],i=n[0],l=n[1],r=e[e.length-1],c=r[0],f=r[1];return(i!==c||l!==f)&&e.push(n),e}function vC(e){var n=e[0],i=e[1],l=e[2],r=e[3];return Math.abs(n-l)*Math.abs(i-r)}function yC(e,n,i){var l;const r=(l=i?.mutate)!=null?l:!1;let c=n;n&&r===!1&&(c=oi(n));const f=xC(c);let p=null;return e.type==="FeatureCollection"?p=_C(e):e.type==="Feature"?p=ip(ao(e.geometry.coordinates)):p=ip(ao(e.coordinates)),p.geometry.coordinates.forEach(function(y){f.geometry.coordinates.push(y[0])}),f}function _C(e){const n=e.features.length===2?ao(e.features[0].geometry.coordinates,e.features[1].geometry.coordinates):ao.apply(ET,e.features.map(function(i){return i.geometry.coordinates}));return ip(n)}function ip(e){return ur(e)}function xC(e){let i=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]];return e&&(e.type==="Feature"?i=e.geometry.coordinates:i=e.coordinates),le(i)}function EC(e,n){const i=fn(e,n),l=ro(e,n);return so(e,i/2,l)}function wC(e,n){var i,l;const r=n.inputField,c=n.threshold||1e5,f=n.p||2,p=(i=n.binary)!=null?i:!1,y=n.alpha||-1,_=(l=n.standardization)!=null?l:!0,E=f1(e,{alpha:y,binary:p,p:f,standardization:_,threshold:c}),S=[];Ie(e,q=>{const X=q.properties||{};S.push(X[r])});const M=S1(S),O=SC(S);let B=0,Q=0,st=0,rt=0;const j=E.length;for(let q=0;q<j;q++){let X=0;for(let Z=0;Z<j;Z++)B+=E[q][Z]*(S[q]-M)*(S[Z]-M),Q+=E[q][Z],st+=Math.pow(E[q][Z]+E[Z][q],2),X+=E[q][Z]+E[Z][q];rt+=Math.pow(X,2)}st=.5*st;const Y=B/Q/O,V=-1/(j-1),et=j*j*st-j*rt+3*(Q*Q),tt=(j-1)*(j+1)*(Q*Q),W=et/tt-V*V,k=Math.sqrt(W),A=(Y-V)/k;return{expectedMoranIndex:V,moranIndex:Y,stdNorm:k,zNorm:A}}function S1(e){let n=0;for(const i of e)n+=i;return n/e.length}function SC(e){const n=S1(e);let i=0;for(const l of e)i+=Math.pow(l-n,2);return i/e.length}var bC=Object.defineProperty,LC=Object.defineProperties,TC=Object.getOwnPropertyDescriptors,v0=Object.getOwnPropertySymbols,CC=Object.prototype.hasOwnProperty,kC=Object.prototype.propertyIsEnumerable,y0=(e,n,i)=>n in e?bC(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,_0=(e,n)=>{for(var i in n||(n={}))CC.call(n,i)&&y0(e,i,n[i]);if(v0)for(var i of v0(n))kC.call(n,i)&&y0(e,i,n[i]);return e},x0=(e,n)=>LC(e,TC(n));function _f(e,n,i={}){if(!e)throw new Error("targetPoint is required");if(!n)throw new Error("points is required");let l=1/0,r=0;Ie(n,(f,p)=>{const y=fn(e,f,i);y<l&&(r=p,l=y)});const c=oi(n.features[r]);return x0(_0({},c),{properties:x0(_0({},c.properties),{featureIndex:r,distanceToPoint:l})})}function MC(e,n){n=n||{};const i=n.studyArea||yc(Ne(e)),l=n.properties||{},r=n.units||"kilometers",c=[];Ie(e,S=>{c.push(_a(S))});const f=c.length,p=c.map((S,M)=>{const O=Jt(c.filter((B,Q)=>Q!==M));return fn(S,_f(S,O).geometry.coordinates,{units:r})}).reduce((S,M)=>S+M,0)/f,y=f/cp(vc(i),"meters",r),_=1/(2*Math.sqrt(y)),E=.26136/Math.sqrt(f*y);return l.nearestNeighborAnalysis={units:r,arealUnits:r+"",observedMeanDistance:p,expectedMeanDistance:_,nearestNeighborIndex:p/_,numberOfPoints:f,zScore:(p-_)/E},i.properties=l,i}function Pp(e,n,i={}){var l,r;const c=(l=i.method)!=null?l:"geodesic",f=(r=i.units)!=null?r:"kilometers";if(!e)throw new Error("pt is required");if(Array.isArray(e)?e=ue(e):e.type==="Point"?e=Sn(e):oc(e,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=Se(n):n.type==="LineString"?n=Sn(n):oc(n,"LineString","line");let p=1/0;const y=e.geometry.coordinates;return pa(n,_=>{if(_){const E=_.geometry.coordinates[0],S=_.geometry.coordinates[1],M=NC(y,E,S,{method:c});M<p&&(p=M)}}),Zo(p,"degrees",f)}function NC(e,n,i,l){if(l.method==="geodesic")return ma(Se([n,i]).geometry,e,{units:"degrees"}).properties.dist;const r=[i[0]-n[0],i[1]-n[1]],c=[e[0]-n[0],e[1]-n[1]],f=E0(c,r);if(f<=0)return zl(e,n,{units:"degrees"});const p=E0(r,r);if(p<=f)return zl(e,i,{units:"degrees"});const y=f/p,_=[n[0]+y*r[0],n[1]+y*r[1]];return zl(e,_,{units:"degrees"})}function E0(e,n){return e[0]*n[0]+e[1]*n[1]}var OC=Object.defineProperty,w0=Object.getOwnPropertySymbols,AC=Object.prototype.hasOwnProperty,DC=Object.prototype.propertyIsEnumerable,S0=(e,n,i)=>n in e?OC(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,Pg=(e,n)=>{for(var i in n||(n={}))AC.call(n,i)&&S0(e,i,n[i]);if(w0)for(var i of w0(n))DC.call(n,i)&&S0(e,i,n[i]);return e};function IC(e,n,i={}){const l=i.units,r=i.properties||{},c=RC(e);if(!c.features.length)throw new Error("points must contain features");if(!n)throw new Error("line is required");if(cr(n)!=="LineString")throw new Error("line must be a LineString");let f=1/0,p=null;return Ie(c,y=>{const _=Pp(y,n,{units:l});_<f&&(f=_,p=y)}),p&&(p.properties=Pg(Pg(Pg({},{dist:f}),p.properties),r)),p}function RC(e){const n=[];switch(e.geometry?e.geometry.type:e.type){case"GeometryCollection":return xi(e,l=>{l.type==="Point"&&n.push({type:"Feature",properties:{},geometry:l})}),{type:"FeatureCollection",features:n};case"FeatureCollection":return e.features=e.features.filter(l=>l.geometry.type==="Point"),e;default:throw new Error("points must be a Point Collection")}}function PC(e,n){const i=ze(e),c=cn(n).coordinates[0];if(c.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");const f=n.type==="Feature"&&n.properties||{},p=f.a,y=f.b,_=f.c,E=i[0],S=i[1],M=c[0][0],O=c[0][1],B=p!==void 0?p:c[0][2],Q=c[1][0],st=c[1][1],rt=y!==void 0?y:c[1][2],j=c[2][0],Y=c[2][1],V=_!==void 0?_:c[2][2];return(V*(E-M)*(S-st)+B*(E-Q)*(S-Y)+rt*(E-j)*(S-O)-rt*(E-M)*(S-Y)-V*(E-Q)*(S-O)-B*(E-j)*(S-st))/((E-M)*(S-st)+(E-Q)*(S-Y)+(E-j)*(S-O)-(E-M)*(S-Y)-(E-Q)*(S-O)-(E-j)*(S-st))}function zC(e){const n=BC(e),i=df(n);let l=!1,r=0;for(;!l&&r<n.features.length;){const c=n.features[r].geometry;let f,p,y,_,E,S,M=!1;if(c.type==="Point")i.geometry.coordinates[0]===c.coordinates[0]&&i.geometry.coordinates[1]===c.coordinates[1]&&(l=!0);else if(c.type==="MultiPoint"){let O=!1,B=0;for(;!O&&B<c.coordinates.length;)i.geometry.coordinates[0]===c.coordinates[B][0]&&i.geometry.coordinates[1]===c.coordinates[B][1]&&(l=!0,O=!0),B++}else if(c.type==="LineString"){let O=0;for(;!M&&O<c.coordinates.length-1;)f=i.geometry.coordinates[0],p=i.geometry.coordinates[1],y=c.coordinates[O][0],_=c.coordinates[O][1],E=c.coordinates[O+1][0],S=c.coordinates[O+1][1],b0(f,p,y,_,E,S)&&(M=!0,l=!0),O++}else if(c.type==="MultiLineString"){let O=0;for(;O<c.coordinates.length;){M=!1;let B=0;const Q=c.coordinates[O];for(;!M&&B<Q.length-1;)f=i.geometry.coordinates[0],p=i.geometry.coordinates[1],y=Q[B][0],_=Q[B][1],E=Q[B+1][0],S=Q[B+1][1],b0(f,p,y,_,E,S)&&(M=!0,l=!0),B++;O++}}else(c.type==="Polygon"||c.type==="MultiPolygon")&&re(i,c)&&(l=!0);r++}if(l)return i;{const c=Jt([]);for(let f=0;f<n.features.length;f++)c.features=c.features.concat(yf(n.features[f]).features);return ue(_f(i,c).geometry.coordinates)}}function BC(e){return e.type!=="FeatureCollection"?e.type!=="Feature"?Jt([Sn(e)]):Jt([e]):e}function b0(e,n,i,l,r,c){const f=Math.sqrt((r-i)*(r-i)+(c-l)*(c-l)),p=Math.sqrt((e-i)*(e-i)+(n-l)*(n-l)),y=Math.sqrt((r-e)*(r-e)+(c-n)*(c-n));return f===p+y}function b1(e,n){const i=[];return Ie(e,function(l){let r=!1;if(l.geometry.type==="Point")xi(n,function(f){re(l,f)&&(r=!0)}),r&&i.push(l);else if(l.geometry.type==="MultiPoint"){var c=[];xi(n,function(f){vn(l,function(p){re(p,f)&&(r=!0,c.push(p))})}),r&&i.push(pc(c,l.properties))}else throw new Error("Input geometry must be a Point or MultiPoint")}),Jt(i)}function rp(e,n,i={}){var l,r;const c=(l=i.method)!=null?l:"geodesic",f=(r=i.units)!=null?r:"kilometers";if(!e)throw new Error("point is required");if(!n)throw new Error("polygon or multi-polygon is required");const p=cn(n);if(p.type==="MultiPolygon"){const E=p.coordinates.map(S=>rp(e,le(S),{method:c,units:f}));return Math.min(...E.map(Math.abs))*(re(e,n)?-1:1)}if(p.coordinates.length>1){const[E,...S]=p.coordinates.map(O=>rp(e,le([O]),{method:c,units:f}));if(E>=0)return E;const M=Math.min(...S);return M<0?Math.abs(M):Math.max(M*-1,E)}const y=Fl(p);let _=1/0;return $n(y,E=>{_=Math.min(_,Pp(e,E,{method:c,units:f}))}),re(e,p)?-_:_}function jC(e){return(e>0)-(e<0)||+e}function zp(e,n,i){const l=n[0]-e[0],r=n[1]-e[1],c=i[0]-n[0],f=i[1]-n[1];return jC(l*f-c*r)}function UC(e,n){const i=e.geometry.coordinates[0].map(f=>f[0]),l=e.geometry.coordinates[0].map(f=>f[1]),r=n.geometry.coordinates[0].map(f=>f[0]),c=n.geometry.coordinates[0].map(f=>f[1]);return Math.max.apply(null,i)===Math.max.apply(null,r)&&Math.max.apply(null,l)===Math.max.apply(null,c)&&Math.min.apply(null,i)===Math.min.apply(null,r)&&Math.min.apply(null,l)===Math.min.apply(null,c)}function L0(e,n){return n.geometry.coordinates[0].every(i=>re(ue(i),e))}function FC(e,n){return e[0]===n[0]&&e[1]===n[1]}var T0=class L1{static buildId(n){return n.join(",")}constructor(n){this.id=L1.buildId(n),this.coordinates=n,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}removeInnerEdge(n){this.innerEdges=this.innerEdges.filter(i=>i.from.id!==n.from.id)}removeOuterEdge(n){this.outerEdges=this.outerEdges.filter(i=>i.to.id!==n.to.id)}addOuterEdge(n){this.outerEdges.push(n),this.outerEdgesSorted=!1}sortOuterEdges(){this.outerEdgesSorted||(this.outerEdges.sort((n,i)=>{const l=n.to,r=i.to;if(l.coordinates[0]-this.coordinates[0]>=0&&r.coordinates[0]-this.coordinates[0]<0)return 1;if(l.coordinates[0]-this.coordinates[0]<0&&r.coordinates[0]-this.coordinates[0]>=0)return-1;if(l.coordinates[0]-this.coordinates[0]===0&&r.coordinates[0]-this.coordinates[0]===0)return l.coordinates[1]-this.coordinates[1]>=0||r.coordinates[1]-this.coordinates[1]>=0?l.coordinates[1]-r.coordinates[1]:r.coordinates[1]-l.coordinates[1];const c=zp(this.coordinates,l.coordinates,r.coordinates);if(c<0)return 1;if(c>0)return-1;const f=Math.pow(l.coordinates[0]-this.coordinates[0],2)+Math.pow(l.coordinates[1]-this.coordinates[1],2),p=Math.pow(r.coordinates[0]-this.coordinates[0],2)+Math.pow(r.coordinates[1]-this.coordinates[1],2);return f-p}),this.outerEdgesSorted=!0)}getOuterEdges(){return this.sortOuterEdges(),this.outerEdges}getOuterEdge(n){return this.sortOuterEdges(),this.outerEdges[n]}addInnerEdge(n){this.innerEdges.push(n)}},qC=class T1{getSymetric(){return this.symetric||(this.symetric=new T1(this.to,this.from),this.symetric.symetric=this),this.symetric}constructor(n,i){this.from=n,this.to=i,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}deleteEdge(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)}isEqual(n){return this.from.id===n.from.id&&this.to.id===n.to.id}toString(){return`Edge { ${this.from.id} -> ${this.to.id} }`}toLineString(){return Se([this.from.coordinates,this.to.coordinates])}compareTo(n){return zp(n.from.coordinates,n.to.coordinates,this.to.coordinates)}},C1=class{constructor(){this.edges=[],this.polygon=void 0,this.envelope=void 0}push(e){this.edges.push(e),this.polygon=this.envelope=void 0}get(e){return this.edges[e]}get length(){return this.edges.length}forEach(e){this.edges.forEach(e)}map(e){return this.edges.map(e)}some(e){return this.edges.some(e)}isValid(){return!0}isHole(){const e=this.edges.reduce((r,c,f)=>(c.from.coordinates[1]>this.edges[r].from.coordinates[1]&&(r=f),r),0),n=(e===0?this.length:e)-1,i=(e+1)%this.length,l=zp(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return l===0?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:l>0}toMultiPoint(){return pc(this.edges.map(e=>e.from.coordinates))}toPolygon(){if(this.polygon)return this.polygon;const e=this.edges.map(n=>n.from.coordinates);return e.push(this.edges[0].from.coordinates),this.polygon=le([e])}getEnvelope(){return this.envelope?this.envelope:this.envelope=p1(this.toPolygon())}static findEdgeRingContaining(e,n){const i=e.getEnvelope();let l,r;return n.forEach(c=>{const f=c.getEnvelope();if(r&&(l=r.getEnvelope()),!UC(f,i)&&L0(f,i)){const p=e.map(_=>_.from.coordinates);let y;for(const _ of p)c.some(E=>FC(_,E.from.coordinates))||(y=_);y&&c.inside(ue(y))&&(!r||L0(l,f))&&(r=c)}}),r}inside(e){return re(e,this.toPolygon())}};function GC(e){if(!e)throw new Error("No geojson passed");if(e.type!=="FeatureCollection"&&e.type!=="GeometryCollection"&&e.type!=="MultiLineString"&&e.type!=="LineString"&&e.type!=="Feature")throw new Error(`Invalid input type '${e.type}'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature`)}var HC=class k1{static fromGeoJson(n){GC(n);const i=new k1;return $n(n,l=>{oc(l,"LineString","Graph::fromGeoJson"),fp(l,(r,c)=>{if(r){const f=i.getNode(r),p=i.getNode(c);i.addEdge(f,p)}return c})}),i}getNode(n){const i=T0.buildId(n);let l=this.nodes[i];return l||(l=this.nodes[i]=new T0(n)),l}addEdge(n,i){const l=new qC(n,i),r=l.getSymetric();this.edges.push(l),this.edges.push(r)}constructor(){this.edges=[],this.nodes={}}deleteDangles(){Object.keys(this.nodes).map(n=>this.nodes[n]).forEach(n=>this._removeIfDangle(n))}_removeIfDangle(n){if(n.innerEdges.length<=1){const i=n.getOuterEdges().map(l=>l.to);this.removeNode(n),i.forEach(l=>this._removeIfDangle(l))}}deleteCutEdges(){this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(n=>{n.label===n.symetric.label&&(this.removeEdge(n.symetric),this.removeEdge(n))})}_computeNextCWEdges(n){typeof n>"u"?Object.keys(this.nodes).forEach(i=>this._computeNextCWEdges(this.nodes[i])):n.getOuterEdges().forEach((i,l)=>{n.getOuterEdge((l===0?n.getOuterEdges().length:l)-1).symetric.next=i})}_computeNextCCWEdges(n,i){const l=n.getOuterEdges();let r,c;for(let f=l.length-1;f>=0;--f){let p=l[f],y=p.symetric,_,E;p.label===i&&(_=p),y.label===i&&(E=y),!(!_||!E)&&(E&&(c=E),_&&(c&&(c.next=_,c=void 0),r||(r=_)))}c&&(c.next=r)}_findLabeledEdgeRings(){const n=[];let i=0;return this.edges.forEach(l=>{if(l.label>=0)return;n.push(l);let r=l;do r.label=i,r=r.next;while(!l.isEqual(r));i++}),n}getEdgeRings(){this._computeNextCWEdges(),this.edges.forEach(i=>{i.label=void 0}),this._findLabeledEdgeRings().forEach(i=>{this._findIntersectionNodes(i).forEach(l=>{this._computeNextCCWEdges(l,i.label)})});const n=[];return this.edges.forEach(i=>{i.ring||n.push(this._findEdgeRing(i))}),n}_findIntersectionNodes(n){const i=[];let l=n;do{let r=0;l.from.getOuterEdges().forEach(c=>{c.label===n.label&&++r}),r>1&&i.push(l.from),l=l.next}while(!n.isEqual(l));return i}_findEdgeRing(n){let i=n;const l=new C1;do l.push(i),i.ring=l,i=i.next;while(!n.isEqual(i));return l}removeNode(n){n.getOuterEdges().forEach(i=>this.removeEdge(i)),n.innerEdges.forEach(i=>this.removeEdge(i)),delete this.nodes[n.id]}removeEdge(n){this.edges=this.edges.filter(i=>!i.isEqual(n)),n.deleteEdge()}};function YC(e){const n=HC.fromGeoJson(e);n.deleteDangles(),n.deleteCutEdges();const i=[],l=[];return n.getEdgeRings().filter(r=>r.isValid()).forEach(r=>{r.isHole()?i.push(r):l.push(r)}),i.forEach(r=>{C1.findEdgeRingContaining(r,l)&&l.push(r)}),Jt(l.map(r=>r.toPolygon()))}function ZC(e,n){n=n||{},n.iterations=n.iterations||1;const{iterations:i}=n,l=[];if(!e)throw new Error("inputPolys is required");return xi(e,function(r,c,f){if(r.type==="Polygon"){let p=[[]];for(let y=0;y<i;y++){let _=[],E=r;y>0&&(E=le(p).geometry),XC(E,_),p=_.slice(0)}l.push(le(p,f))}else if(r.type==="MultiPolygon"){let p=[[[]]];for(let y=0;y<i;y++){let _=[],E=r;y>0&&(E=ur(p).geometry),VC(E,_),p=_.slice(0)}l.push(ur(p,f))}else throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}),Jt(l)}function XC(e,n){var i,l;vn(e,function(r,c,f,p,y){if(l!==y)n.push([]);else{var _=i[0],E=i[1],S=r[0],M=r[1];n[y].push([.75*_+.25*S,.75*E+.25*M]),n[y].push([.25*_+.75*S,.25*E+.75*M])}i=r,l=y},!1),n.forEach(function(r){r.push(r[0])})}function VC(e,n){let i,l,r;vn(e,function(c,f,p,y,_){if(l!==y)n.push([[]]);else if(r!==_)n[y].push([]);else{var E=i[0],S=i[1],M=c[0],O=c[1];n[y][_].push([.75*E+.25*M,.75*S+.25*O]),n[y][_].push([.25*E+.75*M,.25*S+.75*O])}i=c,l=y,r=_},!1),n.forEach(function(c){c.forEach(function(f){f.push(f[0])})})}function QC(e,n){const i=ce(e),l=ce(n);let r=[],c=[],f;const p=Ne(n);let y=0,_=null;switch(i[0]>p[0]&&i[0]<p[2]&&i[1]>p[1]&&i[1]<p[3]&&(_=_f(e,yf(n)),y=_.properties.featureIndex),cr(n)){case"Polygon":r=l[0][y],c=l[0][0],_!==null&&_.geometry.coordinates[1]<i[1]&&(c=l[0][y]),f=fc(l[0][0],l[0][l[0].length-1],i),[r,c]=C0(l[0],i,f,r,c);break;case"MultiPolygon":for(var S=0,M=0,O=0,B=0;B<l[0].length;B++){S=B;for(var Q=!1,st=0;st<l[0][B].length;st++){if(M=st,O===y){Q=!0;break}O++}if(Q)break}r=l[0][S][M],c=l[0][S][M],f=fc(l[0][0][0],l[0][0][l[0][0].length-1],i),l.forEach(function(rt){[r,c]=C0(rt[0],i,f,r,c)});break}return Jt([ue(r),ue(c)])}function C0(e,n,i,l,r){for(let c=0;c<e.length;c++){const f=e[c];let p=e[c+1];c===e.length-1&&(p=e[0]);const y=fc(f,p,n);i<=0&&y>0?JC(n,f,l)||(l=f):i>0&&y<=0&&(WC(n,f,r)||(r=f)),i=y}return[l,r]}function WC(e,n,i){return fc(e,n,i)>0}function JC(e,n,i){return fc(e,n,i)<0}function fc(e,n,i){return(n[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(n[1]-e[1])}function M1(e,n={}){return O1(e,"mercator",n)}function N1(e,n={}){return O1(e,"wgs84",n)}function O1(e,n,i={}){i=i||{};var l=i.mutate;if(!e)throw new Error("geojson is required");return Array.isArray(e)&&Kn(e[0])?e=n==="mercator"?k0(e):M0(e):(l!==!0&&(e=oi(e)),vn(e,function(r){var c=n==="mercator"?k0(r):M0(r);r[0]=c[0],r[1]=c[1]})),e}function k0(e){var n=Math.PI/180,i=6378137,l=20037508342789244e-9,r=Math.abs(e[0])<=180?e[0]:e[0]-KC(e[0])*360,c=[i*r*n,i*Math.log(Math.tan(Math.PI*.25+.5*e[1]*n))];return c[0]>l&&(c[0]=l),c[0]<-l&&(c[0]=-l),c[1]>l&&(c[1]=l),c[1]<-l&&(c[1]=-l),c}function M0(e){var n=180/Math.PI,i=6378137;return[e[0]*n/i,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/i)))*n]}function KC(e){return e<0?-1:e>0?1:0}const $C=Object.freeze(Object.defineProperty({__proto__:null,toMercator:M1,toWgs84:N1},Symbol.toStringTag,{value:"Module"}));function tk(e,n){n=n||{};const i=n.studyBbox||Ne(e),l=n.confidenceLevel||20,r=e.features,c=r.length,f=vc(yc(i)),p=Math.sqrt(f/c*2),_=Rp(i,p,{units:"meters"}).features,E={};for(let W=0;W<_.length;W++)E[W]={box:Ne(_[W]),cnt:0};let S=0;for(const W of r)for(const k of Object.keys(E)){const A=E[k].box;if(nk(ze(W),A)){E[k].cnt+=1,S+=1;break}}let M=0;for(const W of Object.keys(E)){const k=E[W].cnt;k>M&&(M=k)}const O=[],B=Object.keys(E).length,Q=S/B;let st=0;for(let W=0;W<M+1;W++)st+=Math.exp(-Q)*Math.pow(Q,W)/ik(W),O.push(st);const rt=[];let j=0;for(let W=0;W<M+1;W++){for(const A of Object.keys(E))E[A].cnt===W&&(j+=1);const k=j/B;rt.push(k)}let Y=0;for(let W=0;W<M+1;W++){const k=Math.abs(O[W]-rt[W]);k>Y&&(Y=k)}const et=ek[l]/Math.sqrt(B),tt={criticalValue:et,isRandom:!0,maxAbsoluteDifference:Y,observedDistribution:rt};return Y>et&&(tt.isRandom=!1),tt}var ek={20:1.07275,15:1.13795,10:1.22385,5:1.3581,2:1.51743,1:1.62762};function nk(e,n){return n[0]<=e[0]&&n[1]<=e[1]&&n[2]>=e[0]&&n[3]>=e[1]}function ik(e){const n=[];function i(l){return l===0||l===1?1:n[l]>0?n[l]:n[l]=i(l-1)*l}return i(e)}function A1(e){return Ef(e),xf(e)}function xf(e){return Array.isArray(e)?N0(e):e&&e.bbox?N0(e.bbox):[sk(),ak()]}function Ef(e){e!=null&&(Array.isArray(e)?ac(e):e.bbox!=null&&ac(e.bbox))}function D1(e,n={}){Ef(n.bbox),e==null&&(e=1);const i=[];for(let l=0;l<e;l++)i.push(ue(xf(n.bbox)));return Jt(i)}function I1(e,n={}){Ef(n.bbox),e==null&&(e=1),(n.bbox===void 0||n.bbox===null)&&(n.bbox=[-180,-90,180,90]),(!Kn(n.num_vertices)||n.num_vertices===void 0)&&(n.num_vertices=10),(!Kn(n.max_radial_length)||n.max_radial_length===void 0)&&(n.max_radial_length=10);const i=Math.abs(n.bbox[0]-n.bbox[2]),l=Math.abs(n.bbox[1]-n.bbox[3]),r=Math.min(i/2,l/2);if(n.max_radial_length>r)throw new Error("max_radial_length is greater than the radius of the bbox");const c=[n.bbox[0]+n.max_radial_length,n.bbox[1]+n.max_radial_length,n.bbox[2]-n.max_radial_length,n.bbox[3]-n.max_radial_length],f=[];for(let p=0;p<e;p++){let y=[];const _=[...Array(n.num_vertices+1)].map(Math.random);_.forEach((E,S,M)=>{M[S]=S>0?E+M[S-1]:E}),_.forEach(E=>{E=E*2*Math.PI/_[_.length-1];const S=Math.random();y.push([S*(n.max_radial_length||10)*Math.sin(E),S*(n.max_radial_length||10)*Math.cos(E)])}),y[y.length-1]=y[0],y=y.reverse().map(rk(xf(c))),f.push(le([y]))}return Jt(f)}function R1(e,n={}){if(n=n||{},!Be(n))throw new Error("options is invalid");const i=n.bbox;Ef(i);let l=n.num_vertices,r=n.max_length,c=n.max_rotation;e==null&&(e=1),(!Kn(l)||l===void 0||l<2)&&(l=10),(!Kn(r)||r===void 0)&&(r=1e-4),(!Kn(c)||c===void 0)&&(c=Math.PI/8);const f=[];for(let p=0;p<e;p++){const _=[xf(i)];for(let E=0;E<l-1;E++){const M=(E===0?Math.random()*2*Math.PI:Math.tan((_[E][1]-_[E-1][1])/(_[E][0]-_[E-1][0])))+(Math.random()-.5)*c*2,O=Math.random()*r;_.push([_[E][0]+O*Math.cos(M),_[E][1]+O*Math.sin(M)])}f.push(Se(_))}return Jt(f)}function rk(e){return n=>[n[0]+e[0],n[1]+e[1]]}function P1(){return Math.random()-.5}function sk(){return P1()*360}function ak(){return P1()*180}function N0(e){return[Math.random()*(e[2]-e[0])+e[0],Math.random()*(e[3]-e[1])+e[1]]}const ok=Object.freeze(Object.defineProperty({__proto__:null,randomLineString:R1,randomPoint:D1,randomPolygon:I1,randomPosition:A1},Symbol.toStringTag,{value:"Module"}));function lk(e,n={}){var i,l;if(n=n||{},!Be(n))throw new Error("options is invalid");const r=(i=n.mutate)!=null?i:!1,c=(l=n.reverse)!=null?l:!1;if(!e)throw new Error("<geojson> is required");if(typeof c!="boolean")throw new Error("<reverse> must be a boolean");if(typeof r!="boolean")throw new Error("<mutate> must be a boolean");!r&&e.type!=="Point"&&e.type!=="MultiPoint"&&(e=oi(e));const f=[];switch(e.type){case"GeometryCollection":return xi(e,function(p){qh(p,c)}),e;case"FeatureCollection":return Ie(e,function(p){const y=qh(p,c);Ie(y,function(_){f.push(_)})}),Jt(f)}return qh(e,c)}function qh(e,n){switch(e.type==="Feature"?e.geometry.type:e.type){case"GeometryCollection":return xi(e,function(l){qh(l,n)}),e;case"LineString":return O0(ce(e),n),e;case"Polygon":return A0(ce(e),n),e;case"MultiLineString":return ce(e).forEach(function(l){O0(l,n)}),e;case"MultiPolygon":return ce(e).forEach(function(l){A0(l,n)}),e;case"Point":case"MultiPoint":return e}}function O0(e,n){Yh(e)===n&&e.reverse()}function A0(e,n){Yh(e[0])!==n&&e[0].reverse();for(let i=1;i<e.length;i++)Yh(e[i])===n&&e[i].reverse()}function uk(e,n){if(!e)throw new Error("fc is required");if(n==null)throw new Error("num is required");if(typeof n!="number")throw new Error("num must be a number");var i=Jt(ck(e.features,n));return i}function ck(e,n){for(var i=e.slice(0),l=e.length,r=l-n,c,f;l-- >r;)f=Math.floor((l+1)*Math.random()),c=i[f],i[f]=i[l],i[l]=c;return i.slice(r)}function hk(e,n,i,l,r={}){if(r=r||{},!Be(r))throw new Error("options is invalid");const c=r.properties;if(!e)throw new Error("center is required");if(i==null)throw new Error("bearing1 is required");if(l==null)throw new Error("bearing2 is required");if(!n)throw new Error("radius is required");if(typeof r!="object")throw new Error("options must be an object");if(D0(i)===D0(l))return gf(e,n,r);const f=ce(e),p=E1(e,n,i,l,r),y=[[f]];return vn(p,function(_){y[0].push(_)}),y[0].push(f),le(y,c)}function D0(e){let n=e%360;return n<0&&(n+=360),n}function z1(e,n,i){if(i=i||{},!Be(i))throw new Error("options is invalid");const l=i.origin||"centroid",r=i.mutate||!1;if(!e)throw new Error("geojson required");if(typeof n!="number"||n<=0)throw new Error("invalid factor");const c=Array.isArray(l)||typeof l=="object";return r!==!0&&(e=oi(e)),e.type==="FeatureCollection"&&!c?(Ie(e,function(f,p){e.features[p]=I0(f,n,l)}),e):I0(e,n,l)}function I0(e,n,i){const l=cr(e)==="Point",r=fk(e,i);return n===1||l||(vn(e,function(c){const f=zl(r,c),p=Xo(r,c),y=f*n,_=ce(vf(r,y,p));c[0]=_[0],c[1]=_[1],c.length===3&&(c[2]*=n)}),delete e.bbox),e}function fk(e,n){if(n==null&&(n="centroid"),Array.isArray(n)||typeof n=="object")return ze(n);const i=e.bbox?e.bbox:Ne(e,{recompute:!0}),l=i[0],r=i[1],c=i[2],f=i[3];switch(n){case"sw":case"southwest":case"westsouth":case"bottomleft":return ue([l,r]);case"se":case"southeast":case"eastsouth":case"bottomright":return ue([c,r]);case"nw":case"northwest":case"westnorth":case"topleft":return ue([l,f]);case"ne":case"northeast":case"eastnorth":case"topright":return ue([c,f]);case"center":return df(e);case void 0:case null:case"centroid":return _a(e);default:throw new Error("invalid origin")}}function R0(e){for(var n=e,i=[];n.parent;)i.unshift(n),n=n.parent;return i}function dk(){return new mk(function(e){return e.f})}var nf={search:function(e,n,i,l={}){var r;e.cleanDirty(),l=l||{};var c=nf.heuristics.manhattan,f=(r=l.closest)!=null?r:!1,p=dk(),y=n;for(n.h=c(n,i),p.push(n);p.size()>0;){var _=p.pop();if(_===i)return R0(_);_.closed=!0;for(var E=e.neighbors(_),S=0,M=E.length;S<M;++S){var O=E[S];if(!(O.closed||O.isWall())){var B=_.g+O.getCost(_),Q=O.visited;(!Q||B<O.g)&&(O.visited=!0,O.parent=_,O.h=O.h||c(O,i),O.g=B,O.f=O.g+O.h,e.markDirty(O),f&&(O.h<y.h||O.h===y.h&&O.g<y.g)&&(y=O),Q?p.rescoreElement(O):p.push(O))}}}return f?R0(y):[]},heuristics:{manhattan:function(e,n){var i=Math.abs(n.x-e.x),l=Math.abs(n.y-e.y);return i+l},diagonal:function(e,n){var i=1,l=Math.sqrt(2),r=Math.abs(n.x-e.x),c=Math.abs(n.y-e.y);return i*(r+c)+(l-2*i)*Math.min(r,c)}},cleanNode:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=void 0}},gk=class{constructor(e,n={}){this.nodes=[],this.grid=[],this.dirtyNodes=[],this.diagonal=!!n.diagonal;for(var i=0;i<e.length;i++){this.grid[i]=[];for(var l=0,r=e[i];l<r.length;l++){var c=new pk(i,l,r[l]);this.grid[i][l]=c,this.nodes.push(c)}}this.init()}init(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)nf.cleanNode(this.nodes[e])}cleanDirty(){for(var e=0;e<this.dirtyNodes.length;e++)nf.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]}markDirty(e){this.dirtyNodes.push(e)}neighbors(e){var n=[],i=e.x,l=e.y,r=this.grid;return r[i-1]&&r[i-1][l]&&n.push(r[i-1][l]),r[i+1]&&r[i+1][l]&&n.push(r[i+1][l]),r[i]&&r[i][l-1]&&n.push(r[i][l-1]),r[i]&&r[i][l+1]&&n.push(r[i][l+1]),this.diagonal&&(r[i-1]&&r[i-1][l-1]&&n.push(r[i-1][l-1]),r[i+1]&&r[i+1][l-1]&&n.push(r[i+1][l-1]),r[i-1]&&r[i-1][l+1]&&n.push(r[i-1][l+1]),r[i+1]&&r[i+1][l+1]&&n.push(r[i+1][l+1])),n}toString(){for(var e=[],n=this.grid,i,l,r,c,f=0,p=n.length;f<p;f++){for(i=[],l=n[f],r=0,c=l.length;r<c;r++)i.push(l[r].weight);e.push(i.join(" "))}return e.join(`
`)}},pk=class{constructor(e,n,i){this.visited=!1,this.h=0,this.g=0,this.f=0,this.closed=!1,this.x=e,this.y=n,this.weight=i}toString(){return"["+this.x+" "+this.y+"]"}getCost(e){return e&&e.x!==this.x&&e.y!==this.y?this.weight*1.41421:this.weight}isWall(){return this.weight===0}},mk=class{constructor(e){this.content=[],this.scoreFunction=e}push(e){this.content.push(e),this.sinkDown(this.content.length-1)}pop(){var e=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),e}remove(e){var n=this.content.indexOf(e),i=this.content.pop();n!==this.content.length-1&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(e)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(e){this.sinkDown(this.content.indexOf(e))}sinkDown(e){for(var n=this.content[e];e>0;){var i=(e+1>>1)-1,l=this.content[i];if(this.scoreFunction(n)<this.scoreFunction(l))this.content[i]=n,this.content[e]=l,e=i;else break}}bubbleUp(e){for(var n=this.content.length,i=this.content[e],l=this.scoreFunction(i);;){var r=e+1<<1,c=r-1,f=null,p;if(c<n){var y=this.content[c];p=this.scoreFunction(y),p<l&&(f=c)}if(r<n){var _=this.content[r],E=this.scoreFunction(_);E<(f===null?l:p)&&(f=r)}if(f!==null)this.content[e]=this.content[f],this.content[f]=i,e=f;else break}}};function vk(e,n,i={}){if(i=i||{},!Be(i))throw new Error("options is invalid");let l=i.obstacles||Jt([]),r=i.resolution||100;if(!e)throw new Error("start is required");if(!n)throw new Error("end is required");if(!Kn(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");const c=ze(e),f=ze(n);if(e=ue(c),n=ue(f),l.type==="FeatureCollection"){if(l.features.length===0)return Se([c,f])}else if(l.type==="Feature"&&l.geometry.type==="Polygon")l=Jt([l]);else if(l.type==="Polygon")l=Jt([Sn(cn(l))]);else throw new Error("invalid obstacles");const p=l;p.features.push(e),p.features.push(n);const y=Ne(z1(yc(Ne(p)),1.15)),[_,E,S,M]=y;p.features.pop(),p.features.pop();const O=fn([_,E],[S,E],i)/r,B=(S-_)/O,Q=fn([_,E],[_,M],i)/r,st=(M-E)/Q,rt=O%1*B/2,j=Q%1*st/2,Y=[],V=[];let et,tt,W=1/0,k=1/0,A=M-j,q=0;for(;A>=E;){const D=[],z=[];let P=_+rt,$=0;for(;P<=S;){const J=ue([P,A]),U=yk(J,l);D.push(U?0:1),z.push(P+"|"+A);const K=fn(J,e);!U&&K<W&&(W=K,et={x:$,y:q});const ct=fn(J,n);!U&&ct<k&&(k=ct,tt={x:$,y:q}),P+=B,$++}V.push(D),Y.push(z),A-=st,q++}const X=new gk(V,{diagonal:!0}),Z=X.grid[et.y][et.x],nt=X.grid[tt.y][tt.x],at=nf.search(X,Z,nt),it=[c];return at.forEach(function(D){const z=Y[D.x][D.y].split("|");it.push([+z[0],+z[1]])}),it.push(f),Vo(Se(it))}function yk(e,n){for(let i=0;i<n.features.length;i++)if(re(e,n.features[i]))return!0;return!1}function _k(e,n){var i=e[0]-n[0],l=e[1]-n[1];return i*i+l*l}function xk(e,n,i){var l=n[0],r=n[1],c=i[0]-l,f=i[1]-r;if(c!==0||f!==0){var p=((e[0]-l)*c+(e[1]-r)*f)/(c*c+f*f);p>1?(l=i[0],r=i[1]):p>0&&(l+=c*p,r+=f*p)}return c=e[0]-l,f=e[1]-r,c*c+f*f}function Ek(e,n){for(var i=e[0],l=[i],r,c=1,f=e.length;c<f;c++)r=e[c],_k(r,i)>n&&(l.push(r),i=r);return i!==r&&l.push(r),l}function sp(e,n,i,l,r){for(var c=l,f,p=n+1;p<i;p++){var y=xk(e[p],e[n],e[i]);y>c&&(f=p,c=y)}c>l&&(f-n>1&&sp(e,n,f,l,r),r.push(e[f]),i-f>1&&sp(e,f,i,l,r))}function wk(e,n){var i=e.length-1,l=[e[0]];return sp(e,0,i,n,l),l.push(e[i]),l}function rf(e,n,i){if(e.length<=2)return e;var l=n!==void 0?n*n:1;return e=i?e:Ek(e,l),e=wk(e,l),e}function Sk(e,n={}){var i,l,r;if(n=n??{},!Be(n))throw new Error("options is invalid");const c=(i=n.tolerance)!=null?i:1,f=(l=n.highQuality)!=null?l:!1,p=(r=n.mutate)!=null?r:!1;if(!e)throw new Error("geojson is required");if(c&&c<0)throw new Error("invalid tolerance");return p!==!0&&(e=oi(e)),xi(e,function(y){bk(y,c,f)}),e}function bk(e,n,i){const l=e.type;if(l==="Point"||l==="MultiPoint")return e;if(Vo(e,{mutate:!0}),l!=="GeometryCollection")switch(l){case"LineString":e.coordinates=rf(e.coordinates,n,i);break;case"MultiLineString":e.coordinates=e.coordinates.map(r=>rf(r,n,i));break;case"Polygon":e.coordinates=P0(e.coordinates,n,i);break;case"MultiPolygon":e.coordinates=e.coordinates.map(r=>P0(r,n,i))}return e}function P0(e,n,i){return e.map(function(l){if(l.length<4)throw new Error("invalid polygon");let r=n,c=rf(l,r,i);for(;!z0(c)&&r>=Number.EPSILON;)r-=r*.01,c=rf(l,r,i);return z0(c)?((c[c.length-1][0]!==c[0][0]||c[c.length-1][1]!==c[0][1])&&c.push(c[0]),c):l})}function z0(e){return e.length<3?!1:!(e.length===3&&e[2][0]===e[0][0]&&e[2][1]===e[0][1])}function Lk(e){var n=e[0],i=e[1],l=e[2],r=e[3],c=fn(e.slice(0,2),[l,i]),f=fn(e.slice(0,2),[n,r]);if(c>=f){var p=(i+r)/2;return[n,p-(l-n)/2,l,p+(l-n)/2]}else{var y=(n+l)/2;return[y-(r-i)/2,i,y+(r-i)/2,r]}}function Tk(e,n){var i;if(n=n||{},!Be(n))throw new Error("options is invalid");const l=n.steps||64,r=n.weight,c=n.properties||{};if(!Kn(l))throw new Error("steps must be a number");if(!Be(c))throw new Error("properties must be a number");const f=lc(e).length,p=Lp(e,{weight:r});let y=0,_=0,E=0;Ie(e,function(k){var A;const q=r&&((A=k.properties)==null?void 0:A[r])||1,X=B0(ce(k),ce(p));y+=Math.pow(X.x,2)*q,_+=Math.pow(X.y,2)*q,E+=X.x*X.y*q});const S=y-_,M=Math.sqrt(Math.pow(S,2)+4*Math.pow(E,2)),O=2*E,B=Math.atan((S+M)/O),Q=B*180/Math.PI;let st=0,rt=0,j=0;Ie(e,function(k){var A;const q=r&&((A=k.properties)==null?void 0:A[r])||1,X=B0(ce(k),ce(p));st+=Math.pow(X.x*Math.cos(B)-X.y*Math.sin(B),2)*q,rt+=Math.pow(X.x*Math.sin(B)+X.y*Math.cos(B),2)*q,j+=q});const Y=Math.sqrt(2*st/j),V=Math.sqrt(2*rt/j),et=g1(p,Y,V,{units:"degrees",angle:Q,steps:l,properties:c}),tt=b1(e,Jt([et])),W={meanCenterCoordinates:ce(p),semiMajorAxis:Y,semiMinorAxis:V,numberOfFeatures:f,angle:Q,percentageWithinEllipse:100*lc(tt).length/f};return et.properties=(i=et.properties)!=null?i:{},et.properties.standardDeviationalEllipse=W,et}function B0(e,n){return{x:e[0]-n[0],y:e[1]-n[1]}}function Ck(e,n,i,l){return e=oi(e),n=oi(n),Ie(e,function(r){r.properties||(r.properties={}),Ie(n,function(c){r.properties&&c.properties&&r.properties[l]===void 0&&re(r,c)&&(r.properties[l]=c.properties[i])})}),e}var Dh={exports:{}},j0;function kk(){if(j0)return Dh.exports;j0=1,Dh.exports=e,Dh.exports.default=e;function e(D,z,P){P=P||2;var $=z&&z.length,J=$?z[0]*P:D.length,U=n(D,0,J,P,!0),K=[];if(!U||U.next===U.prev)return K;var ct,gt,pt,yt,Tt,ht,Dt;if($&&(U=y(D,z,U,P)),D.length>80*P){ct=pt=D[0],gt=yt=D[1];for(var It=P;It<J;It+=P)Tt=D[It],ht=D[It+1],Tt<ct&&(ct=Tt),ht<gt&&(gt=ht),Tt>pt&&(pt=Tt),ht>yt&&(yt=ht);Dt=Math.max(pt-ct,yt-gt),Dt=Dt!==0?32767/Dt:0}return l(U,K,P,ct,gt,Dt,0),K}function n(D,z,P,$,J){var U,K;if(J===it(D,z,P,$)>0)for(U=z;U<P;U+=$)K=Z(U,D[U],D[U+1],K);else for(U=P-$;U>=z;U-=$)K=Z(U,D[U],D[U+1],K);return K&&V(K,K.next)&&(nt(K),K=K.next),K}function i(D,z){if(!D)return D;z||(z=D);var P=D,$;do if($=!1,!P.steiner&&(V(P,P.next)||Y(P.prev,P,P.next)===0)){if(nt(P),P=z=P.prev,P===P.next)break;$=!0}else P=P.next;while($||P!==z);return z}function l(D,z,P,$,J,U,K){if(D){!K&&U&&O(D,$,J,U);for(var ct=D,gt,pt;D.prev!==D.next;){if(gt=D.prev,pt=D.next,U?c(D,$,J,U):r(D)){z.push(gt.i/P|0),z.push(D.i/P|0),z.push(pt.i/P|0),nt(D),D=pt.next,ct=pt.next;continue}if(D=pt,D===ct){K?K===1?(D=f(i(D),z,P),l(D,z,P,$,J,U,2)):K===2&&p(D,z,P,$,J,U):l(i(D),z,P,$,J,U,1);break}}}}function r(D){var z=D.prev,P=D,$=D.next;if(Y(z,P,$)>=0)return!1;for(var J=z.x,U=P.x,K=$.x,ct=z.y,gt=P.y,pt=$.y,yt=J<U?J<K?J:K:U<K?U:K,Tt=ct<gt?ct<pt?ct:pt:gt<pt?gt:pt,ht=J>U?J>K?J:K:U>K?U:K,Dt=ct>gt?ct>pt?ct:pt:gt>pt?gt:pt,It=$.next;It!==z;){if(It.x>=yt&&It.x<=ht&&It.y>=Tt&&It.y<=Dt&&rt(J,ct,U,gt,K,pt,It.x,It.y)&&Y(It.prev,It,It.next)>=0)return!1;It=It.next}return!0}function c(D,z,P,$){var J=D.prev,U=D,K=D.next;if(Y(J,U,K)>=0)return!1;for(var ct=J.x,gt=U.x,pt=K.x,yt=J.y,Tt=U.y,ht=K.y,Dt=ct<gt?ct<pt?ct:pt:gt<pt?gt:pt,It=yt<Tt?yt<ht?yt:ht:Tt<ht?Tt:ht,Mt=ct>gt?ct>pt?ct:pt:gt>pt?gt:pt,ft=yt>Tt?yt>ht?yt:ht:Tt>ht?Tt:ht,Xt=Q(Dt,It,z,P,$),Zt=Q(Mt,ft,z,P,$),Bt=D.prevZ,Ut=D.nextZ;Bt&&Bt.z>=Xt&&Ut&&Ut.z<=Zt;){if(Bt.x>=Dt&&Bt.x<=Mt&&Bt.y>=It&&Bt.y<=ft&&Bt!==J&&Bt!==K&&rt(ct,yt,gt,Tt,pt,ht,Bt.x,Bt.y)&&Y(Bt.prev,Bt,Bt.next)>=0||(Bt=Bt.prevZ,Ut.x>=Dt&&Ut.x<=Mt&&Ut.y>=It&&Ut.y<=ft&&Ut!==J&&Ut!==K&&rt(ct,yt,gt,Tt,pt,ht,Ut.x,Ut.y)&&Y(Ut.prev,Ut,Ut.next)>=0))return!1;Ut=Ut.nextZ}for(;Bt&&Bt.z>=Xt;){if(Bt.x>=Dt&&Bt.x<=Mt&&Bt.y>=It&&Bt.y<=ft&&Bt!==J&&Bt!==K&&rt(ct,yt,gt,Tt,pt,ht,Bt.x,Bt.y)&&Y(Bt.prev,Bt,Bt.next)>=0)return!1;Bt=Bt.prevZ}for(;Ut&&Ut.z<=Zt;){if(Ut.x>=Dt&&Ut.x<=Mt&&Ut.y>=It&&Ut.y<=ft&&Ut!==J&&Ut!==K&&rt(ct,yt,gt,Tt,pt,ht,Ut.x,Ut.y)&&Y(Ut.prev,Ut,Ut.next)>=0)return!1;Ut=Ut.nextZ}return!0}function f(D,z,P){var $=D;do{var J=$.prev,U=$.next.next;!V(J,U)&&et(J,$,$.next,U)&&A(J,U)&&A(U,J)&&(z.push(J.i/P|0),z.push($.i/P|0),z.push(U.i/P|0),nt($),nt($.next),$=D=U),$=$.next}while($!==D);return i($)}function p(D,z,P,$,J,U){var K=D;do{for(var ct=K.next.next;ct!==K.prev;){if(K.i!==ct.i&&j(K,ct)){var gt=X(K,ct);K=i(K,K.next),gt=i(gt,gt.next),l(K,z,P,$,J,U,0),l(gt,z,P,$,J,U,0);return}ct=ct.next}K=K.next}while(K!==D)}function y(D,z,P,$){var J=[],U,K,ct,gt,pt;for(U=0,K=z.length;U<K;U++)ct=z[U]*$,gt=U<K-1?z[U+1]*$:D.length,pt=n(D,ct,gt,$,!1),pt===pt.next&&(pt.steiner=!0),J.push(st(pt));for(J.sort(_),U=0;U<J.length;U++)P=E(J[U],P);return P}function _(D,z){return D.x-z.x}function E(D,z){var P=S(D,z);if(!P)return z;var $=X(P,D);return i($,$.next),i(P,P.next)}function S(D,z){var P=z,$=D.x,J=D.y,U=-1/0,K;do{if(J<=P.y&&J>=P.next.y&&P.next.y!==P.y){var ct=P.x+(J-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(ct<=$&&ct>U&&(U=ct,K=P.x<P.next.x?P:P.next,ct===$))return K}P=P.next}while(P!==z);if(!K)return null;var gt=K,pt=K.x,yt=K.y,Tt=1/0,ht;P=K;do $>=P.x&&P.x>=pt&&$!==P.x&&rt(J<yt?$:U,J,pt,yt,J<yt?U:$,J,P.x,P.y)&&(ht=Math.abs(J-P.y)/($-P.x),A(P,D)&&(ht<Tt||ht===Tt&&(P.x>K.x||P.x===K.x&&M(K,P)))&&(K=P,Tt=ht)),P=P.next;while(P!==gt);return K}function M(D,z){return Y(D.prev,D,z.prev)<0&&Y(z.next,D,D.next)<0}function O(D,z,P,$){var J=D;do J.z===0&&(J.z=Q(J.x,J.y,z,P,$)),J.prevZ=J.prev,J.nextZ=J.next,J=J.next;while(J!==D);J.prevZ.nextZ=null,J.prevZ=null,B(J)}function B(D){var z,P,$,J,U,K,ct,gt,pt=1;do{for(P=D,D=null,U=null,K=0;P;){for(K++,$=P,ct=0,z=0;z<pt&&(ct++,$=$.nextZ,!!$);z++);for(gt=pt;ct>0||gt>0&&$;)ct!==0&&(gt===0||!$||P.z<=$.z)?(J=P,P=P.nextZ,ct--):(J=$,$=$.nextZ,gt--),U?U.nextZ=J:D=J,J.prevZ=U,U=J;P=$}U.nextZ=null,pt*=2}while(K>1);return D}function Q(D,z,P,$,J){return D=(D-P)*J|0,z=(z-$)*J|0,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,z=(z|z<<8)&16711935,z=(z|z<<4)&252645135,z=(z|z<<2)&858993459,z=(z|z<<1)&1431655765,D|z<<1}function st(D){var z=D,P=D;do(z.x<P.x||z.x===P.x&&z.y<P.y)&&(P=z),z=z.next;while(z!==D);return P}function rt(D,z,P,$,J,U,K,ct){return(J-K)*(z-ct)>=(D-K)*(U-ct)&&(D-K)*($-ct)>=(P-K)*(z-ct)&&(P-K)*(U-ct)>=(J-K)*($-ct)}function j(D,z){return D.next.i!==z.i&&D.prev.i!==z.i&&!k(D,z)&&(A(D,z)&&A(z,D)&&q(D,z)&&(Y(D.prev,D,z.prev)||Y(D,z.prev,z))||V(D,z)&&Y(D.prev,D,D.next)>0&&Y(z.prev,z,z.next)>0)}function Y(D,z,P){return(z.y-D.y)*(P.x-z.x)-(z.x-D.x)*(P.y-z.y)}function V(D,z){return D.x===z.x&&D.y===z.y}function et(D,z,P,$){var J=W(Y(D,z,P)),U=W(Y(D,z,$)),K=W(Y(P,$,D)),ct=W(Y(P,$,z));return!!(J!==U&&K!==ct||J===0&&tt(D,P,z)||U===0&&tt(D,$,z)||K===0&&tt(P,D,$)||ct===0&&tt(P,z,$))}function tt(D,z,P){return z.x<=Math.max(D.x,P.x)&&z.x>=Math.min(D.x,P.x)&&z.y<=Math.max(D.y,P.y)&&z.y>=Math.min(D.y,P.y)}function W(D){return D>0?1:D<0?-1:0}function k(D,z){var P=D;do{if(P.i!==D.i&&P.next.i!==D.i&&P.i!==z.i&&P.next.i!==z.i&&et(P,P.next,D,z))return!0;P=P.next}while(P!==D);return!1}function A(D,z){return Y(D.prev,D,D.next)<0?Y(D,z,D.next)>=0&&Y(D,D.prev,z)>=0:Y(D,z,D.prev)<0||Y(D,D.next,z)<0}function q(D,z){var P=D,$=!1,J=(D.x+z.x)/2,U=(D.y+z.y)/2;do P.y>U!=P.next.y>U&&P.next.y!==P.y&&J<(P.next.x-P.x)*(U-P.y)/(P.next.y-P.y)+P.x&&($=!$),P=P.next;while(P!==D);return $}function X(D,z){var P=new at(D.i,D.x,D.y),$=new at(z.i,z.x,z.y),J=D.next,U=z.prev;return D.next=z,z.prev=D,P.next=J,J.prev=P,$.next=P,P.prev=$,U.next=$,$.prev=U,$}function Z(D,z,P,$){var J=new at(D,z,P);return $?(J.next=$.next,J.prev=$,$.next.prev=J,$.next=J):(J.prev=J,J.next=J),J}function nt(D){D.next.prev=D.prev,D.prev.next=D.next,D.prevZ&&(D.prevZ.nextZ=D.nextZ),D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function at(D,z,P){this.i=D,this.x=z,this.y=P,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}e.deviation=function(D,z,P,$){var J=z&&z.length,U=J?z[0]*P:D.length,K=Math.abs(it(D,0,U,P));if(J)for(var ct=0,gt=z.length;ct<gt;ct++){var pt=z[ct]*P,yt=ct<gt-1?z[ct+1]*P:D.length;K-=Math.abs(it(D,pt,yt,P))}var Tt=0;for(ct=0;ct<$.length;ct+=3){var ht=$[ct]*P,Dt=$[ct+1]*P,It=$[ct+2]*P;Tt+=Math.abs((D[ht]-D[It])*(D[Dt+1]-D[ht+1])-(D[ht]-D[Dt])*(D[It+1]-D[ht+1]))}return K===0&&Tt===0?0:Math.abs((Tt-K)/K)};function it(D,z,P,$){for(var J=0,U=z,K=P-$;U<P;U+=$)J+=(D[K]-D[U])*(D[U+1]+D[K+1]),K=U;return J}return e.flatten=function(D){for(var z=D[0][0].length,P={vertices:[],holes:[],dimensions:z},$=0,J=0;J<D.length;J++){for(var U=0;U<D[J].length;U++)for(var K=0;K<z;K++)P.vertices.push(D[J][U][K]);J>0&&($+=D[J-1].length,P.holes.push($))}return P},Dh.exports}var Mk=kk();const Nk=oo(Mk);function Ok(e){if(!e.geometry||e.geometry.type!=="Polygon"&&e.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");const n={type:"FeatureCollection",features:[]};return e.geometry.type==="Polygon"?n.features=U0(e.geometry.coordinates):e.geometry.coordinates.forEach(function(i){n.features=n.features.concat(U0(i))}),n}function U0(e){const n=Ak(e),i=3,l=Nk(n.vertices,n.holes,i),r=[],c=[];l.forEach(function(p,y){const _=l[y];n.vertices[_*i+2]!==void 0?c.push([n.vertices[_*i],n.vertices[_*i+1],n.vertices[_*i+2]]):c.push([n.vertices[_*i],n.vertices[_*i+1]])});for(var f=0;f<c.length;f+=3){const p=c.slice(f,f+3);p.push(c[f]),r.push(le([p]))}return r}function Ak(e){const i={vertices:[],holes:[],dimensions:3};let l=0;for(let r=0;r<e.length;r++){for(let c=0;c<e[r].length;c++)for(let f=0;f<3;f++)i.vertices.push(e[r][c][f]);r>0&&(l+=e[r-1].length,i.holes.push(l))}return i}function Dk(e,n,i,l){if(l=l||{},!Be(l))throw new Error("options is invalid");var r=l.units,c=l.zTranslation,f=l.mutate;if(!e)throw new Error("geojson is required");if(n==null||isNaN(n))throw new Error("distance is required");if(c&&typeof c!="number"&&isNaN(c))throw new Error("zTranslation is not a number");if(c=c!==void 0?c:0,n===0&&c===0)return e;if(i==null||isNaN(i))throw new Error("direction is required");return n<0&&(n=-n,i=i+180),(f===!1||f===void 0)&&(e=oi(e)),vn(e,function(p){var y=ce(vf(p,n,i,{units:r}));p[0]=y[0],p[1]=y[1],c&&p.length===3&&(p[2]+=c)}),e}function Ik(e,n={}){const i=[];if(xi(e,r=>{i.push(r.coordinates)}),i.length<2)throw new Error("Must have at least 2 geometries");const l=ao(i[0],...i.slice(1));return l.length===0?null:l.length===1?le(l[0],n.properties):ur(l,n.properties)}function Rk(e,n){if(e.geometry.type!=="Polygon")throw new Error("The input feature must be a Polygon");for(var i=e.geometry.coordinates,l=[],r={},c=[],f=0;f<i.length;f++)for(var p=0;p<i[f].length-1;p++)c.push(O(f,p));var y=new hf;y.load(c);for(var _=0;_<i.length;_++)for(var E=0;E<i[_].length-1;E++){var S=y.search(O(_,E));S.forEach(function(B){var Q=B.ring,st=B.edge;M(_,E,Q,st)})}return l;function M(B,Q,st,rt){var j=i[B][Q],Y=i[B][Q+1],V=i[st][rt],et=i[st][rt+1],tt=Pk(j,Y,V,et);if(tt!==null){var W,k;if(Y[0]!==j[0]?W=(tt[0]-j[0])/(Y[0]-j[0]):W=(tt[1]-j[1])/(Y[1]-j[1]),et[0]!==V[0]?k=(tt[0]-V[0])/(et[0]-V[0]):k=(tt[1]-V[1])/(et[1]-V[1]),!(W>=1||W<=0||k>=1||k<=0)){var A=tt,q=!r[A.toString()];q&&(r[A.toString()]=!0),n&&l.push(n(tt,B,Q,j,Y,W,st,rt,V,et,k,q))}}}function O(B,Q){var st=i[B][Q],rt=i[B][Q+1],j,Y,V,et;return st[0]<rt[0]?(j=st[0],Y=rt[0]):(j=rt[0],Y=st[0]),st[1]<rt[1]?(V=st[1],et=rt[1]):(V=rt[1],et=st[1]),{minX:j,minY:V,maxX:Y,maxY:et,ring:B,edge:Q}}}function Pk(e,n,i,l){if(ec(e,i)||ec(e,l)||ec(n,i)||ec(l,i))return null;var r=e[0],c=e[1],f=n[0],p=n[1],y=i[0],_=i[1],E=l[0],S=l[1],M=(r-f)*(_-S)-(c-p)*(y-E);if(M===0)return null;var O=((r*p-c*f)*(y-E)-(r-f)*(y*S-_*E))/M,B=((r*p-c*f)*(_-S)-(c-p)*(y*S-_*E))/M;return[O,B]}function ec(e,n){if(!e||!n||e.length!==n.length)return!1;for(var i=0,l=e.length;i<l;i++)if(e[i]instanceof Array&&n[i]instanceof Array){if(!ec(e[i],n[i]))return!1}else if(e[i]!==n[i])return!1;return!0}function zk(e){if(e.type!="Feature")throw new Error("The input must a geojson object of type Feature");if(e.geometry===void 0||e.geometry==null)throw new Error("The input must a geojson object with a non-empty geometry");if(e.geometry.type!="Polygon")throw new Error("The input must be a geojson Polygon");for(var n=e.geometry.coordinates.length,i=[],rt=0;rt<n;rt++){var l=e.geometry.coordinates[rt];nc(l[0],l[l.length-1])||l.push(l[0]);for(var r=0;r<l.length-1;r++)i.push(l[r])}if(!jk(i))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var c=i.length,f=Rk(e,function(ct,gt,pt,yt,Tt,ht,Dt,It,Mt,ft,Xt,Zt){return[ct,gt,pt,yt,Tt,ht,Dt,It,Mt,ft,Xt,Zt]}),p=f.length;if(p==0){for(var tt=[],rt=0;rt<n;rt++)tt.push(le([e.geometry.coordinates[rt]],{parent:-1,winding:Bk(e.geometry.coordinates[rt])}));let ct=Jt(tt);return $(ct),J(ct),ct}for(var y=[],_=[],rt=0;rt<n;rt++){y.push([]);for(var r=0;r<e.geometry.coordinates[rt].length-1;r++)y[rt].push([new F0(e.geometry.coordinates[rt][Rl(r+1,e.geometry.coordinates[rt].length-1)],1,[rt,r],[rt,Rl(r+1,e.geometry.coordinates[rt].length-1)],void 0)]),_.push(new q0(e.geometry.coordinates[rt][r],[rt,Rl(r-1,e.geometry.coordinates[rt].length-1)],[rt,r],void 0,void 0,!1,!0))}for(var rt=0;rt<p;rt++)y[f[rt][1]][f[rt][2]].push(new F0(f[rt][0],f[rt][5],[f[rt][1],f[rt][2]],[f[rt][6],f[rt][7]],void 0)),f[rt][11]&&_.push(new q0(f[rt][0],[f[rt][1],f[rt][2]],[f[rt][6],f[rt][7]],void 0,void 0,!0,!0));for(var E=_.length,rt=0;rt<y.length;rt++)for(var r=0;r<y[rt].length;r++)y[rt][r].sort(function(gt,pt){return gt.param<pt.param?-1:1});for(var S=[],rt=0;rt<E;rt++)S.push({minX:_[rt].coord[0],minY:_[rt].coord[1],maxX:_[rt].coord[0],maxY:_[rt].coord[1],index:rt});var M=new hf;M.load(S);for(var rt=0;rt<y.length;rt++)for(var r=0;r<y[rt].length;r++)for(var O=0;O<y[rt][r].length;O++){let gt;O==y[rt][r].length-1?gt=y[rt][Rl(r+1,e.geometry.coordinates[rt].length-1)][0].coord:gt=y[rt][r][O+1].coord;var B=M.search({minX:gt[0],minY:gt[1],maxX:gt[0],maxY:gt[1]})[0];y[rt][r][O].nxtIsectAlongEdgeIn=B.index}for(var rt=0;rt<y.length;rt++)for(var r=0;r<y[rt].length;r++)for(var O=0;O<y[rt][r].length;O++){let pt=y[rt][r][O].coord;var B=M.search({minX:pt[0],minY:pt[1],maxX:pt[0],maxY:pt[1]})[0],Q=B.index;Q<c?_[Q].nxtIsectAlongRingAndEdge2=y[rt][r][O].nxtIsectAlongEdgeIn:nc(_[Q].ringAndEdge1,y[rt][r][O].ringAndEdgeIn)?_[Q].nxtIsectAlongRingAndEdge1=y[rt][r][O].nxtIsectAlongEdgeIn:_[Q].nxtIsectAlongRingAndEdge2=y[rt][r][O].nxtIsectAlongEdgeIn}for(var st=[],rt=0,r=0;r<n;r++){for(var j=rt,O=0;O<e.geometry.coordinates[r].length-1;O++)_[rt].coord[0]<_[j].coord[0]&&(j=rt),rt++;for(var Y=_[j].nxtIsectAlongRingAndEdge2,O=0;O<_.length;O++)if(_[O].nxtIsectAlongRingAndEdge1==j||_[O].nxtIsectAlongRingAndEdge2==j){var V=O;break}var et=Gh([_[V].coord,_[j].coord,_[Y].coord],!0)?1:-1;st.push({isect:j,parent:-1,winding:et})}st.sort(function(K,ct){return _[K.isect].coord>_[ct.isect].coord?-1:1});for(var tt=[];st.length>0;){var W=st.pop(),k=W.isect,A=W.parent,q=W.winding,X=tt.length,Z=[_[k].coord],nt=k;if(_[k].ringAndEdge1Walkable)var at=_[k].ringAndEdge1,it=_[k].nxtIsectAlongRingAndEdge1;else var at=_[k].ringAndEdge2,it=_[k].nxtIsectAlongRingAndEdge2;for(;!nc(_[k].coord,_[it].coord);){Z.push(_[it].coord);for(var D=void 0,rt=0;rt<st.length;rt++)if(st[rt].isect==it){D=rt;break}if(D!=null&&st.splice(D,1),nc(at,_[it].ringAndEdge1)){if(at=_[it].ringAndEdge2,_[it].ringAndEdge2Walkable=!1,_[it].ringAndEdge1Walkable){var z={isect:it};Gh([_[nt].coord,_[it].coord,_[_[it].nxtIsectAlongRingAndEdge2].coord],q==1)?(z.parent=A,z.winding=-q):(z.parent=X,z.winding=q),st.push(z)}nt=it,it=_[it].nxtIsectAlongRingAndEdge2}else{if(at=_[it].ringAndEdge1,_[it].ringAndEdge1Walkable=!1,_[it].ringAndEdge2Walkable){var z={isect:it};Gh([_[nt].coord,_[it].coord,_[_[it].nxtIsectAlongRingAndEdge1].coord],q==1)?(z.parent=A,z.winding=-q):(z.parent=X,z.winding=q),st.push(z)}nt=it,it=_[it].nxtIsectAlongRingAndEdge1}}Z.push(_[it].coord),tt.push(le([Z],{index:X,parent:A,winding:q,netWinding:void 0}))}let P=Jt(tt);$(P),J(P);function $(K){for(var ct=[],gt=0;gt<K.features.length;gt++)K.features[gt].properties.parent==-1&&ct.push(gt);if(ct.length>1)for(var gt=0;gt<ct.length;gt++){for(var pt=-1,yt=1/0,Tt=0;Tt<K.features.length;Tt++)ct[gt]!=Tt&&re(K.features[ct[gt]].geometry.coordinates[0][0],K.features[Tt],{ignoreBoundary:!0})&&vc(K.features[Tt])<yt&&(pt=Tt);K.features[ct[gt]].properties.parent=pt}}function J(K){for(var ct=0;ct<K.features.length;ct++)if(K.features[ct].properties.parent==-1){var gt=K.features[ct].properties.winding;K.features[ct].properties.netWinding=gt,U(K,ct,gt)}}function U(K,ct,gt){for(var pt=0;pt<K.features.length;pt++)if(K.features[pt].properties.parent==ct){var yt=gt+K.features[pt].properties.winding;K.features[pt].properties.netWinding=yt,U(K,pt,yt)}}return P}var F0=class{constructor(e,n,i,l,r){this.coord=e,this.param=n,this.ringAndEdgeIn=i,this.ringAndEdgeOut=l,this.nxtIsectAlongEdgeIn=r}},q0=class{constructor(e,n,i,l,r,c,f){this.coord=e,this.ringAndEdge1=n,this.ringAndEdge2=i,this.nxtIsectAlongRingAndEdge1=l,this.nxtIsectAlongRingAndEdge2=r,this.ringAndEdge1Walkable=c,this.ringAndEdge2Walkable=f}};function Gh(e,n){if(typeof n>"u"&&(n=!0),e.length!=3)throw new Error("This function requires an array of three points [x,y]");var i=(e[1][0]-e[0][0])*(e[2][1]-e[0][1])-(e[1][1]-e[0][1])*(e[2][0]-e[0][0]);return i>=0==n}function Bk(e){for(var n=0,i=0;i<e.length-1;i++)e[i][0]<e[n][0]&&(n=i);if(Gh([e[Rl(n-1,e.length-1)],e[n],e[Rl(n+1,e.length-1)]],!0))var l=1;else var l=-1;return l}function nc(e,n){if(!e||!n||e.length!=n.length)return!1;for(var i=0,l=e.length;i<l;i++)if(e[i]instanceof Array&&n[i]instanceof Array){if(!nc(e[i],n[i]))return!1}else if(e[i]!=n[i])return!1;return!0}function Rl(e,n){return(e%n+n)%n}function jk(e){for(var n={},i=1,l=0,r=e.length;l<r;++l){if(Object.prototype.hasOwnProperty.call(n,e[l].toString())){i=0;break}n[e[l].toString()]=1}return i}function Uk(e){var n=[];return $n(e,function(i){i.geometry.type==="Polygon"&&Ie(zk(i),function(l){n.push(le(l.geometry.coordinates,i.properties))})}),Jt(n)}function G0(e){return function(){return e}}function Fk(e){return e[0]}function qk(e){return e[1]}function sf(){this._=null}function wf(e){e.U=e.C=e.L=e.R=e.P=e.N=null}sf.prototype={constructor:sf,insert:function(e,n){var i,l,r;if(e){if(n.P=e,n.N=e.N,e.N&&(e.N.P=n),e.N=n,e.R){for(e=e.R;e.L;)e=e.L;e.L=n}else e.R=n;i=e}else this._?(e=H0(this._),n.P=null,n.N=e,e.P=e.L=n,i=e):(n.P=n.N=null,this._=n,i=null);for(n.L=n.R=null,n.U=i,n.C=!0,e=n;i&&i.C;)l=i.U,i===l.L?(r=l.R,r&&r.C?(i.C=r.C=!1,l.C=!0,e=l):(e===i.R&&(Gu(this,i),e=i,i=e.U),i.C=!1,l.C=!0,Hu(this,l))):(r=l.L,r&&r.C?(i.C=r.C=!1,l.C=!0,e=l):(e===i.L&&(Hu(this,i),e=i,i=e.U),i.C=!1,l.C=!0,Gu(this,l))),i=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var n=e.U,i,l=e.L,r=e.R,c,f;if(l?r?c=H0(r):c=l:c=r,n?n.L===e?n.L=c:n.R=c:this._=c,l&&r?(f=c.C,c.C=e.C,c.L=l,l.U=c,c!==r?(n=c.U,c.U=e.U,e=c.R,n.L=e,c.R=r,r.U=c):(c.U=n,n=c,e=c.R)):(f=e.C,e=c),e&&(e.U=n),!f){if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===n.L){if(i=n.R,i.C&&(i.C=!1,n.C=!0,Gu(this,n),i=n.R),i.L&&i.L.C||i.R&&i.R.C){(!i.R||!i.R.C)&&(i.L.C=!1,i.C=!0,Hu(this,i),i=n.R),i.C=n.C,n.C=i.R.C=!1,Gu(this,n),e=this._;break}}else if(i=n.L,i.C&&(i.C=!1,n.C=!0,Hu(this,n),i=n.L),i.L&&i.L.C||i.R&&i.R.C){(!i.L||!i.L.C)&&(i.R.C=!1,i.C=!0,Gu(this,i),i=n.L),i.C=n.C,n.C=i.L.C=!1,Hu(this,n),e=this._;break}i.C=!0,e=n,n=n.U}while(!e.C);e&&(e.C=!1)}}};function Gu(e,n){var i=n,l=n.R,r=i.U;r?r.L===i?r.L=l:r.R=l:e._=l,l.U=r,i.U=l,i.R=l.L,i.R&&(i.R.U=i),l.L=i}function Hu(e,n){var i=n,l=n.L,r=i.U;r?r.L===i?r.L=l:r.R=l:e._=l,l.U=r,i.U=l,i.L=l.R,i.L&&(i.L.U=i),l.R=i}function H0(e){for(;e.L;)e=e.L;return e}function ic(e,n,i,l){var r=[null,null],c=Ai.push(r)-1;return r.left=e,r.right=n,i&&af(r,e,n,i),l&&af(r,n,e,l),Cr[e.index].halfedges.push(c),Cr[n.index].halfedges.push(c),r}function Yu(e,n,i){var l=[n,i];return l.left=e,l}function af(e,n,i,l){!e[0]&&!e[1]?(e[0]=l,e.left=n,e.right=i):e.left===i?e[1]=l:e[0]=l}function Gk(e,n,i,l,r){var c=e[0],f=e[1],p=c[0],y=c[1],_=f[0],E=f[1],S=0,M=1,O=_-p,B=E-y,Q;if(Q=n-p,!(!O&&Q>0)){if(Q/=O,O<0){if(Q<S)return;Q<M&&(M=Q)}else if(O>0){if(Q>M)return;Q>S&&(S=Q)}if(Q=l-p,!(!O&&Q<0)){if(Q/=O,O<0){if(Q>M)return;Q>S&&(S=Q)}else if(O>0){if(Q<S)return;Q<M&&(M=Q)}if(Q=i-y,!(!B&&Q>0)){if(Q/=B,B<0){if(Q<S)return;Q<M&&(M=Q)}else if(B>0){if(Q>M)return;Q>S&&(S=Q)}if(Q=r-y,!(!B&&Q<0)){if(Q/=B,B<0){if(Q>M)return;Q>S&&(S=Q)}else if(B>0){if(Q<S)return;Q<M&&(M=Q)}return!(S>0)&&!(M<1)||(S>0&&(e[0]=[p+S*O,y+S*B]),M<1&&(e[1]=[p+M*O,y+M*B])),!0}}}}}function Hk(e,n,i,l,r){var c=e[1];if(c)return!0;var f=e[0],p=e.left,y=e.right,_=p[0],E=p[1],S=y[0],M=y[1],O=(_+S)/2,B=(E+M)/2,Q,st;if(M===E){if(O<n||O>=l)return;if(_>S){if(!f)f=[O,i];else if(f[1]>=r)return;c=[O,r]}else{if(!f)f=[O,r];else if(f[1]<i)return;c=[O,i]}}else if(Q=(_-S)/(M-E),st=B-Q*O,Q<-1||Q>1)if(_>S){if(!f)f=[(i-st)/Q,i];else if(f[1]>=r)return;c=[(r-st)/Q,r]}else{if(!f)f=[(r-st)/Q,r];else if(f[1]<i)return;c=[(i-st)/Q,i]}else if(E<M){if(!f)f=[n,Q*n+st];else if(f[0]>=l)return;c=[l,Q*l+st]}else{if(!f)f=[l,Q*l+st];else if(f[0]<n)return;c=[n,Q*n+st]}return e[0]=f,e[1]=c,!0}function Yk(e,n,i,l){for(var r=Ai.length,c;r--;)(!Hk(c=Ai[r],e,n,i,l)||!Gk(c,e,n,i,l)||!(Math.abs(c[0][0]-c[1][0])>un||Math.abs(c[0][1]-c[1][1])>un))&&delete Ai[r]}function Zk(e){return Cr[e.index]={site:e,halfedges:[]}}function Xk(e,n){var i=e.site,l=n.left,r=n.right;return i===r&&(r=l,l=i),r?Math.atan2(r[1]-l[1],r[0]-l[0]):(i===l?(l=n[1],r=n[0]):(l=n[0],r=n[1]),Math.atan2(l[0]-r[0],r[1]-l[1]))}function B1(e,n){return n[+(n.left!==e.site)]}function Vk(e,n){return n[+(n.left===e.site)]}function Qk(){for(var e=0,n=Cr.length,i,l,r,c;e<n;++e)if((i=Cr[e])&&(c=(l=i.halfedges).length)){var f=new Array(c),p=new Array(c);for(r=0;r<c;++r)f[r]=r,p[r]=Xk(i,Ai[l[r]]);for(f.sort(function(y,_){return p[_]-p[y]}),r=0;r<c;++r)p[r]=l[f[r]];for(r=0;r<c;++r)l[r]=p[r]}}function Wk(e,n,i,l){var r=Cr.length,c,f,p,y,_,E,S,M,O,B,Q,st,rt=!0;for(c=0;c<r;++c)if(f=Cr[c]){for(p=f.site,_=f.halfedges,y=_.length;y--;)Ai[_[y]]||_.splice(y,1);for(y=0,E=_.length;y<E;)B=Vk(f,Ai[_[y]]),Q=B[0],st=B[1],S=B1(f,Ai[_[++y%E]]),M=S[0],O=S[1],(Math.abs(Q-M)>un||Math.abs(st-O)>un)&&(_.splice(y,0,Ai.push(Yu(p,B,Math.abs(Q-e)<un&&l-st>un?[e,Math.abs(M-e)<un?O:l]:Math.abs(st-l)<un&&i-Q>un?[Math.abs(O-l)<un?M:i,l]:Math.abs(Q-i)<un&&st-n>un?[i,Math.abs(M-i)<un?O:n]:Math.abs(st-n)<un&&Q-e>un?[Math.abs(O-n)<un?M:e,n]:null))-1),++E);E&&(rt=!1)}if(rt){var j,Y,V,et=1/0;for(c=0,rt=null;c<r;++c)(f=Cr[c])&&(p=f.site,j=p[0]-e,Y=p[1]-n,V=j*j+Y*Y,V<et&&(et=V,rt=f));if(rt){var tt=[e,n],W=[e,l],k=[i,l],A=[i,n];rt.halfedges.push(Ai.push(Yu(p=rt.site,tt,W))-1,Ai.push(Yu(p,W,k))-1,Ai.push(Yu(p,k,A))-1,Ai.push(Yu(p,A,tt))-1)}}for(c=0;c<r;++c)(f=Cr[c])&&(f.halfedges.length||delete Cr[c])}var j1=[],Bp;function Jk(){wf(this),this.x=this.y=this.arc=this.site=this.cy=null}function Pl(e){var n=e.P,i=e.N;if(!(!n||!i)){var l=n.site,r=e.site,c=i.site;if(l!==c){var f=r[0],p=r[1],y=l[0]-f,_=l[1]-p,E=c[0]-f,S=c[1]-p,M=2*(y*S-_*E);if(!(M>=-1e-12)){var O=y*y+_*_,B=E*E+S*S,Q=(S*O-_*B)/M,st=(y*B-E*O)/M,rt=j1.pop()||new Jk;rt.arc=e,rt.site=r,rt.x=Q+f,rt.y=(rt.cy=st+p)+Math.sqrt(Q*Q+st*st),e.circle=rt;for(var j=null,Y=dc._;Y;)if(rt.y<Y.y||rt.y===Y.y&&rt.x<=Y.x)if(Y.L)Y=Y.L;else{j=Y.P;break}else if(Y.R)Y=Y.R;else{j=Y;break}dc.insert(j,rt),j||(Bp=rt)}}}}function Bl(e){var n=e.circle;n&&(n.P||(Bp=n.N),dc.remove(n),j1.push(n),wf(n),e.circle=null)}var U1=[];function Kk(){wf(this),this.edge=this.site=this.circle=null}function Y0(e){var n=U1.pop()||new Kk;return n.site=e,n}function zg(e){Bl(e),jl.remove(e),U1.push(e),wf(e)}function $k(e){var n=e.circle,i=n.x,l=n.cy,r=[i,l],c=e.P,f=e.N,p=[e];zg(e);for(var y=c;y.circle&&Math.abs(i-y.circle.x)<un&&Math.abs(l-y.circle.cy)<un;)c=y.P,p.unshift(y),zg(y),y=c;p.unshift(y),Bl(y);for(var _=f;_.circle&&Math.abs(i-_.circle.x)<un&&Math.abs(l-_.circle.cy)<un;)f=_.N,p.push(_),zg(_),_=f;p.push(_),Bl(_);var E=p.length,S;for(S=1;S<E;++S)_=p[S],y=p[S-1],af(_.edge,y.site,_.site,r);y=p[0],_=p[E-1],_.edge=ic(y.site,_.site,null,r),Pl(y),Pl(_)}function tM(e){for(var n=e[0],i=e[1],l,r,c,f,p=jl._;p;)if(c=F1(p,i)-n,c>un)p=p.L;else if(f=n-eM(p,i),f>un){if(!p.R){l=p;break}p=p.R}else{c>-un?(l=p.P,r=p):f>-un?(l=p,r=p.N):l=r=p;break}Zk(e);var y=Y0(e);if(jl.insert(l,y),!(!l&&!r)){if(l===r){Bl(l),r=Y0(l.site),jl.insert(y,r),y.edge=r.edge=ic(l.site,y.site),Pl(l),Pl(r);return}if(!r){y.edge=ic(l.site,y.site);return}Bl(l),Bl(r);var _=l.site,E=_[0],S=_[1],M=e[0]-E,O=e[1]-S,B=r.site,Q=B[0]-E,st=B[1]-S,rt=2*(M*st-O*Q),j=M*M+O*O,Y=Q*Q+st*st,V=[(st*j-O*Y)/rt+E,(M*Y-Q*j)/rt+S];af(r.edge,_,B,V),y.edge=ic(_,e,null,V),r.edge=ic(e,B,null,V),Pl(l),Pl(r)}}function F1(e,n){var i=e.site,l=i[0],r=i[1],c=r-n;if(!c)return l;var f=e.P;if(!f)return-1/0;i=f.site;var p=i[0],y=i[1],_=y-n;if(!_)return p;var E=p-l,S=1/c-1/_,M=E/_;return S?(-M+Math.sqrt(M*M-2*S*(E*E/(-2*_)-y+_/2+r-c/2)))/S+l:(l+p)/2}function eM(e,n){var i=e.N;if(i)return F1(i,n);var l=e.site;return l[1]===n?l[0]:1/0}var un=1e-6,jl,Cr,dc,Ai;function nM(e,n,i){return(e[0]-i[0])*(n[1]-e[1])-(e[0]-n[0])*(i[1]-e[1])}function iM(e,n){return n[1]-e[1]||n[0]-e[0]}function ap(e,n){var i=e.sort(iM).pop(),l,r,c;for(Ai=[],Cr=new Array(e.length),jl=new sf,dc=new sf;;)if(c=Bp,i&&(!c||i[1]<c.y||i[1]===c.y&&i[0]<c.x))(i[0]!==l||i[1]!==r)&&(tM(i),l=i[0],r=i[1]),i=e.pop();else if(c)$k(c.arc);else break;if(Qk(),n){var f=+n[0][0],p=+n[0][1],y=+n[1][0],_=+n[1][1];Yk(f,p,y,_),Wk(f,p,y,_)}this.edges=Ai,this.cells=Cr,jl=dc=Ai=Cr=null}ap.prototype={constructor:ap,polygons:function(){var e=this.edges;return this.cells.map(function(n){var i=n.halfedges.map(function(l){return B1(n,e[l])});return i.data=n.site.data,i})},triangles:function(){var e=[],n=this.edges;return this.cells.forEach(function(i,l){if(p=(c=i.halfedges).length)for(var r=i.site,c,f=-1,p,y,_=n[c[p-1]],E=_.left===r?_.right:_.left;++f<p;)y=E,_=n[c[f]],E=_.left===r?_.right:_.left,y&&E&&l<y.index&&l<E.index&&nM(r,y,E)<0&&e.push([r.data,y.data,E.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,n,i){for(var l=this,r,c=l._found||0,f=l.cells.length,p;!(p=l.cells[c]);)if(++c>=f)return null;var y=e-p.site[0],_=n-p.site[1],E=y*y+_*_;do p=l.cells[r=c],c=null,p.halfedges.forEach(function(S){var M=l.edges[S],O=M.left;if(!((O===p.site||!O)&&!(O=M.right))){var B=e-O[0],Q=n-O[1],st=B*B+Q*Q;st<E&&(E=st,c=O.index)}});while(c!==null);return l._found=r,i==null||E<=i*i?p.site:null}};function rM(){var e=Fk,n=qk,i=null;function l(r){return new ap(r.map(function(c,f){var p=[Math.round(e(c,f,r)/un)*un,Math.round(n(c,f,r)/un)*un];return p.index=f,p.data=c,p}),i)}return l.polygons=function(r){return l(r).polygons()},l.links=function(r){return l(r).links()},l.triangles=function(r){return l(r).triangles()},l.x=function(r){return arguments.length?(e=typeof r=="function"?r:G0(+r),l):e},l.y=function(r){return arguments.length?(n=typeof r=="function"?r:G0(+r),l):n},l.extent=function(r){return arguments.length?(i=r==null?null:[[+r[0][0],+r[0][1]],[+r[1][0],+r[1][1]]],l):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},l.size=function(r){return arguments.length?(i=r==null?null:[[0,0],[+r[0],+r[1]]],l):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},l}function sM(e){return e=e.slice(),e.push(e[0]),le([e])}function aM(e,n){if(n=n||{},!Be(n))throw new Error("options is invalid");const i=n.bbox||[-180,-85,180,85];if(!e)throw new Error("points is required");if(!Array.isArray(i))throw new Error("bbox is invalid");return Ea(e,"Point","points"),Jt(rM().x(l=>l.geometry.coordinates[0]).y(l=>l.geometry.coordinates[1]).extent([[i[0],i[1]],[i[2],i[3]]]).polygons(e.features).map(function(l,r){return Object.assign(sM(l),{properties:pf(e.features[r].properties)})}))}const oM=Object.freeze(Object.defineProperty({__proto__:null,along:Dw,angle:Iw,applyFilter:mf,area:vc,areaFactors:Hh,azimuthToBearing:ux,bbox:Ne,bboxClip:Uw,bboxPolygon:yc,bearing:ro,bearingToAzimuth:Ul,bezierSpline:Hw,booleanClockwise:Yh,booleanConcave:Yw,booleanContains:AS,booleanCrosses:bx,booleanDisjoint:bp,booleanEqual:Qu,booleanIntersects:Lx,booleanOverlap:nb,booleanParallel:ib,booleanPointInPolygon:re,booleanPointOnLine:ge,booleanTouches:sb,booleanValid:ab,booleanWithin:Cx,buffer:Qb,center:df,centerMean:Lp,centerMedian:Jb,centerOfMass:Vx,centroid:_a,circle:gf,cleanCoords:Vo,clone:oi,cloneProperties:pf,clusterEach:Cp,clusterReduce:Kx,clusters:fL,clustersDbscan:vL,clustersKmeans:wL,collect:SL,collectionOf:Ea,combine:bL,concave:tT,containsNumber:hp,convertArea:cp,convertLength:Zo,convex:Xx,coordAll:lc,coordEach:vn,coordReduce:fp,createBins:kp,degreesToRadians:Jn,destination:so,difference:wT,dissolve:ST,distance:fn,distanceWeight:f1,earthRadius:Wn,ellipse:g1,envelope:p1,explode:yf,factors:cf,feature:Sn,featureCollection:Jt,featureEach:Ie,featureOf:oc,featureReduce:gp,filterProperties:$x,findPoint:px,findSegment:gx,flatten:ep,flattenEach:$n,flattenReduce:dx,flip:CT,geojsonRbush:ff,geojsonType:hx,geomEach:xi,geomReduce:pp,geometry:rx,geometryCollection:lp,getCluster:Jx,getCoord:ze,getCoords:ce,getGeom:cn,getType:cr,greatCircle:AT,helpers:Nw,hexGrid:m1,interpolate:RT,intersect:hc,invariant:Ow,isNumber:Kn,isObject:Be,isobands:FT,isolines:$T,kinks:iC,length:x1,lengthToDegrees:up,lengthToRadians:Xl,lineArc:E1,lineChunk:sC,lineEach:vp,lineIntersect:Is,lineOffset:dC,lineOverlap:Tx,lineReduce:yp,lineSegment:uc,lineSlice:pC,lineSliceAlong:w1,lineSplit:_p,lineString:Se,lineStrings:ox,lineToPolygon:mC,mask:yC,meta:Rw,midpoint:EC,moranIndex:wC,multiLineString:lo,multiPoint:pc,multiPolygon:ur,nearestNeighborAnalysis:MC,nearestPoint:_f,nearestPointOnLine:ma,nearestPointToLine:IC,planepoint:PC,point:ue,pointGrid:v1,pointOnFeature:zC,pointToLineDistance:Pp,pointToPolygonDistance:rp,points:sx,pointsWithinPolygon:b1,polygon:le,polygonSmooth:ZC,polygonTangents:QC,polygonToLine:Fl,polygonize:YC,polygons:ax,projection:$C,propEach:dp,propReduce:fx,propertiesContainsFilter:Mp,quadratAnalysis:tk,radiansToDegrees:Ds,radiansToLength:mc,random:ok,randomLineString:R1,randomPoint:D1,randomPolygon:I1,randomPosition:A1,rectangleGrid:y1,rewind:lk,rhumbBearing:Xo,rhumbDestination:vf,rhumbDistance:zl,round:lx,sample:uk,sector:hk,segmentEach:pa,segmentReduce:mp,shortestPath:vk,simplify:Sk,square:Lk,squareGrid:Rp,standardDeviationalEllipse:Tk,tag:Ck,tesselate:Ok,tin:n1,toMercator:M1,toWgs84:N1,transformRotate:d1,transformScale:z1,transformTranslate:Dk,triangleGrid:_1,truncate:vx,union:Ik,unkinkPolygon:Uk,validateBBox:ac,validateId:cx,voronoi:aM},Symbol.toStringTag,{value:"Module"}));var rc={exports:{}};var lM=rc.exports,Z0;function uM(){return Z0||(Z0=1,(function(e,n){(function(i,l){l(n)})(lM,(function(i){var l="1.9.4";function r(u){var m,w,N,F;for(w=1,N=arguments.length;w<N;w++){F=arguments[w];for(m in F)u[m]=F[m]}return u}var c=Object.create||(function(){function u(){}return function(m){return u.prototype=m,new u}})();function f(u,m){var w=Array.prototype.slice;if(u.bind)return u.bind.apply(u,w.call(arguments,1));var N=w.call(arguments,2);return function(){return u.apply(m,N.length?N.concat(w.call(arguments)):arguments)}}var p=0;function y(u){return"_leaflet_id"in u||(u._leaflet_id=++p),u._leaflet_id}function _(u,m,w){var N,F,ot,mt;return mt=function(){N=!1,F&&(ot.apply(w,F),F=!1)},ot=function(){N?F=arguments:(u.apply(w,arguments),setTimeout(mt,m),N=!0)},ot}function E(u,m,w){var N=m[1],F=m[0],ot=N-F;return u===N&&w?u:((u-F)%ot+ot)%ot+F}function S(){return!1}function M(u,m){if(m===!1)return u;var w=Math.pow(10,m===void 0?6:m);return Math.round(u*w)/w}function O(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function B(u){return O(u).split(/\s+/)}function Q(u,m){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?c(u.options):{});for(var w in m)u.options[w]=m[w];return u.options}function st(u,m,w){var N=[];for(var F in u)N.push(encodeURIComponent(w?F.toUpperCase():F)+"="+encodeURIComponent(u[F]));return(!m||m.indexOf("?")===-1?"?":"&")+N.join("&")}var rt=/\{ *([\w_ -]+) *\}/g;function j(u,m){return u.replace(rt,function(w,N){var F=m[N];if(F===void 0)throw new Error("No value provided for variable "+w);return typeof F=="function"&&(F=F(m)),F})}var Y=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function V(u,m){for(var w=0;w<u.length;w++)if(u[w]===m)return w;return-1}var et="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function tt(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var W=0;function k(u){var m=+new Date,w=Math.max(0,16-(m-W));return W=m+w,window.setTimeout(u,w)}var A=window.requestAnimationFrame||tt("RequestAnimationFrame")||k,q=window.cancelAnimationFrame||tt("CancelAnimationFrame")||tt("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function X(u,m,w){if(w&&A===k)u.call(m);else return A.call(window,f(u,m))}function Z(u){u&&q.call(window,u)}var nt={__proto__:null,extend:r,create:c,bind:f,get lastId(){return p},stamp:y,throttle:_,wrapNum:E,falseFn:S,formatNum:M,trim:O,splitWords:B,setOptions:Q,getParamString:st,template:j,isArray:Y,indexOf:V,emptyImageUrl:et,requestFn:A,cancelFn:q,requestAnimFrame:X,cancelAnimFrame:Z};function at(){}at.extend=function(u){var m=function(){Q(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},w=m.__super__=this.prototype,N=c(w);N.constructor=m,m.prototype=N;for(var F in this)Object.prototype.hasOwnProperty.call(this,F)&&F!=="prototype"&&F!=="__super__"&&(m[F]=this[F]);return u.statics&&r(m,u.statics),u.includes&&(it(u.includes),r.apply(null,[N].concat(u.includes))),r(N,u),delete N.statics,delete N.includes,N.options&&(N.options=w.options?c(w.options):{},r(N.options,u.options)),N._initHooks=[],N.callInitHooks=function(){if(!this._initHooksCalled){w.callInitHooks&&w.callInitHooks.call(this),this._initHooksCalled=!0;for(var ot=0,mt=N._initHooks.length;ot<mt;ot++)N._initHooks[ot].call(this)}},m},at.include=function(u){var m=this.prototype.options;return r(this.prototype,u),u.options&&(this.prototype.options=m,this.mergeOptions(u.options)),this},at.mergeOptions=function(u){return r(this.prototype.options,u),this},at.addInitHook=function(u){var m=Array.prototype.slice.call(arguments,1),w=typeof u=="function"?u:function(){this[u].apply(this,m)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(w),this};function it(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=Y(u)?u:[u];for(var m=0;m<u.length;m++)u[m]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var D={on:function(u,m,w){if(typeof u=="object")for(var N in u)this._on(N,u[N],m);else{u=B(u);for(var F=0,ot=u.length;F<ot;F++)this._on(u[F],m,w)}return this},off:function(u,m,w){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var N in u)this._off(N,u[N],m);else{u=B(u);for(var F=arguments.length===1,ot=0,mt=u.length;ot<mt;ot++)F?this._off(u[ot]):this._off(u[ot],m,w)}return this},_on:function(u,m,w,N){if(typeof m!="function"){console.warn("wrong listener type: "+typeof m);return}if(this._listens(u,m,w)===!1){w===this&&(w=void 0);var F={fn:m,ctx:w};N&&(F.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(F)}},_off:function(u,m,w){var N,F,ot;if(this._events&&(N=this._events[u],!!N)){if(arguments.length===1){if(this._firingCount)for(F=0,ot=N.length;F<ot;F++)N[F].fn=S;delete this._events[u];return}if(typeof m!="function"){console.warn("wrong listener type: "+typeof m);return}var mt=this._listens(u,m,w);if(mt!==!1){var wt=N[mt];this._firingCount&&(wt.fn=S,this._events[u]=N=N.slice()),N.splice(mt,1)}}},fire:function(u,m,w){if(!this.listens(u,w))return this;var N=r({},m,{type:u,target:this,sourceTarget:m&&m.sourceTarget||this});if(this._events){var F=this._events[u];if(F){this._firingCount=this._firingCount+1||1;for(var ot=0,mt=F.length;ot<mt;ot++){var wt=F[ot],Ct=wt.fn;wt.once&&this.off(u,Ct,wt.ctx),Ct.call(wt.ctx||this,N)}this._firingCount--}}return w&&this._propagateEvent(N),this},listens:function(u,m,w,N){typeof u!="string"&&console.warn('"string" type argument expected');var F=m;typeof m!="function"&&(N=!!m,F=void 0,w=void 0);var ot=this._events&&this._events[u];if(ot&&ot.length&&this._listens(u,F,w)!==!1)return!0;if(N){for(var mt in this._eventParents)if(this._eventParents[mt].listens(u,m,w,N))return!0}return!1},_listens:function(u,m,w){if(!this._events)return!1;var N=this._events[u]||[];if(!m)return!!N.length;w===this&&(w=void 0);for(var F=0,ot=N.length;F<ot;F++)if(N[F].fn===m&&N[F].ctx===w)return F;return!1},once:function(u,m,w){if(typeof u=="object")for(var N in u)this._on(N,u[N],m,!0);else{u=B(u);for(var F=0,ot=u.length;F<ot;F++)this._on(u[F],m,w,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[y(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[y(u)],this},_propagateEvent:function(u){for(var m in this._eventParents)this._eventParents[m].fire(u.type,r({layer:u.target,propagatedFrom:u.target},u),!0)}};D.addEventListener=D.on,D.removeEventListener=D.clearAllEventListeners=D.off,D.addOneTimeEventListener=D.once,D.fireEvent=D.fire,D.hasEventListeners=D.listens;var z=at.extend(D);function P(u,m,w){this.x=w?Math.round(u):u,this.y=w?Math.round(m):m}var $=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};P.prototype={clone:function(){return new P(this.x,this.y)},add:function(u){return this.clone()._add(J(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(J(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new P(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new P(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=$(this.x),this.y=$(this.y),this},distanceTo:function(u){u=J(u);var m=u.x-this.x,w=u.y-this.y;return Math.sqrt(m*m+w*w)},equals:function(u){return u=J(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=J(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+M(this.x)+", "+M(this.y)+")"}};function J(u,m,w){return u instanceof P?u:Y(u)?new P(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new P(u.x,u.y):new P(u,m,w)}function U(u,m){if(u)for(var w=m?[u,m]:u,N=0,F=w.length;N<F;N++)this.extend(w[N])}U.prototype={extend:function(u){var m,w;if(!u)return this;if(u instanceof P||typeof u[0]=="number"||"x"in u)m=w=J(u);else if(u=K(u),m=u.min,w=u.max,!m||!w)return this;return!this.min&&!this.max?(this.min=m.clone(),this.max=w.clone()):(this.min.x=Math.min(m.x,this.min.x),this.max.x=Math.max(w.x,this.max.x),this.min.y=Math.min(m.y,this.min.y),this.max.y=Math.max(w.y,this.max.y)),this},getCenter:function(u){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var m,w;return typeof u[0]=="number"||u instanceof P?u=J(u):u=K(u),u instanceof U?(m=u.min,w=u.max):m=w=u,m.x>=this.min.x&&w.x<=this.max.x&&m.y>=this.min.y&&w.y<=this.max.y},intersects:function(u){u=K(u);var m=this.min,w=this.max,N=u.min,F=u.max,ot=F.x>=m.x&&N.x<=w.x,mt=F.y>=m.y&&N.y<=w.y;return ot&&mt},overlaps:function(u){u=K(u);var m=this.min,w=this.max,N=u.min,F=u.max,ot=F.x>m.x&&N.x<w.x,mt=F.y>m.y&&N.y<w.y;return ot&&mt},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var m=this.min,w=this.max,N=Math.abs(m.x-w.x)*u,F=Math.abs(m.y-w.y)*u;return K(J(m.x-N,m.y-F),J(w.x+N,w.y+F))},equals:function(u){return u?(u=K(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function K(u,m){return!u||u instanceof U?u:new U(u,m)}function ct(u,m){if(u)for(var w=m?[u,m]:u,N=0,F=w.length;N<F;N++)this.extend(w[N])}ct.prototype={extend:function(u){var m=this._southWest,w=this._northEast,N,F;if(u instanceof pt)N=u,F=u;else if(u instanceof ct){if(N=u._southWest,F=u._northEast,!N||!F)return this}else return u?this.extend(yt(u)||gt(u)):this;return!m&&!w?(this._southWest=new pt(N.lat,N.lng),this._northEast=new pt(F.lat,F.lng)):(m.lat=Math.min(N.lat,m.lat),m.lng=Math.min(N.lng,m.lng),w.lat=Math.max(F.lat,w.lat),w.lng=Math.max(F.lng,w.lng)),this},pad:function(u){var m=this._southWest,w=this._northEast,N=Math.abs(m.lat-w.lat)*u,F=Math.abs(m.lng-w.lng)*u;return new ct(new pt(m.lat-N,m.lng-F),new pt(w.lat+N,w.lng+F))},getCenter:function(){return new pt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new pt(this.getNorth(),this.getWest())},getSouthEast:function(){return new pt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof pt||"lat"in u?u=yt(u):u=gt(u);var m=this._southWest,w=this._northEast,N,F;return u instanceof ct?(N=u.getSouthWest(),F=u.getNorthEast()):N=F=u,N.lat>=m.lat&&F.lat<=w.lat&&N.lng>=m.lng&&F.lng<=w.lng},intersects:function(u){u=gt(u);var m=this._southWest,w=this._northEast,N=u.getSouthWest(),F=u.getNorthEast(),ot=F.lat>=m.lat&&N.lat<=w.lat,mt=F.lng>=m.lng&&N.lng<=w.lng;return ot&&mt},overlaps:function(u){u=gt(u);var m=this._southWest,w=this._northEast,N=u.getSouthWest(),F=u.getNorthEast(),ot=F.lat>m.lat&&N.lat<w.lat,mt=F.lng>m.lng&&N.lng<w.lng;return ot&&mt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,m){return u?(u=gt(u),this._southWest.equals(u.getSouthWest(),m)&&this._northEast.equals(u.getNorthEast(),m)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function gt(u,m){return u instanceof ct?u:new ct(u,m)}function pt(u,m,w){if(isNaN(u)||isNaN(m))throw new Error("Invalid LatLng object: ("+u+", "+m+")");this.lat=+u,this.lng=+m,w!==void 0&&(this.alt=+w)}pt.prototype={equals:function(u,m){if(!u)return!1;u=yt(u);var w=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return w<=(m===void 0?1e-9:m)},toString:function(u){return"LatLng("+M(this.lat,u)+", "+M(this.lng,u)+")"},distanceTo:function(u){return ht.distance(this,yt(u))},wrap:function(){return ht.wrapLatLng(this)},toBounds:function(u){var m=180*u/40075017,w=m/Math.cos(Math.PI/180*this.lat);return gt([this.lat-m,this.lng-w],[this.lat+m,this.lng+w])},clone:function(){return new pt(this.lat,this.lng,this.alt)}};function yt(u,m,w){return u instanceof pt?u:Y(u)&&typeof u[0]!="object"?u.length===3?new pt(u[0],u[1],u[2]):u.length===2?new pt(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new pt(u.lat,"lng"in u?u.lng:u.lon,u.alt):m===void 0?null:new pt(u,m,w)}var Tt={latLngToPoint:function(u,m){var w=this.projection.project(u),N=this.scale(m);return this.transformation._transform(w,N)},pointToLatLng:function(u,m){var w=this.scale(m),N=this.transformation.untransform(u,w);return this.projection.unproject(N)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var m=this.projection.bounds,w=this.scale(u),N=this.transformation.transform(m.min,w),F=this.transformation.transform(m.max,w);return new U(N,F)},infinite:!1,wrapLatLng:function(u){var m=this.wrapLng?E(u.lng,this.wrapLng,!0):u.lng,w=this.wrapLat?E(u.lat,this.wrapLat,!0):u.lat,N=u.alt;return new pt(w,m,N)},wrapLatLngBounds:function(u){var m=u.getCenter(),w=this.wrapLatLng(m),N=m.lat-w.lat,F=m.lng-w.lng;if(N===0&&F===0)return u;var ot=u.getSouthWest(),mt=u.getNorthEast(),wt=new pt(ot.lat-N,ot.lng-F),Ct=new pt(mt.lat-N,mt.lng-F);return new ct(wt,Ct)}},ht=r({},Tt,{wrapLng:[-180,180],R:6371e3,distance:function(u,m){var w=Math.PI/180,N=u.lat*w,F=m.lat*w,ot=Math.sin((m.lat-u.lat)*w/2),mt=Math.sin((m.lng-u.lng)*w/2),wt=ot*ot+Math.cos(N)*Math.cos(F)*mt*mt,Ct=2*Math.atan2(Math.sqrt(wt),Math.sqrt(1-wt));return this.R*Ct}}),Dt=6378137,It={R:Dt,MAX_LATITUDE:85.0511287798,project:function(u){var m=Math.PI/180,w=this.MAX_LATITUDE,N=Math.max(Math.min(w,u.lat),-w),F=Math.sin(N*m);return new P(this.R*u.lng*m,this.R*Math.log((1+F)/(1-F))/2)},unproject:function(u){var m=180/Math.PI;return new pt((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*m,u.x*m/this.R)},bounds:(function(){var u=Dt*Math.PI;return new U([-u,-u],[u,u])})()};function Mt(u,m,w,N){if(Y(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=m,this._c=w,this._d=N}Mt.prototype={transform:function(u,m){return this._transform(u.clone(),m)},_transform:function(u,m){return m=m||1,u.x=m*(this._a*u.x+this._b),u.y=m*(this._c*u.y+this._d),u},untransform:function(u,m){return m=m||1,new P((u.x/m-this._b)/this._a,(u.y/m-this._d)/this._c)}};function ft(u,m,w,N){return new Mt(u,m,w,N)}var Xt=r({},ht,{code:"EPSG:3857",projection:It,transformation:(function(){var u=.5/(Math.PI*It.R);return ft(u,.5,-u,.5)})()}),Zt=r({},Xt,{code:"EPSG:900913"});function Bt(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function Ut(u,m){var w="",N,F,ot,mt,wt,Ct;for(N=0,ot=u.length;N<ot;N++){for(wt=u[N],F=0,mt=wt.length;F<mt;F++)Ct=wt[F],w+=(F?"L":"M")+Ct.x+" "+Ct.y;w+=m?Kt.svg?"z":"x":""}return w||"M0 0"}var Le=document.documentElement.style,he="ActiveXObject"in window,At=he&&!document.addEventListener,Ve="msLaunchUri"in navigator&&!("documentMode"in document),ti=An("webkit"),pn=An("android"),Fi=An("android 2")||An("android 3"),Yt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),bn=pn&&An("Google")&&Yt<537&&!("AudioNode"in window),Re=!!window.opera,yn=!Ve&&An("chrome"),Vt=An("gecko")&&!ti&&!Re&&!he,Xr=!yn&&An("safari"),ve=An("phantom"),ie="OTransition"in Le,Ei=navigator.platform.indexOf("Win")===0,_n=he&&"transition"in Le,On="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Fi,$t="MozPerspective"in Le,di=!window.L_DISABLE_3D&&(_n||On||$t)&&!ie&&!ve,Ps=typeof orientation<"u"||An("mobile"),ho=Ps&&ti,wi=Ps&&On,hr=!window.PointerEvent&&window.MSPointerEvent,li=!!(window.PointerEvent||hr),cs="ontouchstart"in window||!!window.TouchEvent,qi=!window.L_NO_TOUCH&&(cs||li),wa=Ps&&Re,hs=Ps&&Vt,Vr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ft=(function(){var u=!1;try{var m=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",S,m),window.removeEventListener("testPassiveEventSupport",S,m)}catch{}return u})(),fs=(function(){return!!document.createElement("canvas").getContext})(),Gi=!!(document.createElementNS&&Bt("svg").createSVGRect),zs=!!Gi&&(function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),fo=!Gi&&(function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var m=u.firstChild;return m.style.behavior="url(#default#VML)",m&&typeof m.adj=="object"}catch{return!1}})(),Sa=navigator.platform.indexOf("Mac")===0,go=navigator.platform.indexOf("Linux")===0;function An(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var Kt={ie:he,ielt9:At,edge:Ve,webkit:ti,android:pn,android23:Fi,androidStock:bn,opera:Re,chrome:yn,gecko:Vt,safari:Xr,phantom:ve,opera12:ie,win:Ei,ie3d:_n,webkit3d:On,gecko3d:$t,any3d:di,mobile:Ps,mobileWebkit:ho,mobileWebkit3d:wi,msPointer:hr,pointer:li,touch:qi,touchNative:cs,mobileOpera:wa,mobileGecko:hs,retina:Vr,passiveEvents:Ft,canvas:fs,svg:Gi,vml:fo,inlineSvg:zs,mac:Sa,linux:go},ds=Kt.msPointer?"MSPointerDown":"pointerdown",po=Kt.msPointer?"MSPointerMove":"pointermove",Hi=Kt.msPointer?"MSPointerUp":"pointerup",Dn=Kt.msPointer?"MSPointerCancel":"pointercancel",Ue={touchstart:ds,touchmove:po,touchend:Hi,touchcancel:Dn},fr={touchstart:dr,touchmove:Nr,touchend:Nr,touchcancel:Nr},Si={},kr=!1;function Qr(u,m,w){return m==="touchstart"&&gs(),fr[m]?(w=fr[m].bind(this,w),u.addEventListener(Ue[m],w,!1),w):(console.warn("wrong event specified:",m),S)}function ba(u,m,w){if(!Ue[m]){console.warn("wrong event specified:",m);return}u.removeEventListener(Ue[m],w,!1)}function Mr(u){Si[u.pointerId]=u}function Wr(u){Si[u.pointerId]&&(Si[u.pointerId]=u)}function $e(u){delete Si[u.pointerId]}function gs(){kr||(document.addEventListener(ds,Mr,!0),document.addEventListener(po,Wr,!0),document.addEventListener(Hi,$e,!0),document.addEventListener(Dn,$e,!0),kr=!0)}function Nr(u,m){if(m.pointerType!==(m.MSPOINTER_TYPE_MOUSE||"mouse")){m.touches=[];for(var w in Si)m.touches.push(Si[w]);m.changedTouches=[m],u(m)}}function dr(u,m){m.MSPOINTER_TYPE_TOUCH&&m.pointerType===m.MSPOINTER_TYPE_TOUCH&&rn(m),Nr(u,m)}function dn(u){var m={},w,N;for(N in u)w=u[N],m[N]=w&&w.bind?w.bind(u):w;return u=m,m.type="dblclick",m.detail=2,m.isTrusted=!1,m._simulated=!0,m}var La=200;function Ta(u,m){u.addEventListener("dblclick",m);var w=0,N;function F(ot){if(ot.detail!==1){N=ot.detail;return}if(!(ot.pointerType==="mouse"||ot.sourceCapabilities&&!ot.sourceCapabilities.firesTouchEvents)){var mt=Ln(ot);if(!(mt.some(function(Ct){return Ct instanceof HTMLLabelElement&&Ct.attributes.for})&&!mt.some(function(Ct){return Ct instanceof HTMLInputElement||Ct instanceof HTMLSelectElement}))){var wt=Date.now();wt-w<=La?(N++,N===2&&m(dn(ot))):N=1,w=wt}}}return u.addEventListener("click",F),{dblclick:m,simDblclick:F}}function Or(u,m){u.removeEventListener("dblclick",m.dblclick),u.removeEventListener("click",m.simDblclick)}var Ar=Us(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ei=Us(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Dr=ei==="webkitTransition"||ei==="OTransition"?ei+"End":"transitionend";function Bs(u){return typeof u=="string"?document.getElementById(u):u}function Yi(u,m){var w=u.style[m]||u.currentStyle&&u.currentStyle[m];if((!w||w==="auto")&&document.defaultView){var N=document.defaultView.getComputedStyle(u,null);w=N?N[m]:null}return w==="auto"?null:w}function xe(u,m,w){var N=document.createElement(u);return N.className=m||"",w&&w.appendChild(N),N}function Ke(u){var m=u.parentNode;m&&m.removeChild(u)}function bi(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function zn(u){var m=u.parentNode;m&&m.lastChild!==u&&m.appendChild(u)}function Ir(u){var m=u.parentNode;m&&m.firstChild!==u&&m.insertBefore(u,m.firstChild)}function Ca(u,m){if(u.classList!==void 0)return u.classList.contains(m);var w=js(u);return w.length>0&&new RegExp("(^|\\s)"+m+"(\\s|$)").test(w)}function fe(u,m){if(u.classList!==void 0)for(var w=B(m),N=0,F=w.length;N<F;N++)u.classList.add(w[N]);else if(!Ca(u,m)){var ot=js(u);gi(u,(ot?ot+" ":"")+m)}}function Pe(u,m){u.classList!==void 0?u.classList.remove(m):gi(u,O((" "+js(u)+" ").replace(" "+m+" "," ")))}function gi(u,m){u.className.baseVal===void 0?u.className=m:u.className.baseVal=m}function js(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function Fe(u,m){"opacity"in u.style?u.style.opacity=m:"filter"in u.style&&mo(u,m)}function mo(u,m){var w=!1,N="DXImageTransform.Microsoft.Alpha";try{w=u.filters.item(N)}catch{if(m===1)return}m=Math.round(m*100),w?(w.Enabled=m!==100,w.Opacity=m):u.style.filter+=" progid:"+N+"(opacity="+m+")"}function Us(u){for(var m=document.documentElement.style,w=0;w<u.length;w++)if(u[w]in m)return u[w];return!1}function gr(u,m,w){var N=m||new P(0,0);u.style[Ar]=(Kt.ie3d?"translate("+N.x+"px,"+N.y+"px)":"translate3d("+N.x+"px,"+N.y+"px,0)")+(w?" scale("+w+")":"")}function tn(u,m){u._leaflet_pos=m,Kt.any3d?gr(u,m):(u.style.left=m.x+"px",u.style.top=m.y+"px")}function pr(u){return u._leaflet_pos||new P(0,0)}var Zi,Di,vo;if("onselectstart"in document)Zi=function(){ae(window,"selectstart",rn)},Di=function(){je(window,"selectstart",rn)};else{var Jr=Us(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zi=function(){if(Jr){var u=document.documentElement.style;vo=u[Jr],u[Jr]="none"}},Di=function(){Jr&&(document.documentElement.style[Jr]=vo,vo=void 0)}}function ka(){ae(window,"dragstart",rn)}function Kr(){je(window,"dragstart",rn)}var Qe,mr;function ps(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(ui(),Qe=u,mr=u.style.outlineStyle,u.style.outlineStyle="none",ae(window,"keydown",ui))}function ui(){Qe&&(Qe.style.outlineStyle=mr,Qe=void 0,mr=void 0,je(window,"keydown",ui))}function ni(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function Fn(u){var m=u.getBoundingClientRect();return{x:m.width/u.offsetWidth||1,y:m.height/u.offsetHeight||1,boundingClientRect:m}}var vr={__proto__:null,TRANSFORM:Ar,TRANSITION:ei,TRANSITION_END:Dr,get:Bs,getStyle:Yi,create:xe,remove:Ke,empty:bi,toFront:zn,toBack:Ir,hasClass:Ca,addClass:fe,removeClass:Pe,setClass:gi,getClass:js,setOpacity:Fe,testProp:Us,setTransform:gr,setPosition:tn,getPosition:pr,get disableTextSelection(){return Zi},get enableTextSelection(){return Di},disableImageDrag:ka,enableImageDrag:Kr,preventOutline:ps,restoreOutline:ui,getSizedParentNode:ni,getScale:Fn};function ae(u,m,w,N){if(m&&typeof m=="object")for(var F in m)Li(u,F,m[F],w);else{m=B(m);for(var ot=0,mt=m.length;ot<mt;ot++)Li(u,m[ot],w,N)}return this}var Ii="_leaflet_events";function je(u,m,w,N){if(arguments.length===1)ms(u),delete u[Ii];else if(m&&typeof m=="object")for(var F in m)be(u,F,m[F],w);else if(m=B(m),arguments.length===2)ms(u,function(wt){return V(m,wt)!==-1});else for(var ot=0,mt=m.length;ot<mt;ot++)be(u,m[ot],w,N);return this}function ms(u,m){for(var w in u[Ii]){var N=w.split(/\d/)[0];(!m||m(N))&&be(u,N,null,null,w)}}var $r={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Li(u,m,w,N){var F=m+y(w)+(N?"_"+y(N):"");if(u[Ii]&&u[Ii][F])return this;var ot=function(wt){return w.call(N||u,wt||window.event)},mt=ot;!Kt.touchNative&&Kt.pointer&&m.indexOf("touch")===0?ot=Qr(u,m,ot):Kt.touch&&m==="dblclick"?ot=Ta(u,ot):"addEventListener"in u?m==="touchstart"||m==="touchmove"||m==="wheel"||m==="mousewheel"?u.addEventListener($r[m]||m,ot,Kt.passiveEvents?{passive:!1}:!1):m==="mouseenter"||m==="mouseleave"?(ot=function(wt){wt=wt||window.event,Xi(u,wt)&&mt(wt)},u.addEventListener($r[m],ot,!1)):u.addEventListener(m,mt,!1):u.attachEvent("on"+m,ot),u[Ii]=u[Ii]||{},u[Ii][F]=ot}function be(u,m,w,N,F){F=F||m+y(w)+(N?"_"+y(N):"");var ot=u[Ii]&&u[Ii][F];if(!ot)return this;!Kt.touchNative&&Kt.pointer&&m.indexOf("touch")===0?ba(u,m,ot):Kt.touch&&m==="dblclick"?Or(u,ot):"removeEventListener"in u?u.removeEventListener($r[m]||m,ot,!1):u.detachEvent("on"+m,ot),u[Ii][F]=null}function xn(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function Ti(u){return Li(u,"wheel",xn),this}function Rr(u){return ae(u,"mousedown touchstart dblclick contextmenu",xn),u._leaflet_disable_click=!0,this}function rn(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function yr(u){return rn(u),xn(u),this}function Ln(u){if(u.composedPath)return u.composedPath();for(var m=[],w=u.target;w;)m.push(w),w=w.parentNode;return m}function vs(u,m){if(!m)return new P(u.clientX,u.clientY);var w=Fn(m),N=w.boundingClientRect;return new P((u.clientX-N.left)/w.x-m.clientLeft,(u.clientY-N.top)/w.y-m.clientTop)}var Ma=Kt.linux&&Kt.chrome?window.devicePixelRatio:Kt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function qn(u){return Kt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/Ma:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function Xi(u,m){var w=m.relatedTarget;if(!w)return!0;try{for(;w&&w!==u;)w=w.parentNode}catch{return!1}return w!==u}var Na={__proto__:null,on:ae,off:je,stopPropagation:xn,disableScrollPropagation:Ti,disableClickPropagation:Rr,preventDefault:rn,stop:yr,getPropagationPath:Ln,getMousePosition:vs,getWheelDelta:qn,isExternalTarget:Xi,addListener:ae,removeListener:je},ts=z.extend({run:function(u,m,w,N){this.stop(),this._el=u,this._inProgress=!0,this._duration=w||.25,this._easeOutPower=1/Math.max(N||.5,.2),this._startPos=pr(u),this._offset=m.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=X(this._animate,this),this._step()},_step:function(u){var m=+new Date-this._startTime,w=this._duration*1e3;m<w?this._runFrame(this._easeOut(m/w),u):(this._runFrame(1),this._complete())},_runFrame:function(u,m){var w=this._startPos.add(this._offset.multiplyBy(u));m&&w._round(),tn(this._el,w),this.fire("step")},_complete:function(){Z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),de=z.extend({options:{crs:Xt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,m){m=Q(this,m),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),m.maxBounds&&this.setMaxBounds(m.maxBounds),m.zoom!==void 0&&(this._zoom=this._limitZoom(m.zoom)),m.center&&m.zoom!==void 0&&this.setView(yt(m.center),m.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ei&&Kt.any3d&&!Kt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ae(this._proxy,Dr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,m,w){if(m=m===void 0?this._zoom:this._limitZoom(m),u=this._limitCenter(yt(u),m,this.options.maxBounds),w=w||{},this._stop(),this._loaded&&!w.reset&&w!==!0){w.animate!==void 0&&(w.zoom=r({animate:w.animate},w.zoom),w.pan=r({animate:w.animate,duration:w.duration},w.pan));var N=this._zoom!==m?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,m,w.zoom):this._tryAnimatedPan(u,w.pan);if(N)return clearTimeout(this._sizeTimer),this}return this._resetView(u,m,w.pan&&w.pan.noMoveStart),this},setZoom:function(u,m){return this._loaded?this.setView(this.getCenter(),u,{zoom:m}):(this._zoom=u,this)},zoomIn:function(u,m){return u=u||(Kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,m)},zoomOut:function(u,m){return u=u||(Kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,m)},setZoomAround:function(u,m,w){var N=this.getZoomScale(m),F=this.getSize().divideBy(2),ot=u instanceof P?u:this.latLngToContainerPoint(u),mt=ot.subtract(F).multiplyBy(1-1/N),wt=this.containerPointToLatLng(F.add(mt));return this.setView(wt,m,{zoom:w})},_getBoundsCenterZoom:function(u,m){m=m||{},u=u.getBounds?u.getBounds():gt(u);var w=J(m.paddingTopLeft||m.padding||[0,0]),N=J(m.paddingBottomRight||m.padding||[0,0]),F=this.getBoundsZoom(u,!1,w.add(N));if(F=typeof m.maxZoom=="number"?Math.min(m.maxZoom,F):F,F===1/0)return{center:u.getCenter(),zoom:F};var ot=N.subtract(w).divideBy(2),mt=this.project(u.getSouthWest(),F),wt=this.project(u.getNorthEast(),F),Ct=this.unproject(mt.add(wt).divideBy(2).add(ot),F);return{center:Ct,zoom:F}},fitBounds:function(u,m){if(u=gt(u),!u.isValid())throw new Error("Bounds are not valid.");var w=this._getBoundsCenterZoom(u,m);return this.setView(w.center,w.zoom,m)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,m){return this.setView(u,this._zoom,{pan:m})},panBy:function(u,m){if(u=J(u).round(),m=m||{},!u.x&&!u.y)return this.fire("moveend");if(m.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ts,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),m.noMoveStart||this.fire("movestart"),m.animate!==!1){fe(this._mapPane,"leaflet-pan-anim");var w=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,w,m.duration||.25,m.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,m,w){if(w=w||{},w.animate===!1||!Kt.any3d)return this.setView(u,m,w);this._stop();var N=this.project(this.getCenter()),F=this.project(u),ot=this.getSize(),mt=this._zoom;u=yt(u),m=m===void 0?mt:m;var wt=Math.max(ot.x,ot.y),Ct=wt*this.getZoomScale(mt,m),Pt=F.distanceTo(N)||1,Ht=1.42,ne=Ht*Ht;function Ee(Cn){var ss=Cn?-1:1,ea=Cn?Ct:wt,iu=Ct*Ct-wt*wt+ss*ne*ne*Pt*Pt,Mo=2*ea*ne*Pt,No=iu/Mo,Ts=Math.sqrt(No*No+1)-No,as=Ts<1e-9?-18:Math.log(Ts);return as}function si(Cn){return(Math.exp(Cn)-Math.exp(-Cn))/2}function In(Cn){return(Math.exp(Cn)+Math.exp(-Cn))/2}function Bi(Cn){return si(Cn)/In(Cn)}var Ge=Ee(0);function He(Cn){return wt*(In(Ge)/In(Ge+Ht*Cn))}function Ce(Cn){return wt*(In(Ge)*Bi(Ge+Ht*Cn)-si(Ge))/ne}function bs(Cn){return 1-Math.pow(1-Cn,1.5)}var nr=Date.now(),ul=(Ee(1)-Ge)/Ht,Ls=w.duration?1e3*w.duration:1e3*ul*.8;function nu(){var Cn=(Date.now()-nr)/Ls,ss=bs(Cn)*ul;Cn<=1?(this._flyToFrame=X(nu,this),this._move(this.unproject(N.add(F.subtract(N).multiplyBy(Ce(ss)/Pt)),mt),this.getScaleZoom(wt/He(ss),mt),{flyTo:!0})):this._move(u,m)._moveEnd(!0)}return this._moveStart(!0,w.noMoveStart),nu.call(this),this},flyToBounds:function(u,m){var w=this._getBoundsCenterZoom(u,m);return this.flyTo(w.center,w.zoom,m)},setMaxBounds:function(u){return u=gt(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var m=this.options.minZoom;return this.options.minZoom=u,this._loaded&&m!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var m=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&m!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,m){this._enforcingBounds=!0;var w=this.getCenter(),N=this._limitCenter(w,this._zoom,gt(u));return w.equals(N)||this.panTo(N,m),this._enforcingBounds=!1,this},panInside:function(u,m){m=m||{};var w=J(m.paddingTopLeft||m.padding||[0,0]),N=J(m.paddingBottomRight||m.padding||[0,0]),F=this.project(this.getCenter()),ot=this.project(u),mt=this.getPixelBounds(),wt=K([mt.min.add(w),mt.max.subtract(N)]),Ct=wt.getSize();if(!wt.contains(ot)){this._enforcingBounds=!0;var Pt=ot.subtract(wt.getCenter()),Ht=wt.extend(ot).getSize().subtract(Ct);F.x+=Pt.x<0?-Ht.x:Ht.x,F.y+=Pt.y<0?-Ht.y:Ht.y,this.panTo(this.unproject(F),m),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=r({animate:!1,pan:!0},u===!0?{animate:!0}:u);var m=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var w=this.getSize(),N=m.divideBy(2).round(),F=w.divideBy(2).round(),ot=N.subtract(F);return!ot.x&&!ot.y?this:(u.animate&&u.pan?this.panBy(ot):(u.pan&&this._rawPanBy(ot),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:m,newSize:w}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=r({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var m=f(this._handleGeolocationResponse,this),w=f(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(m,w,u):navigator.geolocation.getCurrentPosition(m,w,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var m=u.code,w=u.message||(m===1?"permission denied":m===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:m,message:"Geolocation error: "+w+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var m=u.coords.latitude,w=u.coords.longitude,N=new pt(m,w),F=N.toBounds(u.coords.accuracy*2),ot=this._locateOptions;if(ot.setView){var mt=this.getBoundsZoom(F);this.setView(N,ot.maxZoom?Math.min(mt,ot.maxZoom):mt)}var wt={latlng:N,bounds:F,timestamp:u.timestamp};for(var Ct in u.coords)typeof u.coords[Ct]=="number"&&(wt[Ct]=u.coords[Ct]);this.fire("locationfound",wt)}},addHandler:function(u,m){if(!m)return this;var w=this[u]=new m(this);return this._handlers.push(w),this.options[u]&&w.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ke(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)Ke(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,m){var w="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),N=xe("div",w,m||this._mapPane);return u&&(this._panes[u]=N),N},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),m=this.unproject(u.getBottomLeft()),w=this.unproject(u.getTopRight());return new ct(m,w)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,m,w){u=gt(u),w=J(w||[0,0]);var N=this.getZoom()||0,F=this.getMinZoom(),ot=this.getMaxZoom(),mt=u.getNorthWest(),wt=u.getSouthEast(),Ct=this.getSize().subtract(w),Pt=K(this.project(wt,N),this.project(mt,N)).getSize(),Ht=Kt.any3d?this.options.zoomSnap:1,ne=Ct.x/Pt.x,Ee=Ct.y/Pt.y,si=m?Math.max(ne,Ee):Math.min(ne,Ee);return N=this.getScaleZoom(si,N),Ht&&(N=Math.round(N/(Ht/100))*(Ht/100),N=m?Math.ceil(N/Ht)*Ht:Math.floor(N/Ht)*Ht),Math.max(F,Math.min(ot,N))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,m){var w=this._getTopLeftPoint(u,m);return new U(w,w.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,m){var w=this.options.crs;return m=m===void 0?this._zoom:m,w.scale(u)/w.scale(m)},getScaleZoom:function(u,m){var w=this.options.crs;m=m===void 0?this._zoom:m;var N=w.zoom(u*w.scale(m));return isNaN(N)?1/0:N},project:function(u,m){return m=m===void 0?this._zoom:m,this.options.crs.latLngToPoint(yt(u),m)},unproject:function(u,m){return m=m===void 0?this._zoom:m,this.options.crs.pointToLatLng(J(u),m)},layerPointToLatLng:function(u){var m=J(u).add(this.getPixelOrigin());return this.unproject(m)},latLngToLayerPoint:function(u){var m=this.project(yt(u))._round();return m._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(yt(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(gt(u))},distance:function(u,m){return this.options.crs.distance(yt(u),yt(m))},containerPointToLayerPoint:function(u){return J(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return J(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var m=this.containerPointToLayerPoint(J(u));return this.layerPointToLatLng(m)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(yt(u)))},mouseEventToContainerPoint:function(u){return vs(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var m=this._container=Bs(u);if(m){if(m._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ae(m,"scroll",this._onScroll,this),this._containerId=y(m)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&Kt.any3d,fe(u,"leaflet-container"+(Kt.touch?" leaflet-touch":"")+(Kt.retina?" leaflet-retina":"")+(Kt.ielt9?" leaflet-oldie":"")+(Kt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var m=Yi(u,"position");m!=="absolute"&&m!=="relative"&&m!=="fixed"&&m!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),tn(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(fe(u.markerPane,"leaflet-zoom-hide"),fe(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,m,w){tn(this._mapPane,new P(0,0));var N=!this._loaded;this._loaded=!0,m=this._limitZoom(m),this.fire("viewprereset");var F=this._zoom!==m;this._moveStart(F,w)._move(u,m)._moveEnd(F),this.fire("viewreset"),N&&this.fire("load")},_moveStart:function(u,m){return u&&this.fire("zoomstart"),m||this.fire("movestart"),this},_move:function(u,m,w,N){m===void 0&&(m=this._zoom);var F=this._zoom!==m;return this._zoom=m,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),N?w&&w.pinch&&this.fire("zoom",w):((F||w&&w.pinch)&&this.fire("zoom",w),this.fire("move",w)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){tn(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[y(this._container)]=this;var m=u?je:ae;m(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&m(window,"resize",this._onResize,this),Kt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Z(this._resizeRequest),this._resizeRequest=X(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,m){for(var w=[],N,F=m==="mouseout"||m==="mouseover",ot=u.target||u.srcElement,mt=!1;ot;){if(N=this._targets[y(ot)],N&&(m==="click"||m==="preclick")&&this._draggableMoved(N)){mt=!0;break}if(N&&N.listens(m,!0)&&(F&&!Xi(ot,u)||(w.push(N),F))||ot===this._container)break;ot=ot.parentNode}return!w.length&&!mt&&!F&&this.listens(m,!0)&&(w=[this]),w},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var m=u.target||u.srcElement;if(!(!this._loaded||m._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(m))){var w=u.type;w==="mousedown"&&ps(m),this._fireDOMEvent(u,w)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,m,w){if(u.type==="click"){var N=r({},u);N.type="preclick",this._fireDOMEvent(N,N.type,w)}var F=this._findEventTargets(u,m);if(w){for(var ot=[],mt=0;mt<w.length;mt++)w[mt].listens(m,!0)&&ot.push(w[mt]);F=ot.concat(F)}if(F.length){m==="contextmenu"&&rn(u);var wt=F[0],Ct={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var Pt=wt.getLatLng&&(!wt._radius||wt._radius<=10);Ct.containerPoint=Pt?this.latLngToContainerPoint(wt.getLatLng()):this.mouseEventToContainerPoint(u),Ct.layerPoint=this.containerPointToLayerPoint(Ct.containerPoint),Ct.latlng=Pt?wt.getLatLng():this.layerPointToLatLng(Ct.layerPoint)}for(mt=0;mt<F.length;mt++)if(F[mt].fire(m,Ct,!0),Ct.originalEvent._stopped||F[mt].options.bubblingMouseEvents===!1&&V(this._mouseEvents,m)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,m=this._handlers.length;u<m;u++)this._handlers[u].disable()},whenReady:function(u,m){return this._loaded?u.call(m||this,{target:this}):this.on("load",u,m),this},_getMapPanePos:function(){return pr(this._mapPane)||new P(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,m){var w=u&&m!==void 0?this._getNewPixelOrigin(u,m):this.getPixelOrigin();return w.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,m){var w=this.getSize()._divideBy(2);return this.project(u,m)._subtract(w)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,m,w){var N=this._getNewPixelOrigin(w,m);return this.project(u,m)._subtract(N)},_latLngBoundsToNewLayerBounds:function(u,m,w){var N=this._getNewPixelOrigin(w,m);return K([this.project(u.getSouthWest(),m)._subtract(N),this.project(u.getNorthWest(),m)._subtract(N),this.project(u.getSouthEast(),m)._subtract(N),this.project(u.getNorthEast(),m)._subtract(N)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,m,w){if(!w)return u;var N=this.project(u,m),F=this.getSize().divideBy(2),ot=new U(N.subtract(F),N.add(F)),mt=this._getBoundsOffset(ot,w,m);return Math.abs(mt.x)<=1&&Math.abs(mt.y)<=1?u:this.unproject(N.add(mt),m)},_limitOffset:function(u,m){if(!m)return u;var w=this.getPixelBounds(),N=new U(w.min.add(u),w.max.add(u));return u.add(this._getBoundsOffset(N,m))},_getBoundsOffset:function(u,m,w){var N=K(this.project(m.getNorthEast(),w),this.project(m.getSouthWest(),w)),F=N.min.subtract(u.min),ot=N.max.subtract(u.max),mt=this._rebound(F.x,-ot.x),wt=this._rebound(F.y,-ot.y);return new P(mt,wt)},_rebound:function(u,m){return u+m>0?Math.round(u-m)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(m))},_limitZoom:function(u){var m=this.getMinZoom(),w=this.getMaxZoom(),N=Kt.any3d?this.options.zoomSnap:1;return N&&(u=Math.round(u/N)*N),Math.max(m,Math.min(w,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Pe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,m){var w=this._getCenterOffset(u)._trunc();return(m&&m.animate)!==!0&&!this.getSize().contains(w)?!1:(this.panBy(w,m),!0)},_createAnimProxy:function(){var u=this._proxy=xe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(m){var w=Ar,N=this._proxy.style[w];gr(this._proxy,this.project(m.center,m.zoom),this.getZoomScale(m.zoom,1)),N===this._proxy.style[w]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ke(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),m=this.getZoom();gr(this._proxy,this.project(u,m),this.getZoomScale(m,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,m,w){if(this._animatingZoom)return!0;if(w=w||{},!this._zoomAnimated||w.animate===!1||this._nothingToAnimate()||Math.abs(m-this._zoom)>this.options.zoomAnimationThreshold)return!1;var N=this.getZoomScale(m),F=this._getCenterOffset(u)._divideBy(1-1/N);return w.animate!==!0&&!this.getSize().contains(F)?!1:(X(function(){this._moveStart(!0,w.noMoveStart||!1)._animateZoom(u,m,!0)},this),!0)},_animateZoom:function(u,m,w,N){this._mapPane&&(w&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=m,fe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:m,noUpdate:N}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Pe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ys(u,m){return new de(u,m)}var pi=at.extend({options:{position:"topright"},initialize:function(u){Q(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var m=this._map;return m&&m.removeControl(this),this.options.position=u,m&&m.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var m=this._container=this.onAdd(u),w=this.getPosition(),N=u._controlCorners[w];return fe(m,"leaflet-control"),w.indexOf("bottom")!==-1?N.insertBefore(m,N.firstChild):N.appendChild(m),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ke(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),En=function(u){return new pi(u)};de.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},m="leaflet-",w=this._controlContainer=xe("div",m+"control-container",this._container);function N(F,ot){var mt=m+F+" "+m+ot;u[F+ot]=xe("div",mt,w)}N("top","left"),N("top","right"),N("bottom","left"),N("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)Ke(this._controlCorners[u]);Ke(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Vi=pi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,m,w,N){return w<N?-1:N<w?1:0}},initialize:function(u,m,w){Q(this,w),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var N in u)this._addLayer(u[N],N);for(N in m)this._addLayer(m[N],N,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var m=0;m<this._layers.length;m++)this._layers[m].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return pi.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,m){return this._addLayer(u,m),this._map?this._update():this},addOverlay:function(u,m){return this._addLayer(u,m,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var m=this._getLayer(y(u));return m&&this._layers.splice(this._layers.indexOf(m),1),this._map?this._update():this},expand:function(){fe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(fe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):Pe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Pe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",m=this._container=xe("div",u),w=this.options.collapsed;m.setAttribute("aria-haspopup",!0),Rr(m),Ti(m);var N=this._section=xe("section",u+"-list");w&&(this._map.on("click",this.collapse,this),ae(m,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var F=this._layersLink=xe("a",u+"-toggle",m);F.href="#",F.title="Layers",F.setAttribute("role","button"),ae(F,{keydown:function(ot){ot.keyCode===13&&this._expandSafely()},click:function(ot){rn(ot),this._expandSafely()}},this),w||this.expand(),this._baseLayersList=xe("div",u+"-base",N),this._separator=xe("div",u+"-separator",N),this._overlaysList=xe("div",u+"-overlays",N),m.appendChild(N)},_getLayer:function(u){for(var m=0;m<this._layers.length;m++)if(this._layers[m]&&y(this._layers[m].layer)===u)return this._layers[m]},_addLayer:function(u,m,w){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:m,overlay:w}),this.options.sortLayers&&this._layers.sort(f(function(N,F){return this.options.sortFunction(N.layer,F.layer,N.name,F.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;bi(this._baseLayersList),bi(this._overlaysList),this._layerControlInputs=[];var u,m,w,N,F=0;for(w=0;w<this._layers.length;w++)N=this._layers[w],this._addItem(N),m=m||N.overlay,u=u||!N.overlay,F+=N.overlay?0:1;return this.options.hideSingleBase&&(u=u&&F>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=m&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var m=this._getLayer(y(u.target)),w=m.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;w&&this._map.fire(w,m)},_createRadioElement:function(u,m){var w='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(m?' checked="checked"':"")+"/>",N=document.createElement("div");return N.innerHTML=w,N.firstChild},_addItem:function(u){var m=document.createElement("label"),w=this._map.hasLayer(u.layer),N;u.overlay?(N=document.createElement("input"),N.type="checkbox",N.className="leaflet-control-layers-selector",N.defaultChecked=w):N=this._createRadioElement("leaflet-base-layers_"+y(this),w),this._layerControlInputs.push(N),N.layerId=y(u.layer),ae(N,"click",this._onInputClick,this);var F=document.createElement("span");F.innerHTML=" "+u.name;var ot=document.createElement("span");m.appendChild(ot),ot.appendChild(N),ot.appendChild(F);var mt=u.overlay?this._overlaysList:this._baseLayersList;return mt.appendChild(m),this._checkDisabledLayers(),m},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,m,w,N=[],F=[];this._handlingClick=!0;for(var ot=u.length-1;ot>=0;ot--)m=u[ot],w=this._getLayer(m.layerId).layer,m.checked?N.push(w):m.checked||F.push(w);for(ot=0;ot<F.length;ot++)this._map.hasLayer(F[ot])&&this._map.removeLayer(F[ot]);for(ot=0;ot<N.length;ot++)this._map.hasLayer(N[ot])||this._map.addLayer(N[ot]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,m,w,N=this._map.getZoom(),F=u.length-1;F>=0;F--)m=u[F],w=this._getLayer(m.layerId).layer,m.disabled=w.options.minZoom!==void 0&&N<w.options.minZoom||w.options.maxZoom!==void 0&&N>w.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,ae(u,"click",rn),this.expand();var m=this;setTimeout(function(){je(u,"click",rn),m._preventClick=!1})}}),Wo=function(u,m,w){return new Vi(u,m,w)},Pr=pi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var m="leaflet-control-zoom",w=xe("div",m+" leaflet-bar"),N=this.options;return this._zoomInButton=this._createButton(N.zoomInText,N.zoomInTitle,m+"-in",w,this._zoomIn),this._zoomOutButton=this._createButton(N.zoomOutText,N.zoomOutTitle,m+"-out",w,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),w},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,m,w,N,F){var ot=xe("a",w,N);return ot.innerHTML=u,ot.href="#",ot.title=m,ot.setAttribute("role","button"),ot.setAttribute("aria-label",m),Rr(ot),ae(ot,"click",yr),ae(ot,"click",F,this),ae(ot,"click",this._refocusOnMap,this),ot},_updateDisabled:function(){var u=this._map,m="leaflet-disabled";Pe(this._zoomInButton,m),Pe(this._zoomOutButton,m),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(fe(this._zoomOutButton,m),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(fe(this._zoomInButton,m),this._zoomInButton.setAttribute("aria-disabled","true"))}});de.mergeOptions({zoomControl:!0}),de.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Pr,this.addControl(this.zoomControl))});var Jo=function(u){return new Pr(u)},es=pi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var m="leaflet-control-scale",w=xe("div",m),N=this.options;return this._addScales(N,m+"-line",w),u.on(N.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),w},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,m,w){u.metric&&(this._mScale=xe("div",m,w)),u.imperial&&(this._iScale=xe("div",m,w))},_update:function(){var u=this._map,m=u.getSize().y/2,w=u.distance(u.containerPointToLatLng([0,m]),u.containerPointToLatLng([this.options.maxWidth,m]));this._updateScales(w)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var m=this._getRoundNum(u),w=m<1e3?m+" m":m/1e3+" km";this._updateScale(this._mScale,w,m/u)},_updateImperial:function(u){var m=u*3.2808399,w,N,F;m>5280?(w=m/5280,N=this._getRoundNum(w),this._updateScale(this._iScale,N+" mi",N/w)):(F=this._getRoundNum(m),this._updateScale(this._iScale,F+" ft",F/m))},_updateScale:function(u,m,w){u.style.width=Math.round(this.options.maxWidth*w)+"px",u.innerHTML=m},_getRoundNum:function(u){var m=Math.pow(10,(Math.floor(u)+"").length-1),w=u/m;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:1,m*w}}),yo=function(u){return new es(u)},Qi='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Oa=pi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Kt.inlineSvg?Qi+" ":"")+"Leaflet</a>"},initialize:function(u){Q(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=xe("div","leaflet-control-attribution"),Rr(this._container);for(var m in u._layers)u._layers[m].getAttribution&&this.addAttribution(u._layers[m].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var m in this._attributions)this._attributions[m]&&u.push(m);var w=[];this.options.prefix&&w.push(this.options.prefix),u.length&&w.push(u.join(", ")),this._container.innerHTML=w.join(' <span aria-hidden="true">|</span> ')}}});de.mergeOptions({attributionControl:!0}),de.addInitHook(function(){this.options.attributionControl&&new Oa().addTo(this)});var Wl=function(u){return new Oa(u)};pi.Layers=Vi,pi.Zoom=Pr,pi.Scale=es,pi.Attribution=Oa,En.layers=Wo,En.zoom=Jo,En.scale=yo,En.attribution=Wl;var Wi=at.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Wi.addTo=function(u,m){return u.addHandler(m,this),this};var Jl={Events:D},_o=Kt.touch?"touchstart mousedown":"mousedown",zr=z.extend({options:{clickTolerance:3},initialize:function(u,m,w,N){Q(this,N),this._element=u,this._dragStartTarget=m||u,this._preventOutline=w},enable:function(){this._enabled||(ae(this._dragStartTarget,_o,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(zr._dragging===this&&this.finishDrag(!0),je(this._dragStartTarget,_o,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!Ca(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){zr._dragging===this&&this.finishDrag();return}if(!(zr._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(zr._dragging=this,this._preventOutline&&ps(this._element),ka(),Zi(),!this._moving)){this.fire("down");var m=u.touches?u.touches[0]:u,w=ni(this._element);this._startPoint=new P(m.clientX,m.clientY),this._startPos=pr(this._element),this._parentScale=Fn(w);var N=u.type==="mousedown";ae(document,N?"mousemove":"touchmove",this._onMove,this),ae(document,N?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var m=u.touches&&u.touches.length===1?u.touches[0]:u,w=new P(m.clientX,m.clientY)._subtract(this._startPoint);!w.x&&!w.y||Math.abs(w.x)+Math.abs(w.y)<this.options.clickTolerance||(w.x/=this._parentScale.x,w.y/=this._parentScale.y,rn(u),this._moved||(this.fire("dragstart"),this._moved=!0,fe(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),fe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(w),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),tn(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){Pe(document.body,"leaflet-dragging"),this._lastTarget&&(Pe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),je(document,"mousemove touchmove",this._onMove,this),je(document,"mouseup touchend touchcancel",this._onUp,this),Kr(),Di();var m=this._moved&&this._moving;this._moving=!1,zr._dragging=!1,m&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function Ko(u,m,w){var N,F=[1,4,2,8],ot,mt,wt,Ct,Pt,Ht,ne,Ee;for(ot=0,Ht=u.length;ot<Ht;ot++)u[ot]._code=Tn(u[ot],m);for(wt=0;wt<4;wt++){for(ne=F[wt],N=[],ot=0,Ht=u.length,mt=Ht-1;ot<Ht;mt=ot++)Ct=u[ot],Pt=u[mt],Ct._code&ne?Pt._code&ne||(Ee=Fs(Pt,Ct,ne,m,w),Ee._code=Tn(Ee,m),N.push(Ee)):(Pt._code&ne&&(Ee=Fs(Pt,Ct,ne,m,w),Ee._code=Tn(Ee,m),N.push(Ee)),N.push(Ct));u=N}return u}function $o(u,m){var w,N,F,ot,mt,wt,Ct,Pt,Ht;if(!u||u.length===0)throw new Error("latlngs not passed");mi(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var ne=yt([0,0]),Ee=gt(u),si=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());si<1700&&(ne=_r(u));var In=u.length,Bi=[];for(w=0;w<In;w++){var Ge=yt(u[w]);Bi.push(m.project(yt([Ge.lat-ne.lat,Ge.lng-ne.lng])))}for(wt=Ct=Pt=0,w=0,N=In-1;w<In;N=w++)F=Bi[w],ot=Bi[N],mt=F.y*ot.x-ot.y*F.x,Ct+=(F.x+ot.x)*mt,Pt+=(F.y+ot.y)*mt,wt+=mt*3;wt===0?Ht=Bi[0]:Ht=[Ct/wt,Pt/wt];var He=m.unproject(J(Ht));return yt([He.lat+ne.lat,He.lng+ne.lng])}function _r(u){for(var m=0,w=0,N=0,F=0;F<u.length;F++){var ot=yt(u[F]);m+=ot.lat,w+=ot.lng,N++}return yt([m/N,w/N])}var ii={__proto__:null,clipPolygon:Ko,polygonCenter:$o,centroid:_r};function tl(u,m){if(!m||!u.length)return u.slice();var w=m*m;return u=Eo(u,w),u=Aa(u,w),u}function xo(u,m,w){return Math.sqrt(Gs(u,m,w,!0))}function Kl(u,m,w){return Gs(u,m,w)}function Aa(u,m){var w=u.length,N=typeof Uint8Array<"u"?Uint8Array:Array,F=new N(w);F[0]=F[w-1]=1,Da(u,F,m,0,w-1);var ot,mt=[];for(ot=0;ot<w;ot++)F[ot]&&mt.push(u[ot]);return mt}function Da(u,m,w,N,F){var ot=0,mt,wt,Ct;for(wt=N+1;wt<=F-1;wt++)Ct=Gs(u[wt],u[N],u[F],!0),Ct>ot&&(mt=wt,ot=Ct);ot>w&&(m[mt]=1,Da(u,m,w,N,mt),Da(u,m,w,mt,F))}function Eo(u,m){for(var w=[u[0]],N=1,F=0,ot=u.length;N<ot;N++)qs(u[N],u[F])>m&&(w.push(u[N]),F=N);return F<ot-1&&w.push(u[ot-1]),w}var wo;function Ci(u,m,w,N,F){var ot=N?wo:Tn(u,w),mt=Tn(m,w),wt,Ct,Pt;for(wo=mt;;){if(!(ot|mt))return[u,m];if(ot&mt)return!1;wt=ot||mt,Ct=Fs(u,m,wt,w,F),Pt=Tn(Ct,w),wt===ot?(u=Ct,ot=Pt):(m=Ct,mt=Pt)}}function Fs(u,m,w,N,F){var ot=m.x-u.x,mt=m.y-u.y,wt=N.min,Ct=N.max,Pt,Ht;return w&8?(Pt=u.x+ot*(Ct.y-u.y)/mt,Ht=Ct.y):w&4?(Pt=u.x+ot*(wt.y-u.y)/mt,Ht=wt.y):w&2?(Pt=Ct.x,Ht=u.y+mt*(Ct.x-u.x)/ot):w&1&&(Pt=wt.x,Ht=u.y+mt*(wt.x-u.x)/ot),new P(Pt,Ht,F)}function Tn(u,m){var w=0;return u.x<m.min.x?w|=1:u.x>m.max.x&&(w|=2),u.y<m.min.y?w|=4:u.y>m.max.y&&(w|=8),w}function qs(u,m){var w=m.x-u.x,N=m.y-u.y;return w*w+N*N}function Gs(u,m,w,N){var F=m.x,ot=m.y,mt=w.x-F,wt=w.y-ot,Ct=mt*mt+wt*wt,Pt;return Ct>0&&(Pt=((u.x-F)*mt+(u.y-ot)*wt)/Ct,Pt>1?(F=w.x,ot=w.y):Pt>0&&(F+=mt*Pt,ot+=wt*Pt)),mt=u.x-F,wt=u.y-ot,N?mt*mt+wt*wt:new P(F,ot)}function mi(u){return!Y(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function Hs(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mi(u)}function ns(u,m){var w,N,F,ot,mt,wt,Ct,Pt;if(!u||u.length===0)throw new Error("latlngs not passed");mi(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Ht=yt([0,0]),ne=gt(u),Ee=ne.getNorthWest().distanceTo(ne.getSouthWest())*ne.getNorthEast().distanceTo(ne.getNorthWest());Ee<1700&&(Ht=_r(u));var si=u.length,In=[];for(w=0;w<si;w++){var Bi=yt(u[w]);In.push(m.project(yt([Bi.lat-Ht.lat,Bi.lng-Ht.lng])))}for(w=0,N=0;w<si-1;w++)N+=In[w].distanceTo(In[w+1])/2;if(N===0)Pt=In[0];else for(w=0,ot=0;w<si-1;w++)if(mt=In[w],wt=In[w+1],F=mt.distanceTo(wt),ot+=F,ot>N){Ct=(ot-N)/F,Pt=[wt.x-Ct*(wt.x-mt.x),wt.y-Ct*(wt.y-mt.y)];break}var Ge=m.unproject(J(Pt));return yt([Ge.lat+Ht.lat,Ge.lng+Ht.lng])}var So={__proto__:null,simplify:tl,pointToSegmentDistance:xo,closestPointOnSegment:Kl,clipSegment:Ci,_getEdgeIntersection:Fs,_getBitCode:Tn,_sqClosestPointOnSegment:Gs,isFlat:mi,_flat:Hs,polylineCenter:ns},Ia={project:function(u){return new P(u.lng,u.lat)},unproject:function(u){return new pt(u.y,u.x)},bounds:new U([-180,-90],[180,90])},Ra={R:6378137,R_MINOR:6356752314245179e-9,bounds:new U([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var m=Math.PI/180,w=this.R,N=u.lat*m,F=this.R_MINOR/w,ot=Math.sqrt(1-F*F),mt=ot*Math.sin(N),wt=Math.tan(Math.PI/4-N/2)/Math.pow((1-mt)/(1+mt),ot/2);return N=-w*Math.log(Math.max(wt,1e-10)),new P(u.lng*m*w,N)},unproject:function(u){for(var m=180/Math.PI,w=this.R,N=this.R_MINOR/w,F=Math.sqrt(1-N*N),ot=Math.exp(-u.y/w),mt=Math.PI/2-2*Math.atan(ot),wt=0,Ct=.1,Pt;wt<15&&Math.abs(Ct)>1e-7;wt++)Pt=F*Math.sin(mt),Pt=Math.pow((1-Pt)/(1+Pt),F/2),Ct=Math.PI/2-2*Math.atan(ot*Pt)-mt,mt+=Ct;return new pt(mt*m,u.x*m/w)}},el={__proto__:null,LonLat:Ia,Mercator:Ra,SphericalMercator:It},nl=r({},ht,{code:"EPSG:3395",projection:Ra,transformation:(function(){var u=.5/(Math.PI*Ra.R);return ft(u,.5,-u,.5)})()}),bo=r({},ht,{code:"EPSG:4326",projection:Ia,transformation:ft(1/180,1,-1/180,.5)}),_s=r({},Tt,{projection:Ia,transformation:ft(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,m){var w=m.lng-u.lng,N=m.lat-u.lat;return Math.sqrt(w*w+N*N)},infinite:!0});Tt.Earth=ht,Tt.EPSG3395=nl,Tt.EPSG3857=Xt,Tt.EPSG900913=Zt,Tt.EPSG4326=bo,Tt.Simple=_s;var Ri=z.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[y(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[y(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var m=u.target;if(m.hasLayer(this)){if(this._map=m,this._zoomAnimated=m._zoomAnimated,this.getEvents){var w=this.getEvents();m.on(w,this),this.once("remove",function(){m.off(w,this)},this)}this.onAdd(m),this.fire("add"),m.fire("layeradd",{layer:this})}}});de.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var m=y(u);return this._layers[m]?this:(this._layers[m]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var m=y(u);return this._layers[m]?(this._loaded&&u.onRemove(this),delete this._layers[m],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return y(u)in this._layers},eachLayer:function(u,m){for(var w in this._layers)u.call(m,this._layers[w]);return this},_addLayers:function(u){u=u?Y(u)?u:[u]:[];for(var m=0,w=u.length;m<w;m++)this.addLayer(u[m])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[y(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var m=y(u);this._zoomBoundLayers[m]&&(delete this._zoomBoundLayers[m],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,m=-1/0,w=this._getZoomSpan();for(var N in this._zoomBoundLayers){var F=this._zoomBoundLayers[N].options;u=F.minZoom===void 0?u:Math.min(u,F.minZoom),m=F.maxZoom===void 0?m:Math.max(m,F.maxZoom)}this._layersMaxZoom=m===-1/0?void 0:m,this._layersMinZoom=u===1/0?void 0:u,w!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xs=Ri.extend({initialize:function(u,m){Q(this,m),this._layers={};var w,N;if(u)for(w=0,N=u.length;w<N;w++)this.addLayer(u[w])},addLayer:function(u){var m=this.getLayerId(u);return this._layers[m]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var m=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[m]&&this._map.removeLayer(this._layers[m]),delete this._layers[m],this},hasLayer:function(u){var m=typeof u=="number"?u:this.getLayerId(u);return m in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var m=Array.prototype.slice.call(arguments,1),w,N;for(w in this._layers)N=this._layers[w],N[u]&&N[u].apply(N,m);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,m){for(var w in this._layers)u.call(m,this._layers[w]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return y(u)}}),il=function(u,m){return new xs(u,m)},Ji=xs.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),xs.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),xs.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new ct;for(var m in this._layers){var w=this._layers[m];u.extend(w.getBounds?w.getBounds():w.getLatLng())}return u}}),Lo=function(u,m){return new Ji(u,m)},Ki=at.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){Q(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,m){var w=this._getIconUrl(u);if(!w){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var N=this._createImg(w,m&&m.tagName==="IMG"?m:null);return this._setIconStyles(N,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(N.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),N},_setIconStyles:function(u,m){var w=this.options,N=w[m+"Size"];typeof N=="number"&&(N=[N,N]);var F=J(N),ot=J(m==="shadow"&&w.shadowAnchor||w.iconAnchor||F&&F.divideBy(2,!0));u.className="leaflet-marker-"+m+" "+(w.className||""),ot&&(u.style.marginLeft=-ot.x+"px",u.style.marginTop=-ot.y+"px"),F&&(u.style.width=F.x+"px",u.style.height=F.y+"px")},_createImg:function(u,m){return m=m||document.createElement("img"),m.src=u,m},_getIconUrl:function(u){return Kt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function Ys(u){return new Ki(u)}var Zs=Ki.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof Zs.imagePath!="string"&&(Zs.imagePath=this._detectIconPath()),(this.options.imagePath||Zs.imagePath)+Ki.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var m=function(w,N,F){var ot=N.exec(w);return ot&&ot[F]};return u=m(u,/^url\((['"])?(.+)\1\)$/,2),u&&m(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=xe("div","leaflet-default-icon-path",document.body),m=Yi(u,"background-image")||Yi(u,"backgroundImage");if(document.body.removeChild(u),m=this._stripUrl(m),m)return m;var w=document.querySelector('link[href$="leaflet.css"]');return w?w.href.substring(0,w.href.length-11-1):""}}),Xs=Wi.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new zr(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),fe(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Pe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var m=this._marker,w=m._map,N=this._marker.options.autoPanSpeed,F=this._marker.options.autoPanPadding,ot=pr(m._icon),mt=w.getPixelBounds(),wt=w.getPixelOrigin(),Ct=K(mt.min._subtract(wt).add(F),mt.max._subtract(wt).subtract(F));if(!Ct.contains(ot)){var Pt=J((Math.max(Ct.max.x,ot.x)-Ct.max.x)/(mt.max.x-Ct.max.x)-(Math.min(Ct.min.x,ot.x)-Ct.min.x)/(mt.min.x-Ct.min.x),(Math.max(Ct.max.y,ot.y)-Ct.max.y)/(mt.max.y-Ct.max.y)-(Math.min(Ct.min.y,ot.y)-Ct.min.y)/(mt.min.y-Ct.min.y)).multiplyBy(N);w.panBy(Pt,{animate:!1}),this._draggable._newPos._add(Pt),this._draggable._startPos._add(Pt),tn(m._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=X(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(Z(this._panRequest),this._panRequest=X(this._adjustPan.bind(this,u)))},_onDrag:function(u){var m=this._marker,w=m._shadow,N=pr(m._icon),F=m._map.layerPointToLatLng(N);w&&tn(w,N),m._latlng=F,u.latlng=F,u.oldLatLng=this._oldLatLng,m.fire("move",u).fire("drag",u)},_onDragEnd:function(u){Z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Vs=Ri.extend({options:{icon:new Zs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,m){Q(this,m),this._latlng=yt(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var m=this._latlng;return this._latlng=yt(u),this.update(),this.fire("move",{oldLatLng:m,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,m="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),w=u.icon.createIcon(this._icon),N=!1;w!==this._icon&&(this._icon&&this._removeIcon(),N=!0,u.title&&(w.title=u.title),w.tagName==="IMG"&&(w.alt=u.alt||"")),fe(w,m),u.keyboard&&(w.tabIndex="0",w.setAttribute("role","button")),this._icon=w,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ae(w,"focus",this._panOnFocus,this);var F=u.icon.createShadow(this._shadow),ot=!1;F!==this._shadow&&(this._removeShadow(),ot=!0),F&&(fe(F,m),F.alt=""),this._shadow=F,u.opacity<1&&this._updateOpacity(),N&&this.getPane().appendChild(this._icon),this._initInteraction(),F&&ot&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(this._icon,"focus",this._panOnFocus,this),Ke(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ke(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&tn(this._icon,u),this._shadow&&tn(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var m=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(m)},_initInteraction:function(){if(this.options.interactive&&(fe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Xs)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Xs(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&Fe(this._icon,u),this._shadow&&Fe(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var m=this.options.icon.options,w=m.iconSize?J(m.iconSize):J(0,0),N=m.iconAnchor?J(m.iconAnchor):J(0,0);u.panInside(this._latlng,{paddingTopLeft:N,paddingBottomRight:w.subtract(N)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function rl(u,m){return new Vs(u,m)}var $i=Ri.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return Q(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),is=$i.extend({options:{fill:!0,radius:10},initialize:function(u,m){Q(this,m),this._latlng=yt(u),this._radius=this.options.radius},setLatLng:function(u){var m=this._latlng;return this._latlng=yt(u),this.redraw(),this.fire("move",{oldLatLng:m,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var m=u&&u.radius||this._radius;return $i.prototype.setStyle.call(this,u),this.setRadius(m),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,m=this._radiusY||u,w=this._clickTolerance(),N=[u+w,m+w];this._pxBounds=new U(this._point.subtract(N),this._point.add(N))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function To(u,m){return new is(u,m)}var Qs=is.extend({initialize:function(u,m,w){if(typeof m=="number"&&(m=r({},w,{radius:m})),Q(this,m),this._latlng=yt(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new ct(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:$i.prototype.setStyle,_project:function(){var u=this._latlng.lng,m=this._latlng.lat,w=this._map,N=w.options.crs;if(N.distance===ht.distance){var F=Math.PI/180,ot=this._mRadius/ht.R/F,mt=w.project([m+ot,u]),wt=w.project([m-ot,u]),Ct=mt.add(wt).divideBy(2),Pt=w.unproject(Ct).lat,Ht=Math.acos((Math.cos(ot*F)-Math.sin(m*F)*Math.sin(Pt*F))/(Math.cos(m*F)*Math.cos(Pt*F)))/F;(isNaN(Ht)||Ht===0)&&(Ht=ot/Math.cos(Math.PI/180*m)),this._point=Ct.subtract(w.getPixelOrigin()),this._radius=isNaN(Ht)?0:Ct.x-w.project([Pt,u-Ht]).x,this._radiusY=Ct.y-mt.y}else{var ne=N.unproject(N.project(this._latlng).subtract([this._mRadius,0]));this._point=w.latLngToLayerPoint(this._latlng),this._radius=this._point.x-w.latLngToLayerPoint(ne).x}this._updateBounds()}});function sl(u,m,w){return new Qs(u,m,w)}var tr=$i.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,m){Q(this,m),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var m=1/0,w=null,N=Gs,F,ot,mt=0,wt=this._parts.length;mt<wt;mt++)for(var Ct=this._parts[mt],Pt=1,Ht=Ct.length;Pt<Ht;Pt++){F=Ct[Pt-1],ot=Ct[Pt];var ne=N(u,F,ot,!0);ne<m&&(m=ne,w=N(u,F,ot))}return w&&(w.distance=Math.sqrt(m)),w},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ns(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,m){return m=m||this._defaultShape(),u=yt(u),m.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new ct,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return mi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var m=[],w=mi(u),N=0,F=u.length;N<F;N++)w?(m[N]=yt(u[N]),this._bounds.extend(m[N])):m[N]=this._convertLatLngs(u[N]);return m},_project:function(){var u=new U;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),m=new P(u,u);this._rawPxBounds&&(this._pxBounds=new U([this._rawPxBounds.min.subtract(m),this._rawPxBounds.max.add(m)]))},_projectLatlngs:function(u,m,w){var N=u[0]instanceof pt,F=u.length,ot,mt;if(N){for(mt=[],ot=0;ot<F;ot++)mt[ot]=this._map.latLngToLayerPoint(u[ot]),w.extend(mt[ot]);m.push(mt)}else for(ot=0;ot<F;ot++)this._projectLatlngs(u[ot],m,w)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var m=this._parts,w,N,F,ot,mt,wt,Ct;for(w=0,F=0,ot=this._rings.length;w<ot;w++)for(Ct=this._rings[w],N=0,mt=Ct.length;N<mt-1;N++)wt=Ci(Ct[N],Ct[N+1],u,N,!0),wt&&(m[F]=m[F]||[],m[F].push(wt[0]),(wt[1]!==Ct[N+1]||N===mt-2)&&(m[F].push(wt[1]),F++))}},_simplifyPoints:function(){for(var u=this._parts,m=this.options.smoothFactor,w=0,N=u.length;w<N;w++)u[w]=tl(u[w],m)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,m){var w,N,F,ot,mt,wt,Ct=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(w=0,ot=this._parts.length;w<ot;w++)for(wt=this._parts[w],N=0,mt=wt.length,F=mt-1;N<mt;F=N++)if(!(!m&&N===0)&&xo(u,wt[F],wt[N])<=Ct)return!0;return!1}});function Co(u,m){return new tr(u,m)}tr._flat=Hs;var Es=tr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return $o(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var m=tr.prototype._convertLatLngs.call(this,u),w=m.length;return w>=2&&m[0]instanceof pt&&m[0].equals(m[w-1])&&m.pop(),m},_setLatLngs:function(u){tr.prototype._setLatLngs.call(this,u),mi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,m=this.options.weight,w=new P(m,m);if(u=new U(u.min.subtract(w),u.max.add(w)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var N=0,F=this._rings.length,ot;N<F;N++)ot=Ko(this._rings[N],u,!0),ot.length&&this._parts.push(ot)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var m=!1,w,N,F,ot,mt,wt,Ct,Pt;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(ot=0,Ct=this._parts.length;ot<Ct;ot++)for(w=this._parts[ot],mt=0,Pt=w.length,wt=Pt-1;mt<Pt;wt=mt++)N=w[mt],F=w[wt],N.y>u.y!=F.y>u.y&&u.x<(F.x-N.x)*(u.y-N.y)/(F.y-N.y)+N.x&&(m=!m);return m||tr.prototype._containsPoint.call(this,u,!0)}});function al(u,m){return new Es(u,m)}var er=Ji.extend({initialize:function(u,m){Q(this,m),this._layers={},u&&this.addData(u)},addData:function(u){var m=Y(u)?u:u.features,w,N,F;if(m){for(w=0,N=m.length;w<N;w++)F=m[w],(F.geometries||F.geometry||F.features||F.coordinates)&&this.addData(F);return this}var ot=this.options;if(ot.filter&&!ot.filter(u))return this;var mt=Gn(u,ot);return mt?(mt.feature=g(u),mt.defaultOptions=mt.options,this.resetStyle(mt),ot.onEachFeature&&ot.onEachFeature(u,mt),this.addLayer(mt)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=r({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(m){this._setLayerStyle(m,u)},this)},_setLayerStyle:function(u,m){u.setStyle&&(typeof m=="function"&&(m=m(u.feature)),u.setStyle(m))}});function Gn(u,m){var w=u.type==="Feature"?u.geometry:u,N=w?w.coordinates:null,F=[],ot=m&&m.pointToLayer,mt=m&&m.coordsToLatLng||xr,wt,Ct,Pt,Ht;if(!N&&!w)return null;switch(w.type){case"Point":return wt=mt(N),ws(ot,u,wt,m);case"MultiPoint":for(Pt=0,Ht=N.length;Pt<Ht;Pt++)wt=mt(N[Pt]),F.push(ws(ot,u,wt,m));return new Ji(F);case"LineString":case"MultiLineString":return Ct=Ws(N,w.type==="LineString"?0:1,mt),new tr(Ct,m);case"Polygon":case"MultiPolygon":return Ct=Ws(N,w.type==="Polygon"?1:2,mt),new Es(Ct,m);case"GeometryCollection":for(Pt=0,Ht=w.geometries.length;Pt<Ht;Pt++){var ne=Gn({geometry:w.geometries[Pt],type:"Feature",properties:u.properties},m);ne&&F.push(ne)}return new Ji(F);case"FeatureCollection":for(Pt=0,Ht=w.features.length;Pt<Ht;Pt++){var Ee=Gn(w.features[Pt],m);Ee&&F.push(Ee)}return new Ji(F);default:throw new Error("Invalid GeoJSON object.")}}function ws(u,m,w,N){return u?u(m,w):new Vs(w,N&&N.markersInheritOptions&&N)}function xr(u){return new pt(u[1],u[0],u[2])}function Ws(u,m,w){for(var N=[],F=0,ot=u.length,mt;F<ot;F++)mt=m?Ws(u[F],m-1,w):(w||xr)(u[F]),N.push(mt);return N}function Js(u,m){return u=yt(u),u.alt!==void 0?[M(u.lng,m),M(u.lat,m),M(u.alt,m)]:[M(u.lng,m),M(u.lat,m)]}function Hn(u,m,w,N){for(var F=[],ot=0,mt=u.length;ot<mt;ot++)F.push(m?Hn(u[ot],mi(u[ot])?0:m-1,w,N):Js(u[ot],N));return!m&&w&&F.length>0&&F.push(F[0].slice()),F}function Bn(u,m){return u.feature?r({},u.feature,{geometry:m}):g(m)}function g(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var a={toGeoJSON:function(u){return Bn(this,{type:"Point",coordinates:Js(this.getLatLng(),u)})}};Vs.include(a),Qs.include(a),is.include(a),tr.include({toGeoJSON:function(u){var m=!mi(this._latlngs),w=Hn(this._latlngs,m?1:0,!1,u);return Bn(this,{type:(m?"Multi":"")+"LineString",coordinates:w})}}),Es.include({toGeoJSON:function(u){var m=!mi(this._latlngs),w=m&&!mi(this._latlngs[0]),N=Hn(this._latlngs,w?2:m?1:0,!0,u);return m||(N=[N]),Bn(this,{type:(w?"Multi":"")+"Polygon",coordinates:N})}}),xs.include({toMultiPoint:function(u){var m=[];return this.eachLayer(function(w){m.push(w.toGeoJSON(u).geometry.coordinates)}),Bn(this,{type:"MultiPoint",coordinates:m})},toGeoJSON:function(u){var m=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(m==="MultiPoint")return this.toMultiPoint(u);var w=m==="GeometryCollection",N=[];return this.eachLayer(function(F){if(F.toGeoJSON){var ot=F.toGeoJSON(u);if(w)N.push(ot.geometry);else{var mt=g(ot);mt.type==="FeatureCollection"?N.push.apply(N,mt.features):N.push(mt)}}}),w?Bn(this,{geometries:N,type:"GeometryCollection"}):{type:"FeatureCollection",features:N}}});function o(u,m){return new er(u,m)}var d=o,x=Ri.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,m,w){this._url=u,this._bounds=gt(m),Q(this,w)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(fe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ke(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&zn(this._image),this},bringToBack:function(){return this._map&&Ir(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=gt(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",m=this._image=u?this._url:xe("img");if(fe(m,"leaflet-image-layer"),this._zoomAnimated&&fe(m,"leaflet-zoom-animated"),this.options.className&&fe(m,this.options.className),m.onselectstart=S,m.onmousemove=S,m.onload=f(this.fire,this,"load"),m.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=m.src;return}m.src=this._url,m.alt=this.options.alt},_animateZoom:function(u){var m=this._map.getZoomScale(u.zoom),w=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;gr(this._image,w,m)},_reset:function(){var u=this._image,m=new U(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),w=m.getSize();tn(u,m.min),u.style.width=w.x+"px",u.style.height=w.y+"px"},_updateOpacity:function(){Fe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),C=function(u,m,w){return new x(u,m,w)},I=x.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",m=this._image=u?this._url:xe("video");if(fe(m,"leaflet-image-layer"),this._zoomAnimated&&fe(m,"leaflet-zoom-animated"),this.options.className&&fe(m,this.options.className),m.onselectstart=S,m.onmousemove=S,m.onloadeddata=f(this.fire,this,"load"),u){for(var w=m.getElementsByTagName("source"),N=[],F=0;F<w.length;F++)N.push(w[F].src);this._url=w.length>0?N:[m.src];return}Y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(m.style,"objectFit")&&(m.style.objectFit="fill"),m.autoplay=!!this.options.autoplay,m.loop=!!this.options.loop,m.muted=!!this.options.muted,m.playsInline=!!this.options.playsInline;for(var ot=0;ot<this._url.length;ot++){var mt=xe("source");mt.src=this._url[ot],m.appendChild(mt)}}});function H(u,m,w){return new I(u,m,w)}var lt=x.extend({_initImage:function(){var u=this._image=this._url;fe(u,"leaflet-image-layer"),this._zoomAnimated&&fe(u,"leaflet-zoom-animated"),this.options.className&&fe(u,this.options.className),u.onselectstart=S,u.onmousemove=S}});function dt(u,m,w){return new lt(u,m,w)}var _t=Ri.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,m){u&&(u instanceof pt||Y(u))?(this._latlng=yt(u),Q(this,m)):(Q(this,u),this._source=m),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&Fe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&Fe(this._container,1),this.bringToFront(),this.options.interactive&&(fe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(Fe(this._container,0),this._removeTimeout=setTimeout(f(Ke,void 0,this._container),200)):Ke(this._container),this.options.interactive&&(Pe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=yt(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&zn(this._container),this},bringToBack:function(){return this._map&&Ir(this._container),this},_prepareOpen:function(u){var m=this._source;if(!m._map)return!1;if(m instanceof Ji){m=null;var w=this._source._layers;for(var N in w)if(w[N]._map){m=w[N];break}if(!m)return!1;this._source=m}if(!u)if(m.getCenter)u=m.getCenter();else if(m.getLatLng)u=m.getLatLng();else if(m.getBounds)u=m.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,m=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof m=="string")u.innerHTML=m;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(m)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),m=J(this.options.offset),w=this._getAnchor();this._zoomAnimated?tn(this._container,u.add(w)):m=m.add(u).add(w);var N=this._containerBottom=-m.y,F=this._containerLeft=-Math.round(this._containerWidth/2)+m.x;this._container.style.bottom=N+"px",this._container.style.left=F+"px"}},_getAnchor:function(){return[0,0]}});de.include({_initOverlay:function(u,m,w,N){var F=m;return F instanceof u||(F=new u(N).setContent(m)),w&&F.setLatLng(w),F}}),Ri.include({_initOverlay:function(u,m,w,N){var F=w;return F instanceof u?(Q(F,N),F._source=this):(F=m&&!N?m:new u(N,this),F.setContent(w)),F}});var St=_t.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,_t.prototype.openOn.call(this,u)},onAdd:function(u){_t.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof $i||this._source.on("preclick",xn))},onRemove:function(u){_t.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof $i||this._source.off("preclick",xn))},getEvents:function(){var u=_t.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",m=this._container=xe("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),w=this._wrapper=xe("div",u+"-content-wrapper",m);if(this._contentNode=xe("div",u+"-content",w),Rr(m),Ti(this._contentNode),ae(m,"contextmenu",xn),this._tipContainer=xe("div",u+"-tip-container",m),this._tip=xe("div",u+"-tip",this._tipContainer),this.options.closeButton){var N=this._closeButton=xe("a",u+"-close-button",m);N.setAttribute("role","button"),N.setAttribute("aria-label","Close popup"),N.href="#close",N.innerHTML='<span aria-hidden="true">&#215;</span>',ae(N,"click",function(F){rn(F),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,m=u.style;m.width="",m.whiteSpace="nowrap";var w=u.offsetWidth;w=Math.min(w,this.options.maxWidth),w=Math.max(w,this.options.minWidth),m.width=w+1+"px",m.whiteSpace="",m.height="";var N=u.offsetHeight,F=this.options.maxHeight,ot="leaflet-popup-scrolled";F&&N>F?(m.height=F+"px",fe(u,ot)):Pe(u,ot),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var m=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),w=this._getAnchor();tn(this._container,m.add(w))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,m=parseInt(Yi(this._container,"marginBottom"),10)||0,w=this._container.offsetHeight+m,N=this._containerWidth,F=new P(this._containerLeft,-w-this._containerBottom);F._add(pr(this._container));var ot=u.layerPointToContainerPoint(F),mt=J(this.options.autoPanPadding),wt=J(this.options.autoPanPaddingTopLeft||mt),Ct=J(this.options.autoPanPaddingBottomRight||mt),Pt=u.getSize(),Ht=0,ne=0;ot.x+N+Ct.x>Pt.x&&(Ht=ot.x+N-Pt.x+Ct.x),ot.x-Ht-wt.x<0&&(Ht=ot.x-wt.x),ot.y+w+Ct.y>Pt.y&&(ne=ot.y+w-Pt.y+Ct.y),ot.y-ne-wt.y<0&&(ne=ot.y-wt.y),(Ht||ne)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([Ht,ne]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),jt=function(u,m){return new St(u,m)};de.mergeOptions({closePopupOnClick:!0}),de.include({openPopup:function(u,m,w){return this._initOverlay(St,u,m,w).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Ri.include({bindPopup:function(u,m){return this._popup=this._initOverlay(St,this._popup,u,m),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof Ji||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){yr(u);var m=u.layer||u.target;if(this._popup._source===m&&!(m instanceof $i)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=m,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var qt=_t.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){_t.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){_t.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=_t.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",m=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=xe("div",m),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var m,w,N=this._map,F=this._container,ot=N.latLngToContainerPoint(N.getCenter()),mt=N.layerPointToContainerPoint(u),wt=this.options.direction,Ct=F.offsetWidth,Pt=F.offsetHeight,Ht=J(this.options.offset),ne=this._getAnchor();wt==="top"?(m=Ct/2,w=Pt):wt==="bottom"?(m=Ct/2,w=0):wt==="center"?(m=Ct/2,w=Pt/2):wt==="right"?(m=0,w=Pt/2):wt==="left"?(m=Ct,w=Pt/2):mt.x<ot.x?(wt="right",m=0,w=Pt/2):(wt="left",m=Ct+(Ht.x+ne.x)*2,w=Pt/2),u=u.subtract(J(m,w,!0)).add(Ht).add(ne),Pe(F,"leaflet-tooltip-right"),Pe(F,"leaflet-tooltip-left"),Pe(F,"leaflet-tooltip-top"),Pe(F,"leaflet-tooltip-bottom"),fe(F,"leaflet-tooltip-"+wt),tn(F,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&Fe(this._container,u)},_animateZoom:function(u){var m=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(m)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Qt=function(u,m){return new qt(u,m)};de.include({openTooltip:function(u,m,w){return this._initOverlay(qt,u,m,w).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Ri.include({bindTooltip:function(u,m){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(qt,this._tooltip,u,m),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var m=u?"off":"on",w={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?w.add=this._openTooltip:(w.mouseover=this._openTooltip,w.mouseout=this.closeTooltip,w.click=this._openTooltip,this._map?this._addFocusListeners():w.add=this._addFocusListeners),this._tooltip.options.sticky&&(w.mousemove=this._moveTooltip),this[m](w),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof Ji||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var m=typeof u.getElement=="function"&&u.getElement();m&&(ae(m,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),ae(m,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var m=typeof u.getElement=="function"&&u.getElement();m&&m.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var m=this;this._map.once("moveend",function(){m._openOnceFlag=!1,m._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var m=u.latlng,w,N;this._tooltip.options.sticky&&u.originalEvent&&(w=this._map.mouseEventToContainerPoint(u.originalEvent),N=this._map.containerPointToLayerPoint(w),m=this._map.layerPointToLatLng(N)),this._tooltip.setLatLng(m)}});var ee=Ki.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var m=u&&u.tagName==="DIV"?u:document.createElement("div"),w=this.options;if(w.html instanceof Element?(bi(m),m.appendChild(w.html)):m.innerHTML=w.html!==!1?w.html:"",w.bgPos){var N=J(w.bgPos);m.style.backgroundPosition=-N.x+"px "+-N.y+"px"}return this._setIconStyles(m,"icon"),m},createShadow:function(){return null}});function Te(u){return new ee(u)}Ki.Default=Zs;var pe=Ri.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Kt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){Q(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),Ke(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(zn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ir(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof P?u:new P(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var m=this.getPane().children,w=-u(-1/0,1/0),N=0,F=m.length,ot;N<F;N++)ot=m[N].style.zIndex,m[N]!==this._container&&ot&&(w=u(w,+ot));isFinite(w)&&(this.options.zIndex=w+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Kt.ielt9){Fe(this._container,this.options.opacity);var u=+new Date,m=!1,w=!1;for(var N in this._tiles){var F=this._tiles[N];if(!(!F.current||!F.loaded)){var ot=Math.min(1,(u-F.loaded)/200);Fe(F.el,ot),ot<1?m=!0:(F.active?w=!0:this._onOpaqueTile(F),F.active=!0)}}w&&!this._noPrune&&this._pruneTiles(),m&&(Z(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this))}},_onOpaqueTile:S,_initContainer:function(){this._container||(this._container=xe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,m=this.options.maxZoom;if(u!==void 0){for(var w in this._levels)w=Number(w),this._levels[w].el.children.length||w===u?(this._levels[w].el.style.zIndex=m-Math.abs(u-w),this._onUpdateLevel(w)):(Ke(this._levels[w].el),this._removeTilesAtZoom(w),this._onRemoveLevel(w),delete this._levels[w]);var N=this._levels[u],F=this._map;return N||(N=this._levels[u]={},N.el=xe("div","leaflet-tile-container leaflet-zoom-animated",this._container),N.el.style.zIndex=m,N.origin=F.project(F.unproject(F.getPixelOrigin()),u).round(),N.zoom=u,this._setZoomTransform(N,F.getCenter(),F.getZoom()),S(N.el.offsetWidth),this._onCreateLevel(N)),this._level=N,N}},_onUpdateLevel:S,_onRemoveLevel:S,_onCreateLevel:S,_pruneTiles:function(){if(this._map){var u,m,w=this._map.getZoom();if(w>this.options.maxZoom||w<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)m=this._tiles[u],m.retain=m.current;for(u in this._tiles)if(m=this._tiles[u],m.current&&!m.active){var N=m.coords;this._retainParent(N.x,N.y,N.z,N.z-5)||this._retainChildren(N.x,N.y,N.z,N.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var m in this._tiles)this._tiles[m].coords.z===u&&this._removeTile(m)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)Ke(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,m,w,N){var F=Math.floor(u/2),ot=Math.floor(m/2),mt=w-1,wt=new P(+F,+ot);wt.z=+mt;var Ct=this._tileCoordsToKey(wt),Pt=this._tiles[Ct];return Pt&&Pt.active?(Pt.retain=!0,!0):(Pt&&Pt.loaded&&(Pt.retain=!0),mt>N?this._retainParent(F,ot,mt,N):!1)},_retainChildren:function(u,m,w,N){for(var F=2*u;F<2*u+2;F++)for(var ot=2*m;ot<2*m+2;ot++){var mt=new P(F,ot);mt.z=w+1;var wt=this._tileCoordsToKey(mt),Ct=this._tiles[wt];if(Ct&&Ct.active){Ct.retain=!0;continue}else Ct&&Ct.loaded&&(Ct.retain=!0);w+1<N&&this._retainChildren(F,ot,w+1,N)}},_resetView:function(u){var m=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),m,m)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var m=this.options;return m.minNativeZoom!==void 0&&u<m.minNativeZoom?m.minNativeZoom:m.maxNativeZoom!==void 0&&m.maxNativeZoom<u?m.maxNativeZoom:u},_setView:function(u,m,w,N){var F=Math.round(m);this.options.maxZoom!==void 0&&F>this.options.maxZoom||this.options.minZoom!==void 0&&F<this.options.minZoom?F=void 0:F=this._clampZoom(F);var ot=this.options.updateWhenZooming&&F!==this._tileZoom;(!N||ot)&&(this._tileZoom=F,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),F!==void 0&&this._update(u),w||this._pruneTiles(),this._noPrune=!!w),this._setZoomTransforms(u,m)},_setZoomTransforms:function(u,m){for(var w in this._levels)this._setZoomTransform(this._levels[w],u,m)},_setZoomTransform:function(u,m,w){var N=this._map.getZoomScale(w,u.zoom),F=u.origin.multiplyBy(N).subtract(this._map._getNewPixelOrigin(m,w)).round();Kt.any3d?gr(u.el,F,N):tn(u.el,F)},_resetGrid:function(){var u=this._map,m=u.options.crs,w=this._tileSize=this.getTileSize(),N=this._tileZoom,F=this._map.getPixelWorldBounds(this._tileZoom);F&&(this._globalTileRange=this._pxBoundsToTileRange(F)),this._wrapX=m.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,m.wrapLng[0]],N).x/w.x),Math.ceil(u.project([0,m.wrapLng[1]],N).x/w.y)],this._wrapY=m.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([m.wrapLat[0],0],N).y/w.x),Math.ceil(u.project([m.wrapLat[1],0],N).y/w.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var m=this._map,w=m._animatingZoom?Math.max(m._animateToZoom,m.getZoom()):m.getZoom(),N=m.getZoomScale(w,this._tileZoom),F=m.project(u,this._tileZoom).floor(),ot=m.getSize().divideBy(N*2);return new U(F.subtract(ot),F.add(ot))},_update:function(u){var m=this._map;if(m){var w=this._clampZoom(m.getZoom());if(u===void 0&&(u=m.getCenter()),this._tileZoom!==void 0){var N=this._getTiledPixelBounds(u),F=this._pxBoundsToTileRange(N),ot=F.getCenter(),mt=[],wt=this.options.keepBuffer,Ct=new U(F.getBottomLeft().subtract([wt,-wt]),F.getTopRight().add([wt,-wt]));if(!(isFinite(F.min.x)&&isFinite(F.min.y)&&isFinite(F.max.x)&&isFinite(F.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Pt in this._tiles){var Ht=this._tiles[Pt].coords;(Ht.z!==this._tileZoom||!Ct.contains(new P(Ht.x,Ht.y)))&&(this._tiles[Pt].current=!1)}if(Math.abs(w-this._tileZoom)>1){this._setView(u,w);return}for(var ne=F.min.y;ne<=F.max.y;ne++)for(var Ee=F.min.x;Ee<=F.max.x;Ee++){var si=new P(Ee,ne);if(si.z=this._tileZoom,!!this._isValidTile(si)){var In=this._tiles[this._tileCoordsToKey(si)];In?In.current=!0:mt.push(si)}}if(mt.sort(function(Ge,He){return Ge.distanceTo(ot)-He.distanceTo(ot)}),mt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Bi=document.createDocumentFragment();for(Ee=0;Ee<mt.length;Ee++)this._addTile(mt[Ee],Bi);this._level.el.appendChild(Bi)}}}},_isValidTile:function(u){var m=this._map.options.crs;if(!m.infinite){var w=this._globalTileRange;if(!m.wrapLng&&(u.x<w.min.x||u.x>w.max.x)||!m.wrapLat&&(u.y<w.min.y||u.y>w.max.y))return!1}if(!this.options.bounds)return!0;var N=this._tileCoordsToBounds(u);return gt(this.options.bounds).overlaps(N)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var m=this._map,w=this.getTileSize(),N=u.scaleBy(w),F=N.add(w),ot=m.unproject(N,u.z),mt=m.unproject(F,u.z);return[ot,mt]},_tileCoordsToBounds:function(u){var m=this._tileCoordsToNwSe(u),w=new ct(m[0],m[1]);return this.options.noWrap||(w=this._map.wrapLatLngBounds(w)),w},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var m=u.split(":"),w=new P(+m[0],+m[1]);return w.z=+m[2],w},_removeTile:function(u){var m=this._tiles[u];m&&(Ke(m.el),delete this._tiles[u],this.fire("tileunload",{tile:m.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){fe(u,"leaflet-tile");var m=this.getTileSize();u.style.width=m.x+"px",u.style.height=m.y+"px",u.onselectstart=S,u.onmousemove=S,Kt.ielt9&&this.options.opacity<1&&Fe(u,this.options.opacity)},_addTile:function(u,m){var w=this._getTilePos(u),N=this._tileCoordsToKey(u),F=this.createTile(this._wrapCoords(u),f(this._tileReady,this,u));this._initTile(F),this.createTile.length<2&&X(f(this._tileReady,this,u,null,F)),tn(F,w),this._tiles[N]={el:F,coords:u,current:!0},m.appendChild(F),this.fire("tileloadstart",{tile:F,coords:u})},_tileReady:function(u,m,w){m&&this.fire("tileerror",{error:m,tile:w,coords:u});var N=this._tileCoordsToKey(u);w=this._tiles[N],w&&(w.loaded=+new Date,this._map._fadeAnimated?(Fe(w.el,0),Z(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this)):(w.active=!0,this._pruneTiles()),m||(fe(w.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:w.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Kt.ielt9||!this._map._fadeAnimated?X(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var m=new P(this._wrapX?E(u.x,this._wrapX):u.x,this._wrapY?E(u.y,this._wrapY):u.y);return m.z=u.z,m},_pxBoundsToTileRange:function(u){var m=this.getTileSize();return new U(u.min.unscaleBy(m).floor(),u.max.unscaleBy(m).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function qe(u){return new pe(u)}var sn=pe.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,m){this._url=u,m=Q(this,m),m.detectRetina&&Kt.retina&&m.maxZoom>0?(m.tileSize=Math.floor(m.tileSize/2),m.zoomReverse?(m.zoomOffset--,m.minZoom=Math.min(m.maxZoom,m.minZoom+1)):(m.zoomOffset++,m.maxZoom=Math.max(m.minZoom,m.maxZoom-1)),m.minZoom=Math.max(0,m.minZoom)):m.zoomReverse?m.minZoom=Math.min(m.maxZoom,m.minZoom):m.maxZoom=Math.max(m.minZoom,m.maxZoom),typeof m.subdomains=="string"&&(m.subdomains=m.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,m){return this._url===u&&m===void 0&&(m=!0),this._url=u,m||this.redraw(),this},createTile:function(u,m){var w=document.createElement("img");return ae(w,"load",f(this._tileOnLoad,this,m,w)),ae(w,"error",f(this._tileOnError,this,m,w)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(w.referrerPolicy=this.options.referrerPolicy),w.alt="",w.src=this.getTileUrl(u),w},getTileUrl:function(u){var m={r:Kt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var w=this._globalTileRange.max.y-u.y;this.options.tms&&(m.y=w),m["-y"]=w}return j(this._url,r(m,this.options))},_tileOnLoad:function(u,m){Kt.ielt9?setTimeout(f(u,this,null,m),0):u(null,m)},_tileOnError:function(u,m,w){var N=this.options.errorTileUrl;N&&m.getAttribute("src")!==N&&(m.src=N),u(w,m)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,m=this.options.maxZoom,w=this.options.zoomReverse,N=this.options.zoomOffset;return w&&(u=m-u),u+N},_getSubdomain:function(u){var m=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[m]},_abortLoading:function(){var u,m;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(m=this._tiles[u].el,m.onload=S,m.onerror=S,!m.complete)){m.src=et;var w=this._tiles[u].coords;Ke(m),delete this._tiles[u],this.fire("tileabort",{tile:m,coords:w})}},_removeTile:function(u){var m=this._tiles[u];if(m)return m.el.setAttribute("src",et),pe.prototype._removeTile.call(this,u)},_tileReady:function(u,m,w){if(!(!this._map||w&&w.getAttribute("src")===et))return pe.prototype._tileReady.call(this,u,m,w)}});function We(u,m){return new sn(u,m)}var Pi=sn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,m){this._url=u;var w=r({},this.defaultWmsParams);for(var N in m)N in this.options||(w[N]=m[N]);m=Q(this,m);var F=m.detectRetina&&Kt.retina?2:1,ot=this.getTileSize();w.width=ot.x*F,w.height=ot.y*F,this.wmsParams=w},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var m=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[m]=this._crs.code,sn.prototype.onAdd.call(this,u)},getTileUrl:function(u){var m=this._tileCoordsToNwSe(u),w=this._crs,N=K(w.project(m[0]),w.project(m[1])),F=N.min,ot=N.max,mt=(this._wmsVersion>=1.3&&this._crs===bo?[F.y,F.x,ot.y,ot.x]:[F.x,F.y,ot.x,ot.y]).join(","),wt=sn.prototype.getTileUrl.call(this,u);return wt+st(this.wmsParams,wt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+mt},setParams:function(u,m){return r(this.wmsParams,u),m||this.redraw(),this}});function Yn(u,m){return new Pi(u,m)}sn.WMS=Pi,We.wms=Yn;var ri=Ri.extend({options:{padding:.1},initialize:function(u){Q(this,u),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),fe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,m){var w=this._map.getZoomScale(m,this._zoom),N=this._map.getSize().multiplyBy(.5+this.options.padding),F=this._map.project(this._center,m),ot=N.multiplyBy(-w).add(F).subtract(this._map._getNewPixelOrigin(u,m));Kt.any3d?gr(this._container,ot,w):tn(this._container,ot)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,m=this._map.getSize(),w=this._map.containerPointToLayerPoint(m.multiplyBy(-u)).round();this._bounds=new U(w,w.add(m.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ks=ri.extend({options:{tolerance:0},getEvents:function(){var u=ri.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ri.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");ae(u,"mousemove",this._onMouseMove,this),ae(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ae(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){Z(this._redrawRequest),delete this._ctx,Ke(this._container),je(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var m in this._layers)u=this._layers[m],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ri.prototype._update.call(this);var u=this._bounds,m=this._container,w=u.getSize(),N=Kt.retina?2:1;tn(m,u.min),m.width=N*w.x,m.height=N*w.y,m.style.width=w.x+"px",m.style.height=w.y+"px",Kt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){ri.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[y(u)]=u;var m=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=m),this._drawLast=m,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var m=u._order,w=m.next,N=m.prev;w?w.prev=N:this._drawLast=N,N?N.next=w:this._drawFirst=w,delete u._order,delete this._layers[y(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var m=u.options.dashArray.split(/[, ]+/),w=[],N,F;for(F=0;F<m.length;F++){if(N=Number(m[F]),isNaN(N))return;w.push(N)}u.options._dashArray=w}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||X(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var m=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new U,this._redrawBounds.extend(u._pxBounds.min.subtract([m,m])),this._redrawBounds.extend(u._pxBounds.max.add([m,m]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var m=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,m.x,m.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,m=this._redrawBounds;if(this._ctx.save(),m){var w=m.getSize();this._ctx.beginPath(),this._ctx.rect(m.min.x,m.min.y,w.x,w.y),this._ctx.clip()}this._drawing=!0;for(var N=this._drawFirst;N;N=N.next)u=N.layer,(!m||u._pxBounds&&u._pxBounds.intersects(m))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,m){if(this._drawing){var w,N,F,ot,mt=u._parts,wt=mt.length,Ct=this._ctx;if(wt){for(Ct.beginPath(),w=0;w<wt;w++){for(N=0,F=mt[w].length;N<F;N++)ot=mt[w][N],Ct[N?"lineTo":"moveTo"](ot.x,ot.y);m&&Ct.closePath()}this._fillStroke(Ct,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var m=u._point,w=this._ctx,N=Math.max(Math.round(u._radius),1),F=(Math.max(Math.round(u._radiusY),1)||N)/N;F!==1&&(w.save(),w.scale(1,F)),w.beginPath(),w.arc(m.x,m.y/F,N,0,Math.PI*2,!1),F!==1&&w.restore(),this._fillStroke(w,u)}},_fillStroke:function(u,m){var w=m.options;w.fill&&(u.globalAlpha=w.fillOpacity,u.fillStyle=w.fillColor||w.color,u.fill(w.fillRule||"evenodd")),w.stroke&&w.weight!==0&&(u.setLineDash&&u.setLineDash(m.options&&m.options._dashArray||[]),u.globalAlpha=w.opacity,u.lineWidth=w.weight,u.strokeStyle=w.color,u.lineCap=w.lineCap,u.lineJoin=w.lineJoin,u.stroke())},_onClick:function(u){for(var m=this._map.mouseEventToLayerPoint(u),w,N,F=this._drawFirst;F;F=F.next)w=F.layer,w.options.interactive&&w._containsPoint(m)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(w))&&(N=w);this._fireEvent(N?[N]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var m=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,m)}},_handleMouseOut:function(u){var m=this._hoveredLayer;m&&(Pe(this._container,"leaflet-interactive"),this._fireEvent([m],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,m){if(!this._mouseHoverThrottled){for(var w,N,F=this._drawFirst;F;F=F.next)w=F.layer,w.options.interactive&&w._containsPoint(m)&&(N=w);N!==this._hoveredLayer&&(this._handleMouseOut(u),N&&(fe(this._container,"leaflet-interactive"),this._fireEvent([N],u,"mouseover"),this._hoveredLayer=N)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,m,w){this._map._fireDOMEvent(m,w||m.type,u)},_bringToFront:function(u){var m=u._order;if(m){var w=m.next,N=m.prev;if(w)w.prev=N;else return;N?N.next=w:w&&(this._drawFirst=w),m.prev=this._drawLast,this._drawLast.next=m,m.next=null,this._drawLast=m,this._requestRedraw(u)}},_bringToBack:function(u){var m=u._order;if(m){var w=m.next,N=m.prev;if(N)N.next=w;else return;w?w.prev=N:N&&(this._drawLast=N),m.prev=null,m.next=this._drawFirst,this._drawFirst.prev=m,this._drawFirst=m,this._requestRedraw(u)}}});function Ss(u){return Kt.canvas?new Ks(u):null}var Er=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Pa={_initContainer:function(){this._container=xe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ri.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var m=u._container=Er("shape");fe(m,"leaflet-vml-shape "+(this.options.className||"")),m.coordsize="1 1",u._path=Er("path"),m.appendChild(u._path),this._updateStyle(u),this._layers[y(u)]=u},_addPath:function(u){var m=u._container;this._container.appendChild(m),u.options.interactive&&u.addInteractiveTarget(m)},_removePath:function(u){var m=u._container;Ke(m),u.removeInteractiveTarget(m),delete this._layers[y(u)]},_updateStyle:function(u){var m=u._stroke,w=u._fill,N=u.options,F=u._container;F.stroked=!!N.stroke,F.filled=!!N.fill,N.stroke?(m||(m=u._stroke=Er("stroke")),F.appendChild(m),m.weight=N.weight+"px",m.color=N.color,m.opacity=N.opacity,N.dashArray?m.dashStyle=Y(N.dashArray)?N.dashArray.join(" "):N.dashArray.replace(/( *, *)/g," "):m.dashStyle="",m.endcap=N.lineCap.replace("butt","flat"),m.joinstyle=N.lineJoin):m&&(F.removeChild(m),u._stroke=null),N.fill?(w||(w=u._fill=Er("fill")),F.appendChild(w),w.color=N.fillColor||N.color,w.opacity=N.fillOpacity):w&&(F.removeChild(w),u._fill=null)},_updateCircle:function(u){var m=u._point.round(),w=Math.round(u._radius),N=Math.round(u._radiusY||w);this._setPath(u,u._empty()?"M0 0":"AL "+m.x+","+m.y+" "+w+","+N+" 0,"+65535*360)},_setPath:function(u,m){u._path.v=m},_bringToFront:function(u){zn(u._container)},_bringToBack:function(u){Ir(u._container)}},zi=Kt.vml?Er:Bt,Br=ri.extend({_initContainer:function(){this._container=zi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=zi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ke(this._container),je(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ri.prototype._update.call(this);var u=this._bounds,m=u.getSize(),w=this._container;(!this._svgSize||!this._svgSize.equals(m))&&(this._svgSize=m,w.setAttribute("width",m.x),w.setAttribute("height",m.y)),tn(w,u.min),w.setAttribute("viewBox",[u.min.x,u.min.y,m.x,m.y].join(" ")),this.fire("update")}},_initPath:function(u){var m=u._path=zi("path");u.options.className&&fe(m,u.options.className),u.options.interactive&&fe(m,"leaflet-interactive"),this._updateStyle(u),this._layers[y(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){Ke(u._path),u.removeInteractiveTarget(u._path),delete this._layers[y(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var m=u._path,w=u.options;m&&(w.stroke?(m.setAttribute("stroke",w.color),m.setAttribute("stroke-opacity",w.opacity),m.setAttribute("stroke-width",w.weight),m.setAttribute("stroke-linecap",w.lineCap),m.setAttribute("stroke-linejoin",w.lineJoin),w.dashArray?m.setAttribute("stroke-dasharray",w.dashArray):m.removeAttribute("stroke-dasharray"),w.dashOffset?m.setAttribute("stroke-dashoffset",w.dashOffset):m.removeAttribute("stroke-dashoffset")):m.setAttribute("stroke","none"),w.fill?(m.setAttribute("fill",w.fillColor||w.color),m.setAttribute("fill-opacity",w.fillOpacity),m.setAttribute("fill-rule",w.fillRule||"evenodd")):m.setAttribute("fill","none"))},_updatePoly:function(u,m){this._setPath(u,Ut(u._parts,m))},_updateCircle:function(u){var m=u._point,w=Math.max(Math.round(u._radius),1),N=Math.max(Math.round(u._radiusY),1)||w,F="a"+w+","+N+" 0 1,0 ",ot=u._empty()?"M0 0":"M"+(m.x-w)+","+m.y+F+w*2+",0 "+F+-w*2+",0 ";this._setPath(u,ot)},_setPath:function(u,m){u._path.setAttribute("d",m)},_bringToFront:function(u){zn(u._path)},_bringToBack:function(u){Ir(u._path)}});Kt.vml&&Br.include(Pa);function rs(u){return Kt.svg||Kt.vml?new Br(u):null}de.include({getRenderer:function(u){var m=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return m||(m=this._renderer=this._createRenderer()),this.hasLayer(m)||this.addLayer(m),m},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var m=this._paneRenderers[u];return m===void 0&&(m=this._createRenderer({pane:u}),this._paneRenderers[u]=m),m},_createRenderer:function(u){return this.options.preferCanvas&&Ss(u)||rs(u)}});var $s=Es.extend({initialize:function(u,m){Es.prototype.initialize.call(this,this._boundsToLatLngs(u),m)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=gt(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function Nf(u,m){return new $s(u,m)}Br.create=zi,Br.pointsToPath=Ut,er.geometryToLayer=Gn,er.coordsToLatLng=xr,er.coordsToLatLngs=Ws,er.latLngToCoords=Js,er.latLngsToCoords=Hn,er.getFeature=Bn,er.asFeature=g,de.mergeOptions({boxZoom:!0});var ki=Wi.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ke(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Zi(),ka(),this._startPoint=this._map.mouseEventToContainerPoint(u),ae(document,{contextmenu:yr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=xe("div","leaflet-zoom-box",this._container),fe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var m=new U(this._point,this._startPoint),w=m.getSize();tn(this._box,m.min),this._box.style.width=w.x+"px",this._box.style.height=w.y+"px"},_finish:function(){this._moved&&(Ke(this._box),Pe(this._container,"leaflet-crosshair")),Di(),Kr(),je(document,{contextmenu:yr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var m=new ct(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(m).fire("boxzoomend",{boxZoomBounds:m})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});de.addInitHook("addHandler","boxZoom",ki),de.mergeOptions({doubleClickZoom:!0});var ol=Wi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var m=this._map,w=m.getZoom(),N=m.options.zoomDelta,F=u.originalEvent.shiftKey?w-N:w+N;m.options.doubleClickZoom==="center"?m.setZoom(F):m.setZoomAround(u.containerPoint,F)}});de.addInitHook("addHandler","doubleClickZoom",ol),de.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var jr=Wi.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new zr(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}fe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Pe(this._map._container,"leaflet-grab"),Pe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var m=gt(this._map.options.maxBounds);this._offsetLimit=K(this._map.latLngToContainerPoint(m.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(m.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var m=this._lastTime=+new Date,w=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(w),this._times.push(m),this._prunePositions(m)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),m=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=m.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,m){return u-(u-m)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),m=this._offsetLimit;u.x<m.min.x&&(u.x=this._viscousLimit(u.x,m.min.x)),u.y<m.min.y&&(u.y=this._viscousLimit(u.y,m.min.y)),u.x>m.max.x&&(u.x=this._viscousLimit(u.x,m.max.x)),u.y>m.max.y&&(u.y=this._viscousLimit(u.y,m.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,m=Math.round(u/2),w=this._initialWorldOffset,N=this._draggable._newPos.x,F=(N-m+w)%u+m-w,ot=(N+m+w)%u-m-w,mt=Math.abs(F+w)<Math.abs(ot+w)?F:ot;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=mt},_onDragEnd:function(u){var m=this._map,w=m.options,N=!w.inertia||u.noInertia||this._times.length<2;if(m.fire("dragend",u),N)m.fire("moveend");else{this._prunePositions(+new Date);var F=this._lastPos.subtract(this._positions[0]),ot=(this._lastTime-this._times[0])/1e3,mt=w.easeLinearity,wt=F.multiplyBy(mt/ot),Ct=wt.distanceTo([0,0]),Pt=Math.min(w.inertiaMaxSpeed,Ct),Ht=wt.multiplyBy(Pt/Ct),ne=Pt/(w.inertiaDeceleration*mt),Ee=Ht.multiplyBy(-ne/2).round();!Ee.x&&!Ee.y?m.fire("moveend"):(Ee=m._limitOffset(Ee,m.options.maxBounds),X(function(){m.panBy(Ee,{duration:ne,easeLinearity:mt,noMoveStart:!0,animate:!0})}))}}});de.addInitHook("addHandler","dragging",jr),de.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $l=Wi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),ae(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),je(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,m=document.documentElement,w=u.scrollTop||m.scrollTop,N=u.scrollLeft||m.scrollLeft;this._map._container.focus(),window.scrollTo(N,w)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var m=this._panKeys={},w=this.keyCodes,N,F;for(N=0,F=w.left.length;N<F;N++)m[w.left[N]]=[-1*u,0];for(N=0,F=w.right.length;N<F;N++)m[w.right[N]]=[u,0];for(N=0,F=w.down.length;N<F;N++)m[w.down[N]]=[0,u];for(N=0,F=w.up.length;N<F;N++)m[w.up[N]]=[0,-1*u]},_setZoomDelta:function(u){var m=this._zoomKeys={},w=this.keyCodes,N,F;for(N=0,F=w.zoomIn.length;N<F;N++)m[w.zoomIn[N]]=u;for(N=0,F=w.zoomOut.length;N<F;N++)m[w.zoomOut[N]]=-u},_addHooks:function(){ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){je(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var m=u.keyCode,w=this._map,N;if(m in this._panKeys){if(!w._panAnim||!w._panAnim._inProgress)if(N=this._panKeys[m],u.shiftKey&&(N=J(N).multiplyBy(3)),w.options.maxBounds&&(N=w._limitOffset(J(N),w.options.maxBounds)),w.options.worldCopyJump){var F=w.wrapLatLng(w.unproject(w.project(w.getCenter()).add(N)));w.panTo(F)}else w.panBy(N)}else if(m in this._zoomKeys)w.setZoom(w.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[m]);else if(m===27&&w._popup&&w._popup.options.closeOnEscapeKey)w.closePopup();else return;yr(u)}}});de.addInitHook("addHandler","keyboard",$l),de.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ko=Wi.extend({addHooks:function(){ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var m=qn(u),w=this._map.options.wheelDebounceTime;this._delta+=m,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var N=Math.max(w-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),N),yr(u)},_performZoom:function(){var u=this._map,m=u.getZoom(),w=this._map.options.zoomSnap||0;u._stop();var N=this._delta/(this._map.options.wheelPxPerZoomLevel*4),F=4*Math.log(2/(1+Math.exp(-Math.abs(N))))/Math.LN2,ot=w?Math.ceil(F/w)*w:F,mt=u._limitZoom(m+(this._delta>0?ot:-ot))-m;this._delta=0,this._startTime=null,mt&&(u.options.scrollWheelZoom==="center"?u.setZoom(m+mt):u.setZoomAround(this._lastMousePos,m+mt))}});de.addInitHook("addHandler","scrollWheelZoom",ko);var ta=600;de.mergeOptions({tapHold:Kt.touchNative&&Kt.safari&&Kt.mobile,tapTolerance:15});var ll=Wi.extend({addHooks:function(){ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var m=u.touches[0];this._startPos=this._newPos=new P(m.clientX,m.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(ae(document,"touchend",rn),ae(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",m))},this),ta),ae(document,"touchend touchcancel contextmenu",this._cancel,this),ae(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){je(document,"touchend",rn),je(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)},_onMove:function(u){var m=u.touches[0];this._newPos=new P(m.clientX,m.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,m){var w=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:m.screenX,screenY:m.screenY,clientX:m.clientX,clientY:m.clientY});w._simulated=!0,m.target.dispatchEvent(w)}});de.addInitHook("addHandler","tapHold",ll),de.mergeOptions({touchZoom:Kt.touch,bounceAtZoomLimits:!0});var tu=Wi.extend({addHooks:function(){fe(this._map._container,"leaflet-touch-zoom"),ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Pe(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var m=this._map;if(!(!u.touches||u.touches.length!==2||m._animatingZoom||this._zooming)){var w=m.mouseEventToContainerPoint(u.touches[0]),N=m.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=m.getSize()._divideBy(2),this._startLatLng=m.containerPointToLatLng(this._centerPoint),m.options.touchZoom!=="center"&&(this._pinchStartLatLng=m.containerPointToLatLng(w.add(N)._divideBy(2))),this._startDist=w.distanceTo(N),this._startZoom=m.getZoom(),this._moved=!1,this._zooming=!0,m._stop(),ae(document,"touchmove",this._onTouchMove,this),ae(document,"touchend touchcancel",this._onTouchEnd,this),rn(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var m=this._map,w=m.mouseEventToContainerPoint(u.touches[0]),N=m.mouseEventToContainerPoint(u.touches[1]),F=w.distanceTo(N)/this._startDist;if(this._zoom=m.getScaleZoom(F,this._startZoom),!m.options.bounceAtZoomLimits&&(this._zoom<m.getMinZoom()&&F<1||this._zoom>m.getMaxZoom()&&F>1)&&(this._zoom=m._limitZoom(this._zoom)),m.options.touchZoom==="center"){if(this._center=this._startLatLng,F===1)return}else{var ot=w._add(N)._divideBy(2)._subtract(this._centerPoint);if(F===1&&ot.x===0&&ot.y===0)return;this._center=m.unproject(m.project(this._pinchStartLatLng,this._zoom).subtract(ot),this._zoom)}this._moved||(m._moveStart(!0,!1),this._moved=!0),Z(this._animRequest);var mt=f(m._move,m,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=X(mt,this,!0),rn(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Z(this._animRequest),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});de.addInitHook("addHandler","touchZoom",tu),de.BoxZoom=ki,de.DoubleClickZoom=ol,de.Drag=jr,de.Keyboard=$l,de.ScrollWheelZoom=ko,de.TapHold=ll,de.TouchZoom=tu,i.Bounds=U,i.Browser=Kt,i.CRS=Tt,i.Canvas=Ks,i.Circle=Qs,i.CircleMarker=is,i.Class=at,i.Control=pi,i.DivIcon=ee,i.DivOverlay=_t,i.DomEvent=Na,i.DomUtil=vr,i.Draggable=zr,i.Evented=z,i.FeatureGroup=Ji,i.GeoJSON=er,i.GridLayer=pe,i.Handler=Wi,i.Icon=Ki,i.ImageOverlay=x,i.LatLng=pt,i.LatLngBounds=ct,i.Layer=Ri,i.LayerGroup=xs,i.LineUtil=So,i.Map=de,i.Marker=Vs,i.Mixin=Jl,i.Path=$i,i.Point=P,i.PolyUtil=ii,i.Polygon=Es,i.Polyline=tr,i.Popup=St,i.PosAnimation=ts,i.Projection=el,i.Rectangle=$s,i.Renderer=ri,i.SVG=Br,i.SVGOverlay=lt,i.TileLayer=sn,i.Tooltip=qt,i.Transformation=Mt,i.Util=nt,i.VideoOverlay=I,i.bind=f,i.bounds=K,i.canvas=Ss,i.circle=sl,i.circleMarker=To,i.control=En,i.divIcon=Te,i.extend=r,i.featureGroup=Lo,i.geoJSON=o,i.geoJson=d,i.gridLayer=qe,i.icon=Ys,i.imageOverlay=C,i.latLng=yt,i.latLngBounds=gt,i.layerGroup=il,i.map=ys,i.marker=rl,i.point=J,i.polygon=al,i.polyline=Co,i.popup=jt,i.rectangle=Nf,i.setOptions=Q,i.stamp=y,i.svg=rs,i.svgOverlay=dt,i.tileLayer=We,i.tooltip=Qt,i.transformation=ft,i.version=l,i.videoOverlay=H;var eu=window.L;i.noConflict=function(){return window.L=eu,this},window.L=i}))})(rc,rc.exports)),rc.exports}var co=uM();const Zl=oo(co);function cM(e,n){const i=Gt.useRef(n);Gt.useEffect(function(){n!==i.current&&e.attributionControl!=null&&(i.current!=null&&e.attributionControl.removeAttribution(i.current),n!=null&&e.attributionControl.addAttribution(n)),i.current=n},[e,n])}ix();const hM=1;function fM(e){return Object.freeze({__version:hM,map:e})}function q1(e,n){return Object.freeze({...e,...n})}const jp=Gt.createContext(null);function Sf(){const e=Gt.use(jp);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function dM(e){function n(i,l){const{instance:r,context:c}=e(i).current;Gt.useImperativeHandle(l,()=>r);const{children:f}=i;return f==null?null:ya.createElement(jp,{value:c},f)}return Gt.forwardRef(n)}function gM(e){function n(i,l){const{instance:r}=e(i).current;return Gt.useImperativeHandle(l,()=>r),null}return Gt.forwardRef(n)}function G1(e,n){const i=Gt.useRef(void 0);Gt.useEffect(function(){return n!=null&&e.instance.on(n),i.current=n,function(){i.current!=null&&e.instance.off(i.current),i.current=null}},[e,n])}function bf(e,n){const i=e.pane??n.pane;return i?{...e,pane:i}:e}function Lf(e,n,i){return Object.freeze({instance:e,context:n,container:i})}function H1(e,n){return n==null?function(l,r){const c=Gt.useRef(void 0);return c.current||(c.current=e(l,r)),c}:function(l,r){const c=Gt.useRef(void 0);c.current||(c.current=e(l,r));const f=Gt.useRef(l),{instance:p}=c.current;return Gt.useEffect(function(){f.current!==l&&(n(p,l,f.current),f.current=l)},[p,l,n]),c}}function Y1(e,n){Gt.useEffect(function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){n.layerContainer?.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}function pM(e){return function(i){const l=Sf(),r=e(bf(i,l),l);return cM(l.map,i.attribution),G1(r.current,i.eventHandlers),Y1(r.current,l),r}}function mM(e,n){const i=Gt.useRef(void 0);Gt.useEffect(function(){if(n.pathOptions!==i.current){const r=n.pathOptions??{};e.instance.setStyle(r),i.current=r}},[e,n])}function vM(e){return function(i){const l=Sf(),r=e(bf(i,l),l);return G1(r.current,i.eventHandlers),Y1(r.current,l),mM(r.current,i),r}}function Z1(e,n){const i=H1(e,n),l=vM(i);return dM(l)}function X1(e,n){const i=H1(e,n),l=pM(i);return gM(l)}function V1(e,n,i){const{opacity:l,zIndex:r}=n;l!=null&&l!==i.opacity&&e.setOpacity(l),r!=null&&r!==i.zIndex&&e.setZIndex(r)}function yM(){return Sf().map}function _M(e){const n=yM();return Gt.useEffect(function(){return n.on(e),function(){n.off(e)}},[n,e]),n}const xM=Z1(function({children:n,...i},l){const r=new co.FeatureGroup([],i);return Lf(r,q1(l,{layerContainer:r,overlayContainer:r}))}),Tf=Z1(function({data:n,...i},l){const r=new co.GeoJSON(n,i);return Lf(r,q1(l,{overlayContainer:r}))},function(n,i,l){i.style!==l.style&&(i.style==null?n.resetStyle():n.setStyle(i.style))});function EM({bounds:e,boundsOptions:n,center:i,children:l,className:r,id:c,placeholder:f,style:p,whenReady:y,zoom:_,...E},S){const[M]=Gt.useState({className:r,id:c,style:p}),[O,B]=Gt.useState(null),Q=Gt.useRef(void 0);Gt.useImperativeHandle(S,()=>O?.map??null,[O]);const st=Gt.useCallback(j=>{if(j!==null&&!Q.current){const Y=new co.Map(j,E);Q.current=Y,i!=null&&_!=null?Y.setView(i,_):e!=null&&Y.fitBounds(e,n),y!=null&&Y.whenReady(y),B(fM(Y))}},[]);Gt.useEffect(()=>()=>{O?.map.remove()},[O]);const rt=O?ya.createElement(jp,{value:O},l):f??null;return ya.createElement("div",{...M,ref:st},rt)}const wM=Gt.forwardRef(EM),X0=X1(function({url:n,...i},l){const r=new co.TileLayer(n,bf(i,l));return Lf(r,l)},function(n,i,l){V1(n,i,l);const{url:r}=i;r!=null&&r!==l.url&&n.setUrl(r)}),Up=X1(function({eventHandlers:n,params:i={},url:l,...r},c){const f=new co.TileLayer.WMS(l,{...i,...bf(r,c)});return Lf(f,c)},function(n,i,l){V1(n,i,l),i.params!=null&&i.params!==l.params&&n.setParams(i.params)});var Bg={exports:{}},jg,V0;function SM(){if(V0)return jg;V0=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return jg=e,jg}var Ug,Q0;function bM(){if(Q0)return Ug;Q0=1;var e=SM();function n(){}function i(){}return i.resetWarningCache=n,Ug=function(){function l(f,p,y,_,E,S){if(S!==e){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}l.isRequired=l;function r(){return l}var c={array:l,bigint:l,bool:l,func:l,number:l,object:l,string:l,symbol:l,any:l,arrayOf:r,element:l,elementType:l,instanceOf:r,node:l,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:i,resetWarningCache:n};return c.PropTypes=c,c},Ug}var W0;function LM(){return W0||(W0=1,Bg.exports=bM()()),Bg.exports}var De=LM();(function(e,n,i){function l(r,c){for(;(r=r.parentElement)&&!r.classList.contains(c););return r}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(r,c){this._map=r,this._container=r._container,this._overlayPane=r._panes.overlayPane,this._popupPane=r._panes.popupPane,c&&c.shapeOptions&&(c.shapeOptions=L.Util.extend({},this.options.shapeOptions,c.shapeOptions)),L.setOptions(this,c);var f=L.version.split(".");parseInt(f[0],10)===1&&parseInt(f[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(L.DomUtil.disableTextSelection(),r.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(r){L.setOptions(this,r)},_fireCreatedEvent:function(r){this._map.fire(L.Draw.Event.CREATED,{layer:r,layerType:this.type})},_cancelDrawing:function(r){r.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(r,c){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,c&&c.drawError&&(c.drawError=L.Util.extend({},this.options.drawError,c.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,r,c)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var r=this._markers.pop(),c=this._poly,f=c.getLatLngs(),p=f.splice(-1,1)[0];this._poly.setLatLngs(f),this._markerGroup.removeLayer(r),c.getLatLngs().length<2&&this._map.removeLayer(c),this._vertexChanged(p,!1)}},addVertex:function(r){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(r))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(r)),this._poly.addLatLng(r),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(r,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var r=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),c=this._poly.newLatLngIntersects(r[r.length-1]);if(!this.options.allowIntersection&&c||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(r){var c=this._map.mouseEventToLayerPoint(r.originalEvent),f=this._map.layerPointToLatLng(c);this._currentLatLng=f,this._updateTooltip(f),this._updateGuide(c),this._mouseMarker.setLatLng(f),L.DomEvent.preventDefault(r.originalEvent)},_vertexChanged:function(r,c){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(r,c),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(r){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(r),this._clickHandled=!0,this._disableNewMarkers();var c=r.originalEvent,f=c.clientX,p=c.clientY;this._startPoint.call(this,f,p)}},_startPoint:function(r,c){this._mouseDownOrigin=L.point(r,c)},_onMouseUp:function(r){var c=r.originalEvent,f=c.clientX,p=c.clientY;this._endPoint.call(this,f,p,r),this._clickHandled=null},_endPoint:function(r,c,f){if(this._mouseDownOrigin){var p=L.point(r,c).distanceTo(this._mouseDownOrigin),y=this._calculateFinishDistance(f.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(f.latlng),this._finishShape()):y<10&&L.Browser.touch?this._finishShape():Math.abs(p)<9*(e.devicePixelRatio||1)&&this.addVertex(f.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(r){var c,f,p=r.originalEvent;!p.touches||!p.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(c=p.touches[0].clientX,f=p.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,c,f),this._endPoint.call(this,c,f,r),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(r){var c;if(this._markers.length>0){var f;if(this.type===L.Draw.Polyline.TYPE)f=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;f=this._markers[0]}var p=this._map.latLngToContainerPoint(f.getLatLng()),y=new L.Marker(r,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),_=this._map.latLngToContainerPoint(y.getLatLng());c=p.distanceTo(_)}else c=1/0;return c},_updateFinishHandler:function(){var r=this._markers.length;r>1&&this._markers[r-1].on("click",this._finishShape,this),r>2&&this._markers[r-2].off("click",this._finishShape,this)},_createMarker:function(r){var c=new L.Marker(r,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(c),c},_updateGuide:function(r){var c=this._markers?this._markers.length:0;c>0&&(r=r||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[c-1].getLatLng()),r))},_updateTooltip:function(r){var c=this._getTooltipText();r&&this._tooltip.updatePosition(r),this._errorShown||this._tooltip.updateContent(c)},_drawGuide:function(r,c){var f,p,y,_=Math.floor(Math.sqrt(Math.pow(c.x-r.x,2)+Math.pow(c.y-r.y,2))),E=this.options.guidelineDistance,S=this.options.maxGuideLineLength,M=_>S?_-S:E;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));M<_;M+=this.options.guidelineDistance)f=M/_,p={x:Math.floor(r.x*(1-f)+f*c.x),y:Math.floor(r.y*(1-f)+f*c.y)},y=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),y.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(y,p)},_updateGuideColor:function(r){if(this._guidesContainer)for(var c=0,f=this._guidesContainer.childNodes.length;c<f;c++)this._guidesContainer.childNodes[c].style.backgroundColor=r},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var r,c,f=this.options.showLength;return this._markers.length===0?r={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(c=f?this._getMeasurementString():"",r=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:c}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:c}),r},_updateRunningMeasure:function(r,c){var f,p,y=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(f=y-(c?2:1),p=L.GeometryUtil.isVersion07x()?r.distanceTo(this._markers[f].getLatLng())*(this.options.factor||1):this._map.distance(r,this._markers[f].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=p*(c?1:-1))},_getMeasurementString:function(){var r,c=this._currentLatLng,f=this._markers[this._markers.length-1].getLatLng();return r=L.GeometryUtil.isVersion07x()?f&&c&&c.distanceTo?this._measurementRunningTotal+c.distanceTo(f)*(this.options.factor||1):this._measurementRunningTotal||0:f&&c?this._measurementRunningTotal+this._map.distance(c,f)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(r,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var r=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(r,c){L.Draw.Polyline.prototype.initialize.call(this,r,c),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var r=this._markers.length;r===1&&this._markers[0].on("click",this._finishShape,this),r>2&&(this._markers[r-1].on("dblclick",this._finishShape,this),r>3&&this._markers[r-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var r,c;return this._markers.length===0?r=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(r=L.drawLocal.draw.handlers.polygon.tooltip.cont,c=this._getMeasurementString()):(r=L.drawLocal.draw.handlers.polygon.tooltip.end,c=this._getMeasurementString()),{text:r,subtext:c}},_getMeasurementString:function(){var r=this._area,c="";return r||this.options.showLength?(this.options.showLength&&(c=L.Draw.Polyline.prototype._getMeasurementString.call(this)),r&&(c+="<br>"+L.GeometryUtil.readableArea(r,this.options.metric,this.options.precision)),c):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(r,c){var f;!this.options.allowIntersection&&this.options.showArea&&(f=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(f)),L.Draw.Polyline.prototype._vertexChanged.call(this,r,c)},_cleanUpShape:function(){var r=this._markers.length;r>0&&(this._markers[0].off("click",this._finishShape,this),r>2&&this._markers[r-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(r,c){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,r,c)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),n.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(n,"mouseup",this._onMouseUp,this),L.DomEvent.off(n,"touchend",this._onMouseUp,this),n.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(r){this._isDrawing=!0,this._startLatLng=r.latlng,L.DomEvent.on(n,"mouseup",this._onMouseUp,this).on(n,"touchend",this._onMouseUp,this).preventDefault(r.originalEvent)},_onMouseMove:function(r){var c=r.latlng;this._tooltip.updatePosition(c),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(c))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(r,c){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,r,c)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(r){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!l(r.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(r){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,r)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,r),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var r=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,r)},_getTooltipText:function(){var r,c,f,p=L.Draw.SimpleShape.prototype._getTooltipText.call(this),y=this._shape,_=this.options.showArea;return y&&(r=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),c=L.GeometryUtil.geodesicArea(r),f=_?L.GeometryUtil.readableArea(c,this.options.metric):""),{text:p.text,subtext:f}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(r,c){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,r,c)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(r){var c=r.latlng;this._tooltip.updatePosition(c),this._mouseMarker.setLatLng(c),this._marker?(c=this._mouseMarker.getLatLng(),this._marker.setLatLng(c)):(this._marker=this._createMarker(c),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(r){return new L.Marker(r,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(r){this._onMouseMove(r),this._onClick()},_fireCreatedEvent:function(){var r=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(r,c){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,r,c)},_fireCreatedEvent:function(){var r=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)},_createMarker:function(r){return new L.CircleMarker(r,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(r,c){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,r,c)},_drawShape:function(r){if(L.GeometryUtil.isVersion07x())var c=this._startLatLng.distanceTo(r);else var c=this._map.distance(this._startLatLng,r);this._shape?this._shape.setRadius(c):(this._shape=new L.Circle(this._startLatLng,c,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var r=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,r)},_onMouseMove:function(r){var c,f=r.latlng,p=this.options.showRadius,y=this.options.metric;if(this._tooltip.updatePosition(f),this._isDrawing){this._drawShape(f),c=this._shape.getRadius().toFixed(1);var _="";p&&(_=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(c,y,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:_})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(r,c){this._marker=r,L.setOptions(this,c)},addHooks:function(){var r=this._marker;r.dragging.enable(),r.on("dragend",this._onDragEnd,r),this._toggleMarkerHighlight()},removeHooks:function(){var r=this._marker;r.dragging.disable(),r.off("dragend",this._onDragEnd,r),this._toggleMarkerHighlight()},_onDragEnd:function(r){var c=r.target;c.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:c})},_toggleMarkerHighlight:function(){var r=this._marker._icon;r&&(r.style.display="none",L.DomUtil.hasClass(r,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(r,"leaflet-edit-marker-selected"),this._offsetMarker(r,-4)):(L.DomUtil.addClass(r,"leaflet-edit-marker-selected"),this._offsetMarker(r,4)),r.style.display="")},_offsetMarker:function(r,c){var f=parseInt(r.style.marginTop,10)-c,p=parseInt(r.style.marginLeft,10)-c;r.style.marginTop=f+"px",r.style.marginLeft=p+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(r){this.latlngs=[r._latlngs],r._holes&&(this.latlngs=this.latlngs.concat(r._holes)),this._poly=r,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(r){for(var c=0;c<this._verticesHandlers.length;c++)r(this._verticesHandlers[c])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(r){r.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(r){r.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(r){r.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var r=0;r<this.latlngs.length;r++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[r],this._poly.options.poly))},_updateLatLngs:function(r){this.latlngs=[r.layer._latlngs],r.layer._holes&&(this.latlngs=this.latlngs.concat(r.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(r,c,f){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=r,f&&f.drawError&&(f.drawError=L.Util.extend({},this.options.drawError,f.drawError)),this._latlngs=c,L.setOptions(this,f)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var r=this._poly,c=r._path;r instanceof L.Polygon||(r.options.fill=!1,r.options.editing&&(r.options.editing.fill=!1)),c&&r.options.editing&&r.options.editing.className&&(r.options.original.className&&r.options.original.className.split(" ").forEach(function(f){L.DomUtil.removeClass(c,f)}),r.options.editing.className.split(" ").forEach(function(f){L.DomUtil.addClass(c,f)})),r.setStyle(r.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var r=this._poly,c=r._path;c&&r.options.editing&&r.options.editing.className&&(r.options.editing.className.split(" ").forEach(function(f){L.DomUtil.removeClass(c,f)}),r.options.original.className&&r.options.original.className.split(" ").forEach(function(f){L.DomUtil.addClass(c,f)})),r.setStyle(r.options.original),r._map&&(r._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var r,c,f,p,y=this._defaultShape();for(r=0,f=y.length;r<f;r++)p=this._createMarker(y[r],r),p.on("click",this._onMarkerClick,this),p.on("contextmenu",this._onContextMenu,this),this._markers.push(p);var _,E;for(r=0,c=f-1;r<f;c=r++)(r!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(_=this._markers[c],E=this._markers[r],this._createMiddleMarker(_,E),this._updatePrevNext(_,E))},_createMarker:function(r,c){var f=new L.Marker.Touch(r,{draggable:!0,icon:this.options.icon});return f._origLatLng=r,f._index=c,f.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(f),f},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var r=this._defaultShape(),c=[].splice.apply(r,arguments);return this._poly._convertLatLngs(r,!0),this._poly.redraw(),c},_removeMarker:function(r){var c=r._index;this._markerGroup.removeLayer(r),this._markers.splice(c,1),this._spliceLatLngs(c,1),this._updateIndexes(c,-1),r.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(r){var c=r.target,f=this._poly,p=L.LatLngUtil.cloneLatLng(c._origLatLng);if(L.extend(c._origLatLng,c._latlng),f.options.poly){var y=f._map._editTooltip;if(!f.options.poly.allowIntersection&&f.intersects()){L.extend(c._origLatLng,p),c.setLatLng(p);var _=f.options.color;f.setStyle({color:this.options.drawError.color}),y&&y.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){f.setStyle({color:_}),y&&y.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}c._middleLeft&&c._middleLeft.setLatLng(this._getMiddleLatLng(c._prev,c)),c._middleRight&&c._middleRight.setLatLng(this._getMiddleLatLng(c,c._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var E=this._poly.getLatLngs();this._poly._convertLatLngs(E,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(r){var c=L.Polygon&&this._poly instanceof L.Polygon?4:3,f=r.target;this._defaultShape().length<c||(this._removeMarker(f),this._updatePrevNext(f._prev,f._next),f._middleLeft&&this._markerGroup.removeLayer(f._middleLeft),f._middleRight&&this._markerGroup.removeLayer(f._middleRight),f._prev&&f._next?this._createMiddleMarker(f._prev,f._next):f._prev?f._next||(f._prev._middleRight=null):f._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(r){var c=r.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:c,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(r){var c=this._map.mouseEventToLayerPoint(r.originalEvent.touches[0]),f=this._map.layerPointToLatLng(c),p=r.target;L.extend(p._origLatLng,f),p._middleLeft&&p._middleLeft.setLatLng(this._getMiddleLatLng(p._prev,p)),p._middleRight&&p._middleRight.setLatLng(this._getMiddleLatLng(p,p._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(r,c){this._markerGroup.eachLayer(function(f){f._index>r&&(f._index+=c)})},_createMiddleMarker:function(r,c){var f,p,y,_=this._getMiddleLatLng(r,c),E=this._createMarker(_);E.setOpacity(.6),r._middleRight=c._middleLeft=E,p=function(){E.off("touchmove",p,this);var S=c._index;E._index=S,E.off("click",f,this).on("click",this._onMarkerClick,this),_.lat=E.getLatLng().lat,_.lng=E.getLatLng().lng,this._spliceLatLngs(S,0,_),this._markers.splice(S,0,E),E.setOpacity(1),this._updateIndexes(S,1),c._index++,this._updatePrevNext(r,E),this._updatePrevNext(E,c),this._poly.fire("editstart")},y=function(){E.off("dragstart",p,this),E.off("dragend",y,this),E.off("touchmove",p,this),this._createMiddleMarker(r,E),this._createMiddleMarker(E,c)},f=function(){p.call(this),y.call(this),this._fireEdit()},E.on("click",f,this).on("dragstart",p,this).on("dragend",y,this).on("touchmove",p,this),this._markerGroup.addLayer(E)},_updatePrevNext:function(r,c){r&&(r._next=c),c&&(c._prev=r)},_getMiddleLatLng:function(r,c){var f=this._poly._map,p=f.project(r.getLatLng()),y=f.project(c.getLatLng());return f.unproject(p._add(y)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(r,c){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=r,L.Util.setOptions(this,c)},addHooks:function(){var r=this._shape;this._shape._map&&(this._map=this._shape._map,r.setStyle(r.options.editing),r._map&&(this._map=r._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var r=this._shape;if(r.setStyle(r.options.original),r._map){this._unbindMarker(this._moveMarker);for(var c=0,f=this._resizeMarkers.length;c<f;c++)this._unbindMarker(this._resizeMarkers[c]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(r,c){var f=new L.Marker.Touch(r,{draggable:!0,icon:c,zIndexOffset:10});return this._bindMarker(f),this._markerGroup.addLayer(f),f},_bindMarker:function(r){r.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(r){r.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(r){r.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(r){var c=r.target,f=c.getLatLng();c===this._moveMarker?this._move(f):this._resize(f),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(r){r.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(r){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,r),typeof this._getCorners=="function"){var c=this._getCorners(),f=r.target,p=f._cornerIndex;f.setOpacity(0),this._oppositeCorner=c[(p+2)%4],this._toggleCornerMarkers(0,p)}this._shape.fire("editstart")},_onTouchMove:function(r){var c=this._map.mouseEventToLayerPoint(r.originalEvent.touches[0]),f=this._map.layerPointToLatLng(c);return r.target===this._moveMarker?this._move(f):this._resize(f),this._shape.redraw(),!1},_onTouchEnd:function(r){r.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var r=this._shape.getBounds(),c=r.getCenter();this._moveMarker=this._createMarker(c,this.options.moveIcon)},_createResizeMarker:function(){var r=this._getCorners();this._resizeMarkers=[];for(var c=0,f=r.length;c<f;c++)this._resizeMarkers.push(this._createMarker(r[c],this.options.resizeIcon)),this._resizeMarkers[c]._cornerIndex=c},_onMarkerDragStart:function(r){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,r);var c=this._getCorners(),f=r.target,p=f._cornerIndex;this._oppositeCorner=c[(p+2)%4],this._toggleCornerMarkers(0,p)},_onMarkerDragEnd:function(r){var c,f,p=r.target;p===this._moveMarker&&(c=this._shape.getBounds(),f=c.getCenter(),p.setLatLng(f)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,r)},_move:function(r){for(var c,f=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),p=this._shape.getBounds(),y=p.getCenter(),_=[],E=0,S=f.length;E<S;E++)c=[f[E].lat-y.lat,f[E].lng-y.lng],_.push([r.lat+c[0],r.lng+c[1]]);this._shape.setLatLngs(_),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(r){var c;this._shape.setBounds(L.latLngBounds(r,this._oppositeCorner)),c=this._shape.getBounds(),this._moveMarker.setLatLng(c.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var r=this._shape.getBounds();return[r.getNorthWest(),r.getNorthEast(),r.getSouthEast(),r.getSouthWest()]},_toggleCornerMarkers:function(r){for(var c=0,f=this._resizeMarkers.length;c<f;c++)this._resizeMarkers[c].setOpacity(r)},_repositionCornerMarkers:function(){for(var r=this._getCorners(),c=0,f=this._resizeMarkers.length;c<f;c++)this._resizeMarkers[c].setLatLng(r[c])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var r=this._shape.getLatLng();this._moveMarker=this._createMarker(r,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(r){if(this._resizeMarkers.length){var c=this._getResizeMarkerPoint(r);this._resizeMarkers[0].setLatLng(c)}this._shape.setLatLng(r),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var r=this._shape.getLatLng(),c=this._getResizeMarkerPoint(r);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(c,this.options.resizeIcon))},_getResizeMarkerPoint:function(r){var c=this._shape._radius*Math.cos(Math.PI/4),f=this._map.project(r);return this._map.unproject([f.x+c,f.y-c])},_resize:function(r){var c=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=c.distanceTo(r):radius=this._map.distance(c,r),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(r,c){var f={};if(r.touches!==void 0){if(!r.touches.length)return;f=r.touches[0]}else if(r.pointerType!=="touch"||(f=r,!this._filterClick(r)))return;var p=this._map.mouseEventToContainerPoint(f),y=this._map.mouseEventToLayerPoint(f),_=this._map.layerPointToLatLng(y);this._map.fire(c,{latlng:_,layerPoint:y,containerPoint:p,pageX:f.pageX,pageY:f.pageY,originalEvent:r})},_filterClick:function(r){var c=r.timeStamp||r.originalEvent.timeStamp,f=L.DomEvent._lastClick&&c-L.DomEvent._lastClick;return f&&f>100&&f<500||r.target._simulatedClick&&!r._simulated?(L.DomEvent.stop(r),!1):(L.DomEvent._lastClick=c,!0)},_onTouchStart:function(r){this._map._loaded&&this._touchEvent(r,"touchstart")},_onTouchEnd:function(r){this._map._loaded&&this._touchEvent(r,"touchend")},_onTouchCancel:function(r){if(this._map._loaded){var c="touchcancel";this._detectIE()&&(c="pointercancel"),this._touchEvent(r,c)}},_onTouchLeave:function(r){this._map._loaded&&this._touchEvent(r,"touchleave")},_onTouchMove:function(r){this._map._loaded&&this._touchEvent(r,"touchmove")},_detectIE:function(){var r=e.navigator.userAgent,c=r.indexOf("MSIE ");if(c>0)return parseInt(r.substring(c+5,r.indexOf(".",c)),10);if(r.indexOf("Trident/")>0){var f=r.indexOf("rv:");return parseInt(r.substring(f+3,r.indexOf(".",f)),10)}var p=r.indexOf("Edge/");return p>0&&parseInt(r.substring(p+5,r.indexOf(".",p)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var r=this._icon,c=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?c.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):c.concat(["touchcancel"]),L.DomUtil.addClass(r,"leaflet-clickable"),L.DomEvent.on(r,"click",this._onMouseClick,this),L.DomEvent.on(r,"keypress",this._onKeyPress,this);for(var f=0;f<c.length;f++)L.DomEvent.on(r,c[f],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var r=e.navigator.userAgent,c=r.indexOf("MSIE ");if(c>0)return parseInt(r.substring(c+5,r.indexOf(".",c)),10);if(r.indexOf("Trident/")>0){var f=r.indexOf("rv:");return parseInt(r.substring(f+3,r.indexOf(".",f)),10)}var p=r.indexOf("Edge/");return p>0&&parseInt(r.substring(p+5,r.indexOf(".",p)),10)}}),L.LatLngUtil={cloneLatLngs:function(r){for(var c=[],f=0,p=r.length;f<p;f++)Array.isArray(r[f])?c.push(L.LatLngUtil.cloneLatLngs(r[f])):c.push(this.cloneLatLng(r[f]));return c},cloneLatLng:function(r){return L.latLng(r.lat,r.lng)}},(function(){var r={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(c){var f,p,y=c.length,_=0,E=Math.PI/180;if(y>2){for(var S=0;S<y;S++)f=c[S],p=c[(S+1)%y],_+=(p.lng-f.lng)*E*(2+Math.sin(f.lat*E)+Math.sin(p.lat*E));_=6378137*_*6378137/2}return Math.abs(_)},formattedNumber:function(c,f){var p=parseFloat(c).toFixed(f),y=L.drawLocal.format&&L.drawLocal.format.numeric,_=y&&y.delimiters,E=_&&_.thousands,S=_&&_.decimal;if(E||S){var M=p.split(".");p=E?M[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+E):M[0],S=S||".",M.length>1&&(p=p+S+M[1])}return p},readableArea:function(c,f,E){var y,_,E=L.Util.extend({},r,E);return f?(_=["ha","m"],type=typeof f,type==="string"?_=[f]:type!=="boolean"&&(_=f),y=c>=1e6&&_.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*c,E.km)+" km":c>=1e4&&_.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*c,E.ha)+" ha":L.GeometryUtil.formattedNumber(c,E.m)+" m"):(c/=.836127,y=c>=3097600?L.GeometryUtil.formattedNumber(c/3097600,E.mi)+" mi":c>=4840?L.GeometryUtil.formattedNumber(c/4840,E.ac)+" acres":L.GeometryUtil.formattedNumber(c,E.yd)+" yd"),y},readableDistance:function(c,f,p,y,S){var E,S=L.Util.extend({},r,S);switch(f?typeof f=="string"?f:"metric":p?"feet":y?"nauticalMile":"yards"){case"metric":E=c>1e3?L.GeometryUtil.formattedNumber(c/1e3,S.km)+" km":L.GeometryUtil.formattedNumber(c,S.m)+" m";break;case"feet":c*=3.28083,E=L.GeometryUtil.formattedNumber(c,S.ft)+" ft";break;case"nauticalMile":c*=.53996,E=L.GeometryUtil.formattedNumber(c/1e3,S.nm)+" nm";break;default:c*=1.09361,E=c>1760?L.GeometryUtil.formattedNumber(c/1760,S.mi)+" miles":L.GeometryUtil.formattedNumber(c,S.yd)+" yd"}return E},isVersion07x:function(){var c=L.version.split(".");return parseInt(c[0],10)===0&&parseInt(c[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(r,c,f,p){return this._checkCounterclockwise(r,f,p)!==this._checkCounterclockwise(c,f,p)&&this._checkCounterclockwise(r,c,f)!==this._checkCounterclockwise(r,c,p)},_checkCounterclockwise:function(r,c,f){return(f.y-r.y)*(c.x-r.x)>(c.y-r.y)*(f.x-r.x)}}),L.Polyline.include({intersects:function(){var r,c,f,p=this._getProjectedPoints(),y=p?p.length:0;if(this._tooFewPointsForIntersection())return!1;for(r=y-1;r>=3;r--)if(c=p[r-1],f=p[r],this._lineSegmentsIntersectsRange(c,f,r-2))return!0;return!1},newLatLngIntersects:function(r,c){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(r),c)},newPointIntersects:function(r,c){var f=this._getProjectedPoints(),p=f?f.length:0,y=f?f[p-1]:null,_=p-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(y,r,_,c?1:0)},_tooFewPointsForIntersection:function(r){var c=this._getProjectedPoints(),f=c?c.length:0;return f+=r||0,!c||f<=3},_lineSegmentsIntersectsRange:function(r,c,f,p){var y,_,E=this._getProjectedPoints();p=p||0;for(var S=f;S>p;S--)if(y=E[S-1],_=E[S],L.LineUtil.segmentsIntersect(r,c,y,_))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var r=[],c=this._defaultShape(),f=0;f<c.length;f++)r.push(this._map.latLngToLayerPoint(c[f]));return r}}),L.Polygon.include({intersects:function(){var r,c,f,p,y=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(r=y.length,c=y[0],f=y[r-1],p=r-2,this._lineSegmentsIntersectsRange(f,c,p,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(r){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,r);var c;this._toolbars={},L.DrawToolbar&&this.options.draw&&(c=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=c,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(c=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=c,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(r){var c,f=L.DomUtil.create("div","leaflet-draw"),p=!1;for(var y in this._toolbars)this._toolbars.hasOwnProperty(y)&&(c=this._toolbars[y].addToolbar(r))&&(p||(L.DomUtil.hasClass(c,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(c.childNodes[0],"leaflet-draw-toolbar-top"),p=!0),f.appendChild(c));return f},onRemove:function(){for(var r in this._toolbars)this._toolbars.hasOwnProperty(r)&&this._toolbars[r].removeToolbar()},setDrawingOptions:function(r){for(var c in this._toolbars)this._toolbars[c]instanceof L.DrawToolbar&&this._toolbars[c].setOptions(r)},_toolbarEnabled:function(r){var c=r.target;for(var f in this._toolbars)this._toolbars[f]!==c&&this._toolbars[f].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(r){L.setOptions(this,r),this._modes={},this._actionButtons=[],this._activeMode=null;var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(r){var c,f=L.DomUtil.create("div","leaflet-draw-section"),p=0,y=this._toolbarClass||"",_=this.getModeHandlers(r);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=r,c=0;c<_.length;c++)_[c].enabled&&this._initModeHandler(_[c].handler,this._toolbarContainer,p++,y,_[c].title);if(p)return this._lastButtonIndex=--p,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),f.appendChild(this._toolbarContainer),f.appendChild(this._actionsContainer),f},removeToolbar:function(){for(var r in this._modes)this._modes.hasOwnProperty(r)&&(this._disposeButton(this._modes[r].button,this._modes[r].handler.enable,this._modes[r].handler),this._modes[r].handler.disable(),this._modes[r].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var c=0,f=this._actionButtons.length;c<f;c++)this._disposeButton(this._actionButtons[c].button,this._actionButtons[c].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(r,c,f,p,y){var _=r.type;this._modes[_]={},this._modes[_].handler=r,this._modes[_].button=this._createButton({type:_,title:y,className:p+"-"+_,container:c,callback:this._modes[_].handler.enable,context:this._modes[_].handler}),this._modes[_].buttonIndex=f,this._modes[_].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream},_createButton:function(r){var c=L.DomUtil.create("a",r.className||"",r.container),f=L.DomUtil.create("span","sr-only",r.container);c.href="#",c.appendChild(f),r.title&&(c.title=r.title,f.innerHTML=r.title),r.text&&(c.innerHTML=r.text,f.innerHTML=r.text);var p=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(c,"click",L.DomEvent.stopPropagation).on(c,"mousedown",L.DomEvent.stopPropagation).on(c,"dblclick",L.DomEvent.stopPropagation).on(c,"touchstart",L.DomEvent.stopPropagation).on(c,"click",L.DomEvent.preventDefault).on(c,p,r.callback,r.context),c},_disposeButton:function(r,c){var f=this._detectIOS()?"touchstart":"click";L.DomEvent.off(r,"click",L.DomEvent.stopPropagation).off(r,"mousedown",L.DomEvent.stopPropagation).off(r,"dblclick",L.DomEvent.stopPropagation).off(r,"touchstart",L.DomEvent.stopPropagation).off(r,"click",L.DomEvent.preventDefault).off(r,f,c)},_handlerActivated:function(r){this.disable(),this._activeMode=this._modes[r.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(r){var c,f,p,y,_=this._actionsContainer,E=this.getActions(r),S=E.length;for(f=0,p=this._actionButtons.length;f<p;f++)this._disposeButton(this._actionButtons[f].button,this._actionButtons[f].callback);for(this._actionButtons=[];_.firstChild;)_.removeChild(_.firstChild);for(var M=0;M<S;M++)"enabled"in E[M]&&!E[M].enabled||(c=L.DomUtil.create("li","",_),y=this._createButton({title:E[M].title,text:E[M].text,container:c,callback:E[M].callback,context:E[M].context}),this._actionButtons.push({button:y,callback:E[M].callback}))},_showActionsToolbar:function(){var r=this._activeMode.buttonIndex,c=this._lastButtonIndex,f=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=f+"px",r===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),r===c&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(r){this._map=r,this._popupPane=r._panes.popupPane,this._visible=!1,this._container=r.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(r){return this._container?(r.subtext=r.subtext||"",r.subtext.length!==0||this._singleLineLabel?r.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(r.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+r.subtext+"</span><br />":"")+"<span>"+r.text+"</span>",r.text||r.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(r){var c=this._map.latLngToLayerPoint(r),f=this._container;return this._container&&(this._visible&&(f.style.visibility="inherit"),L.DomUtil.setPosition(f,c)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(r){for(var c in this.options)this.options.hasOwnProperty(c)&&r[c]&&(r[c]=L.extend({},this.options[c],r[c]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,r)},getModeHandlers:function(r){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(r,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(r,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(r,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(r,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(r,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(r,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(r){return[{enabled:r.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:r.completeShape,context:r},{enabled:r.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:r.deleteLastVertex,context:r},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(r){L.setOptions(this,r);for(var c in this._modes)this._modes.hasOwnProperty(c)&&r.hasOwnProperty(c)&&this._modes[c].handler.setOptions(r[c])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(r){r.edit&&(r.edit.selectedPathOptions===void 0&&(r.edit.selectedPathOptions=this.options.edit.selectedPathOptions),r.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,r.edit.selectedPathOptions)),r.remove&&(r.remove=L.extend({},this.options.remove,r.remove)),r.poly&&(r.poly=L.extend({},this.options.poly,r.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,r),this._selectedFeatureCount=0},getModeHandlers:function(r){var c=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(r,{featureGroup:c,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(r,{featureGroup:c}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(r){var c=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return r.removeAllLayers&&c.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),c},addToolbar:function(r){var c=L.Toolbar.prototype.addToolbar.call(this,r);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),c},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var r,c=this.options.featureGroup,f=c.getLayers().length!==0;this.options.edit&&(r=this._modes[L.EditToolbar.Edit.TYPE].button,f?L.DomUtil.removeClass(r,"leaflet-disabled"):L.DomUtil.addClass(r,"leaflet-disabled"),r.setAttribute("title",f?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(r=this._modes[L.EditToolbar.Delete.TYPE].button,f?L.DomUtil.removeClass(r,"leaflet-disabled"):L.DomUtil.addClass(r,"leaflet-disabled"),r.setAttribute("title",f?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(r,c){if(L.Handler.prototype.initialize.call(this,r),L.setOptions(this,c),this._featureGroup=c.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var f=L.version.split(".");parseInt(f[0],10)===1&&parseInt(f[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(r.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),r._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(r){this._revertLayer(r)},this)},save:function(){var r=new L.LayerGroup;this._featureGroup.eachLayer(function(c){c.edited&&(r.addLayer(c),c.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:r})},_backupLayer:function(r){var c=L.Util.stamp(r);this._uneditedLayerProps[c]||(r instanceof L.Polyline||r instanceof L.Polygon||r instanceof L.Rectangle?this._uneditedLayerProps[c]={latlngs:L.LatLngUtil.cloneLatLngs(r.getLatLngs())}:r instanceof L.Circle?this._uneditedLayerProps[c]={latlng:L.LatLngUtil.cloneLatLng(r.getLatLng()),radius:r.getRadius()}:(r instanceof L.Marker||r instanceof L.CircleMarker)&&(this._uneditedLayerProps[c]={latlng:L.LatLngUtil.cloneLatLng(r.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(r){var c=L.Util.stamp(r);r.edited=!1,this._uneditedLayerProps.hasOwnProperty(c)&&(r instanceof L.Polyline||r instanceof L.Polygon||r instanceof L.Rectangle?r.setLatLngs(this._uneditedLayerProps[c].latlngs):r instanceof L.Circle?(r.setLatLng(this._uneditedLayerProps[c].latlng),r.setRadius(this._uneditedLayerProps[c].radius)):(r instanceof L.Marker||r instanceof L.CircleMarker)&&r.setLatLng(this._uneditedLayerProps[c].latlng),r.fire("revert-edited",{layer:r}))},_enableLayerEdit:function(r){var c,f,p=r.layer||r.target||r;this._backupLayer(p),this.options.poly&&(f=L.Util.extend({},this.options.poly),p.options.poly=f),this.options.selectedPathOptions&&(c=L.Util.extend({},this.options.selectedPathOptions),c.maintainColor&&(c.color=p.options.color,c.fillColor=p.options.fillColor),p.options.original=L.extend({},p.options),p.options.editing=c),p instanceof L.Marker?(p.editing&&p.editing.enable(),p.dragging.enable(),p.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):p.editing.enable()},_disableLayerEdit:function(r){var c=r.layer||r.target||r;c.edited=!1,c.editing&&c.editing.disable(),delete c.options.editing,delete c.options.original,this._selectedPathOptions&&(c instanceof L.Marker?this._toggleMarkerHighlight(c):(c.setStyle(c.options.previousOptions),delete c.options.previousOptions)),c instanceof L.Marker?(c.dragging.disable(),c.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):c.editing.disable()},_onMouseMove:function(r){this._tooltip.updatePosition(r.latlng)},_onMarkerDragEnd:function(r){var c=r.target;c.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:c})},_onTouchMove:function(r){var c=r.originalEvent.changedTouches[0],f=this._map.mouseEventToLayerPoint(c),p=this._map.layerPointToLatLng(f);r.target.setLatLng(p)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(r,c){if(L.Handler.prototype.initialize.call(this,r),L.Util.setOptions(this,c),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var f=L.version.split(".");parseInt(f[0],10)===1&&parseInt(f[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(r.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(r){this._deletableLayers.addLayer(r),r.fire("revert-deleted",{layer:r})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(r){this._removeLayer({layer:r})},this),this.save()},_enableLayerDelete:function(r){(r.layer||r.target||r).on("click",this._removeLayer,this)},_disableLayerDelete:function(r){var c=r.layer||r.target||r;c.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(c)},_removeLayer:function(r){var c=r.layer||r.target||r;this._deletableLayers.removeLayer(c),this._deletedLayers.addLayer(c),c.fire("deleted")},_onMouseMove:function(r){this._tooltip.updatePosition(r.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);function gc(e){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},gc(e)}function J0(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),i.push.apply(i,l)}return i}function sc(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?J0(Object(i),!0).forEach(function(l){TM(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):J0(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function TM(e,n,i){return(n=CM(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function CM(e){var n=kM(e,"string");return gc(n)=="symbol"?n:n+""}function kM(e,n){if(gc(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,n);if(gc(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var qo={onEdited:"draw:edited",onDrawStart:"draw:drawstart",onDrawStop:"draw:drawstop",onDrawVertex:"draw:drawvertex",onEditStart:"draw:editstart",onEditMove:"draw:editmove",onEditResize:"draw:editresize",onEditVertex:"draw:editvertex",onEditStop:"draw:editstop",onDeleted:"draw:deleted",onDeleteStart:"draw:deletestart",onDeleteStop:"draw:deletestop"};function Q1(e){var n=Sf(),i=Gt.useRef(),l=Gt.useRef(e),r=function(f){var p=e.onCreated,y=n.layerContainer||n.map;y.addLayer(f.layer),p&&p(f)};return ya.useEffect(function(){var c=n.map,f=e.onMounted;for(var p in qo)c.on(qo[p],function(y){var _=Object.keys(qo).filter(function(S){return qo[S]===y.type});if(_.length===1){var E=_[0];e[E]&&e[E](y)}});return c.on(Zl.Draw.Event.CREATED,r),i.current=K0(e,n),c.addControl(i.current),f&&f(i.current),function(){c.off(Zl.Draw.Event.CREATED,r);for(var y in qo)e[y]&&c.off(qo[y],e[y]);i.current.remove(c)}},[e.onCreated,e.onDeleted,e.onEdited]),ya.useEffect(function(){if(!(Ho(e.draw,l.current.draw)&&Ho(e.edit,l.current.edit)&&e.position===l.current.position)){var c=n.map;i.current.remove(c),i.current=K0(e,n),i.current.addTo(c);var f=e.onMounted;return f&&f(i.current),function(){i.current.remove(c)}}},[e.draw,e.edit,e.position,e.onCreated,e.onDeleted,e.onEdited]),null}function K0(e,n){var i=n.layerContainer,l=e.draw,r=e.edit,c=e.position,f={edit:sc(sc({},r),{},{featureGroup:i})};return l&&(f.draw=sc({},l)),c&&(f.position=c),new co.Control.Draw(f)}Q1.propTypes=sc(sc({},Object.keys(qo).reduce(function(e,n){return e[n]=De.PropTypes.func,e},{})),{},{onCreated:De.PropTypes.func,onMounted:De.PropTypes.func,draw:De.PropTypes.shape({polyline:De.PropTypes.oneOfType([De.PropTypes.object,De.PropTypes.bool]),polygon:De.PropTypes.oneOfType([De.PropTypes.object,De.PropTypes.bool]),rectangle:De.PropTypes.oneOfType([De.PropTypes.object,De.PropTypes.bool]),circle:De.PropTypes.oneOfType([De.PropTypes.object,De.PropTypes.bool]),marker:De.PropTypes.oneOfType([De.PropTypes.object,De.PropTypes.bool])}),edit:De.PropTypes.shape({edit:De.PropTypes.oneOfType([De.PropTypes.object,De.PropTypes.bool]),remove:De.PropTypes.oneOfType([De.PropTypes.object,De.PropTypes.bool]),poly:De.PropTypes.oneOfType([De.PropTypes.object,De.PropTypes.bool]),allowIntersection:De.PropTypes.bool}),position:De.PropTypes.oneOf(["topright","topleft","bottomright","bottomleft"]),leaflet:De.PropTypes.shape({map:De.PropTypes.instanceOf(co.Map),layerContainer:De.PropTypes.shape({addLayer:De.PropTypes.func.isRequired,removeLayer:De.PropTypes.func.isRequired})})});const MM="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",NM="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let OM=Zl.icon({iconUrl:MM,shadowUrl:NM,iconSize:[25,41],iconAnchor:[12,41]});Zl.Marker.prototype.options.icon=OM;const Cf=({onCreated:e,onDeleted:n,onMounted:i,date:l,stateMode:r,selectedStates:c,onStateClick:f,children:p})=>{console.log("MapComponent rendered with date:",l);const[y,_]=Gt.useState(null);Gt.useEffect(()=>{r&&!y&&(console.log("Fetching US States GeoJSON..."),fetch("/smoke-zipcode-selector/us_states.json").then(M=>M.json()).then(M=>{console.log("States Loaded",M),_(M)}).catch(M=>console.error("Failed to load states:",M)))},[r,y]);const E=M=>{const O=c.has(M.properties.NAME);return{fillColor:O?"#3388ff":"#ccc",weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:O?.6:.2}},S=(M,O)=>{O.on({click:()=>{f(M.properties.NAME)},mouseover:B=>{const Q=B.target;Q.setStyle({weight:4,color:"#666",dashArray:"",fillOpacity:.5}),Q.bringToFront()},mouseout:B=>{const Q=B.target,st=c.has(M.properties.NAME);Q.setStyle({fillColor:st?"#3388ff":"#ccc",weight:2,color:"white",dashArray:"3",fillOpacity:st?.6:.2})}}),O.bindTooltip(M.properties.NAME,{sticky:!0})};return R.jsxs(wM,{center:[39.8283,-98.5795],zoom:4,style:{height:"100%",width:"100%"},ref:i,children:[R.jsx(X0,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),R.jsx(X0,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),p,r&&y&&R.jsx(Tf,{data:y,style:E,onEachFeature:S},`states-${Array.from(c).join(",")}`),!r&&R.jsx(xM,{children:R.jsx(Q1,{position:"topright",onCreated:e,onDeleted:n,draw:{rectangle:{showArea:!1},polygon:{showArea:!1},circle:!0,circlemarker:!1,marker:!1,polyline:!1}})})]})},AM=({date:e})=>{const[n,i]=Gt.useState(null),[l,r]=Gt.useState(!1),[c,f]=Gt.useState({x:0,y:0}),[p,y]=Gt.useState(!1),_=Gt.useRef(null);_M({mousemove(O){f(O.containerPoint),y(!0),_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{E(O.latlng.lat,O.latlng.lng)},600)},mouseout(){y(!1),_.current&&clearTimeout(_.current)}});const E=async(O,B)=>{r(!0),i(null),console.log("Fetching AQI for:",O,B,"Date:",e);try{const Q=new Date().toISOString().split("T")[0];if(e===Q){const st=`https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${O}&longitude=${B}&current=us_aqi`;console.log(`[AQI] Fetching Current: ${st}`);const j=await(await fetch(st)).json();console.log("[AQI] Current Data:",j),j.current&&j.current.us_aqi!==void 0&&i(j.current.us_aqi)}else{const st=`https://archive-api.open-meteo.com/v1/archive?latitude=${O}&longitude=${B}&start_date=${e}&end_date=${e}&hourly=us_aqi_pm2_5`;console.log(`[AQI] Fetching History: ${st}`);const j=await(await fetch(st)).json();if(console.log("[AQI] History Data:",j),j.hourly&&j.hourly.us_aqi_pm2_5){const Y=j.hourly.us_aqi_pm2_5.filter(V=>V!==null);Y.length>0&&i(Math.max(...Y))}}}catch(Q){console.error("Failed to fetch AQI",Q)}finally{r(!1)}};if(!p)return null;let S="#ccc",M="Loading...";return!l&&n!==null&&(M=`AQI: ${n}`,n<=50?S="#00e400":n<=100?S="#ffff00":n<=150?S="#ff7e00":n<=200?S="#ff0000":n<=300?S="#8f3f97":S="#7e0023"),R.jsx("div",{style:{position:"absolute",left:c.x+15,top:c.y+15,backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"6px 12px",borderRadius:"6px",border:`3px solid ${S}`,fontWeight:"bold",zIndex:1e4,pointerEvents:"none",whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.25)",fontSize:"14px",fontFamily:"sans-serif"},children:M})},xc=({leftPanel:e,mapContent:n,rightPanel:i})=>R.jsxs("div",{className:"dashboard-layout",children:[R.jsx("div",{className:"left-panel",children:e}),R.jsx("div",{className:"center-panel",children:n}),i&&R.jsx("div",{className:"right-panel",children:i})]}),kf=({onExport:e,loading:n,zipLoading:i})=>R.jsxs(R.Fragment,{children:[R.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"5px",marginTop:"10px"},children:[R.jsx("button",{className:"export-btn",onClick:()=>e("DOWNLOAD"),disabled:n||i,style:{backgroundColor:"#4a90e2",fontSize:"11px"},children:"Download SQL"}),R.jsx("button",{className:"export-btn",onClick:()=>e("COPY"),disabled:n||i,style:{backgroundColor:"#6c757d",fontSize:"11px"},children:"Copy SQL"})]}),R.jsx("button",{className:"export-btn",onClick:()=>e("COUNT"),disabled:n||i,style:{width:"100%",marginTop:"5px",backgroundColor:"#28a745",fontSize:"11px"},children:"Copy Count SQL"})]}),DM=({onClose:e,content:n})=>R.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2e3},children:R.jsxs("div",{style:{backgroundColor:"white",padding:"25px",borderRadius:"8px",width:"600px",maxWidth:"90%",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"},children:[R.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[R.jsx("h2",{style:{margin:0,fontSize:"20px"},children:"Query Type Explainer"}),R.jsx("button",{onClick:e,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:""})]}),R.jsx("div",{style:{fontSize:"14px",lineHeight:"1.6",color:"#333"},children:n?R.jsxs("div",{children:[R.jsx("h4",{style:{color:"#007bff",marginBottom:"8px"},children:n.label}),R.jsxs("p",{children:[R.jsx("strong",{children:"Description:"})," ",n.description]}),R.jsx("p",{children:R.jsx("em",{children:"(Placeholder for detailed SQL logic explanation based on selected query type.)"})})]}):R.jsx("p",{children:"Select a query type to see details."})}),R.jsx("div",{style:{marginTop:"20px",textAlign:"right"},children:R.jsx("button",{onClick:e,style:{padding:"8px 16px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Close"})})]})}),IM=[{id:"count_summary",label:"1. Site / Customer / Contact Count",description:"Get a summary count of all records.",config:{recordType:"Count",filters:{},naics:[]}},{id:"site_export",label:"2. Site Export",description:"Export Site records.",config:{recordType:"Site",filters:{activeStatus:!0},naics:[]}},{id:"customer_export",label:"3. Customer Export",description:"Export Customer records.",config:{recordType:"Customer",filters:{activeStatus:!0,minTotalSales:"5000"},naics:[]}},{id:"contact_export",label:"4. Contact Export",description:"Export Contact records.",config:{recordType:"Contact",filters:{activeStatus:!0},naics:[]}}],RM=({onSelect:e,currentConfig:n})=>{const[i,l]=Gt.useState(!1),[r,c]=Gt.useState("count_summary"),[f,p]=Gt.useState(null),y=E=>{c(E.id),e(E.config)},_=(E,S)=>{E.stopPropagation(),p(S),l(!0)};return R.jsxs("div",{style:{marginBottom:"15px"},children:[R.jsx("label",{style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"8px",display:"block"},children:"QUERY TYPE"}),R.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:IM.map(E=>R.jsxs("div",{onClick:()=>y(E),style:{padding:"10px",borderRadius:"4px",border:r===E.id?"1px solid #007bff":"1px solid #ced4da",backgroundColor:r===E.id?"#e7f1ff":"#fff",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease"},children:[R.jsx("span",{style:{fontSize:"12px",fontWeight:r===E.id?"bold":"normal",color:"#333"},children:E.label}),R.jsx("button",{onClick:S=>_(S,E),style:{background:"none",border:"none",color:"#666",cursor:"pointer",padding:"4px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",fontSize:"12px",fontWeight:"bold"},title:"More Info",children:"?"})]},E.id))}),i&&R.jsx(DM,{onClose:()=>l(!1),content:f})]})},PM=[{code:"11",title:"Agriculture, Forestry, Fishing and Hunting",children:[{code:"111",title:"Crop Production",children:[{code:"1111",title:"Oilseed and Grain Farming"},{code:"1112",title:"Vegetable and Melon Farming"}]},{code:"112",title:"Animal Production and Aquaculture"}]},{code:"23",title:"Construction",children:[{code:"236",title:"Construction of Buildings"},{code:"237",title:"Heavy and Civil Engineering Construction"},{code:"238",title:"Specialty Trade Contractors"}]},{code:"31-33",title:"Manufacturing",children:[{code:"311",title:"Food Manufacturing"},{code:"325",title:"Chemical Manufacturing"},{code:"334",title:"Computer and Electronic Product Manufacturing"}]},{code:"44-45",title:"Retail Trade",children:[{code:"441",title:"Motor Vehicle and Parts Dealers"},{code:"445",title:"Food and Beverage Stores"}]},{code:"61",title:"Educational Services",children:[{code:"611",title:"Educational Services"}]},{code:"62",title:"Health Care and Social Assistance",children:[{code:"621",title:"Ambulatory Health Care Services"},{code:"622",title:"Hospitals"},{code:"623",title:"Nursing and Residential Care Facilities"}]}],W1=({node:e,selectedCodes:n,onToggle:i,forceExpand:l})=>{const[r,c]=Gt.useState(!1),f=e.children&&e.children.length>0,p=n.has(e.code);ya.useEffect(()=>{l&&c(!0)},[l]);const y=E=>{E.stopPropagation(),c(!r)},_=E=>{E.stopPropagation(),i(e.code)};return R.jsxs("div",{style:{marginLeft:"15px"},children:[R.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"2px 0"},children:[R.jsx("div",{onClick:f?y:void 0,style:{width:"16px",cursor:f?"pointer":"default",marginRight:"4px",textAlign:"center",color:"#666",fontWeight:"bold"},children:f?r?"-":"+":""}),R.jsx("input",{type:"checkbox",checked:p,onChange:_,style:{marginRight:"6px"}}),R.jsxs("span",{style:{fontSize:"12px",color:"#333"},children:[R.jsx("strong",{children:e.code})," - ",e.title]})]}),f&&r&&R.jsx("div",{children:e.children.map(E=>R.jsx(W1,{node:E,selectedCodes:n,onToggle:i,forceExpand:l},E.code))})]})},zM=[{code:"622",title:"Hospitals",hazard:"Air Quality / Pathogen Control",driver:"CMS Safety Conditions",url:"https://www.cms.gov/medicare/provider-enrollment-and-certification/certificationandcomplianc/hospitals"},{code:"623",title:"Nursing Care Facilities",hazard:"Infectious Disease / Safety",driver:"OSHA Healthcare Standards",url:"https://www.osha.gov/healthcare/infectious-diseases"},{code:"531110",title:"Apartments / Residential Lessors",hazard:"Habitability / Fire / Mold",driver:"HUD Housing Quality (HQS)",url:"https://www.hud.gov/program_offices/public_indian_housing/programs/hcv/hqs"},{code:"531311",title:"Residential Property Managers",hazard:"Life Safety / Security",driver:"NFPA 101 Life Safety Code",url:"https://www.nfpa.org/codes-and-standards/all-codes-and-standards/list-of-codes-and-standards/detail?code=101"},{code:"6111",title:"Elementary & Secondary Schools",hazard:"Indoor Air / Student Safety",driver:"EPA IAQ Tools for Schools",url:"https://www.epa.gov/iaq-schools/indoor-air-quality-tools-schools-action-kit"},{code:"7211",title:"Hotels & Motels",hazard:"Fire Safety / Guest Security",driver:"Federal Fire Safety Act",url:"https://www.gsa.gov/travel/plan-a-trip/per-diem-rates/fire-safe-hotels"},{code:"531130",title:"Self-Storage",hazard:"Environmental / Fire / Bailment",driver:"NFPA 1 Fire Code",url:"https://www.nfpa.org/codes-and-standards/all-codes-and-standards/list-of-codes-and-standards/detail?code=1"},{code:"48",title:"Transportation (General)",hazard:"Passenger Safety",driver:"DOT Safety Obligations",url:"https://www.transportation.gov/safety"},{code:"49",title:"Transportation (Couriers)",hazard:"Passenger Safety",driver:"DOT Safety Obligations",url:"https://www.transportation.gov/safety"}],J1=(e,n)=>{if(!n)return e;const i=n.toLowerCase();return e.reduce((l,r)=>{const c=r.code.toLowerCase().includes(i)||r.title.toLowerCase().includes(i),f=r.children?J1(r.children,n):[];return(c||f.length>0)&&l.push({...r,children:f}),l},[])},BM=({selectedCodes:e,onSelectionChange:n})=>{const[i,l]=Gt.useState(!1),[r,c]=Gt.useState(""),f=y=>{const _=new Set(e);_.has(y)?_.delete(y):_.add(y),n(_)},p=ya.useMemo(()=>J1(PM,r),[r]);return R.jsxs("div",{style:{border:"1px solid #ced4da",borderRadius:"4px",marginTop:"10px"},children:[R.jsx("div",{style:{padding:"8px",backgroundColor:"#f8f9fa",borderBottom:i?"1px solid #ced4da":"none",cursor:"pointer",display:"flex",flexDirection:"column",gap:"5px"},onClick:()=>l(!i),children:R.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[R.jsxs("label",{style:{margin:0,cursor:"pointer",fontWeight:"bold",fontSize:"13px"},children:["NAICS Filter (",e.size,")"]}),R.jsx("span",{style:{fontSize:"10px"},children:i?"":""})]})}),i&&R.jsxs("div",{style:{padding:"8px",maxHeight:"400px",overflowY:"auto",backgroundColor:"#fff"},children:[R.jsx("input",{type:"text",placeholder:"Search NAICS codes or titles...",value:r,onChange:y=>c(y.target.value),style:{width:"100%",padding:"6px",marginBottom:"10px",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"12px"}}),R.jsxs("div",{style:{marginBottom:"15px",border:"1px solid #ffeeba",backgroundColor:"#fff3cd",borderRadius:"4px",padding:"8px"},children:[R.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",color:"#856404",marginBottom:"6px"},children:" Quick Select: High-Risk Duty of Care"}),R.jsx("div",{style:{maxHeight:"150px",overflowY:"auto"},children:zM.map(y=>R.jsxs("div",{style:{marginBottom:"4px",display:"flex",alignItems:"flex-start"},children:[R.jsx("input",{type:"checkbox",checked:e.has(y.code),onChange:()=>f(y.code),style:{marginTop:"3px",marginRight:"6px"}}),R.jsxs("div",{children:[R.jsxs("div",{style:{fontSize:"11px",fontWeight:"bold"},children:[y.title," ",R.jsxs("span",{style:{fontWeight:"normal"},children:["(",y.code,")"]})]}),R.jsxs("div",{style:{fontSize:"10px",color:"#666"},children:["Hazard: ",y.hazard]})]})]},y.code))})]}),R.jsxs("div",{style:{borderTop:"1px solid #eee",paddingTop:"10px"},children:[R.jsx("div",{style:{marginBottom:"5px",fontSize:"11px",color:"#666",fontWeight:"bold"},children:"Full NAICS Hierarchy"}),p.length>0?p.map(y=>R.jsx(W1,{node:y,selectedCodes:e,onToggle:f,forceExpand:!!r},y.code)):R.jsx("div",{style:{fontSize:"12px",color:"#999",fontStyle:"italic",textAlign:"center",padding:"10px"},children:"No matching codes found."})]}),e.size>0&&R.jsx("button",{onClick:()=>n(new Set),style:{marginTop:"10px",width:"100%",fontSize:"11px",padding:"4px",background:"#f8d7da",border:"1px solid #f5c6cb",color:"#721c24",borderRadius:"3px",cursor:"pointer"},children:"Clear Filters"})]})]})},$0=[{key:"Last_Order_Date__C",label:"Last Order Date"},{key:"Total_LY_Sales__C",label:"Total LY Sales"},{key:"Total_ty_Sales_to_Date__c",label:"Total TY Sales to Date"}],Mf=({config:e,setConfig:n,selectedNAICS:i,setSelectedNAICS:l})=>{const r=(p,y)=>{n(_=>({..._,[p]:y}))},c=p=>{n(y=>({...y,fields:{...y.fields,[p]:!y.fields[p]}}))},f=p=>{n(y=>({...y,recordType:p.recordType,filters:{...y.filters,...p.filters}})),p.naics&&p.naics.length>0?l(new Set(p.naics)):l(new Set)};return R.jsxs("div",{style:{padding:"10px",backgroundColor:"#f8f9fa",border:"1px solid #ddd",borderRadius:"4px",marginBottom:"10px",fontSize:"12px"},children:[R.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"13px",borderBottom:"1px solid #eee",paddingBottom:"4px"},children:"Export Settings"}),R.jsx(RM,{onSelect:f,currentConfig:e}),R.jsx("div",{style:{margin:"10px 0",borderTop:"1px solid #eee"}}),R.jsxs("div",{style:{marginBottom:"8px"},children:[R.jsx("label",{style:{display:"block",fontWeight:"bold",marginBottom:"4px"},children:"Include Fields"}),$0.map(p=>R.jsx("div",{style:{marginBottom:"2px"},children:R.jsxs("label",{style:{cursor:"pointer",display:"flex",alignItems:"center"},children:[R.jsx("input",{type:"checkbox",checked:e.fields[p.key],onChange:()=>c(p.key),style:{marginRight:"6px"}}),p.label]})},p.key))]}),R.jsxs("div",{children:[R.jsx("label",{style:{display:"block",fontWeight:"bold",marginBottom:"4px"},children:"Sort By"}),R.jsxs("select",{value:e.sortBy,onChange:p=>r("sortBy",p.target.value),style:{width:"100%",padding:"4px"},children:[R.jsx("option",{value:"",children:"No Sorting"}),$0.map(p=>R.jsx("option",{value:p.key,children:p.label},p.key))]})]}),R.jsxs("div",{style:{marginTop:"15px",paddingTop:"10px",borderTop:"1px solid #ddd"},children:[R.jsx("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px"},children:"Filters"}),R.jsx("div",{style:{marginBottom:"8px"},children:R.jsxs("label",{style:{display:"flex",alignItems:"center",fontSize:"11px",cursor:"pointer"},children:[R.jsx("input",{type:"checkbox",checked:e.filters?.activeStatus??!0,onChange:p=>r("filters",{...e.filters,activeStatus:p.target.checked}),style:{marginRight:"6px"}}),"Parent Status: ",R.jsx("strong",{children:"Active"})]})}),R.jsxs("div",{style:{marginBottom:"8px"},children:[R.jsx("label",{style:{display:"block",fontSize:"11px",marginBottom:"2px"},children:"Last Activity (Months)"}),R.jsx("input",{type:"number",placeholder:"e.g. 12",value:e.filters?.lastActivityMonths||"",onChange:p=>r("filters",{...e.filters,lastActivityMonths:p.target.value}),style:{width:"100%",padding:"4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),R.jsxs("div",{style:{marginBottom:"8px"},children:[R.jsx("label",{style:{display:"block",fontSize:"11px",marginBottom:"2px"},children:"Last Order (Months)"}),R.jsx("input",{type:"number",placeholder:"e.g. 6",value:e.filters?.lastOrderMonths||"",onChange:p=>r("filters",{...e.filters,lastOrderMonths:p.target.value}),style:{width:"100%",padding:"4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]}),R.jsxs("div",{children:[R.jsx("label",{style:{display:"block",fontSize:"11px",marginBottom:"2px"},children:"Min Total Sales LY ($)"}),R.jsx("input",{type:"number",placeholder:"e.g. 5000",value:e.filters?.minTotalSales||"",onChange:p=>r("filters",{...e.filters,minTotalSales:p.target.value}),style:{width:"100%",padding:"4px",fontSize:"11px",border:"1px solid #ccc",borderRadius:"3px"}})]})]}),R.jsx("div",{style:{marginTop:"15px"},children:R.jsx(BM,{selectedCodes:i,onSelectionChange:l})})]})},tx={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY","District of Columbia":"DC","Puerto Rico":"PR"},ex=({zipCodes:e=[],zipLoading:n=!1})=>{const[i,l]=Gt.useState(!1),[r,c]=Gt.useState("Initializing..."),[f,p]=Gt.useState(()=>new Date(Date.now()-864e5).toISOString().split("T")[0]);console.log("Active Date:",f);const[y,_]=Gt.useState({recordType:"Site",fields:{Last_Order_Date__C:!0,Total_LY_Sales__C:!0,Total_ty_Sales_to_Date__c:!0},filters:{activeStatus:!0,lastActivityMonths:"",lastOrderMonths:"",minTotalSales:""},sortBy:""}),[E,S]=Gt.useState(!1),[M,O]=Gt.useState(new Set),[B,Q]=Gt.useState(new Set),st=Gt.useRef({}),rt=tt=>{const{layerType:W,layer:k}=tt,A=Zl.Util.stamp(k);let q;if(W==="circle"){const X=k.getLatLng(),Z=k.getRadius(),nt={steps:64,units:"meters"};q={type:"circle",geometry:gf([X.lng,X.lat],Z,nt).geometry,rawLayer:k}}else q={type:"polygon",geometry:k.toGeoJSON().geometry,rawLayer:k};st.current[A]=q,c(`Area added. Total areas: ${Object.keys(st.current).length}`)},j=tt=>{tt.layers.eachLayer(k=>{const A=Zl.Util.stamp(k);delete st.current[A]}),c(`Area removed. Total areas: ${Object.keys(st.current).length}`)},Y=tt=>{const W=new Set(M);W.has(tt)?W.delete(tt):W.add(tt),O(W),c(`${W.size} states selected.`)},V=()=>{if(i)return;if(n){alert("Zipcode database is still loading. Please wait a moment.");return}const tt=Object.keys(st.current);if(!E&&tt.length===0){alert("No areas selected. Please draw a box, polygon, or circle first.");return}c("Calculating intersecting zip codes...");try{const W=new Set;if(!E)tt.forEach(nt=>{const at=st.current[nt],it=le(at.geometry.coordinates),D=Ne(it);e.forEach(z=>{z.lng>=D[0]&&z.lng<=D[2]&&z.lat>=D[1]&&z.lat<=D[3]&&re([z.lng,z.lat],it)&&W.add(z)})});else{if(M.size===0){alert("No states selected."),c("No states selected.");return}const nt=tx,at=new Set;M.forEach(it=>{nt[it]?at.add(nt[it]):console.warn(`State name not found in map: "${it}"`)}),console.log("Selected States:",Array.from(M)),console.log("Mapped Abbrevs:",Array.from(at)),e.forEach(it=>{at.has(it.state)&&W.add(it)})}if(W.size===0){alert("No zip codes found in selected areas."),c("No zip codes found.");return}const k=Array.from(W).map(nt=>({ZIP:nt.zip,CITY:nt.city,STATE:nt.state,LAT:nt.lat,LNG:nt.lng})),A=uf.unparse(k),q=new Blob([A],{type:"text/csv;charset=utf-8;"}),X=URL.createObjectURL(q),Z=document.createElement("a");Z.href=X,Z.setAttribute("download","selected_zipcodes.csv"),document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),c(`Exported ${W.size} zipcodes.`)}catch(W){console.error(W),c("Export failed.")}},et=tt=>{if(i)return;if(n){alert("Zipcode database is still loading. Please wait a moment.");return}const W=Object.keys(st.current);if(!E&&W.length===0){alert("No areas selected. Please draw a box, polygon, or circle first.");return}c("Generating SQL...");try{const k=new Set;if(!E)W.forEach(X=>{const Z=st.current[X],nt=le(Z.geometry.coordinates),at=Ne(nt);e.forEach(it=>{it.lng>=at[0]&&it.lng<=at[2]&&it.lat>=at[1]&&it.lat<=at[3]&&re([it.lng,it.lat],nt)&&k.add(it.zip)})});else{if(M.size===0){alert("No states selected."),c("No states selected.");return}const X=tx,Z=new Set;M.forEach(nt=>{X[nt]&&Z.add(X[nt])}),e.forEach(nt=>{Z.has(nt.state)&&k.add(nt.zip)})}if(k.size===0){alert("No zip codes found in selected areas."),c("No zip codes found.");return}const q=Array.from(k).map(X=>`'${X}'`).join(", ");if(tt==="COUNT"){const{filters:X,recordType:Z}=y;let nt="";X.activeStatus&&(nt+=`
AND c.Status__c = 'Active'`),X.lastActivityMonths&&(nt+=`
AND c.LastActivityDate >= DATEADD(month, -${X.lastActivityMonths}, GETDATE())`),X.lastOrderMonths&&(nt+=`
AND c.LastOrderDate__c >= DATEADD(month, -${X.lastOrderMonths}, GETDATE())`),X.minTotalSales&&(nt+=`
AND c.Total_Sales_LY__c >= ${X.minTotalSales}`);const at=`Select count(s.id)
From SFDC_DS.SFDC_ACCOUNT_OBJECT s
${B.size>0||X.activeStatus||X.lastActivityMonths||X.lastOrderMonths||X.minTotalSales?`LEFT JOIN SFDC_DS.SFDC_ACCOUNT_OBJECT c ON s.ParentId = c.Id
LEFT JOIN SFDC_DS.SFDC_ORG_OBJECT org ON c.Org__c = org.Id`:""}
Where s.RECORDTYPE_NAME__C = '${Z}'
AND s.Zip__c IN (${q})${B.size>0?`
AND (${Array.from(B).map(it=>`org.NAICS___c LIKE '${it}%'`).join(" OR ")})`:""}${nt}`;navigator.clipboard.writeText(at).then(()=>{alert("Count SQL copied to clipboard!"),c("Count SQL copied.")})}else{const{filters:X,recordType:Z,fields:nt}=y,at=["id","Name","CUST_ID__C"],it=Object.keys(nt).filter(U=>nt[U]),D=[...at,...it].join(", "),z=y.sortBy?`
ORDER BY s.${y.sortBy} DESC NULLS LAST`:"";let P="";X.activeStatus&&(P+=`
AND c.Status__c = 'Active'`),X.lastActivityMonths&&(P+=`
AND c.LastActivityDate >= DATEADD(month, -${X.lastActivityMonths}, GETDATE())`),X.lastOrderMonths&&(P+=`
AND c.LastOrderDate__c >= DATEADD(month, -${X.lastOrderMonths}, GETDATE())`),X.minTotalSales&&(P+=`
AND c.Total_Sales_LY__c >= ${X.minTotalSales}`);const $=B.size>0?", org.NAICS___c, org.NAICS_Description__c":"",J=`Select ${D.map(U=>`s.${U}`).join(", ")}${$}
From SFDC_DS.SFDC_ACCOUNT_OBJECT s
${B.size>0||X.activeStatus||X.lastActivityMonths||X.lastOrderMonths||X.minTotalSales?`LEFT JOIN SFDC_DS.SFDC_ACCOUNT_OBJECT c ON s.ParentId = c.Id
LEFT JOIN SFDC_DS.SFDC_ORG_OBJECT org ON c.Org__c = org.Id`:""}
Where s.RECORDTYPE_NAME__C = '${Z}'
AND s.Zip__c IN (${q})${B.size>0?`
AND (${Array.from(B).map(U=>`org.NAICS___c LIKE '${U}%'`).join(" OR ")})`:""}${P}${z}`;if(tt==="COPY")navigator.clipboard.writeText(J).then(()=>{alert("SQL Query copied to clipboard!"),c("SQL Query copied.")});else{const U=new Blob([J],{type:"text/plain"}),K=URL.createObjectURL(U),ct=document.createElement("a");ct.href=K,ct.setAttribute("download","smoke_targets.sql"),document.body.appendChild(ct),ct.click(),document.body.removeChild(ct),c(`Exported SQL for ${k.size} zip codes.`)}}}catch(k){console.error(k),alert("Export failed: "+k.message),c("Export failed.")}};return R.jsx(xc,{leftPanel:R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"sidebar-header",style:{padding:"16px",background:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)",color:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[R.jsxs("h3",{style:{margin:"0 0 12px 0",fontSize:"18px",display:"flex",alignItems:"center",gap:"8px"},children:[R.jsx("span",{style:{fontSize:"20px"},children:""})," Smoke / AQI"]}),R.jsxs("div",{className:"sidebar-input-group",children:[R.jsx("label",{className:"sidebar-label",style:{color:"rgba(255,255,255,0.9)"},children:"Data Date"}),R.jsx("input",{type:"date",value:f,max:new Date().toISOString().split("T")[0],onChange:tt=>p(tt.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.2)",width:"100%",backgroundColor:"rgba(255,255,255,0.1)",color:"white"}})]})]}),R.jsxs("div",{className:"sidebar-content",style:{padding:"16px",display:"flex",flexDirection:"column",gap:"20px"},children:[R.jsxs("div",{className:"sidebar-section",children:[R.jsx("label",{className:"sidebar-label",style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"8px",display:"block"},children:"SELECTION TOOLS"}),R.jsx("button",{onClick:()=>S(!E),style:{padding:"12px",borderRadius:"6px",border:"1px solid #ced4da",backgroundColor:E?"#0d6efd":"white",color:E?"white":"#495057",cursor:"pointer",fontWeight:"600",width:"100%",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:E?" State Selection Active":"Enable State Selection"})]}),R.jsxs("div",{className:"sidebar-section",children:[R.jsx("label",{className:"sidebar-label",style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"8px",display:"block"},children:"EXPORT DATA"}),R.jsxs("div",{style:{marginBottom:"16px",background:"#f8f9fa",padding:"12px",borderRadius:"8px",border:"1px solid #e9ecef"},children:[R.jsx("div",{style:{fontSize:"11px",fontWeight:"bold",color:"#555",marginBottom:"8px"},children:"1. Export Zip Code List (CSV)"}),R.jsx("button",{className:"export-btn",onClick:V,disabled:i||n,style:{width:"100%",padding:"10px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:n?"Loading DB...":i?"Processing...":"Download CSV"})]}),R.jsxs("div",{style:{background:"#f8f9fa",padding:"12px",borderRadius:"8px",border:"1px solid #e9ecef"},children:[R.jsx("div",{style:{fontSize:"11px",fontWeight:"bold",color:"#555",marginBottom:"8px"},children:"2. Generate SQL Query"}),R.jsx(Mf,{config:y,setConfig:_,selectedNAICS:B,setSelectedNAICS:Q}),R.jsx("div",{style:{marginTop:"10px"},children:R.jsx(kf,{onExport:et,loading:i,zipLoading:n})})]})]})]}),R.jsx("div",{className:"sidebar-footer",style:{padding:"12px",borderTop:"1px solid #eee",background:"#f8f9fa"},children:R.jsx("small",{style:{color:"#6c757d"},children:r})})]}),mapContent:R.jsxs(Cf,{onCreated:rt,onDeleted:j,date:f,stateMode:E,selectedStates:M,onStateClick:Y,children:[R.jsx(Up,{url:"https://gibs.earthdata.nasa.gov/wms/epsg3857/best/wms.cgi",layers:"MODIS_Combined_Value_Added_AOD",format:"image/png",transparent:!0,opacity:.6,attribution:"NASA GIBS Combined Modis AOD",params:{TIME:f}},`wms-${f}`),R.jsx(AM,{date:f})]}),rightPanel:R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"sidebar-header",style:{padding:"16px",background:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)",color:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:R.jsx("h3",{style:{margin:0,fontSize:"16px"},children:"Legend & Info"})}),R.jsx("div",{className:"sidebar-content",style:{padding:"16px"},children:R.jsxs("div",{style:{padding:"16px",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e9ecef",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:[R.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",color:"#2c3e50",display:"flex",alignItems:"center",gap:"6px"},children:[R.jsx("span",{children:""})," How to Use"]}),R.jsxs("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:"#555",lineHeight:"1.6"},children:[R.jsxs("li",{children:["Use the ",R.jsx("strong",{children:"Shape Tools"})," (top right of map) to draw a box or polygon around smoke areas."]}),R.jsxs("li",{style:{marginTop:"8px"},children:["Toggle ",R.jsx("strong",{children:"State Selection"})," to quickly select entire states."]}),R.jsxs("li",{style:{marginTop:"8px"},children:["Use the ",R.jsx("strong",{children:"Export Data"})," section to download Zip Codes (CSV) or generate a SQL query."]})]})]})})]})})};function K1(e){const n=e.properties||{},i=n.event||"Weather Alert",l=n.areaDesc||"Unknown Area",r=n.severity||"Unknown",c=n.headline||"",f=n.description||"",p=n.onset?new Date(n.onset):null,y=n.ends?new Date(n.ends):null,_=n.effective?new Date(n.effective):null,E=`${i} ${l}`,S={newsSearch:`https://www.google.com/search?q=${encodeURIComponent(E+" news")}`,currentConditions:`https://www.google.com/search?q=${encodeURIComponent(E+" current conditions today")}`,localNews:`https://www.google.com/search?q=${encodeURIComponent(E+" local news")}`,impactReports:`https://www.google.com/search?q=${encodeURIComponent(E+" impact damage reports")}`,safetyInfo:`https://www.google.com/search?q=${encodeURIComponent(i+" safety tips preparation")}`};return{summary:{event:i,area:l,severity:r,urgency:n.urgency,certainty:n.certainty,headline:c,timing:{effective:_?_.toLocaleString():"Unknown",starts:p?p.toLocaleString():"Unknown",ends:y?y.toLocaleString():"Unknown",isActive:p&&y?Date.now()>=p&&Date.now()<=y:!1},description:f,instructions:n.instruction||"No specific instructions provided",quickActions:[`Check local news: ${S.localNews}`,`Current conditions: ${S.currentConditions}`,`General news: ${S.newsSearch}`]},searchLinks:S,rawAlertId:n.id}}const jM=({onClose:e})=>R.jsx("div",{className:"modal-overlay",onClick:e,children:R.jsxs("div",{className:"modal-content",onClick:n=>n.stopPropagation(),children:[R.jsx("button",{className:"modal-close",onClick:e,children:""}),R.jsx("h3",{children:"How to Use the Alert Dashboard"}),R.jsx("h4",{children:"1. Severity Formatting"}),R.jsx("p",{children:"Alerts are color-coded to help you prioritize:"}),R.jsxs("ul",{children:[R.jsxs("li",{children:[R.jsx("span",{className:"badge",style:{backgroundColor:"#dc3545"},children:"Red"})," ",R.jsx("strong",{children:"Severe/Extreme:"})," Immediate action required. Life-threatening conditions."]}),R.jsxs("li",{children:[R.jsx("span",{className:"badge",style:{backgroundColor:"#fd7e14"},children:"Orange"})," ",R.jsx("strong",{children:"Moderate:"})," Action recommended. Hazardous conditions."]}),R.jsxs("li",{children:[R.jsx("span",{className:"badge",style:{backgroundColor:"#ffc107"},children:"Yellow"})," ",R.jsx("strong",{children:"Minor/Unknown:"})," Be aware. Potential inconvenience."]})]}),R.jsx("h4",{children:"2. Filtering"}),R.jsx("p",{children:'Use the dropdown at the top right to filter by severity (e.g., "Severe Only").'}),R.jsx("h4",{children:"3. Research & Verification"}),R.jsx("p",{children:"Before exporting, use the buttons on each card:"}),R.jsxs("ul",{children:[R.jsxs("li",{children:[R.jsx("strong",{children:"Local News:"})," Searches Google for local coverage to verify impact."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Impact:"})," Looks for damage reports."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Conds:"})," Checks current weather conditions."]})]}),R.jsx("h4",{children:"4. Exporting"}),R.jsxs("p",{children:['Select specific alerts using the checkboxes, or click "Download All" to get a CSV of the target zip codes. The ',R.jsx("strong",{children:"Copy"})," button puts the CSV directly into your clipboard for pasting into Excel/Sheets."]})]})}),of=({alerts:e,title:n,onExport:i,onCopy:l,onAlertClick:r,onAlertToggle:c,selectedIds:f=new Set,focusedId:p})=>{const[y,_]=Gt.useState("All"),[E,S]=Gt.useState(!1),[M,O]=Gt.useState(new Set),B=(st,rt)=>{rt.stopPropagation();const j=new Set(M);j.has(st)?j.delete(st):j.add(st),O(j)};if(!e||e.length===0)return R.jsxs("div",{className:"alert-list-empty",children:[R.jsx("h3",{children:n}),R.jsx("p",{children:"No active alerts found."}),R.jsx("button",{className:"export-btn",disabled:!0,children:"Export Target List"})]});const Q=e.filter(st=>{if(y==="All")return!0;const rt=st.properties.severity;return y==="Severe+"?rt==="Severe"||rt==="Extreme":y==="Moderate+"?rt==="Severe"||rt==="Extreme"||rt==="Moderate":!0});return R.jsxs("div",{className:"alert-list-container",children:[E&&R.jsx(jM,{onClose:()=>S(!1)}),R.jsx("div",{style:{padding:"10px 15px",background:"#f8f9fa",borderBottom:"1px solid #e9ecef"},children:R.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[R.jsxs("small",{style:{color:"#666",fontStyle:"italic"},children:[R.jsx("strong",{children:"Quick Start:"}),' Select active alerts to export target zip codes. Use "Severe Only" filter to prioritize.']}),R.jsx("button",{onClick:()=>S(!0),style:{background:"none",border:"1px solid #ccc",borderRadius:"12px",padding:"2px 8px",fontSize:"10px",cursor:"pointer",color:"#0d6efd"},children:"More Info"})]})}),R.jsxs("div",{className:"alert-list-header",style:{flexDirection:"column",alignItems:"stretch",gap:"10px"},children:[R.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[R.jsxs("h3",{style:{margin:0},children:[n," ",R.jsx("span",{className:"badge",children:Q.length})]}),R.jsxs("select",{value:y,onChange:st=>_(st.target.value),style:{padding:"4px",borderRadius:"4px",fontSize:"11px",border:"1px solid #ced4da",cursor:"pointer"},children:[R.jsx("option",{value:"All",children:"All Severity"}),R.jsx("option",{value:"Moderate+",children:"Moderate & up"}),R.jsx("option",{value:"Severe+",children:"Severe Only"})]})]}),R.jsxs("div",{style:{display:"flex",gap:"5px"},children:[R.jsx("button",{className:"export-btn",onClick:()=>i&&i(Q),style:{flex:1},children:f.size>0?`Download (${f.size})`:"Download All"}),l&&R.jsx("button",{className:"export-btn",onClick:()=>l&&l(Q),style:{backgroundColor:"#6c757d",color:"white"},children:"Copy"})]})]}),R.jsx("div",{className:"alert-list-scroll",children:Q.map((st,rt)=>{const j=st.properties,Y=j.id||rt,V=new Date(j.sent).toLocaleString(),et=new Date(j.expires).toLocaleString(),tt=f.has(Y),W=p===Y,k=M.has(Y);return R.jsxs("div",{className:`alert-card ${W?"focused":""}`,onClick:()=>r&&r(st),style:{cursor:"pointer",borderLeft:W?"4px solid #00BFFF":"1px solid #dee2e6",backgroundColor:tt?"#f0f9ff":"white",marginBottom:"10px"},children:[R.jsxs("div",{className:"alert-card-header",children:[R.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[R.jsx("input",{type:"checkbox",checked:tt,onClick:A=>{A.stopPropagation(),c(Y)},onChange:()=>{},style:{transform:"scale(1.2)",cursor:"pointer"}}),R.jsx("strong",{children:j.event})]}),R.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[R.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",borderRadius:"4px",color:"white",backgroundColor:j.severity==="Severe"||j.severity==="Extreme"?"#dc3545":j.severity==="Moderate"?"#fd7e14":"#ffc107",fontWeight:"bold"},children:j.severity||"Unknown"}),R.jsx("span",{className:`status-dot ${j.status==="Actual"?"active":"test"}`})]})]}),R.jsxs("div",{className:"alert-card-body",children:[R.jsx("p",{className:"alert-area",children:j.areaDesc}),R.jsxs("div",{className:"alert-meta",children:[R.jsxs("small",{children:["Sent: ",V]}),R.jsxs("small",{children:["Expires: ",et]})]}),R.jsx("button",{className:"alert-expand-btn",onClick:A=>B(Y,A),children:k?"Hide Full Description":"Show Full Description"}),k&&R.jsxs("div",{className:"alert-details-expanded",children:[R.jsx("p",{style:{whiteSpace:"pre-wrap",margin:0},children:j.description||"No description available."}),j.instruction&&R.jsxs("div",{style:{marginTop:"10px",fontStyle:"italic",borderTop:"1px solid #ddd",paddingTop:"5px"},children:[R.jsx("strong",{children:"Instruction:"})," ",j.instruction]})]}),R.jsx("div",{style:{marginTop:"10px",fontSize:"10px",color:"#666",fontStyle:"italic"},children:"Click for a pre-populated search result page:"}),R.jsx("div",{style:{marginTop:"4px",display:"flex",gap:"5px",flexWrap:"wrap"},children:(()=>{const A=K1({properties:j});return R.jsxs(R.Fragment,{children:[R.jsx("a",{href:A.searchLinks.localNews,target:"_blank",rel:"noopener noreferrer",onClick:q=>q.stopPropagation(),className:"action-link-btn",style:{fontSize:"10px",padding:"4px 8px",background:"#e9ecef",border:"1px solid #ced4da",borderRadius:"4px",textDecoration:"none",color:"#495057"},children:" Local News"}),R.jsx("a",{href:A.searchLinks.impactReports,target:"_blank",rel:"noopener noreferrer",onClick:q=>q.stopPropagation(),className:"action-link-btn",style:{fontSize:"10px",padding:"4px 8px",background:"#e9ecef",border:"1px solid #ced4da",borderRadius:"4px",textDecoration:"none",color:"#495057"},children:" Impact"}),R.jsx("a",{href:A.searchLinks.currentConditions,target:"_blank",rel:"noopener noreferrer",onClick:q=>q.stopPropagation(),className:"action-link-btn",style:{fontSize:"10px",padding:"4px 8px",background:"#e9ecef",border:"1px solid #ced4da",borderRadius:"4px",textDecoration:"none",color:"#495057"},children:" Conds"})]})})()})]})]},Y)})})]})},UM=({activeFips:e=[],activeStateNames:n=[],style:i={color:"#3388ff",weight:1,fillOpacity:.2}})=>{const[l,r]=Gt.useState(null);Gt.useEffect(()=>{(async()=>{try{const y=await fetch("/smoke-zipcode-selector/counties-10m.json");if(!y.ok)throw new Error("Failed to load county topology");const _=await y.json(),E=OL(_,_.objects.counties);r(E)}catch(y){console.error("Error loading county data:",y)}})()},[]);const c=p=>e.includes(p.id)?{...i,fillColor:i.color||"#ff0000",fillOpacity:i.fillOpacity||.5,weight:1,opacity:1,interactive:!0}:{fillColor:"transparent",color:"rgba(0,0,0,0.1)",weight:.5,opacity:.2,fillOpacity:0,interactive:!1},f=(p,y)=>{y.bindTooltip(`${p.properties.name} County`,{direction:"top",opacity:.9})};return l?R.jsx(Tf,{data:l,style:c,onEachFeature:f}):null},lf={async fetchAlerts(e,n){console.log(`[NWSService] Fetching for date: ${e||"LIVE"} types: ${n}`);try{let i;if(e){const p=new Date(e);p.setHours(0,0,0,0);const y=new Date(e);y.setHours(23,59,59,999),i=`https://api.weather.gov/alerts?${new URLSearchParams({start:p.toISOString(),end:y.toISOString(),event:n,limit:500}).toString()}`}else i="https://api.weather.gov/alerts/active";const l=await fetch(i,{headers:{"User-Agent":"(myweatherapp.com, contact@myweatherapp.com)",Accept:"application/geo+json"}});if(!l.ok)throw new Error(`NWS API Error: ${l.status}`);const r=await l.json();if(!r.features&&!r.title)throw new Error("Invalid API Response format");let c=r.features||[];const f=n.split(",");return c=c.filter(p=>f.includes(p.properties.event)),{type:"FeatureCollection",features:c}}catch(i){throw console.error("[NWSService] Error:",i),i}},async fetchZoneGeometry(e){if(!e)return null;try{const n=await fetch(e,{headers:{"User-Agent":"(myweatherapp.com, contact@myweatherapp.com)"}});return n.ok?(await n.json()).geometry:null}catch(n){return console.warn(`[NWSService] Failed to fetch zone: ${e}`,n),null}}},FM=({zipCodes:e=[],zipLoading:n=!1})=>{const[i,l]=Gt.useState(null),[r,c]=Gt.useState(!1),[f,p]=Gt.useState("Initializing Winter Mode..."),[y,_]=Gt.useState(""),[E,S]=Gt.useState(new Set),[M,O]=Gt.useState({recordType:"Site",fields:{Last_Order_Date__C:!0,Total_LY_Sales__C:!0,Total_ty_Sales_to_Date__c:!0},filters:{activeStatus:!0,lastActivityMonths:"",lastOrderMonths:"",minTotalSales:""},sortBy:""});Gt.useEffect(()=>{B()},[y]),Gt.useEffect(()=>{window._debug_alerts=i,window._debug_zipCodes=e,window._debug_turf=oM,console.log("Debug vars exposed on window")},[i,e]);const B=async()=>{c(!0),p(y?`Searching Archive for ${y}...`:"Fetching NWS Winter Storm Warnings...");try{const nt=await lf.fetchAlerts(y,"Winter Storm Warning,Winter Weather Advisory");if(console.log(`[WinterMode] Loaded ${nt.features.length} alerts.`),nt.features.length>0){const at=nt.features.filter(it=>it.geometry!==null).length;l(nt),p(y?`Found ${nt.features.length} Historical Alerts for ${y} (${at} visible).`:`Active: ${nt.features.length} Winter Alerts (${at} visible).`)}else l({type:"FeatureCollection",features:[]}),p(y?`No Winter alerts found for ${y}.`:"No active Winter Storm Warnings.")}catch(Z){console.error("Failed to fetch alerts",Z),p(`Error: ${Z.message}`),l(null)}finally{c(!1)}},[Q,st]=Gt.useState(null),[rt,j]=Gt.useState(new Set),Y=async(Z="DOWNLOAD")=>{if(!i||!i.features.length){alert("No data to export.");return}if(n){alert("Zipcode database is still loading. Please wait 5 seconds and try again.");return}const nt=rt.size>0?i.features.filter(it=>rt.has(it.properties.id)):i.features;if(nt.length===0){alert("No targets selected.");return}p("Checking alert geometries...");const at=await Promise.all(nt.map(async it=>{if(it.geometry)return it;const D=it.properties.affectedZones||[];if(D.length===0)return it;console.log(`[WinterMode] Fetching geometries for ${D.length} zones...`),p(`Fetching geometries for ${D.length} affected zones...`);const z=[];for(const P of D){const $=await lf.fetchZoneGeometry(P);$&&z.push($)}return z.length===0?it:{...it,_fetchedGeometries:z}}));p("Calculating affected zip codes..."),setTimeout(()=>{const it=new Map;console.log(`[WinterMode] Exporting... ZipCodes: ${e.length}, Targets: ${at.length}`);let D=0,z=0,P=0;if(at.forEach(U=>{const K=!!U.geometry,ct=U._fetchedGeometries||[],gt=K||ct.length>0,pt=(U.properties.areaDesc||"").toUpperCase(),yt=[];K&&yt.push(U.geometry),ct.length>0&&yt.push(...ct);const Tt=yt.map(ht=>{try{return Ne(ht)}catch{return null}}).filter(ht=>ht!==null);e.forEach(ht=>{let Dt=!1;if(gt)for(let It=0;It<Tt.length;It++){const Mt=Tt[It],ft=yt[It];if(ht.lng>=Mt[0]&&ht.lng<=Mt[2]&&ht.lat>=Mt[1]&&ht.lat<=Mt[3]&&(D++,re([ht.lng,ht.lat],ft))){Dt=!0,z++;break}}if(!Dt&&ht.usps_zip_county_name&&ht.state){const It=ht.usps_zip_county_name||ht.county;if(It){const Mt=`${It}, ${ht.state}`.toUpperCase();pt.includes(Mt)&&(Dt=!0,P++)}}Dt&&(it.has(ht.zip)||it.set(ht.zip,{zipData:ht,alertData:U.properties,alertId:U.id}))})}),it.size===0){p(`Debug: BBoxPass=${D}, PolyPass=${z}, TextPass=${P}, Targets=${at.length}`),alert("No zip codes found within the selected alert areas.");return}const $=Array.from(it.values()).map(U=>{const K=U.zipData,ct=U.alertData,pt=K1({properties:ct}).searchLinks;return{ZIP:K.zip,CITY:K.city,COUNTY:K.usps_zip_county_name||K.county||"N/A",STATE:K.state,EVENT_TYPE:ct.event||"N/A",DETAILS:(ct.headline||ct.description||ct.areaDesc||"").substring(0,500).replace(/(\r\n|\n|\r)/gm," "),URL:U.alertId||"N/A",NEWS_SEARCH:pt.newsSearch,LOCAL_NEWS:pt.localNews,CONDITIONS_URL:pt.currentConditions,IMPACT_URL:pt.impactReports,SAFETY_URL:pt.safetyInfo}}),J=uf.unparse($);if(Z==="COPY")navigator.clipboard.writeText(J).then(()=>{alert(`Copied ${it.size} zip codes to clipboard!`),p(`Copied ${it.size} zip codes from ${at.length} alerts.`)}).catch(U=>{console.error("Copy failed",U),alert("Failed to copy to clipboard. See console.")});else{const U=new Blob([J],{type:"text/csv;charset=utf-8"}),K=URL.createObjectURL(U),ct=document.createElement("a");ct.href=K;const gt=`winter_storm_zipcodes_${new Date().toISOString().slice(0,10)}.csv`;ct.setAttribute("download",gt),ct.download=gt,document.body.appendChild(ct),ct.click(),setTimeout(()=>{document.body.removeChild(ct),URL.revokeObjectURL(K)},2e3),p(`Exported ${it.size} unique zip codes from ${at.length} alerts.`)}},100)},V=Z=>{if(!i||!i.features.length){alert("No data to export.");return}if(n){alert("Zipcode database is still loading. Please wait 5 seconds and try again.");return}const nt=rt.size>0?i.features.filter(at=>rt.has(at.properties.id)):i.features;if(nt.length===0){alert("No targets selected.");return}p("Generating SQL..."),setTimeout(()=>{const at=new Set;if(nt.forEach(z=>{const P=!!z.geometry,$=(z.properties.areaDesc||"").toUpperCase();let J=null;P&&(J=Ne(z)),e.forEach(U=>{let K=!1;if(P&&J&&U.lng>=J[0]&&U.lng<=J[2]&&U.lat>=J[1]&&U.lat<=J[3]&&re([U.lng,U.lat],z)&&(K=!0),!K&&!P&&U.county&&U.state){const ct=`${U.county}, ${U.state}`.toUpperCase();$.includes(ct)&&(K=!0)}K&&at.add(U.zip)})}),at.size===0){alert("No target zip codes found."),p("Ready");return}const D=Array.from(at).map(z=>`'${z}'`).join(", ");if(Z==="COUNT"){const{filters:z,recordType:P}=M;let $="";z.activeStatus&&($+=`
AND c.Status__c = 'Active'`),z.lastActivityMonths&&($+=`
AND c.LastActivityDate >= DATEADD(month, -${z.lastActivityMonths}, GETDATE())`),z.lastOrderMonths&&($+=`
AND c.LastOrderDate__c >= DATEADD(month, -${z.lastOrderMonths}, GETDATE())`),z.minTotalSales&&($+=`
AND c.Total_Sales_LY__c >= ${z.minTotalSales}`);const J=`Select count(s.id)
From SFDC_DS.SFDC_ACCOUNT_OBJECT s
${E.size>0||z.activeStatus||z.lastActivityMonths||z.lastOrderMonths||z.minTotalSales?`LEFT JOIN SFDC_DS.SFDC_ACCOUNT_OBJECT c ON s.ParentId = c.Id
LEFT JOIN SFDC_DS.SFDC_ORG_OBJECT org ON c.Org__c = org.Id`:""}
Where s.RECORDTYPE_NAME__C = '${P}'
AND s.Zip__c IN (${D})${E.size>0?`
AND (${Array.from(E).map(U=>`org.NAICS___c LIKE '${U}%'`).join(" OR ")})`:""}${$}`;navigator.clipboard.writeText(J).then(()=>{alert("Count SQL copied to clipboard!"),p("Count SQL copied.")})}else{const{filters:z,recordType:P,fields:$}=M,J=["id","Name","CUST_ID__C"],U=Object.keys($).filter(Tt=>$[Tt]),K=[...J,...U].join(", "),ct=M.sortBy?`
ORDER BY s.${M.sortBy} DESC NULLS LAST`:"";let gt="";z.activeStatus&&(gt+=`
AND c.Status__c = 'Active'`),z.lastActivityMonths&&(gt+=`
AND c.LastActivityDate >= DATEADD(month, -${z.lastActivityMonths}, GETDATE())`),z.lastOrderMonths&&(gt+=`
AND c.LastOrderDate__c >= DATEADD(month, -${z.lastOrderMonths}, GETDATE())`),z.minTotalSales&&(gt+=`
AND c.Total_Sales_LY__c >= ${z.minTotalSales}`);const pt=E.size>0?", org.NAICS___c, org.NAICS_Description__c":"",yt=`Select ${K.map(Tt=>`s.${Tt}`).join(", ")}${pt}
From SFDC_DS.SFDC_ACCOUNT_OBJECT s
${E.size>0||z.activeStatus||z.lastActivityMonths||z.lastOrderMonths||z.minTotalSales?`LEFT JOIN SFDC_DS.SFDC_ACCOUNT_OBJECT c ON s.ParentId = c.Id
LEFT JOIN SFDC_DS.SFDC_ORG_OBJECT org ON c.Org__c = org.Id`:""}
Where s.RECORDTYPE_NAME__C = '${P}'
AND s.Zip__c IN (${D})${E.size>0?`
AND (${Array.from(E).map(Tt=>`org.NAICS___c LIKE '${Tt}%'`).join(" OR ")})`:""}${gt}${ct}`;if(Z==="COPY")navigator.clipboard.writeText(yt).then(()=>{alert("SQL Query copied to clipboard!"),p("SQL Query copied.")});else{const Tt=new Blob([yt],{type:"text/plain"}),ht=URL.createObjectURL(Tt),Dt=document.createElement("a");Dt.href=ht,Dt.setAttribute("download","winter_targets.sql"),document.body.appendChild(Dt),Dt.click(),document.body.removeChild(Dt),p(`Exported SQL for ${at.size} zip codes.`)}}},100)},et=Z=>{st(Z.properties.id)},tt=Z=>{const nt=new Set(rt);nt.has(Z)?nt.delete(Z):nt.add(Z),j(nt)},W=Z=>{const nt=Z.properties.geocode;return nt&&nt.SAME?nt.SAME.map(at=>at.slice(1)):[]},k=i?.features.find(Z=>Z.properties.id===Q),A=k?W(k):[],q=i?.features.filter(Z=>rt.has(Z.properties.id)).flatMap(W)||[],X=i?.features.flatMap(W)||[];return R.jsx(xc,{leftPanel:R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"sidebar-header",style:{padding:"10px",borderBottom:"1px solid #eee"},children:[R.jsx("h3",{children:"Winter Mode"}),R.jsxs("div",{style:{marginBottom:"10px"},children:[R.jsx("label",{style:{display:"block",fontSize:"12px",color:"#666",marginBottom:"4px"},children:R.jsx("strong",{children:"Date Range"})}),R.jsx("input",{type:"date",value:y,onChange:Z=>_(Z.target.value),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ddd"}}),!y&&R.jsx("small",{style:{color:"#00cc00",fontSize:"10px"},children:" Live Data"}),y&&R.jsx("button",{onClick:()=>_(""),style:{marginTop:"5px",fontSize:"10px",cursor:"pointer",background:"none",border:"none",color:"#0066cc",textDecoration:"underline"},children:"Return to Live"})]})]}),R.jsxs("div",{className:"sidebar-content",children:[R.jsxs("div",{className:"sidebar-input-group",children:[R.jsx("label",{className:"sidebar-label",children:"Controls"}),R.jsx("button",{className:"export-btn",onClick:B,disabled:r,style:{width:"100%",marginBottom:"10px"},children:"Refresh Data"})]}),R.jsxs("div",{className:"sidebar-input-group",children:[R.jsx("label",{className:"sidebar-label",children:"Export Data"}),R.jsx("div",{style:{marginTop:"10px"},children:R.jsx(Mf,{config:M,setConfig:O,selectedNAICS:E,setSelectedNAICS:S})}),R.jsx(kf,{onExport:V,loading:r,zipLoading:n})]}),R.jsx("div",{style:{padding:"10px",fontSize:"11px",color:"#999",borderTop:"1px solid #eee"},children:f})]})]}),mapContent:R.jsxs(Cf,{children:[R.jsx(Up,{url:"https://mapservices.weather.noaa.gov/arcgis/rest/services/WWA/watch_warn_adv/MapServer/exts/WMSServer",layers:"0",format:"image/png",transparent:!0,opacity:.6,layerDefs:`{"0":"prod_type='Winter Storm Warning' OR prod_type='Winter Weather Advisory'"}`}),R.jsx(UM,{activeFips:X,focusedFips:A,selectedFips:q,style:{color:"#00BFFF",weight:1,fillOpacity:.2}})]}),rightPanel:R.jsx(of,{alerts:i?i.features:[],title:y?`Archive: ${y}`:"Winter Warnings",onExport:()=>Y("DOWNLOAD"),onCopy:()=>Y("COPY"),onAlertClick:et,onAlertToggle:tt,selectedIds:rt,focusedId:Q})})},qM=({zipCodes:e=[],zipLoading:n=!1})=>{const[i,l]=Gt.useState({type:"FeatureCollection",features:[]}),[r,c]=Gt.useState(!1),[f,p]=Gt.useState("Initializing Heat Mode..."),[y,_]=Gt.useState(""),[E,S]=Gt.useState(new Set),[M,O]=Gt.useState({recordType:"Site",fields:{Last_Order_Date__C:!0,Total_LY_Sales__C:!0,Total_ty_Sales_to_Date__c:!0},filters:{activeStatus:!0,lastActivityMonths:"",lastOrderMonths:"",minTotalSales:""},sortBy:""}),B=ya.useCallback(async()=>{c(!0),p(y?`Searching Archive for ${y}...`:"Fetching NWS Heat Warnings...");try{const V=await lf.fetchAlerts(y,"Excessive Heat Warning,Heat Advisory,Excessive Heat Watch");console.log(`[HeatMode] Loaded ${V.features.length} heat alerts.`),V.features.length>0?(l(V),p(y?`Found ${V.features.length} Historical Alerts for ${y}.`:`Active: ${V.features.length} Heat Alerts.`)):(l({type:"FeatureCollection",features:[]}),p(y?`No Heat alerts found for ${y}.`:"No active Heat Alerts."))}catch(Y){console.error("Failed to fetch alerts",Y),p(`Error: ${Y.message}`),l({type:"FeatureCollection",features:[]})}finally{c(!1)}},[y]);Gt.useEffect(()=>{B()},[B]);const Q=()=>[{category:"Cooling",skus:["Portable AC","Industrial Drum Fan","Spot Cooler"]},{category:"Safety",skus:["Electrolyte Powder","Bulk Water","Cooling Towels"]}],st=async Y=>{const V=Y||i.features;if(!V||V.length===0||!e||e.length===0){alert("No data to export or zip codes not loaded.");return}if(n){alert("Zipcode database is still loading. Please wait 5 seconds and try again.");return}p("Fetching standard zone geometries..."),c(!0);const et=[],tt=new Map;for(const W of V){if(!W.geometry&&W.properties.affectedZones&&W.properties.affectedZones.length>0){const k=W.properties.affectedZones[0];try{let A=tt.get(k);if(A||(A=await nwsService.fetchZoneGeometry(k),A&&tt.set(k,A)),A){et.push({...W,geometry:A});continue}}catch(A){console.warn(`Failed to fetch zone geometry for ${k}`,A)}}et.push(W)}p("Processing spatial match..."),setTimeout(()=>{const W=[],k=new Set;if(et.forEach(nt=>{const at=!!nt.geometry,it=(nt.properties.areaDesc||"").toUpperCase(),D=nt.properties.event||"Heat Warning";let z=null;if(at)try{z=Ne(nt)}catch(P){console.warn("Invalid geometry for bbox",P)}e.forEach(P=>{let $=!1;if(at&&z&&P.lng>=z[0]&&P.lng<=z[2]&&P.lat>=z[1]&&P.lat<=z[3]&&re([P.lng,P.lat],nt)&&($=!0),!$&&P.county&&P.state){const J=`${P.county}, ${P.state}`.toUpperCase();it.includes(J)&&($=!0)}if($){const J=`${P.zip}-${D}`;k.has(J)||(k.add(J),W.push({zip:P.zip,county:P.county,state:P.state,alert_name:D,sent:nt.properties.sent,expires:nt.properties.expires,suggested_products:Q().map(U=>U.category).join("; ")}))}})}),W.length===0){alert("No matching targets found (checked geometry and county text)."),p("Ready"),c(!1);return}const A={generated_at:new Date().toISOString(),event_type:"HEATWAVE",targets:W},q=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),X=URL.createObjectURL(q),Z=document.createElement("a");Z.href=X,Z.setAttribute("download","heat_targets.json"),document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),p(`Exported ${W.length} targets.`),c(!1)},100)},rt=()=>{console.log("Copy not fully implemented for full spatial check yet.")},j=async Y=>{if(!i||!i.features||!e||e.length===0){alert("No data to export.");return}p("Generating SQL..."),c(!0),setTimeout(()=>{const V=new Set;if(i.features.forEach(it=>{const D=!!it.geometry,z=(it.properties.areaDesc||"").toUpperCase();let P=D?Ne(it):null;e.forEach($=>{let J=!1;D&&P&&$.lng>=P[0]&&$.lng<=P[2]&&$.lat>=P[1]&&$.lat<=P[3]&&re([$.lng,$.lat],it)&&(J=!0),J||$.county&&$.state&&z.includes(`${$.county}, ${$.state}`.toUpperCase())&&(J=!0),J&&V.add($.zip)})}),V.size===0){alert("No targets found."),p("Ready"),c(!1);return}const tt=Array.from(V).map(it=>`'${it}'`).join(", "),{filters:W,recordType:k,fields:A,sortBy:q}=M;let X="";W.activeStatus&&(X+="\\nAND c.Status__c = 'Active'"),W.lastActivityMonths&&(X+=`\\nAND c.LastActivityDate >= DATEADD(month, -${W.lastActivityMonths}, GETDATE())`),W.lastOrderMonths&&(X+=`\\nAND c.LastOrderDate__c >= DATEADD(month, -${W.lastOrderMonths}, GETDATE())`),W.minTotalSales&&(X+=`\\nAND c.Total_Sales_LY__c >= ${W.minTotalSales}`);const Z=E.size>0?", org.NAICS___c, org.NAICS_Description__c":"",nt=M.sortBy?`\\nORDER BY s.${M.sortBy} DESC NULLS LAST`:"";let at="";if(Y==="COUNT")at=`Select count(s.id)
From SFDC_DS.SFDC_ACCOUNT_OBJECT s
${E.size>0||W.activeStatus||W.lastActivityMonths||W.lastOrderMonths||W.minTotalSales?"LEFT JOIN SFDC_DS.SFDC_ACCOUNT_OBJECT c ON s.ParentId = c.Id\\nLEFT JOIN SFDC_DS.SFDC_ORG_OBJECT org ON c.Org__c = org.Id":""}
Where s.RECORDTYPE_NAME__C = '${k}'
AND s.Zip__c IN (${tt})${E.size>0?`\\nAND (${Array.from(E).map(it=>`org.NAICS___c LIKE '${it}%'`).join(" OR ")})`:""}${X}`;else{const it=["id","Name","CUST_ID__C"],D=Object.keys(A).filter(P=>A[P]);at=`Select ${[...it,...D].join(", ").map(P=>`s.${P}`).join(", ")}${Z}
From SFDC_DS.SFDC_ACCOUNT_OBJECT s
${E.size>0||W.activeStatus||W.lastActivityMonths||W.lastOrderMonths||W.minTotalSales?"LEFT JOIN SFDC_DS.SFDC_ACCOUNT_OBJECT c ON s.ParentId = c.Id\\nLEFT JOIN SFDC_DS.SFDC_ORG_OBJECT org ON c.Org__c = org.Id":""}
Where s.RECORDTYPE_NAME__C = '${k}'
AND s.Zip__c IN (${tt})${E.size>0?`\\nAND (${Array.from(E).map(P=>`org.NAICS___c LIKE '${P}%'`).join(" OR ")})`:""}${X}${nt}`}if(Y==="COPY"||Y==="COUNT")navigator.clipboard.writeText(at).then(()=>{alert(`${Y} SQL copied to clipboard!`),p("SQL Copied.")});else{const it=new Blob([at],{type:"text/plain"}),D=URL.createObjectURL(it),z=document.createElement("a");z.href=D,z.setAttribute("download","heat_targets.sql"),document.body.appendChild(z),z.click(),document.body.removeChild(z),p(`Exported SQL for ${V.size} zip codes.`)}c(!1)},100)};return R.jsx(xc,{leftPanel:R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"sidebar-header",style:{padding:"16px",background:"linear-gradient(135deg, #ff9966 0%, #ff5e62 100%)",color:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[R.jsxs("h3",{style:{margin:"0 0 12px 0",fontSize:"18px",display:"flex",alignItems:"center",gap:"8px"},children:[R.jsx("span",{style:{fontSize:"20px"},children:""})," Heat Mode"]}),R.jsxs("div",{className:"sidebar-input-group",children:[R.jsx("label",{className:"sidebar-label",style:{color:"rgba(255,255,255,0.9)"},children:"Archive Date"}),R.jsxs("div",{style:{display:"flex",gap:"5px"},children:[R.jsx("input",{type:"date",value:y,onChange:Y=>_(Y.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.2)",width:"100%",backgroundColor:"rgba(255,255,255,0.1)",color:"white"}}),y&&R.jsx("button",{onClick:()=>_(""),style:{padding:"8px",borderRadius:"6px",border:"none",background:"rgba(255,255,255,0.2)",color:"white",cursor:"pointer"},title:"Return to Live Data",children:""})]})]})]}),R.jsxs("div",{className:"sidebar-content",style:{padding:"16px",display:"flex",flexDirection:"column",gap:"20px"},children:[R.jsxs("div",{className:"sidebar-section",children:[R.jsx("label",{className:"sidebar-label",style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"8px",display:"block"},children:"DATA CONTROLS"}),R.jsx("button",{className:"export-btn",onClick:()=>B(),disabled:r,style:{width:"100%",padding:"10px",borderRadius:"6px",background:"#fff",border:"1px solid #ddd",fontWeight:"600"},children:" Refresh Feed"})]}),R.jsxs("div",{className:"sidebar-section",style:{flex:1,display:"flex",flexDirection:"column"},children:[R.jsxs("label",{className:"sidebar-label",style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"8px",display:"block"},children:["ALERTS LIST (",i.features.length,")"]}),R.jsx("div",{style:{flex:1,overflowY:"auto",minHeight:"200px",border:"1px solid #eee",borderRadius:"8px"},children:R.jsx(of,{alerts:i.features,title:"",onExport:st,onCopy:rt,loading:r})})]}),R.jsxs("div",{className:"sidebar-section",children:[R.jsx("label",{className:"sidebar-label",style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"8px",display:"block"},children:"EXPORT CONFIG"}),R.jsx(Mf,{config:M,setConfig:O,selectedNAICS:E,setSelectedNAICS:S}),R.jsx(kf,{onExport:j,loading:r,zipLoading:n})]})]}),R.jsx("div",{className:"sidebar-footer",style:{padding:"12px",borderTop:"1px solid #eee",background:"#f8f9fa"},children:R.jsx("small",{style:{color:"#6c757d"},children:f})})]}),mapContent:R.jsxs(Cf,{children:[R.jsx(WMSTileLayer,{url:"https://mapservices.weather.noaa.gov/arcgis/rest/services/WWA/watch_warn_adv/MapServer/exts/WMSServer",layers:"0,1",format:"image/png",transparent:!0,opacity:.5,layerDefs:`{"0":"prod_type IN ('Excessive Heat Warning', 'Heat Advisory')","1":"prod_type IN ('Excessive Heat Watch')"}`}),i.features.length<500&&R.jsx(Tf,{data:i,style:{color:"#ff4500",weight:1,opacity:.6,fillOpacity:.1},onEachFeature:(Y,V)=>{V.bindTooltip(`${Y.properties.event}: ${Y.properties.areaDesc}`)}},`heat-geo-${i.features.length}`)]}),rightPanel:R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"sidebar-header",style:{padding:"16px",background:"#f8f9fa",borderBottom:"1px solid #eee"},children:R.jsx("h3",{style:{margin:0,fontSize:"16px",color:"#333"},children:"Active Heat Alerts"})}),R.jsx("div",{className:"sidebar-content",style:{padding:"0",display:"flex",flexDirection:"column",height:"100%"},children:R.jsx(of,{alerts:i.features,title:"",onExport:st,onCopy:rt,loading:r})})]})})},GM=({zipCodes:e=[],zipLoading:n=!1})=>{const[i,l]=Gt.useState({type:"FeatureCollection",features:[]}),[r,c]=Gt.useState(!1),[f,p]=Gt.useState("Initializing Flood Mode..."),[y,_]=Gt.useState(""),[E,S]=Gt.useState(new Set),[M,O]=Gt.useState({recordType:"Site",fields:{Last_Order_Date__C:!0,Total_LY_Sales__C:!0,Total_ty_Sales_to_Date__c:!0},filters:{activeStatus:!0,lastActivityMonths:"",lastOrderMonths:"",minTotalSales:""},sortBy:""}),B=ya.useCallback(async()=>{c(!0),p(y?`Searching Archive for ${y}...`:"Fetching NWS Flood Warnings...");try{const V=await lf.fetchAlerts(y,"Flood Warning,Flash Flood Warning,Coastal Flood Warning");console.log(`[FloodMode] Loaded ${V.features.length} flood alerts.`),V.features.length>0?(l(V),p(y?`Found ${V.features.length} Historical Alerts for ${y}.`:`Active: ${V.features.length} Flood Alerts.`)):(l({type:"FeatureCollection",features:[]}),p(y?`No Flood alerts found for ${y}.`:"No active Flood Warnings."))}catch(Y){console.error("Failed to fetch alerts",Y),p(`Error: ${Y.message}`),l({type:"FeatureCollection",features:[]})}finally{c(!1)}},[y]);Gt.useEffect(()=>{B()},[B]);const Q=()=>[{category:"Cleanup",skus:["Sump Pump","Wet/Dry Vac","Dehumidifier"]},{category:"Protection",skus:["Sandbags","Tarps","Generators"]}],st=async Y=>{const V=Y||i.features;if(!V||V.length===0||!e||e.length===0){alert("No data to export or zip codes not loaded.");return}if(n){alert("Zipcode database is still loading. Please wait 5 seconds and try again.");return}p("Fetching standard zone geometries..."),c(!0);const et=[],tt=new Map;for(const W of V){if(!W.geometry&&W.properties.affectedZones&&W.properties.affectedZones.length>0){const k=W.properties.affectedZones[0];try{let A=tt.get(k);if(A||(A=await nwsService.fetchZoneGeometry(k),A&&tt.set(k,A)),A){et.push({...W,geometry:A});continue}}catch(A){console.warn(`Failed to fetch zone geometry for ${k}`,A)}}et.push(W)}p("Processing spatial match..."),setTimeout(()=>{const W=[],k=new Set;if(et.forEach(nt=>{const at=!!nt.geometry,it=(nt.properties.areaDesc||"").toUpperCase(),D=nt.properties.event||"Flood Warning";let z=null;if(at)try{z=Ne(nt)}catch(P){console.warn("Invalid geometry for bbox",P)}e.forEach(P=>{let $=!1;if(at&&z&&P.lng>=z[0]&&P.lng<=z[2]&&P.lat>=z[1]&&P.lat<=z[3]&&re([P.lng,P.lat],nt)&&($=!0),!$&&P.county&&P.state){const J=`${P.county}, ${P.state}`.toUpperCase();it.includes(J)&&($=!0)}if($){const J=`${P.zip}-${D}`;k.has(J)||(k.add(J),W.push({zip:P.zip,county:P.county,state:P.state,alert_name:D,sent:nt.properties.sent,expires:nt.properties.expires,suggested_products:Q().map(U=>U.category).join("; ")}))}})}),W.length===0){alert("No matching targets found (checked geometry and county text)."),p("Ready"),c(!1);return}const A={generated_at:new Date().toISOString(),event_type:"FLOOD",targets:W},q=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),X=URL.createObjectURL(q),Z=document.createElement("a");Z.href=X,Z.setAttribute("download","flood_targets.json"),document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),p(`Exported ${W.length} targets.`),c(!1)},100)},rt=()=>{console.log("Copy not fully implemented for full spatial check yet.")},j=async Y=>{if(!i||!i.features||!e||e.length===0){alert("No data to export.");return}p("Generating SQL..."),c(!0),setTimeout(()=>{const V=new Set;if(i.features.forEach(it=>{const D=!!it.geometry,z=(it.properties.areaDesc||"").toUpperCase();let P=D?Ne(it):null;e.forEach($=>{let J=!1;D&&P&&$.lng>=P[0]&&$.lng<=P[2]&&$.lat>=P[1]&&$.lat<=P[3]&&re([$.lng,$.lat],it)&&(J=!0),J||$.county&&$.state&&z.includes(`${$.county}, ${$.state}`.toUpperCase())&&(J=!0),J&&V.add($.zip)})}),V.size===0){alert("No targets found."),p("Ready"),c(!1);return}const tt=Array.from(V).map(it=>`'${it}'`).join(", "),{filters:W,recordType:k,fields:A,sortBy:q}=M;let X="";W.activeStatus&&(X+="\\nAND c.Status__c = 'Active'"),W.lastActivityMonths&&(X+=`\\nAND c.LastActivityDate >= DATEADD(month, -${W.lastActivityMonths}, GETDATE())`),W.lastOrderMonths&&(X+=`\\nAND c.LastOrderDate__c >= DATEADD(month, -${W.lastOrderMonths}, GETDATE())`),W.minTotalSales&&(X+=`\\nAND c.Total_Sales_LY__c >= ${W.minTotalSales}`);const Z=E.size>0?", org.NAICS___c, org.NAICS_Description__c":"",nt=q?`\\nORDER BY s.${q} DESC NULLS LAST`:"";let at="";if(Y==="COUNT")at=`Select count(s.id)
From SFDC_DS.SFDC_ACCOUNT_OBJECT s
${E.size>0||W.activeStatus||W.lastActivityMonths||W.lastOrderMonths||W.minTotalSales?"LEFT JOIN SFDC_DS.SFDC_ACCOUNT_OBJECT c ON s.ParentId = c.Id\\nLEFT JOIN SFDC_DS.SFDC_ORG_OBJECT org ON c.Org__c = org.Id":""}
Where s.RECORDTYPE_NAME__C = '${k}'
AND s.Zip__c IN (${tt})${E.size>0?`\\nAND (${Array.from(E).map(it=>`org.NAICS___c LIKE '${it}%'`).join(" OR ")})`:""}${X}`;else{const it=["id","Name","CUST_ID__C"],D=Object.keys(A).filter(P=>A[P]);at=`Select ${[...it,...D].join(", ").map(P=>`s.${P}`).join(", ")}${Z}
From SFDC_DS.SFDC_ACCOUNT_OBJECT s
${E.size>0||W.activeStatus||W.lastActivityMonths||W.lastOrderMonths||W.minTotalSales?"LEFT JOIN SFDC_DS.SFDC_ACCOUNT_OBJECT c ON s.ParentId = c.Id\\nLEFT JOIN SFDC_DS.SFDC_ORG_OBJECT org ON c.Org__c = org.Id":""}
Where s.RECORDTYPE_NAME__C = '${k}'
AND s.Zip__c IN (${tt})${E.size>0?`\\nAND (${Array.from(E).map(P=>`org.NAICS___c LIKE '${P}%'`).join(" OR ")})`:""}${X}${nt}`}if(Y==="COPY"||Y==="COUNT")navigator.clipboard.writeText(at).then(()=>{alert(`${Y} SQL copied to clipboard!`),p("SQL Copied.")});else{const it=new Blob([at],{type:"text/plain"}),D=URL.createObjectURL(it),z=document.createElement("a");z.href=D,z.setAttribute("download","flood_targets.sql"),document.body.appendChild(z),z.click(),document.body.removeChild(z),p(`Exported SQL for ${V.size} zip codes.`)}c(!1)},100)};return R.jsx(xc,{leftPanel:R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"sidebar-header",style:{padding:"16px",background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[R.jsxs("h3",{style:{margin:"0 0 12px 0",fontSize:"18px",display:"flex",alignItems:"center",gap:"8px"},children:[R.jsx("span",{style:{fontSize:"20px"},children:""})," Flood Mode"]}),R.jsxs("div",{className:"sidebar-input-group",children:[R.jsx("label",{className:"sidebar-label",style:{color:"rgba(255,255,255,0.9)"},children:"Archive Date"}),R.jsxs("div",{style:{display:"flex",gap:"5px"},children:[R.jsx("input",{type:"date",value:y,onChange:Y=>_(Y.target.value),style:{padding:"8px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.2)",width:"100%",backgroundColor:"rgba(255,255,255,0.1)",color:"white"}}),y&&R.jsx("button",{onClick:()=>_(""),style:{padding:"8px",borderRadius:"6px",border:"none",background:"rgba(255,255,255,0.2)",color:"white",cursor:"pointer"},title:"Return to Live Data",children:""})]})]})]}),R.jsxs("div",{className:"sidebar-content",style:{padding:"16px",display:"flex",flexDirection:"column",gap:"20px"},children:[R.jsxs("div",{className:"sidebar-section",children:[R.jsx("label",{className:"sidebar-label",style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"8px",display:"block"},children:"DATA CONTROLS"}),R.jsx("button",{className:"export-btn",onClick:()=>B(),disabled:r,style:{width:"100%",padding:"10px",borderRadius:"6px",background:"#fff",border:"1px solid #ddd",fontWeight:"600"},children:" Refresh Feed"})]}),R.jsxs("div",{className:"sidebar-section",children:[R.jsx("label",{className:"sidebar-label",style:{fontSize:"12px",fontWeight:"bold",color:"#666",marginBottom:"8px",display:"block"},children:"EXPORT CONFIG"}),R.jsx(Mf,{config:M,setConfig:O,selectedNAICS:E,setSelectedNAICS:S}),R.jsx(kf,{onExport:j,loading:r,zipLoading:n})]})]}),R.jsx("div",{className:"sidebar-footer",style:{padding:"12px",borderTop:"1px solid #eee",background:"#f8f9fa"},children:R.jsx("small",{style:{color:"#6c757d"},children:f})})]}),mapContent:R.jsxs(Cf,{children:[R.jsx(Up,{url:"https://mapservices.weather.noaa.gov/arcgis/rest/services/WWA/watch_warn_adv/MapServer/exts/WMSServer",layers:"0",format:"image/png",transparent:!0,opacity:.5,layerDefs:`{"0":"prod_type IN ('Flood Warning', 'Flash Flood Warning', 'Coastal Flood Warning')"}`}),i.features.length<500&&R.jsx(Tf,{data:i,style:{color:"#00BFFF",weight:1,opacity:.6,fillOpacity:.1},onEachFeature:(Y,V)=>{V.bindTooltip(`${Y.properties.event}: ${Y.properties.areaDesc}`)}},`flood-geo-${i.features.length}`)]}),rightPanel:R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"sidebar-header",style:{padding:"16px",background:"#f8f9fa",borderBottom:"1px solid #eee"},children:R.jsx("h3",{style:{margin:0,fontSize:"16px",color:"#333"},children:"Active Flood Alerts"})}),R.jsx("div",{className:"sidebar-content",style:{padding:"0",display:"flex",flexDirection:"column",height:"100%"},children:R.jsx(of,{alerts:i.features,title:"",onExport:st,onCopy:rt,loading:r})})]})})},nx=[{object:"Site",alias:"Site",snowflakeTable:"SFDC_DS.SFDC_ACCOUNT_OBJECT",apiName:"id",label:"Record ID",type:"String",key:!0,description:"Unique Record ID"},{object:"Site",alias:"Site",snowflakeTable:"SFDC_DS.SFDC_ACCOUNT_OBJECT",apiName:"Name",label:"Account Name",type:"String",key:!1,description:"Display Name"},{object:"Site",alias:"Site",snowflakeTable:"SFDC_DS.SFDC_ACCOUNT_OBJECT",apiName:"Zip__c",label:"Zip Code",type:"String",key:!0,description:"5-digit Zip Code (Geographic Link)"},{object:"Site",alias:"Site",snowflakeTable:"SFDC_DS.SFDC_ACCOUNT_OBJECT",apiName:"ParentId",label:"Parent ID",type:"String",key:!0,description:"Parent Account ID (Join Key)"},{object:"Site",alias:"Site",snowflakeTable:"SFDC_DS.SFDC_ACCOUNT_OBJECT",apiName:"RECORDTYPE_NAME__C",label:"Record Type",type:"String",key:!1,description:"Filter Value (e.g., 'Site', 'Customer')"},{object:"Site",alias:"Site",snowflakeTable:"SFDC_DS.SFDC_ACCOUNT_OBJECT",apiName:"Last_Order_Date__C",label:"Last Order Date",type:"Date",key:!1,description:"Sales Metric (Optional Display)"},{object:"Site",alias:"Site",snowflakeTable:"SFDC_DS.SFDC_ACCOUNT_OBJECT",apiName:"Total_LY_Sales__C",label:"Total LY Sales",type:"Currency",key:!1,description:"Sales Metric (Optional Display)"},{object:"Customer",alias:"Customer",snowflakeTable:"SFDC_DS.SFDC_ACCOUNT_OBJECT",apiName:"Id",label:"Record ID",type:"String",key:!0,description:"Unique Record ID (Join Target)"},{object:"Customer",alias:"Customer",snowflakeTable:"SFDC_DS.SFDC_ACCOUNT_OBJECT",apiName:"Status__c",label:"Status",type:"String",key:!1,description:"Account Status (e.g., 'Active')"},{object:"Customer",alias:"Customer",snowflakeTable:"SFDC_DS.SFDC_ACCOUNT_OBJECT",apiName:"Org__c",label:"Org ID",type:"String",key:!0,description:"Organization ID (Join Key to NAICS)"},{object:"Customer",alias:"Customer",snowflakeTable:"SFDC_DS.SFDC_ACCOUNT_OBJECT",apiName:"LastActivityDate",label:"Last Activity",type:"Date",key:!1,description:"Activity Metric"},{object:"Customer",alias:"Customer",snowflakeTable:"SFDC_DS.SFDC_ACCOUNT_OBJECT",apiName:"LastOrderDate__c",label:"Last Order Date",type:"Date",key:!1,description:"Sales Metric"},{object:"Customer",alias:"Customer",snowflakeTable:"SFDC_DS.SFDC_ACCOUNT_OBJECT",apiName:"Total_Sales_LY__c",label:"Total LY Sales",type:"Currency",key:!1,description:"Annual Sales"},{object:"Org",alias:"Org",snowflakeTable:"SFDC_DS.SFDC_ORG_OBJECT",apiName:"Id",label:"Record ID",type:"String",key:!0,description:"Unique Record ID (Join Target)"},{object:"Org",alias:"Org",snowflakeTable:"SFDC_DS.SFDC_ORG_OBJECT",apiName:"NAICS___c",label:"NAICS Code",type:"String",key:!1,description:"Industry Code"},{object:"Org",alias:"Org",snowflakeTable:"SFDC_DS.SFDC_ORG_OBJECT",apiName:"NAICS_Description__c",label:"Industry Name",type:"String",key:!1,description:"Industry Description"},{object:"Sales Data",alias:"Sales",snowflakeTable:"SFDC_DS.SFDC_SALES_DATA_OBJECT",apiName:"Id",label:"Record ID",type:"String",key:!0,description:"Unique Record ID"},{object:"Sales Data",alias:"Sales",snowflakeTable:"SFDC_DS.SFDC_SALES_DATA_OBJECT",apiName:"Account__c",label:"Account ID",type:"String",key:!0,description:"Foreign Key (Joins to Site/Customer)"},{object:"Contact",alias:"Contact",snowflakeTable:"SFDC_DS.SFDC_CONTACT_OBJECT",apiName:"Id",label:"Record ID",type:"String",key:!0,description:"Unique Record ID"},{object:"Contact",alias:"Contact",snowflakeTable:"SFDC_DS.SFDC_CONTACT_OBJECT",apiName:"AccountId",label:"Account ID",type:"String",key:!0,description:"Foreign Key (Joins to Site/Customer)"},{object:"Contact",alias:"Contact",snowflakeTable:"SFDC_DS.SFDC_CONTACT_OBJECT",apiName:"Status__c",label:"Status",type:"String",key:!1,description:"Contact Status (e.g., 'Active', 'No Longer There')"},{object:"Contact",alias:"Contact",snowflakeTable:"SFDC_DS.SFDC_CONTACT_OBJECT",apiName:"LastActivityDate",label:"Last Activity",type:"Date",key:!1,description:"Last Interaction Date"}],HM=()=>{const e=()=>{const n=uf.unparse(nx),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(i),r=document.createElement("a");r.href=l,r.setAttribute("download","data_dictionary_schema.csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r)};return R.jsxs("div",{style:{padding:"20px",maxWidth:"1000px",margin:"0 auto",backgroundColor:"#fff",height:"100%",overflowY:"auto"},children:[R.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[R.jsx("h2",{children:"Data Dictionary & SQL Reference"}),R.jsx("button",{onClick:e,style:{padding:"10px 20px",backgroundColor:"#228be6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:" Export Dictionary (CSV)"})]}),R.jsx("p",{children:"Summary of objects, fields, and logic used in the SQL Export tool."}),R.jsx("hr",{}),R.jsx("h3",{children:"1. Object Schema"}),R.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px",fontSize:"13px"},children:[R.jsx("thead",{children:R.jsxs("tr",{style:{background:"#f1f3f5",textAlign:"left"},children:[R.jsx("th",{style:{padding:"8px",border:"1px solid #dee2e6"},children:"Object / Alias"}),R.jsx("th",{style:{padding:"8px",border:"1px solid #dee2e6"},children:"Snowflake Table"}),R.jsx("th",{style:{padding:"8px",border:"1px solid #dee2e6"},children:"Field Name (API)"}),R.jsx("th",{style:{padding:"8px",border:"1px solid #dee2e6"},children:"Label"}),R.jsx("th",{style:{padding:"8px",border:"1px solid #dee2e6"},children:"Type"}),R.jsx("th",{style:{padding:"8px",border:"1px solid #dee2e6"},children:"Description"})]})}),R.jsx("tbody",{children:nx.map((n,i)=>R.jsxs("tr",{children:[R.jsxs("td",{style:{padding:"8px",border:"1px solid #dee2e6",fontWeight:n.key?"bold":"normal"},children:[n.object," ",R.jsxs("span",{style:{fontSize:"10px",color:"#666"},children:["(",n.alias,")"]})]}),R.jsx("td",{style:{padding:"8px",border:"1px solid #dee2e6",fontSize:"11px",fontFamily:"monospace"},children:n.snowflakeTable}),R.jsxs("td",{style:{padding:"8px",border:"1px solid #dee2e6"},children:[n.apiName," ",n.key&&""]}),R.jsx("td",{style:{padding:"8px",border:"1px solid #dee2e6"},children:n.label}),R.jsx("td",{style:{padding:"8px",border:"1px solid #dee2e6"},children:n.type}),R.jsx("td",{style:{padding:"8px",border:"1px solid #dee2e6"},children:n.description})]},i))})]}),R.jsx("h3",{children:"2. SQL Logic Explanation"}),R.jsxs("div",{style:{padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"4px",border:"1px solid #eee"},children:[R.jsx("p",{children:"The query is constructed in three parts based on your selections:"}),R.jsxs("ol",{children:[R.jsxs("li",{children:[R.jsx("strong",{children:'Base Selection (The "Site"):'}),R.jsxs("p",{style:{fontSize:"13px",color:"#555",marginBottom:"8px"},children:["We start by selecting records from the ",R.jsx("span",{style:{fontWeight:"bold"},children:"Site"})," table where the ",R.jsx("code",{children:"Zip__c"})," matches your map selection and the ",R.jsx("code",{children:"RecordType"})," is 'Site'."]})]}),R.jsxs("li",{children:[R.jsx("strong",{children:'Enrichment & Filtering (The "Parent" & "NAICS"):'}),R.jsxs("p",{style:{fontSize:"13px",color:"#555",marginBottom:"8px"},children:["If you apply any filters (Active Status, Sales, Dates) or NAICS codes, we ",R.jsx("span",{style:{color:"#228be6",fontWeight:"bold"},children:"LEFT JOIN"})," the ",R.jsx("span",{style:{fontWeight:"bold"},children:"Parent Account"})," table. This allows us to check the parent's status or sales figures without losing the Site record."]}),R.jsxs("p",{style:{fontSize:"13px",color:"#555",marginBottom:"8px"},children:["If NAICS filters are active, we further ",R.jsx("span",{style:{color:"#8e44ad",fontWeight:"bold"},children:"LEFT JOIN"})," the ",R.jsx("span",{style:{fontWeight:"bold"},children:"Organization"})," table to match the ",R.jsx("code",{children:"NAICS___c"})," code."]})]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Final Output:"}),R.jsx("p",{style:{fontSize:"13px",color:"#555"},children:"The result is a list of Site IDs (and optional details) that meet ALL criteria: located in the drawn area AND belonging to a Parent Account that matches your business rules."})]})]})]}),R.jsxs("div",{style:{marginTop:"30px"},children:[R.jsx("h3",{children:"3. Notes & Discussion"}),R.jsxs("div",{style:{padding:"15px",backgroundColor:"#FFF3CD",borderRadius:"4px",border:"1px solid #FFEEBA",color:"#856404"},children:[R.jsx("strong",{children:"Salesforce Team Note:"}),R.jsxs("p",{style:{margin:"10px 0 0 0"},children:["Suggest adding a field to the Contact record that counts the ",R.jsx("strong",{children:"Number of Opportunities"})," a Contact has been added to in their lifetime (e.g., ",R.jsx("code",{children:"Opportunity_Count__c"}),'). This would be a valuable metric for scoring "High Value" contacts and estimating our likelihood of engagement.']})]})]})]})},YM=()=>R.jsxs("div",{style:{padding:"40px",maxWidth:"900px",margin:"0 auto",backgroundColor:"#fff",height:"100%",overflowY:"auto"},children:[R.jsxs("div",{style:{padding:"20px",backgroundColor:"#fff3cd",border:"2px solid #ffecb5",borderRadius:"8px",marginBottom:"30px",color:"#856404"},children:[R.jsxs("h2",{style:{marginTop:0,display:"flex",alignItems:"center",gap:"10px"},children:[R.jsx("span",{style:{fontSize:"24px"},children:""}),"PROOF OF CONCEPT DISCLAIMER"]}),R.jsxs("p",{style:{fontSize:"15px",lineHeight:"1.6",fontWeight:"500"},children:["This application is a ",R.jsx("strong",{children:"Rapid Prototype"})," designed to demonstrate business value. It is ",R.jsx("strong",{children:"NOT a production-ready system"}),"."]}),R.jsxs("ul",{style:{paddingLeft:"20px",marginTop:"10px"},children:[R.jsxs("li",{children:[R.jsx("strong",{children:"Customization Required:"})," Business logic and field definitions need to be aligned with Organization specific requirements."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Data Verification:"})," All exported lists should be verified against the CRM source of truth before mass outreach."]})]})]}),R.jsx("h1",{children:"System Overview"}),R.jsx("p",{className:"lead",children:"Business Capabilities & Data Access"}),R.jsx("hr",{}),R.jsxs("div",{style:{padding:"20px",backgroundColor:"#e7f5ff",borderLeft:"5px solid #339af0",marginBottom:"30px"},children:[R.jsx("h3",{style:{marginTop:0,color:"#1864ab"},children:" Important: Data Scope"}),R.jsx("p",{children:R.jsx("strong",{children:"This tool does NOT contain or store Account Data."})}),R.jsxs("p",{children:["It is a ",R.jsx("strong",{children:"Geospatial Filter"})," only. Its purpose is to output:"]}),R.jsxs("ul",{style:{marginTop:"10px"},children:[R.jsxs("li",{children:[R.jsx("strong",{children:"Zip Code Lists:"})," CSV files containing only Zip Codes affected by weather/hazards."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"SQL Queries:"})," Pre-written code that you copy and run in your secure Data Warehouse (Snowflake) to retrieve actual customer PII."]})]}),R.jsx("p",{style:{fontSize:"13px",fontStyle:"italic",marginBottom:0},children:"* No customer names, emails, or revenue figures are present within this application."})]}),R.jsxs("section",{style:{marginBottom:"30px"},children:[R.jsx("h2",{children:"1. Business Capabilities"}),R.jsxs("div",{style:{marginBottom:"20px"},children:[R.jsx("h3",{style:{color:"#fd7e14"},children:" Wildfire & Air Quality Response"}),R.jsxs("p",{children:[R.jsx("strong",{children:"Goal:"})," Identify customers impacted by smoke plumes or active fires to offer air quality support."]})]}),R.jsxs("div",{style:{marginBottom:"20px"},children:[R.jsx("h3",{style:{color:"#d63384"},children:" Extreme Weather Outreach"}),R.jsxs("p",{children:[R.jsx("strong",{children:"Goal:"})," Proactive service tailored to weather events (Winter Storms, Floods, Heat Waves)."]})]})]}),R.jsxs("section",{style:{marginBottom:"40px"},children:[R.jsx("h2",{children:"2. Step-by-Step User Guide"}),R.jsxs("div",{style:{marginBottom:"30px"},children:[R.jsx("h3",{children:"How to Generate a Customer List"}),R.jsxs("div",{style:{marginLeft:"20px",borderLeft:"2px solid #dee2e6",paddingLeft:"20px"},children:[R.jsxs("div",{style:{marginBottom:"20px"},children:[R.jsx("h4",{children:"Step 1: Select Hazard Mode"}),R.jsx("p",{children:"Choose the relevant environmental hazard from the tabs (Smoke, Winter, Heat, Flood, Respiratory)."}),R.jsx("div",{style:{height:"150px",backgroundColor:"#f1f3f5",display:"flex",alignItems:"center",justifyContent:"center",border:"2px dashed #adb5bd",borderRadius:"4px",color:"#868e96"},children:"[SCREENSHOT: Tab Navigation showing modes]"})]}),R.jsxs("div",{style:{marginBottom:"20px"},children:[R.jsx("h4",{children:"Step 2: Define Geographic Area"}),R.jsx("p",{children:"For Smoke/Fire, use the drawing tools to circle the impact zone. For Weather, the system automatically selects Zip Codes under active NWS Warnings."}),R.jsx("div",{style:{height:"200px",backgroundColor:"#f1f3f5",display:"flex",alignItems:"center",justifyContent:"center",border:"2px dashed #adb5bd",borderRadius:"4px",color:"#868e96"},children:"[SCREENSHOT: Map with drawn Polygon or NWS Warning Zones]"})]}),R.jsxs("div",{style:{marginBottom:"20px"},children:[R.jsx("h4",{children:"Step 3: Export or Generate SQL"}),R.jsxs("p",{children:["Click ",R.jsx("strong",{children:'"Export Zip List"'})," for a CSV file, or use the ",R.jsx("strong",{children:'"SQL Export"'})," panel to generate a query for Snowflake."]}),R.jsx("div",{style:{height:"150px",backgroundColor:"#f1f3f5",display:"flex",alignItems:"center",justifyContent:"center",border:"2px dashed #adb5bd",borderRadius:"4px",color:"#868e96"},children:"[SCREENSHOT: Export Buttons & SQL Panel]"})]})]})]})]}),R.jsxs("section",{style:{marginBottom:"30px"},children:[R.jsx("h2",{children:"3. Ready-Made Snowflake SQL"}),R.jsx("p",{children:"Copy these queries to extract data directly from your Snowflake Data Warehouse."}),R.jsxs("div",{style:{marginBottom:"25px"},children:[R.jsx("strong",{children:"A. Standard Site Extraction (By Zip Code)"}),R.jsx("p",{style:{fontSize:"12px",color:"#666"},children:"Use this to get a list of Sites within a list of Zip Codes."}),R.jsx("div",{style:{position:"relative",marginTop:"5px"},children:R.jsx("textarea",{readOnly:!0,style:{width:"100%",height:"120px",padding:"10px",fontFamily:"monospace",fontSize:"12px",backgroundColor:"#212529",color:"#f8f9fa",borderRadius:"4px",border:"none"},value:`SELECT 
  s.Id, 
  s.Name, 
  s.Zip__c, 
  s.ParentId 
FROM SFDC_DS.SFDC_ACCOUNT_OBJECT s
WHERE 
  s.Zip__c IN ('YOUR_ZIP_LIST_HERE') 
  AND s.RecordType = 'Site';`})})]}),R.jsxs("div",{style:{marginBottom:"25px"},children:[R.jsx("strong",{children:"B. High-Value Customer Segmentation"}),R.jsx("p",{style:{fontSize:"12px",color:"#666"},children:"Find Active customers with high sales volume in specific areas."}),R.jsx("div",{style:{position:"relative",marginTop:"5px"},children:R.jsx("textarea",{readOnly:!0,style:{width:"100%",height:"200px",padding:"10px",fontFamily:"monospace",fontSize:"12px",backgroundColor:"#212529",color:"#f8f9fa",borderRadius:"4px",border:"none"},value:`SELECT 
  s.Id as Site_Id, 
  s.Name as Site_Name, 
  c.Id as Customer_Id,
  c.Total_Sales_LY__c
FROM SFDC_DS.SFDC_ACCOUNT_OBJECT s
JOIN SFDC_DS.SFDC_ACCOUNT_OBJECT c ON s.ParentId = c.Id
WHERE 
  s.Zip__c IN ('YOUR_ZIP_LIST_HERE') 
  AND c.Status__c = 'Active'
  AND c.Total_Sales_LY__c > 50000;`})})]})]})]}),ZM=()=>{const[e,n]=Gt.useState("architecture");return R.jsx(xc,{leftPanel:R.jsxs("div",{style:{padding:"20px",overflowY:"auto",height:"100%"},children:[R.jsx("h3",{children:"Technical Hub"}),R.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"15px"},children:[R.jsx("button",{onClick:()=>n("architecture"),style:{padding:"10px",textAlign:"left",backgroundColor:e==="architecture"?"#e7f5ff":"transparent",border:"1px solid",borderColor:e==="architecture"?"#339af0":"#dee2e6",borderRadius:"4px",cursor:"pointer",fontWeight:e==="architecture"?"bold":"normal",color:e==="architecture"?"#1971c2":"#495057"},children:" Architecture Guide"}),R.jsx("button",{onClick:()=>n("dictionary"),style:{padding:"10px",textAlign:"left",backgroundColor:e==="dictionary"?"#e7f5ff":"transparent",border:"1px solid",borderColor:e==="dictionary"?"#339af0":"#dee2e6",borderRadius:"4px",cursor:"pointer",fontWeight:e==="dictionary"?"bold":"normal",color:e==="dictionary"?"#1971c2":"#495057"},children:" Data Dictionary & SQL"}),R.jsx("button",{onClick:()=>n("docs"),style:{padding:"10px",textAlign:"left",backgroundColor:e==="docs"?"#e7f5ff":"transparent",border:"1px solid",borderColor:e==="docs"?"#339af0":"#dee2e6",borderRadius:"4px",cursor:"pointer",fontWeight:e==="docs"?"bold":"normal",color:e==="docs"?"#1971c2":"#495057"},children:" System Documentation"})]}),e==="architecture"&&R.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#fff3cd",border:"1px solid #ffeeba",borderRadius:"4px"},children:[R.jsx("strong",{children:" Critical Risk"}),R.jsx("p",{style:{fontSize:"11px",marginTop:"5px"},children:"CORS constraints in Salesforce will likely block direct client-side fetch calls initiated from LWC."})]})]}),mapContent:e==="architecture"?R.jsxs("div",{style:{padding:"40px",maxWidth:"900px",margin:"0 auto",overflowY:"auto",height:"100%",backgroundColor:"#fff"},children:[R.jsx("h1",{children:"Technical Solution: End-to-End Business Case"}),R.jsx("p",{children:R.jsx("strong",{children:"[RISK-ANNOTATED VERSION FOR SCRATCH ORG DEVELOPMENT]"})}),R.jsx("hr",{style:{margin:"20px 0"}}),R.jsx("h2",{children:"1. Executive Summary"}),R.jsxs("p",{children:['The objective is to enable Sales Operations to identify and act upon high-value "Customer" accounts based on environmental or geographic triggers affecting 50 million "Site" locations. The solution utilizes a high-performance ',R.jsx("strong",{children:"LWC Integration Service"})," to aggregate external real-time data via the JavaScript ",R.jsx("code",{children:"fetch"})," API, then triggers an asynchronous Snowflake/AWX pipeline to map those triggers to actionable CRM data."]}),R.jsxs("div",{style:{padding:"15px",background:"#f8f9fa",borderLeft:"4px solid #0d6efd",margin:"15px 0"},children:[R.jsx("strong",{children:"Technical Limitation Callout:"}),R.jsx("br",{}),"The external API orchestration approach has been validated in a browser environment hosted via GitHub Pages and functions successfully in that context. However, it has ",R.jsx("strong",{children:"not yet been deployed or tested within a Salesforce scratch org"}),". Because Salesforce enforces additional security layers (CSP Trusted Sites, Lightning Web Security, and browser-origin CORS constraints), successful execution within Salesforce cannot be assumed until validated in a scratch org environment. APIs that function in GitHub-hosted JavaScript may still fail within Salesforce due to origin restrictions or preflight behavior differences."]}),R.jsxs("div",{style:{padding:"15px",background:"#fff3cd",borderLeft:"4px solid #ffc107",margin:"15px 0"},children:[R.jsx("strong",{children:" RISK ALERT - ARCHITECTURAL VALIDITY:"}),R.jsx("br",{}),"This entire approach assumes that external public APIs will accept requests from Salesforce Lightning origins (",R.jsx("code",{children:"*.lightning.force.com"}),", ",R.jsx("code",{children:"*.my.salesforce.com"}),"). ",R.jsx("strong",{children:"You cannot control whether external APIs allow Salesforce origins in their CORS headers."})," If the target APIs (NOAA, EPA, etc.) do not explicitly whitelist Salesforce domains in their ",R.jsx("code",{children:"Access-Control-Allow-Origin"})," response headers, all client-side ",R.jsx("code",{children:"fetch"})," calls will fail with CORS errors, and the entire LWC integration layer becomes non-functional. Test this immediately in scratch org before proceeding with development."]}),R.jsx("hr",{style:{margin:"20px 0"}}),R.jsx("h2",{children:"2. Architecture: The External Trigger & Async Pipeline"}),R.jsx("h3",{children:"Phase A: The LWC Integration Service (Client-Side Orchestration)"}),R.jsxs("p",{children:["The developer will build a sophisticated ",R.jsx("strong",{children:"LWC Service Layer"})," that handles external API orchestration using the JavaScript ",R.jsx("code",{children:"fetch"})," API."]}),R.jsxs("ol",{children:[R.jsxs("li",{children:[R.jsx("strong",{children:"External Fetch:"})," The LWC calls external REST APIs (e.g., NOAA, EPA) directly from the client browser. This offloads the networking overhead and prevents hitting Apex callout time limits.",R.jsxs("div",{style:{padding:"10px",background:"#fff3cd",marginTop:"10px",fontSize:"0.9em"},children:[R.jsx("strong",{children:" RISK - CORS DEPENDENCY:"})," Client-side ",R.jsx("code",{children:"fetch"})," from LWC is subject to browser CORS policies. The external API server must return ",R.jsx("code",{children:"Access-Control-Allow-Origin"})," headers that include your Salesforce domain. ",R.jsx("strong",{children:"This is controlled by the API provider, not you."})," Many government/public APIs may not support Salesforce origins. Test each target API immediately."]})]}),R.jsx("br",{}),R.jsxs("li",{children:[R.jsx("strong",{children:"Security (CSP):"})," The developer must whitelist the API domains in ",R.jsx("strong",{children:"Setup > Trusted URLs"})," with the ",R.jsx("code",{children:"connect-src"})," directive enabled to allow browser-level communication.",R.jsxs("div",{style:{padding:"10px",background:"#fff3cd",marginTop:"10px",fontSize:"0.9em"},children:[R.jsx("strong",{children:" RISK - CSP CONFIGURATION:"})," The correct Salesforce feature is ",R.jsx("strong",{children:"Setup > CSP Trusted Sites"}),' (not "Trusted URLs"). You must add each external API domain here. However, CSP configuration alone is insufficientthe external API must also cooperate with CORS headers. Both sides of the handshake must succeed.']}),R.jsxs("div",{style:{padding:"10px",background:"#fff3cd",marginTop:"10px",fontSize:"0.9em"},children:[R.jsx("strong",{children:" RISK - LIGHTNING WEB SECURITY:"})," Salesforce enforces Lightning Web Security (LWS), which creates a secure sandbox for LWC execution. Some JavaScript patterns that work in standard browsers may behave differently or be restricted under LWS. Test all ",R.jsx("code",{children:"fetch"})," operations, JSON parsing, and async operations in the actual Lightning runtime."]})]}),R.jsx("br",{}),R.jsxs("li",{children:[R.jsx("strong",{children:"CORS Validation Requirement:"})," Because Salesforce Lightning runs under domains such as ",R.jsx("code",{children:"*.lightning.force.com"})," or ",R.jsx("code",{children:"*.my.site.com"}),", the external APIs must explicitly permit those origins within their CORS configuration. Successful execution in GitHub Pages does not guarantee compatibility with Salesforce-hosted Lightning domains.",R.jsxs("div",{style:{padding:"10px",background:"#fff3cd",marginTop:"10px",fontSize:"0.9em"},children:[R.jsx("strong",{children:" RISK - FUNDAMENTAL ASSUMPTION:"})," Reiterating: ",R.jsx("strong",{children:"You cannot make external APIs allow Salesforce origins."})," If NOAA/EPA/etc. do not already support Salesforce domains in their CORS policies (and most public APIs do not), this architecture requires fallback to an Apex proxy pattern, which reintroduces governor limits you're trying to avoid."]})]}),R.jsx("br",{}),R.jsxs("li",{children:[R.jsx("strong",{children:"The Hand-off:"})," The LWC parses the JSON response into a list of affected Zip Codes and creates a ",R.jsx("strong",{children:"Search_Request__c"})," record.",R.jsxs("div",{style:{padding:"10px",background:"#fff3cd",marginTop:"10px",fontSize:"0.9em"},children:[R.jsx("strong",{children:" RISK - DML OPERATIONS:"})," Creating records from LWC requires calling an Apex method (LWC cannot directly perform DML). Ensure you've built an Apex controller with proper error handling. Each DML operation consumes governor limits (150 DML statements per transaction)."]}),R.jsxs("div",{style:{padding:"10px",background:"#fff3cd",marginTop:"10px",fontSize:"0.9em"},children:[R.jsx("strong",{children:" RISK - NAMED CREDENTIALS MISUNDERSTANDING:"})," Named Credentials ",R.jsx("strong",{children:"cannot be accessed directly from client-side LWC JavaScript"}),". They only work within Apex code. If your external APIs require authentication (API keys, OAuth tokens), you ",R.jsx("strong",{children:"must"}),` use an Apex proxy to retrieve credentials from Named Credentials and make the authenticated request. This contradicts the "client-side fetch" approachif authentication is needed, you're back to server-side Apex callouts with all their governor limits.`]}),R.jsxs("div",{style:{padding:"10px",background:"#f8d7da",marginTop:"10px",fontSize:"0.9em"},children:[R.jsx("strong",{children:" RISK - API KEY EXPOSURE:"})," If you attempt to store API keys in Custom Metadata and retrieve them via JavaScript, ",R.jsx("strong",{children:"those keys will be visible in browser DevTools and network traffic"}),". This is a critical security vulnerability. Any API requiring authentication must use the Apex proxy pattern."]})]})]}),R.jsx("h3",{children:"Phase B: External Orchestration (AWX & Snowflake)"}),R.jsxs("ol",{children:[R.jsxs("li",{children:[R.jsx("strong",{children:"Trigger:"})," A Platform Event or Trigger signals ",R.jsx("strong",{children:"AWX"})," that a new ",R.jsx("code",{children:"Search_Request__c"})," (containing the Zip list) is ready.",R.jsxs("div",{style:{padding:"10px",background:"#fff3cd",marginTop:"10px",fontSize:"0.9em"},children:[R.jsx("strong",{children:" RISK - INTEGRATION MECHANISM UNDEFINED:"}),' Platform Events do not directly "signal" external systems. You need an explicit mechanism (Apex Trigger calling Webhook, or AWX Polling).']})]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Processing:"})," AWX queries ",R.jsx("strong",{children:"Snowflake"}),", which maintains a high-performance replica of the 50M Sites.",R.jsxs("div",{style:{padding:"10px",background:"#e2e3e5",marginTop:"10px",fontSize:"0.9em"},children:[R.jsx("strong",{children:" OUT OF SCOPE FOR SCRATCH ORG TESTING:"})," Use mocked Apex responses for initial validation."]})]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Injection:"}),' AWX pushes the "Result Set" back into the Salesforce ',R.jsx("strong",{children:"Search_Result__c"})," junction object.",R.jsxs("div",{style:{padding:"10px",background:"#fff3cd",marginTop:"10px",fontSize:"0.9em"},children:[R.jsx("strong",{children:" RISK - BULK API REQUIREMENTS:"})," Use Bulk API 2.0 for large result sets to avoid API limit exhaustion."]})]})]}),R.jsx("h3",{children:"Phase C: Action & Export (Salesforce)"}),R.jsxs("ol",{children:[R.jsxs("li",{children:[R.jsx("strong",{children:"Display:"})," The LWC polls the request status and renders the ",R.jsx("strong",{children:"Search_Result__c"})," list.",R.jsxs("div",{style:{padding:"10px",background:"#fff3cd",marginTop:"10px",fontSize:"0.9em"},children:[R.jsx("strong",{children:" RISK - POLLING PATTERN:"})," Ensure proper cleanup and exponential backoff."]})]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Sales Action:"})," User selects contacts and chooses an action (Sales Cadence or Campaign).",R.jsxs("div",{style:{padding:"10px",background:"#fff3cd",marginTop:"10px",fontSize:"0.9em"},children:[R.jsx("strong",{children:" RISK - GOVERNOR LIMIT CASCADE:"})," Bulk creating CampaignMembers usually hits DML limits if not batched correctly via Async Apex."]})]})]}),R.jsx("hr",{style:{margin:"20px 0"}}),R.jsx("h2",{children:"3. Comparison of Data Retrieval Methods"}),R.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},border:"1",children:[R.jsx("thead",{children:R.jsxs("tr",{style:{background:"#f8f9fa"},children:[R.jsx("th",{style:{padding:"8px"},children:"Feature"}),R.jsx("th",{style:{padding:"8px"},children:"Client-Side (`fetch`)"}),R.jsx("th",{style:{padding:"8px"},children:"Server-Side (Apex Callout)"})]})}),R.jsxs("tbody",{children:[R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"8px"},children:R.jsx("strong",{children:"Performance"})}),R.jsx("td",{style:{padding:"8px"},children:"High (Direct from browser)"}),R.jsx("td",{style:{padding:"8px"},children:"Moderate (SFDC as middleman)"})]}),R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"8px"},children:R.jsx("strong",{children:"Governor Limits"})}),R.jsx("td",{style:{padding:"8px"},children:"None on Apex (Browser resources)"}),R.jsx("td",{style:{padding:"8px"},children:"Strict (Timeout & Heap limits)"})]}),R.jsxs("tr",{children:[R.jsx("td",{style:{padding:"8px"},children:R.jsx("strong",{children:"CORS/Security"})}),R.jsxs("td",{style:{padding:"8px",background:"#f8d7da"},children:[R.jsx("strong",{children:"Major Risk:"})," Requires External API Whitelisting"]}),R.jsx("td",{style:{padding:"8px"},children:"Managed via Named Credentials (More Compatible)"})]})]})]}),R.jsxs("div",{style:{padding:"15px",background:"#fff3cd",borderLeft:"4px solid #ffc107",margin:"15px 0"},children:[R.jsx("strong",{children:" RISK - SECURITY MISCONCEPTION:"}),R.jsx("br",{}),"Client-side approaches ",R.jsx("strong",{children:"expose all API URLs and request patterns"})," in browser DevTools. Server-side approaches keep integration details opaque to end users."]}),R.jsx("hr",{style:{margin:"20px 0"}}),R.jsx("h2",{children:"CRITICAL RISKS SUMMARY"}),R.jsxs("div",{style:{padding:"15px",background:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"4px",marginBottom:"10px"},children:[R.jsx("h4",{style:{margin:"0 0 10px 0",color:"#721c24"},children:" BLOCKER RISKS (Will prevent functionality)"}),R.jsxs("ul",{style:{margin:0,paddingLeft:"20px"},children:[R.jsxs("li",{children:[R.jsx("strong",{children:"CORS Non-Cooperation:"})," External APIs may reject Salesforce origins entirely."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Named Credentials Misuse:"})," Cannot access from client-side LWC; requires Apex proxy."]}),R.jsxs("li",{children:[R.jsx("strong",{children:"Missing Integration:"})," Platform Events don't auto-trigger AWX; need explicit callout mechanism."]})]})]}),R.jsxs("div",{style:{padding:"15px",background:"#fff3cd",border:"1px solid #ffeeba",borderRadius:"4px"},children:[R.jsx("h4",{style:{margin:"0 0 10px 0",color:"#856404"},children:" HIGH RISKS (Will require significant rework)"}),R.jsxs("ul",{style:{margin:0,paddingLeft:"20px"},children:[R.jsx("li",{children:"Lightning Web Security Restrictions."}),R.jsx("li",{children:"Governor Limits on Apex Callouts (if fallback needed)."}),R.jsx("li",{children:"API Authentication Requirements negate client-side approach."}),R.jsx("li",{children:"Campaign Member Bulk Operations require complex Async Apex."})]})]})]}):e==="dictionary"?R.jsx(HM,{}):R.jsx(YM,{}),rightPanel:R.jsxs("div",{style:{padding:"20px"},children:[R.jsx("h3",{children:"Notes"}),R.jsx("p",{children:"Use this document to guide scratch org validation planning."})]})})},XM=({title:e})=>R.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",backgroundColor:"#f8f9fa"},children:[R.jsxs("h2",{children:[e," Mode"]}),R.jsx("p",{children:"This utility is currently under development."})]});console.log("!!! APP.JSX MODULE LOADED !!!");const VM=()=>{console.log("%c ODP Sales Utility v1.3.0 - 2026-02-16 (Respiratory Mode Consolidation)","background: #222; color: #bada55; font-size: 14px; padding: 4px; border-radius: 4px;");const[n,i]=Gt.useState("smoke"),[l,r]=Gt.useState([]),[c,f]=Gt.useState(!0);Gt.useEffect(()=>{uf.parse("/smoke-zipcode-selector/zipcodes.csv",{download:!0,header:!0,skipEmptyLines:!0,complete:y=>{const _=[];y.data.forEach(E=>{const S=parseFloat(E.LATITUDE),M=parseFloat(E.LONGITUDE);!isNaN(S)&&!isNaN(M)&&_.push({zip:E.STD_ZIP5,lat:S,lng:M,city:E.USPS_ZIP_PREF_CITY_1221,state:E.USPS_ZIP_PREF_STATE_1221,county:E.USPS_ZIP_COUNTY_NAME})}),r(_),f(!1),console.log(`[App] Loaded ${_.length} zipcodes globally.`)},error:y=>{console.error("CSV Parse Error",y),f(!1)}})},[]);const p=()=>{switch(n){case"smoke":return R.jsx(ex,{zipCodes:l,zipLoading:c});case"winter":return R.jsx(FM,{zipCodes:l,zipLoading:c});case"heat":return R.jsx(qM,{zipCodes:l,zipLoading:c});case"flood":return R.jsx(GM,{zipCodes:l,zipLoading:c});case"flu":return R.jsx(XM,{title:"Respiratory Mode (Maintenance)"});case"technical":return R.jsx(ZM,{});default:return R.jsx(ex,{zipCodes:l,zipLoading:c})}};return R.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",width:"100vw",overflow:"hidden"},children:[R.jsx(Tw,{activeTab:n,onTabChange:i}),R.jsx("div",{style:{flex:1,position:"relative",display:"flex",flexDirection:"column",minHeight:0},children:p()})]})};console.log("!!! MAIN.JSX EXECUTING !!!");bw.createRoot(document.getElementById("root")).render(R.jsx(Gt.StrictMode,{children:R.jsx(VM,{})}));
